Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.renditionEmbeddedScripts = void 0;
var renditionEmbeddedScripts = "\n  <script>" + "!function r(c,a,f){function o(n,t){if(!a[n]){if(!c[n]){var e=\"function\"==typeof require&&require;if(!t&&e)return e(n,!0);if(s)return s(n,!0);var i=new Error(\"Cannot find module '\"+n+\"'\");throw i.code=\"MODULE_NOT_FOUND\",i}var u=a[n]={exports:{}};c[n][0].call(u.exports,function(t){return o(c[n][1][t]||t)},u,u.exports,r,c,a,f)}return a[n].exports}for(var s=\"function\"==typeof require&&require,t=0;t<f.length;t++)o(f[t]);return o}({1:[function(t,n,r){\"use strict\";t(2);var e=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(t(15));e.default._babelPolyfill&&\"undefined\"!=typeof console&&console.warn&&console.warn(\"@babel/polyfill is loaded more than once on this page. This is probably not desirable/intended and may have consequences if different versions of the polyfills are applied sequentially. If you do need to load the polyfill more than once, use @babel/polyfill/noConflict instead to bypass the warning.\"),e.default._babelPolyfill=!0},{15:15,2:2}],2:[function(t,n,r){\"use strict\";t(3),t(5),t(4),t(11),t(10),t(13),t(12),t(14),t(7),t(8),t(6),t(9),t(306),t(307)},{10:10,11:11,12:12,13:13,14:14,3:3,306:306,307:307,4:4,5:5,6:6,7:7,8:8,9:9}],3:[function(t,n,r){t(278),t(214),t(216),t(215),t(218),t(220),t(225),t(219),t(217),t(227),t(226),t(222),t(223),t(221),t(213),t(224),t(228),t(229),t(180),t(182),t(181),t(231),t(230),t(201),t(211),t(212),t(202),t(203),t(204),t(205),t(206),t(207),t(208),t(209),t(210),t(184),t(185),t(186),t(187),t(188),t(189),t(190),t(191),t(192),t(193),t(194),t(195),t(196),t(197),t(198),t(199),t(200),t(265),t(270),t(277),t(268),t(260),t(261),t(266),t(271),t(273),t(256),t(257),t(258),t(259),t(262),t(263),t(264),t(267),t(269),t(272),t(274),t(275),t(276),t(175),t(177),t(176),t(179),t(178),t(163),t(161),t(168),t(165),t(171),t(173),t(160),t(167),t(157),t(172),t(155),t(170),t(169),t(162),t(166),t(154),t(156),t(159),t(158),t(174),t(164),t(247),t(248),t(254),t(249),t(250),t(251),t(252),t(253),t(232),t(183),t(255),t(290),t(291),t(279),t(280),t(285),t(288),t(289),t(283),t(286),t(284),t(287),t(281),t(282),t(233),t(234),t(235),t(236),t(237),t(240),t(238),t(239),t(241),t(242),t(243),t(244),t(246),t(245),n.exports=t(52)},{154:154,155:155,156:156,157:157,158:158,159:159,160:160,161:161,162:162,163:163,164:164,165:165,166:166,167:167,168:168,169:169,170:170,171:171,172:172,173:173,174:174,175:175,176:176,177:177,178:178,179:179,180:180,181:181,182:182,183:183,184:184,185:185,186:186,187:187,188:188,189:189,190:190,191:191,192:192,193:193,194:194,195:195,196:196,197:197,198:198,199:199,200:200,201:201,202:202,203:203,204:204,205:205,206:206,207:207,208:208,209:209,210:210,211:211,212:212,213:213,214:214,215:215,216:216,217:217,218:218,219:219,220:220,221:221,222:222,223:223,224:224,225:225,226:226,227:227,228:228,229:229,230:230,231:231,232:232,233:233,234:234,235:235,236:236,237:237,238:238,239:239,240:240,241:241,242:242,243:243,244:244,245:245,246:246,247:247,248:248,249:249,250:250,251:251,252:252,253:253,254:254,255:255,256:256,257:257,258:258,259:259,260:260,261:261,262:262,263:263,264:264,265:265,266:266,267:267,268:268,269:269,270:270,271:271,272:272,273:273,274:274,275:275,276:276,277:277,278:278,279:279,280:280,281:281,282:282,283:283,284:284,285:285,286:286,287:287,288:288,289:289,290:290,291:291,52:52}],4:[function(t,n,r){t(292),n.exports=t(52).Array.flatMap},{292:292,52:52}],5:[function(t,n,r){t(293),n.exports=t(52).Array.includes},{293:293,52:52}],6:[function(t,n,r){t(294),n.exports=t(52).Object.entries},{294:294,52:52}],7:[function(t,n,r){t(295),n.exports=t(52).Object.getOwnPropertyDescriptors},{295:295,52:52}],8:[function(t,n,r){t(296),n.exports=t(52).Object.values},{296:296,52:52}],9:[function(t,n,r){\"use strict\";t(232),t(297),n.exports=t(52).Promise.finally},{232:232,297:297,52:52}],10:[function(t,n,r){t(298),n.exports=t(52).String.padEnd},{298:298,52:52}],11:[function(t,n,r){t(299),n.exports=t(52).String.padStart},{299:299,52:52}],12:[function(t,n,r){t(301),n.exports=t(52).String.trimRight},{301:301,52:52}],13:[function(t,n,r){t(300),n.exports=t(52).String.trimLeft},{300:300,52:52}],14:[function(t,n,r){t(302),n.exports=t(151).f(\"asyncIterator\")},{151:151,302:302}],15:[function(t,n,r){t(32),n.exports=t(18).global},{18:18,32:32}],16:[function(t,n,r){n.exports=function(t){if(\"function\"!=typeof t)throw TypeError(t+\" is not a function!\");return t}},{}],17:[function(t,n,r){var e=t(28);n.exports=function(t){if(!e(t))throw TypeError(t+\" is not an object!\");return t}},{28:28}],18:[function(t,n,r){var e=n.exports={version:\"2.6.11\"};\"number\"==typeof __e&&(__e=e)},{}],19:[function(t,n,r){var o=t(16);n.exports=function(e,i,t){if(o(e),void 0===i)return e;switch(t){case 1:return function(t){return e.call(i,t)};case 2:return function(t,n){return e.call(i,t,n)};case 3:return function(t,n,r){return e.call(i,t,n,r)}}return function(){return e.apply(i,arguments)}}},{16:16}],20:[function(t,n,r){n.exports=!t(23)(function(){return 7!=Object.defineProperty({},\"a\",{get:function(){return 7}}).a})},{23:23}],21:[function(t,n,r){var e=t(28),i=t(24).document,o=e(i)&&e(i.createElement);n.exports=function(t){return o?i.createElement(t):{}}},{24:24,28:28}],22:[function(t,n,r){var g=t(24),y=t(18),d=t(19),x=t(26),m=t(25),S=\"prototype\",b=function(t,n,r){var e,i,o,u=t&b.F,c=t&b.G,a=t&b.S,f=t&b.P,s=t&b.B,l=t&b.W,h=c?y:y[n]||(y[n]={}),p=h[S],v=c?g:a?g[n]:(g[n]||{})[S];for(e in c&&(r=n),r)(i=!u&&v&&void 0!==v[e])&&m(h,e)||(o=i?v[e]:r[e],h[e]=c&&\"function\"!=typeof v[e]?r[e]:s&&i?d(o,g):l&&v[e]==o?function(e){function qb(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)}return qb[S]=e[S],qb}(o):f&&\"function\"==typeof o?d(Function.call,o):o,f&&((h.virtual||(h.virtual={}))[e]=o,t&b.R&&p&&!p[e]&&x(p,e,o)))};b.F=1,b.G=2,b.S=4,b.P=8,b.B=16,b.W=32,b.U=64,b.R=128,n.exports=b},{18:18,19:19,24:24,25:25,26:26}],23:[function(t,n,r){n.exports=function(t){try{return!!t()}catch(t){return!0}}},{}],24:[function(t,n,r){var e=n.exports=\"undefined\"!=typeof window&&window.Math==Math?window:\"undefined\"!=typeof self&&self.Math==Math?self:Function(\"return this\")();\"number\"==typeof __g&&(__g=e)},{}],25:[function(t,n,r){var e={}.hasOwnProperty;n.exports=function(t,n){return e.call(t,n)}},{}],26:[function(t,n,r){var e=t(29),i=t(30);n.exports=t(20)?function(t,n,r){return e.f(t,n,i(1,r))}:function(t,n,r){return t[n]=r,t}},{20:20,29:29,30:30}],27:[function(t,n,r){n.exports=!t(20)&&!t(23)(function(){return 7!=Object.defineProperty(t(21)(\"div\"),\"a\",{get:function(){return 7}}).a})},{20:20,21:21,23:23}],28:[function(t,n,r){n.exports=function(t){return\"object\"==typeof t?null!==t:\"function\"==typeof t}},{}],29:[function(t,n,r){var e=t(17),i=t(27),o=t(31),u=Object.defineProperty;r.f=t(20)?Object.defineProperty:function defineProperty(t,n,r){if(e(t),n=o(n,!0),e(r),i)try{return u(t,n,r)}catch(t){}if(\"get\"in r||\"set\"in r)throw TypeError(\"Accessors not supported!\");return\"value\"in r&&(t[n]=r.value),t}},{17:17,20:20,27:27,31:31}],30:[function(t,n,r){n.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},{}],31:[function(t,n,r){var i=t(28);n.exports=function(t,n){if(!i(t))return t;var r,e;if(n&&\"function\"==typeof(r=t.toString)&&!i(e=r.call(t)))return e;if(\"function\"==typeof(r=t.valueOf)&&!i(e=r.call(t)))return e;if(!n&&\"function\"==typeof(r=t.toString)&&!i(e=r.call(t)))return e;throw TypeError(\"Can't convert object to primitive value\")}},{28:28}],32:[function(t,n,r){var e=t(22);e(e.G,{global:t(24)})},{22:22,24:24}],33:[function(t,n,r){arguments[4][16][0].apply(r,arguments)},{16:16}],34:[function(t,n,r){var e=t(48);n.exports=function(t,n){if(\"number\"!=typeof t&&\"Number\"!=e(t))throw TypeError(n);return+t}},{48:48}],35:[function(t,n,r){var e=t(152)(\"unscopables\"),i=Array.prototype;null==i[e]&&t(72)(i,e,{}),n.exports=function(t){i[e][t]=!0}},{152:152,72:72}],36:[function(t,n,r){\"use strict\";var e=t(129)(!0);n.exports=function(t,n,r){return n+(r?e(t,n).length:1)}},{129:129}],37:[function(t,n,r){n.exports=function(t,n,r,e){if(!(t instanceof n)||void 0!==e&&e in t)throw TypeError(r+\": incorrect invocation!\");return t}},{}],38:[function(t,n,r){arguments[4][17][0].apply(r,arguments)},{17:17,81:81}],39:[function(t,n,r){\"use strict\";var f=t(142),s=t(137),l=t(141);n.exports=[].copyWithin||function copyWithin(t,n){var r=f(this),e=l(r.length),i=s(t,e),o=s(n,e),u=2<arguments.length?arguments[2]:void 0,c=Math.min((void 0===u?e:s(u,e))-o,e-i),a=1;for(o<i&&i<o+c&&(a=-1,o+=c-1,i+=c-1);0<c--;)o in r?r[i]=r[o]:delete r[i],i+=a,o+=a;return r}},{137:137,141:141,142:142}],40:[function(t,n,r){\"use strict\";var c=t(142),a=t(137),f=t(141);n.exports=function fill(t){for(var n=c(this),r=f(n.length),e=arguments.length,i=a(1<e?arguments[1]:void 0,r),o=2<e?arguments[2]:void 0,u=void 0===o?r:a(o,r);i<u;)n[i++]=t;return n}},{137:137,141:141,142:142}],41:[function(t,n,r){var a=t(140),f=t(141),s=t(137);n.exports=function(c){return function(t,n,r){var e,i=a(t),o=f(i.length),u=s(r,o);if(c&&n!=n){for(;u<o;)if((e=i[u++])!=e)return!0}else for(;u<o;u++)if((c||u in i)&&i[u]===n)return c||u||0;return!c&&-1}}},{137:137,140:140,141:141}],42:[function(t,n,r){var m=t(54),S=t(77),b=t(142),w=t(141),e=t(45);n.exports=function(l,t){var h=1==l,p=2==l,v=3==l,g=4==l,y=6==l,d=5==l||y,x=t||e;return function(t,n,r){for(var e,i,o=b(t),u=S(o),c=m(n,r,3),a=w(u.length),f=0,s=h?x(t,a):p?x(t,0):void 0;f<a;f++)if((d||f in u)&&(i=c(e=u[f],f,o),l))if(h)s[f]=i;else if(i)switch(l){case 3:return!0;case 5:return e;case 6:return f;case 2:s.push(e)}else if(g)return!1;return y?-1:v||g?g:s}}},{141:141,142:142,45:45,54:54,77:77}],43:[function(t,n,r){var s=t(33),l=t(142),h=t(77),p=t(141);n.exports=function(t,n,r,e,i){s(n);var o=l(t),u=h(o),c=p(o.length),a=i?c-1:0,f=i?-1:1;if(r<2)for(;;){if(a in u){e=u[a],a+=f;break}if(a+=f,i?a<0:c<=a)throw TypeError(\"Reduce of empty array with no initial value\")}for(;i?0<=a:a<c;a+=f)a in u&&(e=n(e,u[a],a,o));return e}},{141:141,142:142,33:33,77:77}],44:[function(t,n,r){var e=t(81),i=t(79),o=t(152)(\"species\");n.exports=function(t){var n;return i(t)&&(\"function\"!=typeof(n=t.constructor)||n!==Array&&!i(n.prototype)||(n=void 0),e(n)&&null===(n=n[o])&&(n=void 0)),void 0===n?Array:n}},{152:152,79:79,81:81}],45:[function(t,n,r){var e=t(44);n.exports=function(t,n){return new(e(t))(n)}},{44:44}],46:[function(t,n,r){\"use strict\";var o=t(33),u=t(81),c=t(76),a=[].slice,f={};n.exports=Function.bind||function bind(n){var r=o(this),e=a.call(arguments,1),i=function(){var t=e.concat(a.call(arguments));return this instanceof i?function(t,n,r){if(!(n in f)){for(var e=[],i=0;i<n;i++)e[i]=\"a[\"+i+\"]\";f[n]=Function(\"F,a\",\"return new F(\"+e.join(\",\")+\")\")}return f[n](t,r)}(r,t.length,t):c(r,t,n)};return u(r.prototype)&&(i.prototype=r.prototype),i}},{33:33,76:76,81:81}],47:[function(t,n,r){var i=t(48),o=t(152)(\"toStringTag\"),u=\"Arguments\"==i(function(){return arguments}());n.exports=function(t){var n,r,e;return void 0===t?\"Undefined\":null===t?\"Null\":\"string\"==typeof(r=function(t,n){try{return t[n]}catch(t){}}(n=Object(t),o))?r:u?i(n):\"Object\"==(e=i(n))&&\"function\"==typeof n.callee?\"Arguments\":e}},{152:152,48:48}],48:[function(t,n,r){var e={}.toString;n.exports=function(t){return e.call(t).slice(8,-1)}},{}],49:[function(t,n,r){\"use strict\";function ag(t,n){var r,e=p(n);if(\"F\"!==e)return t._i[e];for(r=t._f;r;r=r.n)if(r.k==n)return r}var u=t(99).f,c=t(98),a=t(117),f=t(54),s=t(37),l=t(68),e=t(85),i=t(87),o=t(123),h=t(58),p=t(94).fastKey,v=t(149),g=h?\"_s\":\"size\";n.exports={getConstructor:function(t,o,r,e){var i=t(function(t,n){s(t,i,o,\"_i\"),t._t=o,t._i=c(null),t._f=void 0,t._l=void 0,t[g]=0,null!=n&&l(n,r,t[e],t)});return a(i.prototype,{clear:function clear(){for(var t=v(this,o),n=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];t._f=t._l=void 0,t[g]=0},delete:function(t){var n=v(this,o),r=ag(n,t);if(r){var e=r.n,i=r.p;delete n._i[r.i],r.r=!0,i&&(i.n=e),e&&(e.p=i),n._f==r&&(n._f=e),n._l==r&&(n._l=i),n[g]--}return!!r},forEach:function forEach(t){v(this,o);for(var n,r=f(t,1<arguments.length?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function has(t){return!!ag(v(this,o),t)}}),h&&u(i.prototype,\"size\",{get:function(){return v(this,o)[g]}}),i},def:function(t,n,r){var e,i,o=ag(t,n);return o?o.v=r:(t._l=o={i:i=p(n,!0),k:n,v:r,p:e=t._l,n:void 0,r:!1},t._f||(t._f=o),e&&(e.n=o),t[g]++,\"F\"!==i&&(t._i[i]=o)),t},getEntry:ag,setStrong:function(t,r,n){e(t,r,function(t,n){this._t=v(t,r),this._k=n,this._l=void 0},function(){for(var t=this,n=t._k,r=t._l;r&&r.r;)r=r.p;return t._t&&(t._l=r=r?r.n:t._t._f)?i(0,\"keys\"==n?r.k:\"values\"==n?r.v:[r.k,r.v]):(t._t=void 0,i(1))},n?\"entries\":\"values\",!n,!0),o(r)}}},{117:117,123:123,149:149,37:37,54:54,58:58,68:68,85:85,87:87,94:94,98:98,99:99}],50:[function(t,n,r){\"use strict\";function _g(t){return t._l||(t._l=new g)}function bh(t,n){return o(t.a,function(t){return t[0]===n})}var u=t(117),c=t(94).getWeak,i=t(38),a=t(81),f=t(37),s=t(68),e=t(42),l=t(71),h=t(149),o=e(5),p=e(6),v=0,g=function(){this.a=[]};g.prototype={get:function(t){var n=bh(this,t);if(n)return n[1]},has:function(t){return!!bh(this,t)},set:function(t,n){var r=bh(this,t);r?r[1]=n:this.a.push([t,n])},delete:function(n){var t=p(this.a,function(t){return t[0]===n});return~t&&this.a.splice(t,1),!!~t}},n.exports={getConstructor:function(t,r,e,i){var o=t(function(t,n){f(t,o,r,\"_i\"),t._t=r,t._i=v++,t._l=void 0,null!=n&&s(n,e,t[i],t)});return u(o.prototype,{delete:function(t){if(!a(t))return!1;var n=c(t);return!0===n?_g(h(this,r)).delete(t):n&&l(n,this._i)&&delete n[this._i]},has:function has(t){if(!a(t))return!1;var n=c(t);return!0===n?_g(h(this,r)).has(t):n&&l(n,this._i)}}),o},def:function(t,n,r){var e=c(i(n),!0);return!0===e?_g(t).set(n,r):e[t._i]=r,t},ufstore:_g}},{117:117,149:149,37:37,38:38,42:42,68:68,71:71,81:81,94:94}],51:[function(t,n,r){\"use strict\";var y=t(70),d=t(62),x=t(118),m=t(117),S=t(94),b=t(68),w=t(37),_=t(81),E=t(64),O=t(86),F=t(124),I=t(75);n.exports=function(e,t,n,r,i,o){function ci(t){var r=f[t];x(f,t,\"delete\"==t?function(t){return!(o&&!_(t))&&r.call(this,0===t?0:t)}:\"has\"==t?function has(t){return!(o&&!_(t))&&r.call(this,0===t?0:t)}:\"get\"==t?function get(t){return o&&!_(t)?void 0:r.call(this,0===t?0:t)}:\"add\"==t?function add(t){return r.call(this,0===t?0:t),this}:function set(t,n){return r.call(this,0===t?0:t,n),this})}var u=y[e],c=u,a=i?\"set\":\"add\",f=c&&c.prototype,s={};if(\"function\"==typeof c&&(o||f.forEach&&!E(function(){(new c).entries().next()}))){var l=new c,h=l[a](o?{}:-0,1)!=l,p=E(function(){l.has(1)}),v=O(function(t){new c(t)}),g=!o&&E(function(){for(var t=new c,n=5;n--;)t[a](n,n);return!t.has(-0)});v||(((c=t(function(t,n){w(t,c,e);var r=I(new u,t,c);return null!=n&&b(n,i,r[a],r),r})).prototype=f).constructor=c),(p||g)&&(ci(\"delete\"),ci(\"has\"),i&&ci(\"get\")),(g||h)&&ci(a),o&&f.clear&&delete f.clear}else c=r.getConstructor(t,e,i,a),m(c.prototype,n),S.NEED=!0;return F(c,e),s[e]=c,d(d.G+d.W+d.F*(c!=u),s),o||r.setStrong(c,e,i),c}},{117:117,118:118,124:124,37:37,62:62,64:64,68:68,70:70,75:75,81:81,86:86,94:94}],52:[function(t,n,r){arguments[4][18][0].apply(r,arguments)},{18:18}],53:[function(t,n,r){\"use strict\";var e=t(99),i=t(116);n.exports=function(t,n,r){n in t?e.f(t,n,i(0,r)):t[n]=r}},{116:116,99:99}],54:[function(t,n,r){arguments[4][19][0].apply(r,arguments)},{19:19,33:33}],55:[function(t,n,r){\"use strict\";function Qi(t){return 9<t?t:\"0\"+t}var e=t(64),i=Date.prototype.getTime,o=Date.prototype.toISOString;n.exports=e(function(){return\"0385-07-25T07:06:39.999Z\"!=o.call(new Date(-5e13-1))})||!e(function(){o.call(new Date(NaN))})?function toISOString(){if(!isFinite(i.call(this)))throw RangeError(\"Invalid time value\");var t=this,n=t.getUTCFullYear(),r=t.getUTCMilliseconds(),e=n<0?\"-\":9999<n?\"+\":\"\";return e+(\"00000\"+Math.abs(n)).slice(e?-6:-4)+\"-\"+Qi(t.getUTCMonth()+1)+\"-\"+Qi(t.getUTCDate())+\"T\"+Qi(t.getUTCHours())+\":\"+Qi(t.getUTCMinutes())+\":\"+Qi(t.getUTCSeconds())+\".\"+(99<r?r:\"0\"+Qi(r))+\"Z\"}:o},{64:64}],56:[function(t,n,r){\"use strict\";var e=t(38),i=t(143);n.exports=function(t){if(\"string\"!==t&&\"number\"!==t&&\"default\"!==t)throw TypeError(\"Incorrect hint\");return i(e(this),\"number\"!=t)}},{143:143,38:38}],57:[function(t,n,r){n.exports=function(t){if(null==t)throw TypeError(\"Can't call method on  \"+t);return t}},{}],58:[function(t,n,r){arguments[4][20][0].apply(r,arguments)},{20:20,64:64}],59:[function(t,n,r){arguments[4][21][0].apply(r,arguments)},{21:21,70:70,81:81}],60:[function(t,n,r){n.exports=\"constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf\".split(\",\")},{}],61:[function(t,n,r){var c=t(107),a=t(104),f=t(108);n.exports=function(t){var n=c(t),r=a.f;if(r)for(var e,i=r(t),o=f.f,u=0;i.length>u;)o.call(t,e=i[u++])&&n.push(e);return n}},{104:104,107:107,108:108}],62:[function(t,n,r){var g=t(70),y=t(52),d=t(72),x=t(118),m=t(54),S=\"prototype\",b=function(t,n,r){var e,i,o,u,c=t&b.F,a=t&b.G,f=t&b.S,s=t&b.P,l=t&b.B,h=a?g:f?g[n]||(g[n]={}):(g[n]||{})[S],p=a?y:y[n]||(y[n]={}),v=p[S]||(p[S]={});for(e in a&&(r=n),r)o=((i=!c&&h&&void 0!==h[e])?h:r)[e],u=l&&i?m(o,g):s&&\"function\"==typeof o?m(Function.call,o):o,h&&x(h,e,o,t&b.U),p[e]!=o&&d(p,e,u),s&&v[e]!=o&&(v[e]=o)};g.core=y,b.F=1,b.G=2,b.S=4,b.P=8,b.B=16,b.W=32,b.U=64,b.R=128,n.exports=b},{118:118,52:52,54:54,70:70,72:72}],63:[function(t,n,r){var e=t(152)(\"match\");n.exports=function(n){var r=/./;try{\"/./\"[n](r)}catch(t){try{return r[e]=!1,!\"/./\"[n](r)}catch(t){}}return!0}},{152:152}],64:[function(t,n,r){arguments[4][23][0].apply(r,arguments)},{23:23}],65:[function(t,n,r){\"use strict\";t(248);var s=t(118),l=t(72),h=t(64),p=t(57),v=t(152),g=t(120),y=v(\"species\"),d=!h(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:\"7\"},t},\"7\"!==\"\".replace(t,\"$<a>\")}),x=function(){var t=/(?:)/,n=t.exec;t.exec=function(){return n.apply(this,arguments)};var r=\"ab\".split(t);return 2===r.length&&\"a\"===r[0]&&\"b\"===r[1]}();n.exports=function(r,t,n){var e=v(r),o=!h(function(){var t={};return t[e]=function(){return 7},7!=\"\"[r](t)}),i=o?!h(function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},\"split\"===r&&(n.constructor={},n.constructor[y]=function(){return n}),n[e](\"\"),!t}):void 0;if(!o||!i||\"replace\"===r&&!d||\"split\"===r&&!x){var u=/./[e],c=n(p,e,\"\"[r],function maybeCallNative(t,n,r,e,i){return n.exec===g?o&&!i?{done:!0,value:u.call(n,r,e)}:{done:!0,value:t.call(r,n,e)}:{done:!1}}),a=c[0],f=c[1];s(String.prototype,r,a),l(RegExp.prototype,e,2==t?function(t,n){return f.call(t,this,n)}:function(t){return f.call(t,this)})}}},{118:118,120:120,152:152,248:248,57:57,64:64,72:72}],66:[function(t,n,r){\"use strict\";var e=t(38);n.exports=function(){var t=e(this),n=\"\";return t.global&&(n+=\"g\"),t.ignoreCase&&(n+=\"i\"),t.multiline&&(n+=\"m\"),t.unicode&&(n+=\"u\"),t.sticky&&(n+=\"y\"),n}},{38:38}],67:[function(t,n,r){\"use strict\";var p=t(79),v=t(81),g=t(141),y=t(54),d=t(152)(\"isConcatSpreadable\");n.exports=function flattenIntoArray(t,n,r,e,i,o,u,c){for(var a,f,s=i,l=0,h=!!u&&y(u,c,3);l<e;){if(l in r){if(a=h?h(r[l],l,n):r[l],f=!1,v(a)&&(f=void 0!==(f=a[d])?!!f:p(a)),f&&0<o)s=flattenIntoArray(t,n,a,g(a.length),s,o-1)-1;else{if(9007199254740991<=s)throw TypeError();t[s]=a}s++}l++}return s}},{141:141,152:152,54:54,79:79,81:81}],68:[function(t,n,r){var h=t(54),p=t(83),v=t(78),g=t(38),y=t(141),d=t(153),x={},m={};(r=n.exports=function(t,n,r,e,i){var o,u,c,a,f=i?function(){return t}:d(t),s=h(r,e,n?2:1),l=0;if(\"function\"!=typeof f)throw TypeError(t+\" is not iterable!\");if(v(f)){for(o=y(t.length);l<o;l++)if((a=n?s(g(u=t[l])[0],u[1]):s(t[l]))===x||a===m)return a}else for(c=f.call(t);!(u=c.next()).done;)if((a=p(c,s,u.value,n))===x||a===m)return a}).BREAK=x,r.RETURN=m},{141:141,153:153,38:38,54:54,78:78,83:83}],69:[function(t,n,r){n.exports=t(126)(\"native-function-to-string\",Function.toString)},{126:126}],70:[function(t,n,r){arguments[4][24][0].apply(r,arguments)},{24:24}],71:[function(t,n,r){arguments[4][25][0].apply(r,arguments)},{25:25}],72:[function(t,n,r){arguments[4][26][0].apply(r,arguments)},{116:116,26:26,58:58,99:99}],73:[function(t,n,r){var e=t(70).document;n.exports=e&&e.documentElement},{70:70}],74:[function(t,n,r){arguments[4][27][0].apply(r,arguments)},{27:27,58:58,59:59,64:64}],75:[function(t,n,r){var o=t(81),u=t(122).set;n.exports=function(t,n,r){var e,i=n.constructor;return i!==r&&\"function\"==typeof i&&(e=i.prototype)!==r.prototype&&o(e)&&u&&u(t,e),t}},{122:122,81:81}],76:[function(t,n,r){n.exports=function(t,n,r){var e=void 0===r;switch(n.length){case 0:return e?t():t.call(r);case 1:return e?t(n[0]):t.call(r,n[0]);case 2:return e?t(n[0],n[1]):t.call(r,n[0],n[1]);case 3:return e?t(n[0],n[1],n[2]):t.call(r,n[0],n[1],n[2]);case 4:return e?t(n[0],n[1],n[2],n[3]):t.call(r,n[0],n[1],n[2],n[3])}return t.apply(r,n)}},{}],77:[function(t,n,r){var e=t(48);n.exports=Object(\"z\").propertyIsEnumerable(0)?Object:function(t){return\"String\"==e(t)?t.split(\"\"):Object(t)}},{48:48}],78:[function(t,n,r){var e=t(88),i=t(152)(\"iterator\"),o=Array.prototype;n.exports=function(t){return void 0!==t&&(e.Array===t||o[i]===t)}},{152:152,88:88}],79:[function(t,n,r){var e=t(48);n.exports=Array.isArray||function isArray(t){return\"Array\"==e(t)}},{48:48}],80:[function(t,n,r){var e=t(81),i=Math.floor;n.exports=function isInteger(t){return!e(t)&&isFinite(t)&&i(t)===t}},{81:81}],81:[function(t,n,r){arguments[4][28][0].apply(r,arguments)},{28:28}],82:[function(t,n,r){var e=t(81),i=t(48),o=t(152)(\"match\");n.exports=function(t){var n;return e(t)&&(void 0!==(n=t[o])?!!n:\"RegExp\"==i(t))}},{152:152,48:48,81:81}],83:[function(t,n,r){var o=t(38);n.exports=function(n,t,r,e){try{return e?t(o(r)[0],r[1]):t(r)}catch(t){var i=n.return;throw void 0!==i&&o(i.call(n)),t}}},{38:38}],84:[function(t,n,r){\"use strict\";var e=t(98),i=t(116),o=t(124),u={};t(72)(u,t(152)(\"iterator\"),function(){return this}),n.exports=function(t,n,r){t.prototype=e(u,{next:i(1,r)}),o(t,n+\" Iterator\")}},{116:116,124:124,152:152,72:72,98:98}],85:[function(t,n,r){\"use strict\";function Qn(){return this}var x=t(89),m=t(62),S=t(118),b=t(72),w=t(88),_=t(84),E=t(124),O=t(105),F=t(152)(\"iterator\"),I=!([].keys&&\"next\"in[].keys()),P=\"values\";n.exports=function(t,n,r,e,i,o,u){_(r,n,e);function Yn(t){if(!I&&t in p)return p[t];switch(t){case\"keys\":return function keys(){return new r(this,t)};case P:return function values(){return new r(this,t)}}return function entries(){return new r(this,t)}}var c,a,f,s=n+\" Iterator\",l=i==P,h=!1,p=t.prototype,v=p[F]||p[\"@@iterator\"]||i&&p[i],g=v||Yn(i),y=i?l?Yn(\"entries\"):g:void 0,d=\"Array\"==n&&p.entries||v;if(d&&(f=O(d.call(new t)))!==Object.prototype&&f.next&&(E(f,s,!0),x||\"function\"==typeof f[F]||b(f,F,Qn)),l&&v&&v.name!==P&&(h=!0,g=function values(){return v.call(this)}),x&&!u||!I&&!h&&p[F]||b(p,F,g),w[n]=g,w[s]=Qn,i)if(c={values:l?g:Yn(P),keys:o?g:Yn(\"keys\"),entries:y},u)for(a in c)a in p||S(p,a,c[a]);else m(m.P+m.F*(I||h),n,c);return c}},{105:105,118:118,124:124,152:152,62:62,72:72,84:84,88:88,89:89}],86:[function(t,n,r){var o=t(152)(\"iterator\"),u=!1;try{var e=[7][o]();e.return=function(){u=!0},Array.from(e,function(){throw 2})}catch(t){}n.exports=function(t,n){if(!n&&!u)return!1;var r=!1;try{var e=[7],i=e[o]();i.next=function(){return{done:r=!0}},e[o]=function(){return i},t(e)}catch(t){}return r}},{152:152}],87:[function(t,n,r){n.exports=function(t,n){return{value:n,done:!!t}}},{}],88:[function(t,n,r){n.exports={}},{}],89:[function(t,n,r){n.exports=!1},{}],90:[function(t,n,r){var e=Math.expm1;n.exports=!e||22025.465794806718<e(10)||e(10)<22025.465794806718||-2e-17!=e(-2e-17)?function expm1(t){return 0==(t=+t)?t:-1e-6<t&&t<1e-6?t+t*t/2:Math.exp(t)-1}:e},{}],91:[function(t,n,r){var o=t(93),e=Math.pow,u=e(2,-52),c=e(2,-23),a=e(2,127)*(2-c),f=e(2,-126);n.exports=Math.fround||function fround(t){var n,r,e=Math.abs(t),i=o(t);return e<f?i*(e/f/c+1/u-1/u)*f*c:a<(r=(n=(1+c/u)*e)-(n-e))||r!=r?i*(1/0):i*r}},{93:93}],92:[function(t,n,r){n.exports=Math.log1p||function log1p(t){return-1e-8<(t=+t)&&t<1e-8?t-t*t/2:Math.log(1+t)}},{}],93:[function(t,n,r){n.exports=Math.sign||function sign(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},{}],94:[function(t,n,r){function tp(t){u(t,e,{value:{i:\"O\"+ ++c,w:{}}})}var e=t(147)(\"meta\"),i=t(81),o=t(71),u=t(99).f,c=0,a=Object.isExtensible||function(){return!0},f=!t(64)(function(){return a(Object.preventExtensions({}))}),s=n.exports={KEY:e,NEED:!1,fastKey:function(t,n){if(!i(t))return\"symbol\"==typeof t?t:(\"string\"==typeof t?\"S\":\"P\")+t;if(!o(t,e)){if(!a(t))return\"F\";if(!n)return\"E\";tp(t)}return t[e].i},getWeak:function(t,n){if(!o(t,e)){if(!a(t))return!0;if(!n)return!1;tp(t)}return t[e].w},onFreeze:function(t){return f&&s.NEED&&a(t)&&!o(t,e)&&tp(t),t}}},{147:147,64:64,71:71,81:81,99:99}],95:[function(t,n,r){var u=t(70),c=t(136).set,a=u.MutationObserver||u.WebKitMutationObserver,f=u.process,s=u.Promise,l=\"process\"==t(48)(f);n.exports=function(){function Qp(){var t,n;for(l&&(t=f.domain)&&t.exit();r;){n=r.fn,r=r.next;try{n()}catch(t){throw r?i():e=void 0,t}}e=void 0,t&&t.enter()}var r,e,i;if(l)i=function(){f.nextTick(Qp)};else if(!a||u.navigator&&u.navigator.standalone)if(s&&s.resolve){var t=s.resolve(void 0);i=function(){t.then(Qp)}}else i=function(){c.call(u,Qp)};else{var n=!0,o=document.createTextNode(\"\");new a(Qp).observe(o,{characterData:!0}),i=function(){o.data=n=!n}}return function(t){var n={fn:t,next:void 0};e&&(e.next=n),r||(r=n,i()),e=n}}},{136:136,48:48,70:70}],96:[function(t,n,r){\"use strict\";var i=t(33);function PromiseCapability(t){var r,e;this.promise=new t(function(t,n){if(void 0!==r||void 0!==e)throw TypeError(\"Bad Promise constructor\");r=t,e=n}),this.resolve=i(r),this.reject=i(e)}n.exports.f=function(t){return new PromiseCapability(t)}},{33:33}],97:[function(t,n,r){\"use strict\";var h=t(58),p=t(107),v=t(104),g=t(108),y=t(142),d=t(77),i=Object.assign;n.exports=!i||t(64)(function(){var t={},n={},r=Symbol(),e=\"abcdefghijklmnopqrst\";return t[r]=7,e.split(\"\").forEach(function(t){n[t]=t}),7!=i({},t)[r]||Object.keys(i({},n)).join(\"\")!=e})?function assign(t,n){for(var r=y(t),e=arguments.length,i=1,o=v.f,u=g.f;i<e;)for(var c,a=d(arguments[i++]),f=o?p(a).concat(o(a)):p(a),s=f.length,l=0;l<s;)c=f[l++],h&&!u.call(a,c)||(r[c]=a[c]);return r}:i},{104:104,107:107,108:108,142:142,58:58,64:64,77:77}],98:[function(e,t,n){function Pq(){}var i=e(38),o=e(100),u=e(60),c=e(125)(\"IE_PROTO\"),a=\"prototype\",f=function(){var t,n=e(59)(\"iframe\"),r=u.length;for(n.style.display=\"none\",e(73).appendChild(n),n.src=\"javascript:\",(t=n.contentWindow.document).open(),t.write(\"<script>document.F=Object<\\/script>\"),t.close(),f=t.F;r--;)delete f[a][u[r]];return f()};t.exports=Object.create||function create(t,n){var r;return null!==t?(Pq[a]=i(t),r=new Pq,Pq[a]=null,r[c]=t):r=f(),void 0===n?r:o(r,n)}},{100:100,125:125,38:38,59:59,60:60,73:73}],99:[function(t,n,r){arguments[4][29][0].apply(r,arguments)},{143:143,29:29,38:38,58:58,74:74}],100:[function(t,n,r){var u=t(99),c=t(38),a=t(107);n.exports=t(58)?Object.defineProperties:function defineProperties(t,n){c(t);for(var r,e=a(n),i=e.length,o=0;o<i;)u.f(t,r=e[o++],n[r]);return t}},{107:107,38:38,58:58,99:99}],101:[function(t,n,r){var e=t(108),i=t(116),o=t(140),u=t(143),c=t(71),a=t(74),f=Object.getOwnPropertyDescriptor;r.f=t(58)?f:function getOwnPropertyDescriptor(t,n){if(t=o(t),n=u(n,!0),a)try{return f(t,n)}catch(t){}if(c(t,n))return i(!e.f.call(t,n),t[n])}},{108:108,116:116,140:140,143:143,58:58,71:71,74:74}],102:[function(t,n,r){var e=t(140),i=t(103).f,o={}.toString,u=\"object\"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];n.exports.f=function getOwnPropertyNames(t){return u&&\"[object Window]\"==o.call(t)?function(t){try{return i(t)}catch(t){return u.slice()}}(t):i(e(t))}},{103:103,140:140}],103:[function(t,n,r){var e=t(106),i=t(60).concat(\"length\",\"prototype\");r.f=Object.getOwnPropertyNames||function getOwnPropertyNames(t){return e(t,i)}},{106:106,60:60}],104:[function(t,n,r){r.f=Object.getOwnPropertySymbols},{}],105:[function(t,n,r){var e=t(71),i=t(142),o=t(125)(\"IE_PROTO\"),u=Object.prototype;n.exports=Object.getPrototypeOf||function(t){return t=i(t),e(t,o)?t[o]:\"function\"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},{125:125,142:142,71:71}],106:[function(t,n,r){var u=t(71),c=t(140),a=t(41)(!1),f=t(125)(\"IE_PROTO\");n.exports=function(t,n){var r,e=c(t),i=0,o=[];for(r in e)r!=f&&u(e,r)&&o.push(r);for(;n.length>i;)u(e,r=n[i++])&&(~a(o,r)||o.push(r));return o}},{125:125,140:140,41:41,71:71}],107:[function(t,n,r){var e=t(106),i=t(60);n.exports=Object.keys||function keys(t){return e(t,i)}},{106:106,60:60}],108:[function(t,n,r){r.f={}.propertyIsEnumerable},{}],109:[function(t,n,r){var i=t(62),o=t(52),u=t(64);n.exports=function(t,n){var r=(o.Object||{})[t]||Object[t],e={};e[t]=n(r),i(i.S+i.F*u(function(){r(1)}),\"Object\",e)}},{52:52,62:62,64:64}],110:[function(t,n,r){var a=t(58),f=t(107),s=t(140),l=t(108).f;n.exports=function(c){return function(t){for(var n,r=s(t),e=f(r),i=e.length,o=0,u=[];o<i;)n=e[o++],a&&!l.call(r,n)||u.push(c?[n,r[n]]:r[n]);return u}}},{107:107,108:108,140:140,58:58}],111:[function(t,n,r){var e=t(103),i=t(104),o=t(38),u=t(70).Reflect;n.exports=u&&u.ownKeys||function ownKeys(t){var n=e.f(o(t)),r=i.f;return r?n.concat(r(t)):n}},{103:103,104:104,38:38,70:70}],112:[function(t,n,r){var e=t(70).parseFloat,i=t(134).trim;n.exports=1/e(t(135)+\"-0\")!=-1/0?function parseFloat(t){var n=i(String(t),3),r=e(n);return 0===r&&\"-\"==n.charAt(0)?-0:r}:e},{134:134,135:135,70:70}],113:[function(t,n,r){var e=t(70).parseInt,i=t(134).trim,o=t(135),u=/^[-+]?0[xX]/;n.exports=8!==e(o+\"08\")||22!==e(o+\"0x16\")?function parseInt(t,n){var r=i(String(t),3);return e(r,n>>>0||(u.test(r)?16:10))}:e},{134:134,135:135,70:70}],114:[function(t,n,r){n.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},{}],115:[function(t,n,r){var e=t(38),i=t(81),o=t(96);n.exports=function(t,n){if(e(t),i(n)&&n.constructor===t)return n;var r=o.f(t);return(0,r.resolve)(n),r.promise}},{38:38,81:81,96:96}],116:[function(t,n,r){arguments[4][30][0].apply(r,arguments)},{30:30}],117:[function(t,n,r){var i=t(118);n.exports=function(t,n,r){for(var e in n)i(t,e,n[e],r);return t}},{118:118}],118:[function(t,n,r){var o=t(70),u=t(72),c=t(71),a=t(147)(\"src\"),e=t(69),i=\"toString\",f=(\"\"+e).split(i);t(52).inspectSource=function(t){return e.call(t)},(n.exports=function(t,n,r,e){var i=\"function\"==typeof r;i&&(c(r,\"name\")||u(r,\"name\",n)),t[n]!==r&&(i&&(c(r,a)||u(r,a,t[n]?\"\"+t[n]:f.join(String(n)))),t===o?t[n]=r:e?t[n]?t[n]=r:u(t,n,r):(delete t[n],u(t,n,r)))})(Function.prototype,i,function toString(){return\"function\"==typeof this&&this[a]||e.call(this)})},{147:147,52:52,69:69,70:70,71:71,72:72}],119:[function(t,n,r){\"use strict\";var i=t(47),o=RegExp.prototype.exec;n.exports=function(t,n){var r=t.exec;if(\"function\"==typeof r){var e=r.call(t,n);if(\"object\"!=typeof e)throw new TypeError(\"RegExp exec method returned something other than an Object or null\");return e}if(\"RegExp\"!==i(t))throw new TypeError(\"RegExp#exec called on incompatible receiver\");return o.call(t,n)}},{47:47}],120:[function(t,n,r){\"use strict\";var e,i,u=t(66),c=RegExp.prototype.exec,a=String.prototype.replace,o=c,f=\"lastIndex\",s=(e=/a/,i=/b*/g,c.call(e,\"a\"),c.call(i,\"a\"),0!==e[f]||0!==i[f]),l=void 0!==/()??/.exec(\"\")[1];(s||l)&&(o=function exec(t){var n,r,e,i,o=this;return l&&(r=new RegExp(\"^\"+o.source+\"$(?!\\\\s)\",u.call(o))),s&&(n=o[f]),e=c.call(o,t),s&&e&&(o[f]=o.global?e.index+e[0].length:n),l&&e&&1<e.length&&a.call(e[0],r,function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(e[i]=void 0)}),e}),n.exports=o},{66:66}],121:[function(t,n,r){n.exports=Object.is||function is(t,n){return t===n?0!==t||1/t==1/n:t!=t&&n!=n}},{}],122:[function(n,t,r){function Wu(t,n){if(i(t),!e(n)&&null!==n)throw TypeError(n+\": can't set as prototype!\")}var e=n(81),i=n(38);t.exports={set:Object.setPrototypeOf||(\"__proto__\"in{}?function(t,r,e){try{(e=n(54)(Function.call,n(101).f(Object.prototype,\"__proto__\").set,2))(t,[]),r=!(t instanceof Array)}catch(t){r=!0}return function setPrototypeOf(t,n){return Wu(t,n),r?t.__proto__=n:e(t,n),t}}({},!1):void 0),check:Wu}},{101:101,38:38,54:54,81:81}],123:[function(t,n,r){\"use strict\";var e=t(70),i=t(99),o=t(58),u=t(152)(\"species\");n.exports=function(t){var n=e[t];o&&n&&!n[u]&&i.f(n,u,{configurable:!0,get:function(){return this}})}},{152:152,58:58,70:70,99:99}],124:[function(t,n,r){var e=t(99).f,i=t(71),o=t(152)(\"toStringTag\");n.exports=function(t,n,r){t&&!i(t=r?t:t.prototype,o)&&e(t,o,{configurable:!0,value:n})}},{152:152,71:71,99:99}],125:[function(t,n,r){var e=t(126)(\"keys\"),i=t(147);n.exports=function(t){return e[t]||(e[t]=i(t))}},{126:126,147:147}],126:[function(t,n,r){var e=t(52),i=t(70),o=\"__core-js_shared__\",u=i[o]||(i[o]={});(n.exports=function(t,n){return u[t]||(u[t]=void 0!==n?n:{})})(\"versions\",[]).push({version:e.version,mode:t(89)?\"pure\":\"global\",copyright:\"\xA9 2019 Denis Pushkarev (zloirock.ru)\"})},{52:52,70:70,89:89}],127:[function(t,n,r){var i=t(38),o=t(33),u=t(152)(\"species\");n.exports=function(t,n){var r,e=i(t).constructor;return void 0===e||null==(r=i(e)[u])?n:o(r)}},{152:152,33:33,38:38}],128:[function(t,n,r){\"use strict\";var e=t(64);n.exports=function(t,n){return!!t&&e(function(){n?t.call(null,function(){},1):t.call(null)})}},{64:64}],129:[function(t,n,r){var a=t(139),f=t(57);n.exports=function(c){return function(t,n){var r,e,i=String(f(t)),o=a(n),u=i.length;return o<0||u<=o?c?\"\":void 0:(r=i.charCodeAt(o))<55296||56319<r||o+1===u||(e=i.charCodeAt(o+1))<56320||57343<e?c?i.charAt(o):r:c?i.slice(o,o+2):e-56320+(r-55296<<10)+65536}}},{139:139,57:57}],130:[function(t,n,r){var e=t(82),i=t(57);n.exports=function(t,n,r){if(e(n))throw TypeError(\"String#\"+r+\" doesn't accept regex!\");return String(i(t))}},{57:57,82:82}],131:[function(t,n,r){function Aw(t,n,r,e){var i=String(u(t)),o=\"<\"+n;return\"\"!==r&&(o+=\" \"+r+'=\"'+String(e).replace(c,\"&quot;\")+'\"'),o+\">\"+i+\"</\"+n+\">\"}var e=t(62),i=t(64),u=t(57),c=/\"/g;n.exports=function(n,t){var r={};r[n]=t(Aw),e(e.P+e.F*i(function(){var t=\"\"[n]('\"');return t!==t.toLowerCase()||3<t.split('\"').length}),\"String\",r)}},{57:57,62:62,64:64}],132:[function(t,n,r){var s=t(141),l=t(133),h=t(57);n.exports=function(t,n,r,e){var i=String(h(t)),o=i.length,u=void 0===r?\" \":String(r),c=s(n);if(c<=o||\"\"==u)return i;var a=c-o,f=l.call(u,Math.ceil(a/u.length));return f.length>a&&(f=f.slice(0,a)),e?f+i:i+f}},{133:133,141:141,57:57}],133:[function(t,n,r){\"use strict\";var i=t(139),o=t(57);n.exports=function repeat(t){var n=String(o(this)),r=\"\",e=i(t);if(e<0||e==1/0)throw RangeError(\"Count can't be negative\");for(;0<e;(e>>>=1)&&(n+=n))1&e&&(r+=n);return r}},{139:139,57:57}],134:[function(t,n,r){function tx(t,n,r){var e={},i=c(function(){return!!a[t]()||\"\u200B\x85\"!=\"\u200B\x85\"[t]()}),o=e[t]=i?n(s):a[t];r&&(e[r]=o),u(u.P+u.F*i,\"String\",e)}var u=t(62),e=t(57),c=t(64),a=t(135),i=\"[\"+a+\"]\",o=RegExp(\"^\"+i+i+\"*\"),f=RegExp(i+i+\"*$\"),s=tx.trim=function(t,n){return t=String(e(t)),1&n&&(t=t.replace(o,\"\")),2&n&&(t=t.replace(f,\"\")),t};n.exports=tx},{135:135,57:57,62:62,64:64}],135:[function(t,n,r){n.exports=\"\\t\\n\\v\\f\\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\\u2028\\u2029\\ufeff\"},{}],136:[function(t,n,r){function Zx(){var t=+this;if(d.hasOwnProperty(t)){var n=d[t];delete d[t],n()}}function $x(t){Zx.call(t.data)}var e,i,o,u=t(54),c=t(76),a=t(73),f=t(59),s=t(70),l=s.process,h=s.setImmediate,p=s.clearImmediate,v=s.MessageChannel,g=s.Dispatch,y=0,d={},x=\"onreadystatechange\";h&&p||(h=function setImmediate(t){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);return d[++y]=function(){c(\"function\"==typeof t?t:Function(t),n)},e(y),y},p=function clearImmediate(t){delete d[t]},\"process\"==t(48)(l)?e=function(t){l.nextTick(u(Zx,t,1))}:g&&g.now?e=function(t){g.now(u(Zx,t,1))}:v?(o=(i=new v).port2,i.port1.onmessage=$x,e=u(o.postMessage,o,1)):s.addEventListener&&\"function\"==typeof postMessage&&!s.importScripts?(e=function(t){s.postMessage(t+\"\",\"*\")},s.addEventListener(\"message\",$x,!1)):e=x in f(\"script\")?function(t){a.appendChild(f(\"script\"))[x]=function(){a.removeChild(this),Zx.call(t)}}:function(t){setTimeout(u(Zx,t,1),0)}),n.exports={set:h,clear:p}},{48:48,54:54,59:59,70:70,73:73,76:76}],137:[function(t,n,r){var e=t(139),i=Math.max,o=Math.min;n.exports=function(t,n){return(t=e(t))<0?i(t+n,0):o(t,n)}},{139:139}],138:[function(t,n,r){var e=t(139),i=t(141);n.exports=function(t){if(void 0===t)return 0;var n=e(t),r=i(n);if(n!==r)throw RangeError(\"Wrong length!\");return r}},{139:139,141:141}],139:[function(t,n,r){var e=Math.ceil,i=Math.floor;n.exports=function(t){return isNaN(t=+t)?0:(0<t?i:e)(t)}},{}],140:[function(t,n,r){var e=t(77),i=t(57);n.exports=function(t){return e(i(t))}},{57:57,77:77}],141:[function(t,n,r){var e=t(139),i=Math.min;n.exports=function(t){return 0<t?i(e(t),9007199254740991):0}},{139:139}],142:[function(t,n,r){var e=t(57);n.exports=function(t){return Object(e(t))}},{57:57}],143:[function(t,n,r){arguments[4][31][0].apply(r,arguments)},{31:31,81:81}],144:[function(t,n,r){\"use strict\";if(t(58)){var y=t(89),d=t(70),x=t(64),m=t(62),S=t(146),e=t(145),h=t(54),b=t(37),i=t(116),w=t(72),o=t(117),u=t(139),_=t(141),E=t(138),c=t(137),a=t(143),f=t(71),O=t(47),F=t(81),p=t(142),v=t(78),I=t(98),P=t(105),A=t(103).f,g=t(153),s=t(147),l=t(152),M=t(42),k=t(41),N=t(127),j=t(164),R=t(88),T=t(86),L=t(123),C=t(40),G=t(39),D=t(99),U=t(101),W=D.f,V=U.f,B=d.RangeError,q=d.TypeError,Y=d.Uint8Array,z=\"ArrayBuffer\",X=\"Shared\"+z,$=\"BYTES_PER_ELEMENT\",Q=\"prototype\",Z=Array[Q],J=e.ArrayBuffer,H=e.DataView,K=M(0),tt=M(2),nt=M(3),rt=M(4),et=M(5),it=M(6),ot=k(!0),ut=k(!1),ct=j.values,at=j.keys,ft=j.entries,st=Z.lastIndexOf,lt=Z.reduce,ht=Z.reduceRight,pt=Z.join,vt=Z.sort,gt=Z.slice,yt=Z.toString,dt=Z.toLocaleString,xt=l(\"iterator\"),mt=l(\"toStringTag\"),St=s(\"typed_constructor\"),bt=s(\"def_constructor\"),wt=S.CONSTR,_t=S.TYPED,Et=S.VIEW,Ot=\"Wrong length!\",Ft=M(1,function(t,n){return kt(N(t,t[bt]),n)}),It=x(function(){return 1===new Y(new Uint16Array([1]).buffer)[0]}),Pt=!!Y&&!!Y[Q].set&&x(function(){new Y(1).set({})}),At=function(t,n){var r=u(t);if(r<0||r%n)throw B(\"Wrong offset!\");return r},Mt=function(t){if(F(t)&&_t in t)return t;throw q(t+\" is not a typed array!\")},kt=function(t,n){if(!(F(t)&&St in t))throw q(\"It is not a typed array constructor!\");return new t(n)},Nt=function(t,n){return jt(N(t,t[bt]),n)},jt=function(t,n){for(var r=0,e=n.length,i=kt(t,e);r<e;)i[r]=n[r++];return i},Rt=function(t,n,r){W(t,n,{get:function(){return this._d[r]}})},Tt=function from(t){var n,r,e,i,o,u,c=p(t),a=arguments.length,f=1<a?arguments[1]:void 0,s=void 0!==f,l=g(c);if(null!=l&&!v(l)){for(u=l.call(c),e=[],n=0;!(o=u.next()).done;n++)e.push(o.value);c=e}for(s&&2<a&&(f=h(f,arguments[2],2)),n=0,r=_(c.length),i=kt(this,r);n<r;n++)i[n]=s?f(c[n],n):c[n];return i},Lt=function of(){for(var t=0,n=arguments.length,r=kt(this,n);t<n;)r[t]=arguments[t++];return r},Ct=!!Y&&x(function(){dt.call(new Y(1))}),Gt=function toLocaleString(){return dt.apply(Ct?gt.call(Mt(this)):Mt(this),arguments)},Dt={copyWithin:function copyWithin(t,n){return G.call(Mt(this),t,n,2<arguments.length?arguments[2]:void 0)},every:function every(t){return rt(Mt(this),t,1<arguments.length?arguments[1]:void 0)},fill:function fill(t){return C.apply(Mt(this),arguments)},filter:function filter(t){return Nt(this,tt(Mt(this),t,1<arguments.length?arguments[1]:void 0))},find:function find(t){return et(Mt(this),t,1<arguments.length?arguments[1]:void 0)},findIndex:function findIndex(t){return it(Mt(this),t,1<arguments.length?arguments[1]:void 0)},forEach:function forEach(t){K(Mt(this),t,1<arguments.length?arguments[1]:void 0)},indexOf:function indexOf(t){return ut(Mt(this),t,1<arguments.length?arguments[1]:void 0)},includes:function includes(t){return ot(Mt(this),t,1<arguments.length?arguments[1]:void 0)},join:function join(t){return pt.apply(Mt(this),arguments)},lastIndexOf:function lastIndexOf(t){return st.apply(Mt(this),arguments)},map:function map(t){return Ft(Mt(this),t,1<arguments.length?arguments[1]:void 0)},reduce:function reduce(t){return lt.apply(Mt(this),arguments)},reduceRight:function reduceRight(t){return ht.apply(Mt(this),arguments)},reverse:function reverse(){for(var t,n=this,r=Mt(n).length,e=Math.floor(r/2),i=0;i<e;)t=n[i],n[i++]=n[--r],n[r]=t;return n},some:function some(t){return nt(Mt(this),t,1<arguments.length?arguments[1]:void 0)},sort:function sort(t){return vt.call(Mt(this),t)},subarray:function subarray(t,n){var r=Mt(this),e=r.length,i=c(t,e);return new(N(r,r[bt]))(r.buffer,r.byteOffset+i*r.BYTES_PER_ELEMENT,_((void 0===n?e:c(n,e))-i))}},Ut=function slice(t,n){return Nt(this,gt.call(Mt(this),t,n))},Wt=function set(t){Mt(this);var n=At(arguments[1],1),r=this.length,e=p(t),i=_(e.length),o=0;if(r<i+n)throw B(Ot);for(;o<i;)this[n+o]=e[o++]},Vt={entries:function entries(){return ft.call(Mt(this))},keys:function keys(){return at.call(Mt(this))},values:function values(){return ct.call(Mt(this))}},Bt=function(t,n){return F(t)&&t[_t]&&\"symbol\"!=typeof n&&n in t&&String(+n)==String(n)},qt=function getOwnPropertyDescriptor(t,n){return Bt(t,n=a(n,!0))?i(2,t[n]):V(t,n)},Yt=function defineProperty(t,n,r){return!(Bt(t,n=a(n,!0))&&F(r)&&f(r,\"value\"))||f(r,\"get\")||f(r,\"set\")||r.configurable||f(r,\"writable\")&&!r.writable||f(r,\"enumerable\")&&!r.enumerable?W(t,n,r):(t[n]=r.value,t)};wt||(U.f=qt,D.f=Yt),m(m.S+m.F*!wt,\"Object\",{getOwnPropertyDescriptor:qt,defineProperty:Yt}),x(function(){yt.call({})})&&(yt=dt=function toString(){return pt.call(this)});var zt=o({},Dt);o(zt,Vt),w(zt,xt,Vt.values),o(zt,{slice:Ut,set:Wt,constructor:function(){},toString:yt,toLocaleString:Gt}),Rt(zt,\"buffer\",\"b\"),Rt(zt,\"byteOffset\",\"o\"),Rt(zt,\"byteLength\",\"l\"),Rt(zt,\"length\",\"e\"),W(zt,mt,{get:function(){return this[_t]}}),n.exports=function(t,l,n,o){function CC(t,i){W(t,i,{get:function(){return t=i,(n=this._d).v[r](t*l+n.o,It);var t,n},set:function(t){return n=i,r=t,e=this._d,o&&(r=(r=Math.round(r))<0?0:255<r?255:255&r),void e.v[u](n*l+e.o,r,It);var n,r,e},enumerable:!0})}var h=t+((o=!!o)?\"Clamped\":\"\")+\"Array\",r=\"get\"+t,u=\"set\"+t,p=d[h],c=p||{},e=p&&P(p),i=!p||!S.ABV,a={},f=p&&p[Q];i?(p=n(function(t,n,r,e){b(t,p,h,\"_d\");var i,o,u,c,a=0,f=0;if(F(n)){if(!(n instanceof J||(c=O(n))==z||c==X))return _t in n?jt(p,n):Tt.call(p,n);i=n,f=At(r,l);var s=n.byteLength;if(void 0===e){if(s%l)throw B(Ot);if((o=s-f)<0)throw B(Ot)}else if(s<(o=_(e)*l)+f)throw B(Ot);u=o/l}else u=E(n),i=new J(o=u*l);for(w(t,\"_d\",{b:i,o:f,l:o,e:u,v:new H(i)});a<u;)CC(t,a++)}),f=p[Q]=I(zt),w(f,\"constructor\",p)):x(function(){p(1)})&&x(function(){new p(-1)})&&T(function(t){new p,new p(null),new p(1.5),new p(t)},!0)||(p=n(function(t,n,r,e){var i;return b(t,p,h),F(n)?n instanceof J||(i=O(n))==z||i==X?void 0!==e?new c(n,At(r,l),e):void 0!==r?new c(n,At(r,l)):new c(n):_t in n?jt(p,n):Tt.call(p,n):new c(E(n))}),K(e!==Function.prototype?A(c).concat(A(e)):A(c),function(t){t in p||w(p,t,c[t])}),p[Q]=f,y||(f.constructor=p));var s=f[xt],v=!!s&&(\"values\"==s.name||null==s.name),g=Vt.values;w(p,St,!0),w(f,_t,h),w(f,Et,!0),w(f,bt,p),(o?new p(1)[mt]==h:mt in f)||W(f,mt,{get:function(){return h}}),a[h]=p,m(m.G+m.W+m.F*(p!=c),a),m(m.S,h,{BYTES_PER_ELEMENT:l}),m(m.S+m.F*x(function(){c.of.call(p,1)}),h,{from:Tt,of:Lt}),$ in f||w(f,$,l),m(m.P,h,Dt),L(h),m(m.P+m.F*Pt,h,{set:Wt}),m(m.P+m.F*!v,h,Vt),y||f.toString==yt||(f.toString=yt),m(m.P+m.F*x(function(){new p(1).slice()}),h,{slice:Ut}),m(m.P+m.F*(x(function(){return[1,2].toLocaleString()!=new p([1,2]).toLocaleString()})||!x(function(){f.toLocaleString.call([1,2])})),h,{toLocaleString:Gt}),R[h]=v?s:g,y||v||w(f,xt,g)}}else n.exports=function(){}},{101:101,103:103,105:105,116:116,117:117,123:123,127:127,137:137,138:138,139:139,141:141,142:142,143:143,145:145,146:146,147:147,152:152,153:153,164:164,37:37,39:39,40:40,41:41,42:42,47:47,54:54,58:58,62:62,64:64,70:70,71:71,72:72,78:78,81:81,86:86,88:88,89:89,98:98,99:99}],145:[function(t,n,r){\"use strict\";var e=t(70),i=t(58),o=t(89),u=t(146),c=t(72),a=t(117),f=t(64),s=t(37),l=t(139),h=t(141),p=t(138),v=t(103).f,g=t(99).f,y=t(40),d=t(124),x=\"ArrayBuffer\",m=\"DataView\",S=\"prototype\",b=\"Wrong index!\",w=e[x],_=e[m],E=e.Math,O=e.RangeError,F=e.Infinity,I=w,P=E.abs,A=E.pow,M=E.floor,k=E.log,N=E.LN2,j=\"byteLength\",R=\"byteOffset\",T=i?\"_b\":\"buffer\",L=i?\"_l\":j,C=i?\"_o\":R;function packIEEE754(t,n,r){var e,i,o,u=new Array(r),c=8*r-n-1,a=(1<<c)-1,f=a>>1,s=23===n?A(2,-24)-A(2,-77):0,l=0,h=t<0||0===t&&1/t<0?1:0;for((t=P(t))!=t||t===F?(i=t!=t?1:0,e=a):(e=M(k(t)/N),t*(o=A(2,-e))<1&&(e--,o*=2),2<=(t+=1<=e+f?s/o:s*A(2,1-f))*o&&(e++,o/=2),a<=e+f?(i=0,e=a):1<=e+f?(i=(t*o-1)*A(2,n),e+=f):(i=t*A(2,f-1)*A(2,n),e=0));8<=n;u[l++]=255&i,i/=256,n-=8);for(e=e<<n|i,c+=n;0<c;u[l++]=255&e,e/=256,c-=8);return u[--l]|=128*h,u}function unpackIEEE754(t,n,r){var e,i=8*r-n-1,o=(1<<i)-1,u=o>>1,c=i-7,a=r-1,f=t[a--],s=127&f;for(f>>=7;0<c;s=256*s+t[a],a--,c-=8);for(e=s&(1<<-c)-1,s>>=-c,c+=n;0<c;e=256*e+t[a],a--,c-=8);if(0===s)s=1-u;else{if(s===o)return e?NaN:f?-F:F;e+=A(2,n),s-=u}return(f?-1:1)*e*A(2,s-n)}function unpackI32(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function packI8(t){return[255&t]}function packI16(t){return[255&t,t>>8&255]}function packI32(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function packF64(t){return packIEEE754(t,52,8)}function packF32(t){return packIEEE754(t,23,4)}function addGetter(t,n,r){g(t[S],n,{get:function(){return this[r]}})}function get(t,n,r,e){var i=p(+r);if(i+n>t[L])throw O(b);var o=t[T]._b,u=i+t[C],c=o.slice(u,u+n);return e?c:c.reverse()}function set(t,n,r,e,i,o){var u=p(+r);if(u+n>t[L])throw O(b);for(var c=t[T]._b,a=u+t[C],f=e(+i),s=0;s<n;s++)c[a+s]=f[o?s:n-s-1]}if(u.ABV){if(!f(function(){w(1)})||!f(function(){new w(-1)})||f(function(){return new w,new w(1.5),new w(NaN),w.name!=x})){for(var G,D=(w=function ArrayBuffer(t){return s(this,w),new I(p(t))})[S]=I[S],U=v(I),W=0;U.length>W;)(G=U[W++])in w||c(w,G,I[G]);o||(D.constructor=w)}var V=new _(new w(2)),B=_[S].setInt8;V.setInt8(0,2147483648),V.setInt8(1,2147483649),!V.getInt8(0)&&V.getInt8(1)||a(_[S],{setInt8:function setInt8(t,n){B.call(this,t,n<<24>>24)},setUint8:function setUint8(t,n){B.call(this,t,n<<24>>24)}},!0)}else w=function ArrayBuffer(t){s(this,w,x);var n=p(t);this._b=y.call(new Array(n),0),this[L]=n},_=function DataView(t,n,r){s(this,_,m),s(t,w,m);var e=t[L],i=l(n);if(i<0||e<i)throw O(\"Wrong offset!\");if(e<i+(r=void 0===r?e-i:h(r)))throw O(\"Wrong length!\");this[T]=t,this[C]=i,this[L]=r},i&&(addGetter(w,j,\"_l\"),addGetter(_,\"buffer\",\"_b\"),addGetter(_,j,\"_l\"),addGetter(_,R,\"_o\")),a(_[S],{getInt8:function getInt8(t){return get(this,1,t)[0]<<24>>24},getUint8:function getUint8(t){return get(this,1,t)[0]},getInt16:function getInt16(t){var n=get(this,2,t,arguments[1]);return(n[1]<<8|n[0])<<16>>16},getUint16:function getUint16(t){var n=get(this,2,t,arguments[1]);return n[1]<<8|n[0]},getInt32:function getInt32(t){return unpackI32(get(this,4,t,arguments[1]))},getUint32:function getUint32(t){return unpackI32(get(this,4,t,arguments[1]))>>>0},getFloat32:function getFloat32(t){return unpackIEEE754(get(this,4,t,arguments[1]),23,4)},getFloat64:function getFloat64(t){return unpackIEEE754(get(this,8,t,arguments[1]),52,8)},setInt8:function setInt8(t,n){set(this,1,t,packI8,n)},setUint8:function setUint8(t,n){set(this,1,t,packI8,n)},setInt16:function setInt16(t,n){set(this,2,t,packI16,n,arguments[2])},setUint16:function setUint16(t,n){set(this,2,t,packI16,n,arguments[2])},setInt32:function setInt32(t,n){set(this,4,t,packI32,n,arguments[2])},setUint32:function setUint32(t,n){set(this,4,t,packI32,n,arguments[2])},setFloat32:function setFloat32(t,n){set(this,4,t,packF32,n,arguments[2])},setFloat64:function setFloat64(t,n){set(this,8,t,packF64,n,arguments[2])}});d(w,x),d(_,m),c(_[S],u.VIEW,!0),r[x]=w,r[m]=_},{103:103,117:117,124:124,138:138,139:139,141:141,146:146,37:37,40:40,58:58,64:64,70:70,72:72,89:89,99:99}],146:[function(t,n,r){for(var e,i=t(70),o=t(72),u=t(147),c=u(\"typed_array\"),a=u(\"view\"),f=!(!i.ArrayBuffer||!i.DataView),s=f,l=0,h=\"Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array\".split(\",\");l<9;)(e=i[h[l++]])?(o(e.prototype,c,!0),o(e.prototype,a,!0)):s=!1;n.exports={ABV:f,CONSTR:s,TYPED:c,VIEW:a}},{147:147,70:70,72:72}],147:[function(t,n,r){var e=0,i=Math.random();n.exports=function(t){return\"Symbol(\".concat(void 0===t?\"\":t,\")_\",(++e+i).toString(36))}},{}],148:[function(t,n,r){var e=t(70).navigator;n.exports=e&&e.userAgent||\"\"},{70:70}],149:[function(t,n,r){var e=t(81);n.exports=function(t,n){if(!e(t)||t._t!==n)throw TypeError(\"Incompatible receiver, \"+n+\" required!\");return t}},{81:81}],150:[function(t,n,r){var e=t(70),i=t(52),o=t(89),u=t(151),c=t(99).f;n.exports=function(t){var n=i.Symbol||(i.Symbol=o?{}:e.Symbol||{});\"_\"==t.charAt(0)||t in n||c(n,t,{value:u.f(t)})}},{151:151,52:52,70:70,89:89,99:99}],151:[function(t,n,r){r.f=t(152)},{152:152}],152:[function(t,n,r){var e=t(126)(\"wks\"),i=t(147),o=t(70).Symbol,u=\"function\"==typeof o;(n.exports=function(t){return e[t]||(e[t]=u&&o[t]||(u?o:i)(\"Symbol.\"+t))}).store=e},{126:126,147:147,70:70}],153:[function(t,n,r){var e=t(47),i=t(152)(\"iterator\"),o=t(88);n.exports=t(52).getIteratorMethod=function(t){if(null!=t)return t[i]||t[\"@@iterator\"]||o[e(t)]}},{152:152,47:47,52:52,88:88}],154:[function(t,n,r){var e=t(62);e(e.P,\"Array\",{copyWithin:t(39)}),t(35)(\"copyWithin\")},{35:35,39:39,62:62}],155:[function(t,n,r){\"use strict\";var e=t(62),i=t(42)(4);e(e.P+e.F*!t(128)([].every,!0),\"Array\",{every:function every(t){return i(this,t,arguments[1])}})},{128:128,42:42,62:62}],156:[function(t,n,r){var e=t(62);e(e.P,\"Array\",{fill:t(40)}),t(35)(\"fill\")},{35:35,40:40,62:62}],157:[function(t,n,r){\"use strict\";var e=t(62),i=t(42)(2);e(e.P+e.F*!t(128)([].filter,!0),\"Array\",{filter:function filter(t){return i(this,t,arguments[1])}})},{128:128,42:42,62:62}],158:[function(t,n,r){\"use strict\";var e=t(62),i=t(42)(6),o=\"findIndex\",u=!0;o in[]&&Array(1)[o](function(){u=!1}),e(e.P+e.F*u,\"Array\",{findIndex:function findIndex(t){return i(this,t,1<arguments.length?arguments[1]:void 0)}}),t(35)(o)},{35:35,42:42,62:62}],159:[function(t,n,r){\"use strict\";var e=t(62),i=t(42)(5),o=\"find\",u=!0;o in[]&&Array(1)[o](function(){u=!1}),e(e.P+e.F*u,\"Array\",{find:function find(t){return i(this,t,1<arguments.length?arguments[1]:void 0)}}),t(35)(o)},{35:35,42:42,62:62}],160:[function(t,n,r){\"use strict\";var e=t(62),i=t(42)(0),o=t(128)([].forEach,!0);e(e.P+e.F*!o,\"Array\",{forEach:function forEach(t){return i(this,t,arguments[1])}})},{128:128,42:42,62:62}],161:[function(t,n,r){\"use strict\";var h=t(54),e=t(62),p=t(142),v=t(83),g=t(78),y=t(141),d=t(53),x=t(153);e(e.S+e.F*!t(86)(function(t){Array.from(t)}),\"Array\",{from:function from(t){var n,r,e,i,o=p(t),u=\"function\"==typeof this?this:Array,c=arguments.length,a=1<c?arguments[1]:void 0,f=void 0!==a,s=0,l=x(o);if(f&&(a=h(a,2<c?arguments[2]:void 0,2)),null==l||u==Array&&g(l))for(r=new u(n=y(o.length));s<n;s++)d(r,s,f?a(o[s],s):o[s]);else for(i=l.call(o),r=new u;!(e=i.next()).done;s++)d(r,s,f?v(i,a,[e.value,s],!0):e.value);return r.length=s,r}})},{141:141,142:142,153:153,53:53,54:54,62:62,78:78,83:83,86:86}],162:[function(t,n,r){\"use strict\";var e=t(62),i=t(41)(!1),o=[].indexOf,u=!!o&&1/[1].indexOf(1,-0)<0;e(e.P+e.F*(u||!t(128)(o)),\"Array\",{indexOf:function indexOf(t){return u?o.apply(this,arguments)||0:i(this,t,arguments[1])}})},{128:128,41:41,62:62}],163:[function(t,n,r){var e=t(62);e(e.S,\"Array\",{isArray:t(79)})},{62:62,79:79}],164:[function(t,n,r){\"use strict\";var e=t(35),i=t(87),o=t(88),u=t(140);n.exports=t(85)(Array,\"Array\",function(t,n){this._t=u(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,i(1)):i(0,\"keys\"==n?r:\"values\"==n?t[r]:[r,t[r]])},\"values\"),o.Arguments=o.Array,e(\"keys\"),e(\"values\"),e(\"entries\")},{140:140,35:35,85:85,87:87,88:88}],165:[function(t,n,r){\"use strict\";var e=t(62),i=t(140),o=[].join;e(e.P+e.F*(t(77)!=Object||!t(128)(o)),\"Array\",{join:function join(t){return o.call(i(this),void 0===t?\",\":t)}})},{128:128,140:140,62:62,77:77}],166:[function(t,n,r){\"use strict\";var e=t(62),i=t(140),o=t(139),u=t(141),c=[].lastIndexOf,a=!!c&&1/[1].lastIndexOf(1,-0)<0;e(e.P+e.F*(a||!t(128)(c)),\"Array\",{lastIndexOf:function lastIndexOf(t){if(a)return c.apply(this,arguments)||0;var n=i(this),r=u(n.length),e=r-1;for(1<arguments.length&&(e=Math.min(e,o(arguments[1]))),e<0&&(e=r+e);0<=e;e--)if(e in n&&n[e]===t)return e||0;return-1}})},{128:128,139:139,140:140,141:141,62:62}],167:[function(t,n,r){\"use strict\";var e=t(62),i=t(42)(1);e(e.P+e.F*!t(128)([].map,!0),\"Array\",{map:function map(t){return i(this,t,arguments[1])}})},{128:128,42:42,62:62}],168:[function(t,n,r){\"use strict\";var e=t(62),i=t(53);e(e.S+e.F*t(64)(function(){function F(){}return!(Array.of.call(F)instanceof F)}),\"Array\",{of:function of(){for(var t=0,n=arguments.length,r=new(\"function\"==typeof this?this:Array)(n);t<n;)i(r,t,arguments[t++]);return r.length=n,r}})},{53:53,62:62,64:64}],169:[function(t,n,r){\"use strict\";var e=t(62),i=t(43);e(e.P+e.F*!t(128)([].reduceRight,!0),\"Array\",{reduceRight:function reduceRight(t){return i(this,t,arguments.length,arguments[1],!0)}})},{128:128,43:43,62:62}],170:[function(t,n,r){\"use strict\";var e=t(62),i=t(43);e(e.P+e.F*!t(128)([].reduce,!0),\"Array\",{reduce:function reduce(t){return i(this,t,arguments.length,arguments[1],!1)}})},{128:128,43:43,62:62}],171:[function(t,n,r){\"use strict\";var e=t(62),i=t(73),f=t(48),s=t(137),l=t(141),h=[].slice;e(e.P+e.F*t(64)(function(){i&&h.call(i)}),\"Array\",{slice:function slice(t,n){var r=l(this.length),e=f(this);if(n=void 0===n?r:n,\"Array\"==e)return h.call(this,t,n);for(var i=s(t,r),o=s(n,r),u=l(o-i),c=new Array(u),a=0;a<u;a++)c[a]=\"String\"==e?this.charAt(i+a):this[i+a];return c}})},{137:137,141:141,48:48,62:62,64:64,73:73}],172:[function(t,n,r){\"use strict\";var e=t(62),i=t(42)(3);e(e.P+e.F*!t(128)([].some,!0),\"Array\",{some:function some(t){return i(this,t,arguments[1])}})},{128:128,42:42,62:62}],173:[function(t,n,r){\"use strict\";var e=t(62),i=t(33),o=t(142),u=t(64),c=[].sort,a=[1,2,3];e(e.P+e.F*(u(function(){a.sort(void 0)})||!u(function(){a.sort(null)})||!t(128)(c)),\"Array\",{sort:function sort(t){return void 0===t?c.call(o(this)):c.call(o(this),i(t))}})},{128:128,142:142,33:33,62:62,64:64}],174:[function(t,n,r){t(123)(\"Array\")},{123:123}],175:[function(t,n,r){var e=t(62);e(e.S,\"Date\",{now:function(){return(new Date).getTime()}})},{62:62}],176:[function(t,n,r){var e=t(62),i=t(55);e(e.P+e.F*(Date.prototype.toISOString!==i),\"Date\",{toISOString:i})},{55:55,62:62}],177:[function(t,n,r){\"use strict\";var e=t(62),i=t(142),o=t(143);e(e.P+e.F*t(64)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),\"Date\",{toJSON:function toJSON(t){var n=i(this),r=o(n);return\"number\"!=typeof r||isFinite(r)?n.toISOString():null}})},{142:142,143:143,62:62,64:64}],178:[function(t,n,r){var e=t(152)(\"toPrimitive\"),i=Date.prototype;e in i||t(72)(i,e,t(56))},{152:152,56:56,72:72}],179:[function(t,n,r){var e=Date.prototype,i=\"Invalid Date\",o=\"toString\",u=e[o],c=e.getTime;new Date(NaN)+\"\"!=i&&t(118)(e,o,function toString(){var t=c.call(this);return t==t?u.call(this):i})},{118:118}],180:[function(t,n,r){var e=t(62);e(e.P,\"Function\",{bind:t(46)})},{46:46,62:62}],181:[function(t,n,r){\"use strict\";var e=t(81),i=t(105),o=t(152)(\"hasInstance\"),u=Function.prototype;o in u||t(99).f(u,o,{value:function(t){if(\"function\"!=typeof this||!e(t))return!1;if(!e(this.prototype))return t instanceof this;for(;t=i(t);)if(this.prototype===t)return!0;return!1}})},{105:105,152:152,81:81,99:99}],182:[function(t,n,r){var e=t(99).f,i=Function.prototype,o=/^\\s*function ([^ (]*)/;\"name\"in i||t(58)&&e(i,\"name\",{configurable:!0,get:function(){try{return(\"\"+this).match(o)[1]}catch(t){return\"\"}}})},{58:58,99:99}],183:[function(t,n,r){\"use strict\";var e=t(49),i=t(149);n.exports=t(51)(\"Map\",function(t){return function Map(){return t(this,0<arguments.length?arguments[0]:void 0)}},{get:function get(t){var n=e.getEntry(i(this,\"Map\"),t);return n&&n.v},set:function set(t,n){return e.def(i(this,\"Map\"),0===t?0:t,n)}},e,!0)},{149:149,49:49,51:51}],184:[function(t,n,r){var e=t(62),i=t(92),o=Math.sqrt,u=Math.acosh;e(e.S+e.F*!(u&&710==Math.floor(u(Number.MAX_VALUE))&&u(1/0)==1/0),\"Math\",{acosh:function acosh(t){return(t=+t)<1?NaN:94906265.62425156<t?Math.log(t)+Math.LN2:i(t-1+o(t-1)*o(t+1))}})},{62:62,92:92}],185:[function(t,n,r){var e=t(62),i=Math.asinh;e(e.S+e.F*!(i&&0<1/i(0)),\"Math\",{asinh:function asinh(t){return isFinite(t=+t)&&0!=t?t<0?-asinh(-t):Math.log(t+Math.sqrt(t*t+1)):t}})},{62:62}],186:[function(t,n,r){var e=t(62),i=Math.atanh;e(e.S+e.F*!(i&&1/i(-0)<0),\"Math\",{atanh:function atanh(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},{62:62}],187:[function(t,n,r){var e=t(62),i=t(93);e(e.S,\"Math\",{cbrt:function cbrt(t){return i(t=+t)*Math.pow(Math.abs(t),1/3)}})},{62:62,93:93}],188:[function(t,n,r){var e=t(62);e(e.S,\"Math\",{clz32:function clz32(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},{62:62}],189:[function(t,n,r){var e=t(62),i=Math.exp;e(e.S,\"Math\",{cosh:function cosh(t){return(i(t=+t)+i(-t))/2}})},{62:62}],190:[function(t,n,r){var e=t(62),i=t(90);e(e.S+e.F*(i!=Math.expm1),\"Math\",{expm1:i})},{62:62,90:90}],191:[function(t,n,r){var e=t(62);e(e.S,\"Math\",{fround:t(91)})},{62:62,91:91}],192:[function(t,n,r){var e=t(62),a=Math.abs;e(e.S,\"Math\",{hypot:function hypot(t,n){for(var r,e,i=0,o=0,u=arguments.length,c=0;o<u;)c<(r=a(arguments[o++]))?(i=i*(e=c/r)*e+1,c=r):i+=0<r?(e=r/c)*e:r;return c===1/0?1/0:c*Math.sqrt(i)}})},{62:62}],193:[function(t,n,r){var e=t(62),i=Math.imul;e(e.S+e.F*t(64)(function(){return-5!=i(4294967295,5)||2!=i.length}),\"Math\",{imul:function imul(t,n){var r=65535,e=+t,i=+n,o=r&e,u=r&i;return 0|o*u+((r&e>>>16)*u+o*(r&i>>>16)<<16>>>0)}})},{62:62,64:64}],194:[function(t,n,r){var e=t(62);e(e.S,\"Math\",{log10:function log10(t){return Math.log(t)*Math.LOG10E}})},{62:62}],195:[function(t,n,r){var e=t(62);e(e.S,\"Math\",{log1p:t(92)})},{62:62,92:92}],196:[function(t,n,r){var e=t(62);e(e.S,\"Math\",{log2:function log2(t){return Math.log(t)/Math.LN2}})},{62:62}],197:[function(t,n,r){var e=t(62);e(e.S,\"Math\",{sign:t(93)})},{62:62,93:93}],198:[function(t,n,r){var e=t(62),i=t(90),o=Math.exp;e(e.S+e.F*t(64)(function(){return-2e-17!=!Math.sinh(-2e-17)}),\"Math\",{sinh:function sinh(t){return Math.abs(t=+t)<1?(i(t)-i(-t))/2:(o(t-1)-o(-t-1))*(Math.E/2)}})},{62:62,64:64,90:90}],199:[function(t,n,r){var e=t(62),i=t(90),o=Math.exp;e(e.S,\"Math\",{tanh:function tanh(t){var n=i(t=+t),r=i(-t);return n==1/0?1:r==1/0?-1:(n-r)/(o(t)+o(-t))}})},{62:62,90:90}],200:[function(t,n,r){var e=t(62);e(e.S,\"Math\",{trunc:function trunc(t){return(0<t?Math.floor:Math.ceil)(t)}})},{62:62}],201:[function(t,n,r){\"use strict\";function EN(t){var n=s(t,!1);if(\"string\"==typeof n&&2<n.length){var r,e,i,o=(n=x?n.trim():h(n,3)).charCodeAt(0);if(43===o||45===o){if(88===(r=n.charCodeAt(2))||120===r)return NaN}else if(48===o){switch(n.charCodeAt(1)){case 66:case 98:e=2,i=49;break;case 79:case 111:e=8,i=55;break;default:return+n}for(var u,c=n.slice(2),a=0,f=c.length;a<f;a++)if((u=c.charCodeAt(a))<48||i<u)return NaN;return parseInt(c,e)}}return+n}var e=t(70),i=t(71),o=t(48),u=t(75),s=t(143),c=t(64),a=t(103).f,f=t(101).f,l=t(99).f,h=t(134).trim,p=\"Number\",v=e[p],g=v,y=v.prototype,d=o(t(98)(y))==p,x=\"trim\"in String.prototype;if(!v(\" 0o1\")||!v(\"0b1\")||v(\"+0x1\")){v=function Number(t){var n=arguments.length<1?0:t,r=this;return r instanceof v&&(d?c(function(){y.valueOf.call(r)}):o(r)!=p)?u(new g(EN(n)),r,v):EN(n)};for(var m,S=t(58)?a(g):\"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger\".split(\",\"),b=0;S.length>b;b++)i(g,m=S[b])&&!i(v,m)&&l(v,m,f(g,m));(v.prototype=y).constructor=v,t(118)(e,p,v)}},{101:101,103:103,118:118,134:134,143:143,48:48,58:58,64:64,70:70,71:71,75:75,98:98,99:99}],202:[function(t,n,r){var e=t(62);e(e.S,\"Number\",{EPSILON:Math.pow(2,-52)})},{62:62}],203:[function(t,n,r){var e=t(62),i=t(70).isFinite;e(e.S,\"Number\",{isFinite:function isFinite(t){return\"number\"==typeof t&&i(t)}})},{62:62,70:70}],204:[function(t,n,r){var e=t(62);e(e.S,\"Number\",{isInteger:t(80)})},{62:62,80:80}],205:[function(t,n,r){var e=t(62);e(e.S,\"Number\",{isNaN:function isNaN(t){return t!=t}})},{62:62}],206:[function(t,n,r){var e=t(62),i=t(80),o=Math.abs;e(e.S,\"Number\",{isSafeInteger:function isSafeInteger(t){return i(t)&&o(t)<=9007199254740991}})},{62:62,80:80}],207:[function(t,n,r){var e=t(62);e(e.S,\"Number\",{MAX_SAFE_INTEGER:9007199254740991})},{62:62}],208:[function(t,n,r){var e=t(62);e(e.S,\"Number\",{MIN_SAFE_INTEGER:-9007199254740991})},{62:62}],209:[function(t,n,r){var e=t(62),i=t(112);e(e.S+e.F*(Number.parseFloat!=i),\"Number\",{parseFloat:i})},{112:112,62:62}],210:[function(t,n,r){var e=t(62),i=t(113);e(e.S+e.F*(Number.parseInt!=i),\"Number\",{parseInt:i})},{113:113,62:62}],211:[function(t,n,r){\"use strict\";function XO(t,n){for(var r=-1,e=n;++r<6;)e+=t*u[r],u[r]=e%1e7,e=o(e/1e7)}function YO(t){for(var n=6,r=0;0<=--n;)r+=u[n],u[n]=o(r/t),r=r%t*1e7}function ZO(){for(var t=6,n=\"\";0<=--t;)if(\"\"!==n||0===t||0!==u[t]){var r=String(u[t]);n=\"\"===n?r:n+l.call(\"0\",7-r.length)+r}return n}var e=t(62),f=t(139),s=t(34),l=t(133),i=1..toFixed,o=Math.floor,u=[0,0,0,0,0,0],h=\"Number.toFixed: incorrect invocation!\",p=function(t,n,r){return 0===n?r:n%2==1?p(t,n-1,r*t):p(t*t,n/2,r)};e(e.P+e.F*(!!i&&(\"0.000\"!==8e-5.toFixed(3)||\"1\"!==.9.toFixed(0)||\"1.25\"!==1.255.toFixed(2)||\"1000000000000000128\"!==(0xde0b6b3a7640080).toFixed(0))||!t(64)(function(){i.call({})})),\"Number\",{toFixed:function toFixed(t){var n,r,e,i,o=s(this,h),u=f(t),c=\"\",a=\"0\";if(u<0||20<u)throw RangeError(h);if(o!=o)return\"NaN\";if(o<=-1e21||1e21<=o)return String(o);if(o<0&&(c=\"-\",o=-o),1e-21<o)if(r=(n=function(t){for(var n=0,r=t;4096<=r;)n+=12,r/=4096;for(;2<=r;)n+=1,r/=2;return n}(o*p(2,69,1))-69)<0?o*p(2,-n,1):o/p(2,n,1),r*=4503599627370496,0<(n=52-n)){for(XO(0,r),e=u;7<=e;)XO(1e7,0),e-=7;for(XO(p(10,e,1),0),e=n-1;23<=e;)YO(1<<23),e-=23;YO(1<<e),XO(1,1),YO(2),a=ZO()}else XO(0,r),XO(1<<-n,0),a=ZO()+l.call(\"0\",u);return a=0<u?c+((i=a.length)<=u?\"0.\"+l.call(\"0\",u-i)+a:a.slice(0,i-u)+\".\"+a.slice(i-u)):c+a}})},{133:133,139:139,34:34,62:62,64:64}],212:[function(t,n,r){\"use strict\";var e=t(62),i=t(64),o=t(34),u=1..toPrecision;e(e.P+e.F*(i(function(){return\"1\"!==u.call(1,void 0)})||!i(function(){u.call({})})),\"Number\",{toPrecision:function toPrecision(t){var n=o(this,\"Number#toPrecision: incorrect invocation!\");return void 0===t?u.call(n):u.call(n,t)}})},{34:34,62:62,64:64}],213:[function(t,n,r){var e=t(62);e(e.S+e.F,\"Object\",{assign:t(97)})},{62:62,97:97}],214:[function(t,n,r){var e=t(62);e(e.S,\"Object\",{create:t(98)})},{62:62,98:98}],215:[function(t,n,r){var e=t(62);e(e.S+e.F*!t(58),\"Object\",{defineProperties:t(100)})},{100:100,58:58,62:62}],216:[function(t,n,r){var e=t(62);e(e.S+e.F*!t(58),\"Object\",{defineProperty:t(99).f})},{58:58,62:62,99:99}],217:[function(t,n,r){var e=t(81),i=t(94).onFreeze;t(109)(\"freeze\",function(n){return function freeze(t){return n&&e(t)?n(i(t)):t}})},{109:109,81:81,94:94}],218:[function(t,n,r){var e=t(140),i=t(101).f;t(109)(\"getOwnPropertyDescriptor\",function(){return function getOwnPropertyDescriptor(t,n){return i(e(t),n)}})},{101:101,109:109,140:140}],219:[function(t,n,r){t(109)(\"getOwnPropertyNames\",function(){return t(102).f})},{102:102,109:109}],220:[function(t,n,r){var e=t(142),i=t(105);t(109)(\"getPrototypeOf\",function(){return function getPrototypeOf(t){return i(e(t))}})},{105:105,109:109,142:142}],221:[function(t,n,r){var e=t(81);t(109)(\"isExtensible\",function(n){return function isExtensible(t){return!!e(t)&&(!n||n(t))}})},{109:109,81:81}],222:[function(t,n,r){var e=t(81);t(109)(\"isFrozen\",function(n){return function isFrozen(t){return!e(t)||!!n&&n(t)}})},{109:109,81:81}],223:[function(t,n,r){var e=t(81);t(109)(\"isSealed\",function(n){return function isSealed(t){return!e(t)||!!n&&n(t)}})},{109:109,81:81}],224:[function(t,n,r){var e=t(62);e(e.S,\"Object\",{is:t(121)})},{121:121,62:62}],225:[function(t,n,r){var e=t(142),i=t(107);t(109)(\"keys\",function(){return function keys(t){return i(e(t))}})},{107:107,109:109,142:142}],226:[function(t,n,r){var e=t(81),i=t(94).onFreeze;t(109)(\"preventExtensions\",function(n){return function preventExtensions(t){return n&&e(t)?n(i(t)):t}})},{109:109,81:81,94:94}],227:[function(t,n,r){var e=t(81),i=t(94).onFreeze;t(109)(\"seal\",function(n){return function seal(t){return n&&e(t)?n(i(t)):t}})},{109:109,81:81,94:94}],228:[function(t,n,r){var e=t(62);e(e.S,\"Object\",{setPrototypeOf:t(122).set})},{122:122,62:62}],229:[function(t,n,r){\"use strict\";var e=t(47),i={};i[t(152)(\"toStringTag\")]=\"z\",i+\"\"!=\"[object z]\"&&t(118)(Object.prototype,\"toString\",function toString(){return\"[object \"+e(this)+\"]\"},!0)},{118:118,152:152,47:47}],230:[function(t,n,r){var e=t(62),i=t(112);e(e.G+e.F*(parseFloat!=i),{parseFloat:i})},{112:112,62:62}],231:[function(t,n,r){var e=t(62),i=t(113);e(e.G+e.F*(parseInt!=i),{parseInt:i})},{113:113,62:62}],232:[function(r,t,n){\"use strict\";function $R(){}function fS(t){var n;return!(!h(t)||\"function\"!=typeof(n=t.then))&&n}function gS(s,r){if(!s._n){s._n=!0;var e=s._c;x(function(){for(var a=s._v,f=1==s._s,t=0,n=function(t){var n,r,e,i=f?t.ok:t.fail,o=t.resolve,u=t.reject,c=t.domain;try{i?(f||(2==s._h&&R(s),s._h=1),!0===i?n=a:(c&&c.enter(),n=i(a),c&&(c.exit(),e=!0)),n===t.promise?u(E(\"Promise-chain cycle\")):(r=fS(n))?r.call(n,o,u):o(n)):u(a)}catch(t){c&&!e&&c.exit(),u(t)}};e.length>t;)n(e[t++]);s._c=[],s._n=!1,r&&!s._h&&N(s)})}}function kS(t){var n=this;n._d||(n._d=!0,(n=n._w||n)._v=t,n._s=2,n._a||(n._a=n._c.slice()),gS(n,!0))}var e,i,o,u,c=r(89),a=r(70),f=r(54),s=r(47),l=r(62),h=r(81),p=r(33),v=r(37),g=r(68),y=r(127),d=r(136).set,x=r(95)(),m=r(96),S=r(114),b=r(148),w=r(115),_=\"Promise\",E=a.TypeError,O=a.process,F=O&&O.versions,I=F&&F.v8||\"\",P=a[_],A=\"process\"==s(O),M=i=m.f,k=!!function(){try{var t=P.resolve(1),n=(t.constructor={})[r(152)(\"species\")]=function(t){t($R,$R)};return(A||\"function\"==typeof PromiseRejectionEvent)&&t.then($R)instanceof n&&0!==I.indexOf(\"6.6\")&&-1===b.indexOf(\"Chrome/66\")}catch(t){}}(),N=function(o){d.call(a,function(){var t,n,r,e=o._v,i=j(o);if(i&&(t=S(function(){A?O.emit(\"unhandledRejection\",e,o):(n=a.onunhandledrejection)?n({promise:o,reason:e}):(r=a.console)&&r.error&&r.error(\"Unhandled promise rejection\",e)}),o._h=A||j(o)?2:1),o._a=void 0,i&&t.e)throw t.v})},j=function(t){return 1!==t._h&&0===(t._a||t._c).length},R=function(n){d.call(a,function(){var t;A?O.emit(\"rejectionHandled\",n):(t=a.onrejectionhandled)&&t({promise:n,reason:n._v})})},T=function(t){var r,e=this;if(!e._d){e._d=!0,e=e._w||e;try{if(e===t)throw E(\"Promise can't be resolved itself\");(r=fS(t))?x(function(){var n={_w:e,_d:!1};try{r.call(t,f(T,n,1),f(kS,n,1))}catch(t){kS.call(n,t)}}):(e._v=t,e._s=1,gS(e,!1))}catch(t){kS.call({_w:e,_d:!1},t)}}};k||(P=function Promise(t){v(this,P,_,\"_h\"),p(t),e.call(this);try{t(f(T,this,1),f(kS,this,1))}catch(t){kS.call(this,t)}},(e=function Promise(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=r(117)(P.prototype,{then:function then(t,n){var r=M(y(this,P));return r.ok=\"function\"!=typeof t||t,r.fail=\"function\"==typeof n&&n,r.domain=A?O.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&gS(this,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new e;this.promise=t,this.resolve=f(T,t,1),this.reject=f(kS,t,1)},m.f=M=function(t){return t===P||t===u?new o(t):i(t)}),l(l.G+l.W+l.F*!k,{Promise:P}),r(124)(P,_),r(123)(_),u=r(52)[_],l(l.S+l.F*!k,_,{reject:function reject(t){var n=M(this);return(0,n.reject)(t),n.promise}}),l(l.S+l.F*(c||!k),_,{resolve:function resolve(t){return w(c&&this===u?P:this,t)}}),l(l.S+l.F*!(k&&r(86)(function(t){P.all(t).catch($R)})),_,{all:function all(t){var u=this,n=M(u),c=n.resolve,a=n.reject,r=S(function(){var e=[],i=0,o=1;g(t,!1,function(t){var n=i++,r=!1;e.push(void 0),o++,u.resolve(t).then(function(t){r||(r=!0,e[n]=t,--o||c(e))},a)}),--o||c(e)});return r.e&&a(r.v),n.promise},race:function race(t){var n=this,r=M(n),e=r.reject,i=S(function(){g(t,!1,function(t){n.resolve(t).then(r.resolve,e)})});return i.e&&e(i.v),r.promise}})},{114:114,115:115,117:117,123:123,124:124,127:127,136:136,148:148,152:152,33:33,37:37,47:47,52:52,54:54,62:62,68:68,70:70,81:81,86:86,89:89,95:95,96:96}],233:[function(t,n,r){var e=t(62),o=t(33),u=t(38),c=(t(70).Reflect||{}).apply,a=Function.apply;e(e.S+e.F*!t(64)(function(){c(function(){})}),\"Reflect\",{apply:function apply(t,n,r){var e=o(t),i=u(r);return c?c(e,n,i):a.call(e,n,i)}})},{33:33,38:38,62:62,64:64,70:70}],234:[function(t,n,r){var e=t(62),c=t(98),a=t(33),f=t(38),s=t(81),i=t(64),l=t(46),h=(t(70).Reflect||{}).construct,p=i(function(){function F(){}return!(h(function(){},[],F)instanceof F)}),v=!i(function(){h(function(){})});e(e.S+e.F*(p||v),\"Reflect\",{construct:function construct(t,n){a(t),f(n);var r=arguments.length<3?t:a(arguments[2]);if(v&&!p)return h(t,n,r);if(t==r){switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3])}var e=[null];return e.push.apply(e,n),new(l.apply(t,e))}var i=r.prototype,o=c(s(i)?i:Object.prototype),u=Function.apply.call(t,o,n);return s(u)?u:o}})},{33:33,38:38,46:46,62:62,64:64,70:70,81:81,98:98}],235:[function(t,n,r){var e=t(99),i=t(62),o=t(38),u=t(143);i(i.S+i.F*t(64)(function(){Reflect.defineProperty(e.f({},1,{value:1}),1,{value:2})}),\"Reflect\",{defineProperty:function defineProperty(t,n,r){o(t),n=u(n,!0),o(r);try{return e.f(t,n,r),!0}catch(t){return!1}}})},{143:143,38:38,62:62,64:64,99:99}],236:[function(t,n,r){var e=t(62),i=t(101).f,o=t(38);e(e.S,\"Reflect\",{deleteProperty:function deleteProperty(t,n){var r=i(o(t),n);return!(r&&!r.configurable)&&delete t[n]}})},{101:101,38:38,62:62}],237:[function(t,n,r){\"use strict\";function IU(t){this._t=i(t),this._i=0;var n,r=this._k=[];for(n in t)r.push(n)}var e=t(62),i=t(38);t(84)(IU,\"Object\",function(){var t,n=this._k;do{if(this._i>=n.length)return{value:void 0,done:!0}}while(!((t=n[this._i++])in this._t));return{value:t,done:!1}}),e(e.S,\"Reflect\",{enumerate:function enumerate(t){return new IU(t)}})},{38:38,62:62,84:84}],238:[function(t,n,r){var e=t(101),i=t(62),o=t(38);i(i.S,\"Reflect\",{getOwnPropertyDescriptor:function getOwnPropertyDescriptor(t,n){return e.f(o(t),n)}})},{101:101,38:38,62:62}],239:[function(t,n,r){var e=t(62),i=t(105),o=t(38);e(e.S,\"Reflect\",{getPrototypeOf:function getPrototypeOf(t){return i(o(t))}})},{105:105,38:38,62:62}],240:[function(t,n,r){var o=t(101),u=t(105),c=t(71),e=t(62),a=t(81),f=t(38);e(e.S,\"Reflect\",{get:function get(t,n){var r,e,i=arguments.length<3?t:arguments[2];return f(t)===i?t[n]:(r=o.f(t,n))?c(r,\"value\")?r.value:void 0!==r.get?r.get.call(i):void 0:a(e=u(t))?get(e,n,i):void 0}})},{101:101,105:105,38:38,62:62,71:71,81:81}],241:[function(t,n,r){var e=t(62);e(e.S,\"Reflect\",{has:function has(t,n){return n in t}})},{62:62}],242:[function(t,n,r){var e=t(62),i=t(38),o=Object.isExtensible;e(e.S,\"Reflect\",{isExtensible:function isExtensible(t){return i(t),!o||o(t)}})},{38:38,62:62}],243:[function(t,n,r){var e=t(62);e(e.S,\"Reflect\",{ownKeys:t(111)})},{111:111,62:62}],244:[function(t,n,r){var e=t(62),i=t(38),o=Object.preventExtensions;e(e.S,\"Reflect\",{preventExtensions:function preventExtensions(t){i(t);try{return o&&o(t),!0}catch(t){return!1}}})},{38:38,62:62}],245:[function(t,n,r){var e=t(62),i=t(122);i&&e(e.S,\"Reflect\",{setPrototypeOf:function setPrototypeOf(t,n){i.check(t,n);try{return i.set(t,n),!0}catch(t){return!1}}})},{122:122,62:62}],246:[function(t,n,r){var c=t(99),a=t(101),f=t(105),s=t(71),e=t(62),l=t(116),h=t(38),p=t(81);e(e.S,\"Reflect\",{set:function set(t,n,r){var e,i,o=arguments.length<4?t:arguments[3],u=a.f(h(t),n);if(!u){if(p(i=f(t)))return set(i,n,r,o);u=l(0)}if(s(u,\"value\")){if(!1===u.writable||!p(o))return!1;if(e=a.f(o,n)){if(e.get||e.set||!1===e.writable)return!1;e.value=r,c.f(o,n,e)}else c.f(o,n,l(0,r));return!0}return void 0!==u.set&&(u.set.call(o,r),!0)}})},{101:101,105:105,116:116,38:38,62:62,71:71,81:81,99:99}],247:[function(t,n,r){var e=t(70),o=t(75),i=t(99).f,u=t(103).f,c=t(82),a=t(66),f=e.RegExp,s=f,l=f.prototype,h=/a/g,p=/a/g,v=new f(h)!==h;if(t(58)&&(!v||t(64)(function(){return p[t(152)(\"match\")]=!1,f(h)!=h||f(p)==p||\"/a/i\"!=f(h,\"i\")}))){f=function RegExp(t,n){var r=this instanceof f,e=c(t),i=void 0===n;return!r&&e&&t.constructor===f&&i?t:o(v?new s(e&&!i?t.source:t,n):s((e=t instanceof f)?t.source:t,e&&i?a.call(t):n),r?this:l,f)};function DW(n){n in f||i(f,n,{configurable:!0,get:function(){return s[n]},set:function(t){s[n]=t}})}for(var g=u(s),y=0;g.length>y;)DW(g[y++]);(l.constructor=f).prototype=l,t(118)(e,\"RegExp\",f)}t(123)(\"RegExp\")},{103:103,118:118,123:123,152:152,58:58,64:64,66:66,70:70,75:75,82:82,99:99}],248:[function(t,n,r){\"use strict\";var e=t(120);t(62)({target:\"RegExp\",proto:!0,forced:e!==/./.exec},{exec:e})},{120:120,62:62}],249:[function(t,n,r){t(58)&&\"g\"!=/./g.flags&&t(99).f(RegExp.prototype,\"flags\",{configurable:!0,get:t(66)})},{58:58,66:66,99:99}],250:[function(t,n,r){\"use strict\";var l=t(38),h=t(141),p=t(36),v=t(119);t(65)(\"match\",1,function(e,i,f,s){return[function match(t){var n=e(this),r=null==t?void 0:t[i];return void 0!==r?r.call(t,n):new RegExp(t)[i](String(n))},function(t){var n=s(f,t,this);if(n.done)return n.value;var r=l(t),e=String(this);if(!r.global)return v(r,e);for(var i,o=r.unicode,u=[],c=r.lastIndex=0;null!==(i=v(r,e));){var a=String(i[0]);\"\"===(u[c]=a)&&(r.lastIndex=p(e,h(r.lastIndex),o)),c++}return 0===c?null:u}]})},{119:119,141:141,36:36,38:38,65:65}],251:[function(t,n,r){\"use strict\";var _=t(38),e=t(142),E=t(141),O=t(139),F=t(36),I=t(119),P=Math.max,A=Math.min,h=Math.floor,p=/\\$([$&`']|\\d\\d?|<[^>]*>)/g,v=/\\$([$&`']|\\d\\d?)/g;t(65)(\"replace\",2,function(i,o,b,w){return[function replace(t,n){var r=i(this),e=null==t?void 0:t[o];return void 0!==e?e.call(t,r,n):b.call(String(r),t,n)},function(t,n){var r=w(b,t,this,n);if(r.done)return r.value;var e=_(t),i=String(this),o=\"function\"==typeof n;o||(n=String(n));var u=e.global;if(u){var c=e.unicode;e.lastIndex=0}for(var a=[];;){var f=I(e,i);if(null===f)break;if(a.push(f),!u)break;\"\"===String(f[0])&&(e.lastIndex=F(i,E(e.lastIndex),c))}for(var s,l=\"\",h=0,p=0;p<a.length;p++){f=a[p];for(var v=String(f[0]),g=P(A(O(f.index),i.length),0),y=[],d=1;d<f.length;d++)y.push(void 0===(s=f[d])?s:String(s));var x=f.groups;if(o){var m=[v].concat(y,g,i);void 0!==x&&m.push(x);var S=String(n.apply(void 0,m))}else S=getSubstitution(v,i,g,y,x,n);h<=g&&(l+=i.slice(h,g)+S,h=g+v.length)}return l+i.slice(h)}];function getSubstitution(o,u,c,a,f,t){var s=c+o.length,l=a.length,n=v;return void 0!==f&&(f=e(f),n=p),b.call(t,n,function(t,n){var r;switch(n.charAt(0)){case\"$\":return\"$\";case\"&\":return o;case\"`\":return u.slice(0,c);case\"'\":return u.slice(s);case\"<\":r=f[n.slice(1,-1)];break;default:var e=+n;if(0==e)return t;if(l<e){var i=h(e/10);return 0===i?t:i<=l?void 0===a[i-1]?n.charAt(1):a[i-1]+n.charAt(1):t}r=a[e-1]}return void 0===r?\"\":r})}})},{119:119,139:139,141:141,142:142,36:36,38:38,65:65}],252:[function(t,n,r){\"use strict\";var a=t(38),f=t(121),s=t(119);t(65)(\"search\",1,function(e,i,u,c){return[function search(t){var n=e(this),r=null==t?void 0:t[i];return void 0!==r?r.call(t,n):new RegExp(t)[i](String(n))},function(t){var n=c(u,t,this);if(n.done)return n.value;var r=a(t),e=String(this),i=r.lastIndex;f(i,0)||(r.lastIndex=0);var o=s(r,e);return f(r.lastIndex,i)||(r.lastIndex=i),null===o?-1:o.index}]})},{119:119,121:121,38:38,65:65}],253:[function(t,n,r){\"use strict\";var l=t(82),m=t(38),S=t(127),b=t(36),w=t(141),_=t(119),h=t(120),e=t(64),E=Math.min,p=[].push,u=\"split\",v=\"length\",g=\"lastIndex\",O=4294967295,F=!e(function(){RegExp(O,\"y\")});t(65)(\"split\",2,function(i,o,y,d){var x;return x=\"c\"==\"abbc\"[u](/(b)*/)[1]||4!=\"test\"[u](/(?:)/,-1)[v]||2!=\"ab\"[u](/(?:ab)*/)[v]||4!=\".\"[u](/(.?)(.?)/)[v]||1<\".\"[u](/()()/)[v]||\"\"[u](/.?/)[v]?function(t,n){var r=String(this);if(void 0===t&&0===n)return[];if(!l(t))return y.call(r,t,n);for(var e,i,o,u=[],c=(t.ignoreCase?\"i\":\"\")+(t.multiline?\"m\":\"\")+(t.unicode?\"u\":\"\")+(t.sticky?\"y\":\"\"),a=0,f=void 0===n?O:n>>>0,s=new RegExp(t.source,c+\"g\");(e=h.call(s,r))&&!(a<(i=s[g])&&(u.push(r.slice(a,e.index)),1<e[v]&&e.index<r[v]&&p.apply(u,e.slice(1)),o=e[0][v],a=i,u[v]>=f));)s[g]===e.index&&s[g]++;return a===r[v]?!o&&s.test(\"\")||u.push(\"\"):u.push(r.slice(a)),u[v]>f?u.slice(0,f):u}:\"0\"[u](void 0,0)[v]?function(t,n){return void 0===t&&0===n?[]:y.call(this,t,n)}:y,[function split(t,n){var r=i(this),e=null==t?void 0:t[o];return void 0!==e?e.call(t,r,n):x.call(String(r),t,n)},function(t,n){var r=d(x,t,this,n,x!==y);if(r.done)return r.value;var e=m(t),i=String(this),o=S(e,RegExp),u=e.unicode,c=(e.ignoreCase?\"i\":\"\")+(e.multiline?\"m\":\"\")+(e.unicode?\"u\":\"\")+(F?\"y\":\"g\"),a=new o(F?e:\"^(?:\"+e.source+\")\",c),f=void 0===n?O:n>>>0;if(0==f)return[];if(0===i.length)return null===_(a,i)?[i]:[];for(var s=0,l=0,h=[];l<i.length;){a.lastIndex=F?l:0;var p,v=_(a,F?i:i.slice(l));if(null===v||(p=E(w(a.lastIndex+(F?0:l)),i.length))===s)l=b(i,l,u);else{if(h.push(i.slice(s,l)),h.length===f)return h;for(var g=1;g<=v.length-1;g++)if(h.push(v[g]),h.length===f)return h;l=s=p}}return h.push(i.slice(s)),h}]})},{119:119,120:120,127:127,141:141,36:36,38:38,64:64,65:65,82:82}],254:[function(n,t,r){\"use strict\";n(249);function XZ(t){n(118)(RegExp.prototype,u,t,!0)}var e=n(38),i=n(66),o=n(58),u=\"toString\",c=/./[u];n(64)(function(){return\"/a/b\"!=c.call({source:\"a\",flags:\"b\"})})?XZ(function toString(){var t=e(this);return\"/\".concat(t.source,\"/\",\"flags\"in t?t.flags:!o&&t instanceof RegExp?i.call(t):void 0)}):c.name!=u&&XZ(function toString(){return c.call(this)})},{118:118,249:249,38:38,58:58,64:64,66:66}],255:[function(t,n,r){\"use strict\";var e=t(49),i=t(149);n.exports=t(51)(\"Set\",function(t){return function Set(){return t(this,0<arguments.length?arguments[0]:void 0)}},{add:function add(t){return e.def(i(this,\"Set\"),t=0===t?0:t,t)}},e)},{149:149,49:49,51:51}],256:[function(t,n,r){\"use strict\";t(131)(\"anchor\",function(n){return function anchor(t){return n(this,\"a\",\"name\",t)}})},{131:131}],257:[function(t,n,r){\"use strict\";t(131)(\"big\",function(t){return function big(){return t(this,\"big\",\"\",\"\")}})},{131:131}],258:[function(t,n,r){\"use strict\";t(131)(\"blink\",function(t){return function blink(){return t(this,\"blink\",\"\",\"\")}})},{131:131}],259:[function(t,n,r){\"use strict\";t(131)(\"bold\",function(t){return function bold(){return t(this,\"b\",\"\",\"\")}})},{131:131}],260:[function(t,n,r){\"use strict\";var e=t(62),i=t(129)(!1);e(e.P,\"String\",{codePointAt:function codePointAt(t){return i(this,t)}})},{129:129,62:62}],261:[function(t,n,r){\"use strict\";var e=t(62),u=t(141),c=t(130),a=\"endsWith\",f=\"\"[a];e(e.P+e.F*t(63)(a),\"String\",{endsWith:function endsWith(t){var n=c(this,t,a),r=1<arguments.length?arguments[1]:void 0,e=u(n.length),i=void 0===r?e:Math.min(u(r),e),o=String(t);return f?f.call(n,o,i):n.slice(i-o.length,i)===o}})},{130:130,141:141,62:62,63:63}],262:[function(t,n,r){\"use strict\";t(131)(\"fixed\",function(t){return function fixed(){return t(this,\"tt\",\"\",\"\")}})},{131:131}],263:[function(t,n,r){\"use strict\";t(131)(\"fontcolor\",function(n){return function fontcolor(t){return n(this,\"font\",\"color\",t)}})},{131:131}],264:[function(t,n,r){\"use strict\";t(131)(\"fontsize\",function(n){return function fontsize(t){return n(this,\"font\",\"size\",t)}})},{131:131}],265:[function(t,n,r){var e=t(62),o=t(137),u=String.fromCharCode,i=String.fromCodePoint;e(e.S+e.F*(!!i&&1!=i.length),\"String\",{fromCodePoint:function fromCodePoint(t){for(var n,r=[],e=arguments.length,i=0;i<e;){if(n=+arguments[i++],o(n,1114111)!==n)throw RangeError(n+\" is not a valid code point\");r.push(n<65536?u(n):u(55296+((n-=65536)>>10),n%1024+56320))}return r.join(\"\")}})},{137:137,62:62}],266:[function(t,n,r){\"use strict\";var e=t(62),i=t(130),o=\"includes\";e(e.P+e.F*t(63)(o),\"String\",{includes:function includes(t){return!!~i(this,t,o).indexOf(t,1<arguments.length?arguments[1]:void 0)}})},{130:130,62:62,63:63}],267:[function(t,n,r){\"use strict\";t(131)(\"italics\",function(t){return function italics(){return t(this,\"i\",\"\",\"\")}})},{131:131}],268:[function(t,n,r){\"use strict\";var e=t(129)(!0);t(85)(String,\"String\",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,r=this._i;return r>=n.length?{value:void 0,done:!0}:(t=e(n,r),this._i+=t.length,{value:t,done:!1})})},{129:129,85:85}],269:[function(t,n,r){\"use strict\";t(131)(\"link\",function(n){return function link(t){return n(this,\"a\",\"href\",t)}})},{131:131}],270:[function(t,n,r){var e=t(62),u=t(140),c=t(141);e(e.S,\"String\",{raw:function raw(t){for(var n=u(t.raw),r=c(n.length),e=arguments.length,i=[],o=0;o<r;)i.push(String(n[o++])),o<e&&i.push(String(arguments[o]));return i.join(\"\")}})},{140:140,141:141,62:62}],271:[function(t,n,r){var e=t(62);e(e.P,\"String\",{repeat:t(133)})},{133:133,62:62}],272:[function(t,n,r){\"use strict\";t(131)(\"small\",function(t){return function small(){return t(this,\"small\",\"\",\"\")}})},{131:131}],273:[function(t,n,r){\"use strict\";var e=t(62),i=t(141),o=t(130),u=\"startsWith\",c=\"\"[u];e(e.P+e.F*t(63)(u),\"String\",{startsWith:function startsWith(t){var n=o(this,t,u),r=i(Math.min(1<arguments.length?arguments[1]:void 0,n.length)),e=String(t);return c?c.call(n,e,r):n.slice(r,r+e.length)===e}})},{130:130,141:141,62:62,63:63}],274:[function(t,n,r){\"use strict\";t(131)(\"strike\",function(t){return function strike(){return t(this,\"strike\",\"\",\"\")}})},{131:131}],275:[function(t,n,r){\"use strict\";t(131)(\"sub\",function(t){return function sub(){return t(this,\"sub\",\"\",\"\")}})},{131:131}],276:[function(t,n,r){\"use strict\";t(131)(\"sup\",function(t){return function sup(){return t(this,\"sup\",\"\",\"\")}})},{131:131}],277:[function(t,n,r){\"use strict\";t(134)(\"trim\",function(t){return function trim(){return t(this,3)}})},{134:134}],278:[function(t,n,r){\"use strict\";function B1(t){var n=W[t]=E(j[L]);return n._k=t,n}function E1(t,n){x(t);for(var r,e=y(n=b(n)),i=0,o=e.length;i<o;)Q(t,r=e[i++],n[r]);return t}function G1(t){var n=D.call(this,t=w(t,!0));return!(this===B&&u(W,t)&&!u(V,t))&&(!(n||!u(this,t)||!u(W,t)||u(this,C)&&this[C][t])||n)}function H1(t,n){if(t=b(t),n=w(n,!0),t!==B||!u(W,n)||u(V,n)){var r=M(t,n);return!r||!u(W,n)||u(t,C)&&t[C][n]||(r.enumerable=!0),r}}function I1(t){for(var n,r=N(b(t)),e=[],i=0;r.length>i;)u(W,n=r[i++])||n==C||n==a||e.push(n);return e}function J1(t){for(var n,r=t===B,e=N(r?V:b(t)),i=[],o=0;e.length>o;)!u(W,n=e[o++])||r&&!u(B,n)||i.push(W[n]);return i}var e=t(70),u=t(71),i=t(58),o=t(62),c=t(118),a=t(94).KEY,f=t(64),s=t(126),l=t(124),h=t(147),p=t(152),v=t(151),g=t(150),y=t(61),d=t(79),x=t(38),m=t(81),S=t(142),b=t(140),w=t(143),_=t(116),E=t(98),O=t(102),F=t(101),I=t(104),P=t(99),A=t(107),M=F.f,k=P.f,N=O.f,j=e.Symbol,R=e.JSON,T=R&&R.stringify,L=\"prototype\",C=p(\"_hidden\"),G=p(\"toPrimitive\"),D={}.propertyIsEnumerable,U=s(\"symbol-registry\"),W=s(\"symbols\"),V=s(\"op-symbols\"),B=Object[L],q=\"function\"==typeof j&&!!I.f,Y=e.QObject,z=!Y||!Y[L]||!Y[L].findChild,X=i&&f(function(){return 7!=E(k({},\"a\",{get:function(){return k(this,\"a\",{value:7}).a}})).a})?function(t,n,r){var e=M(B,n);e&&delete B[n],k(t,n,r),e&&t!==B&&k(B,n,e)}:k,$=q&&\"symbol\"==typeof j.iterator?function(t){return\"symbol\"==typeof t}:function(t){return t instanceof j},Q=function defineProperty(t,n,r){return t===B&&Q(V,n,r),x(t),n=w(n,!0),x(r),u(W,n)?(r.enumerable?(u(t,C)&&t[C][n]&&(t[C][n]=!1),r=E(r,{enumerable:_(0,!1)})):(u(t,C)||k(t,C,_(1,{})),t[C][n]=!0),X(t,n,r)):k(t,n,r)};q||(c((j=function Symbol(){if(this instanceof j)throw TypeError(\"Symbol is not a constructor!\");var n=h(0<arguments.length?arguments[0]:void 0),r=function(t){this===B&&r.call(V,t),u(this,C)&&u(this[C],n)&&(this[C][n]=!1),X(this,n,_(1,t))};return i&&z&&X(B,n,{configurable:!0,set:r}),B1(n)})[L],\"toString\",function toString(){return this._k}),F.f=H1,P.f=Q,t(103).f=O.f=I1,t(108).f=G1,I.f=J1,i&&!t(89)&&c(B,\"propertyIsEnumerable\",G1,!0),v.f=function(t){return B1(p(t))}),o(o.G+o.W+o.F*!q,{Symbol:j});for(var Z=\"hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables\".split(\",\"),J=0;Z.length>J;)p(Z[J++]);for(var H=A(p.store),K=0;H.length>K;)g(H[K++]);o(o.S+o.F*!q,\"Symbol\",{for:function(t){return u(U,t+=\"\")?U[t]:U[t]=j(t)},keyFor:function keyFor(t){if(!$(t))throw TypeError(t+\" is not a symbol!\");for(var n in U)if(U[n]===t)return n},useSetter:function(){z=!0},useSimple:function(){z=!1}}),o(o.S+o.F*!q,\"Object\",{create:function create(t,n){return void 0===n?E(t):E1(E(t),n)},defineProperty:Q,defineProperties:E1,getOwnPropertyDescriptor:H1,getOwnPropertyNames:I1,getOwnPropertySymbols:J1});var tt=f(function(){I.f(1)});o(o.S+o.F*tt,\"Object\",{getOwnPropertySymbols:function getOwnPropertySymbols(t){return I.f(S(t))}}),R&&o(o.S+o.F*(!q||f(function(){var t=j();return\"[null]\"!=T([t])||\"{}\"!=T({a:t})||\"{}\"!=T(Object(t))})),\"JSON\",{stringify:function stringify(t){for(var n,r,e=[t],i=1;i<arguments.length;)e.push(arguments[i++]);if(r=n=e[1],(m(n)||void 0!==t)&&!$(t))return d(n)||(n=function(t,n){if(\"function\"==typeof r&&(n=r.call(this,t,n)),!$(n))return n}),e[1]=n,T.apply(R,e)}}),j[L][G]||t(72)(j[L],G,j[L].valueOf),l(j,\"Symbol\"),l(Math,\"Math\",!0),l(e.JSON,\"JSON\",!0)},{101:101,102:102,103:103,104:104,107:107,108:108,116:116,118:118,124:124,126:126,140:140,142:142,143:143,147:147,150:150,151:151,152:152,38:38,58:58,61:61,62:62,64:64,70:70,71:71,72:72,79:79,81:81,89:89,94:94,98:98,99:99}],279:[function(t,n,r){\"use strict\";var e=t(62),i=t(146),o=t(145),f=t(38),s=t(137),l=t(141),u=t(81),c=t(70).ArrayBuffer,h=t(127),p=o.ArrayBuffer,v=o.DataView,a=i.ABV&&c.isView,g=p.prototype.slice,y=i.VIEW,d=\"ArrayBuffer\";e(e.G+e.W+e.F*(c!==p),{ArrayBuffer:p}),e(e.S+e.F*!i.CONSTR,d,{isView:function isView(t){return a&&a(t)||u(t)&&y in t}}),e(e.P+e.U+e.F*t(64)(function(){return!new p(2).slice(1,void 0).byteLength}),d,{slice:function slice(t,n){if(void 0!==g&&void 0===n)return g.call(f(this),t);for(var r=f(this).byteLength,e=s(t,r),i=s(void 0===n?r:n,r),o=new(h(this,p))(l(i-e)),u=new v(this),c=new v(o),a=0;e<i;)c.setUint8(a++,u.getUint8(e++));return o}}),t(123)(d)},{123:123,127:127,137:137,141:141,145:145,146:146,38:38,62:62,64:64,70:70,81:81}],280:[function(t,n,r){var e=t(62);e(e.G+e.W+e.F*!t(146).ABV,{DataView:t(145).DataView})},{145:145,146:146,62:62}],281:[function(t,n,r){t(144)(\"Float32\",4,function(e){return function Float32Array(t,n,r){return e(this,t,n,r)}})},{144:144}],282:[function(t,n,r){t(144)(\"Float64\",8,function(e){return function Float64Array(t,n,r){return e(this,t,n,r)}})},{144:144}],283:[function(t,n,r){t(144)(\"Int16\",2,function(e){return function Int16Array(t,n,r){return e(this,t,n,r)}})},{144:144}],284:[function(t,n,r){t(144)(\"Int32\",4,function(e){return function Int32Array(t,n,r){return e(this,t,n,r)}})},{144:144}],285:[function(t,n,r){t(144)(\"Int8\",1,function(e){return function Int8Array(t,n,r){return e(this,t,n,r)}})},{144:144}],286:[function(t,n,r){t(144)(\"Uint16\",2,function(e){return function Uint16Array(t,n,r){return e(this,t,n,r)}})},{144:144}],287:[function(t,n,r){t(144)(\"Uint32\",4,function(e){return function Uint32Array(t,n,r){return e(this,t,n,r)}})},{144:144}],288:[function(t,n,r){t(144)(\"Uint8\",1,function(e){return function Uint8Array(t,n,r){return e(this,t,n,r)}})},{144:144}],289:[function(t,n,r){t(144)(\"Uint8\",1,function(e){return function Uint8ClampedArray(t,n,r){return e(this,t,n,r)}},!0)},{144:144}],290:[function(t,n,r){\"use strict\";function R4(t){return function WeakMap(){return t(this,0<arguments.length?arguments[0]:void 0)}}var o,e=t(70),i=t(42)(0),u=t(118),c=t(94),a=t(97),f=t(50),s=t(81),l=t(149),h=t(149),p=!e.ActiveXObject&&\"ActiveXObject\"in e,v=\"WeakMap\",g=c.getWeak,y=Object.isExtensible,d=f.ufstore,x={get:function get(t){if(s(t)){var n=g(t);return!0===n?d(l(this,v)).get(t):n?n[this._i]:void 0}},set:function set(t,n){return f.def(l(this,v),t,n)}},m=n.exports=t(51)(v,R4,x,f,!0,!0);h&&p&&(a((o=f.getConstructor(R4,v)).prototype,x),c.NEED=!0,i([\"delete\",\"has\",\"get\",\"set\"],function(e){var t=m.prototype,i=t[e];u(t,e,function(t,n){if(!s(t)||y(t))return i.call(this,t,n);this._f||(this._f=new o);var r=this._f[e](t,n);return\"set\"==e?this:r})}))},{118:118,149:149,42:42,50:50,51:51,70:70,81:81,94:94,97:97}],291:[function(t,n,r){\"use strict\";var e=t(50),i=t(149),o=\"WeakSet\";t(51)(o,function(t){return function WeakSet(){return t(this,0<arguments.length?arguments[0]:void 0)}},{add:function add(t){return e.def(i(this,o),t,!0)}},e,!1,!0)},{149:149,50:50,51:51}],292:[function(t,n,r){\"use strict\";var e=t(62),i=t(67),o=t(142),u=t(141),c=t(33),a=t(45);e(e.P,\"Array\",{flatMap:function flatMap(t){var n,r,e=o(this);return c(t),n=u(e.length),r=a(e,0),i(r,e,e,n,0,1,t,arguments[1]),r}}),t(35)(\"flatMap\")},{141:141,142:142,33:33,35:35,45:45,62:62,67:67}],293:[function(t,n,r){\"use strict\";var e=t(62),i=t(41)(!0);e(e.P,\"Array\",{includes:function includes(t){return i(this,t,1<arguments.length?arguments[1]:void 0)}}),t(35)(\"includes\")},{35:35,41:41,62:62}],294:[function(t,n,r){var e=t(62),i=t(110)(!0);e(e.S,\"Object\",{entries:function entries(t){return i(t)}})},{110:110,62:62}],295:[function(t,n,r){var e=t(62),a=t(111),f=t(140),s=t(101),l=t(53);e(e.S,\"Object\",{getOwnPropertyDescriptors:function getOwnPropertyDescriptors(t){for(var n,r,e=f(t),i=s.f,o=a(e),u={},c=0;o.length>c;)void 0!==(r=i(e,n=o[c++]))&&l(u,n,r);return u}})},{101:101,111:111,140:140,53:53,62:62}],296:[function(t,n,r){var e=t(62),i=t(110)(!1);e(e.S,\"Object\",{values:function values(t){return i(t)}})},{110:110,62:62}],297:[function(t,n,r){\"use strict\";var e=t(62),i=t(52),o=t(70),u=t(127),c=t(115);e(e.P+e.R,\"Promise\",{finally:function(n){var r=u(this,i.Promise||o.Promise),t=\"function\"==typeof n;return this.then(t?function(t){return c(r,n()).then(function(){return t})}:n,t?function(t){return c(r,n()).then(function(){throw t})}:n)}})},{115:115,127:127,52:52,62:62,70:70}],298:[function(t,n,r){\"use strict\";var e=t(62),i=t(132),o=t(148),u=/Version\\/10\\.\\d+(\\.\\d+)?( Mobile\\/\\w+)? Safari\\//.test(o);e(e.P+e.F*u,\"String\",{padEnd:function padEnd(t){return i(this,t,1<arguments.length?arguments[1]:void 0,!1)}})},{132:132,148:148,62:62}],299:[function(t,n,r){\"use strict\";var e=t(62),i=t(132),o=t(148),u=/Version\\/10\\.\\d+(\\.\\d+)?( Mobile\\/\\w+)? Safari\\//.test(o);e(e.P+e.F*u,\"String\",{padStart:function padStart(t){return i(this,t,1<arguments.length?arguments[1]:void 0,!0)}})},{132:132,148:148,62:62}],300:[function(t,n,r){\"use strict\";t(134)(\"trimLeft\",function(t){return function trimLeft(){return t(this,1)}},\"trimStart\")},{134:134}],301:[function(t,n,r){\"use strict\";t(134)(\"trimRight\",function(t){return function trimRight(){return t(this,2)}},\"trimEnd\")},{134:134}],302:[function(t,n,r){t(150)(\"asyncIterator\")},{150:150}],303:[function(t,n,r){for(var e=t(164),i=t(107),o=t(118),u=t(70),c=t(72),a=t(88),f=t(152),s=f(\"iterator\"),l=f(\"toStringTag\"),h=a.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},v=i(p),g=0;g<v.length;g++){var y,d=v[g],x=p[d],m=u[d],S=m&&m.prototype;if(S&&(S[s]||c(S,s,h),S[l]||c(S,l,d),a[d]=h,x))for(y in e)S[y]||o(S,y,e[y],!0)}},{107:107,118:118,152:152,164:164,70:70,72:72,88:88}],304:[function(t,n,r){var e=t(62),i=t(136);e(e.G+e.B,{setImmediate:i.set,clearImmediate:i.clear})},{136:136,62:62}],305:[function(t,n,r){function y7(i){return function(t,n){var r=2<arguments.length,e=r&&u.call(arguments,2);return i(r?function(){(\"function\"==typeof t?t:Function(t)).apply(this,e)}:t,n)}}var e=t(70),i=t(62),o=t(148),u=[].slice,c=/MSIE .\\./.test(o);i(i.G+i.B+i.F*c,{setTimeout:y7(e.setTimeout),setInterval:y7(e.setInterval)})},{148:148,62:62,70:70}],306:[function(t,n,r){t(305),t(304),t(303),n.exports=t(52)},{303:303,304:304,305:305,52:52}],307:[function(t,n,r){var e=function(u){\"use strict\";var c,t=Object.prototype,f=t.hasOwnProperty,n=\"function\"==typeof Symbol?Symbol:{},i=n.iterator||\"@@iterator\",r=n.asyncIterator||\"@@asyncIterator\",e=n.toStringTag||\"@@toStringTag\";function wrap(t,n,r,e){var i=n&&n.prototype instanceof Generator?n:Generator,o=Object.create(i.prototype),u=new Context(e||[]);return o._invoke=function makeInvokeMethod(o,u,c){var a=s;return function invoke(t,n){if(a===h)throw new Error(\"Generator is already running\");if(a===p){if(\"throw\"===t)throw n;return doneResult()}for(c.method=t,c.arg=n;;){var r=c.delegate;if(r){var e=maybeInvokeDelegate(r,c);if(e){if(e===v)continue;return e}}if(\"next\"===c.method)c.sent=c._sent=c.arg;else if(\"throw\"===c.method){if(a===s)throw a=p,c.arg;c.dispatchException(c.arg)}else\"return\"===c.method&&c.abrupt(\"return\",c.arg);a=h;var i=tryCatch(o,u,c);if(\"normal\"===i.type){if(a=c.done?p:l,i.arg===v)continue;return{value:i.arg,done:c.done}}\"throw\"===i.type&&(a=p,c.method=\"throw\",c.arg=i.arg)}}}(t,r,u),o}function tryCatch(t,n,r){try{return{type:\"normal\",arg:t.call(n,r)}}catch(t){return{type:\"throw\",arg:t}}}u.wrap=wrap;var s=\"suspendedStart\",l=\"suspendedYield\",h=\"executing\",p=\"completed\",v={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var o={};o[i]=function(){return this};var a=Object.getPrototypeOf,g=a&&a(a(values([])));g&&g!==t&&f.call(g,i)&&(o=g);var y=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(o);function defineIteratorMethods(t){[\"next\",\"throw\",\"return\"].forEach(function(n){t[n]=function(t){return this._invoke(n,t)}})}function AsyncIterator(c,a){var t;this._invoke=function enqueue(r,e){function callInvokeWithMethodAndArg(){return new a(function(t,n){!function invoke(t,n,r,e){var i=tryCatch(c[t],c,n);if(\"throw\"!==i.type){var o=i.arg,u=o.value;return u&&\"object\"==typeof u&&f.call(u,\"__await\")?a.resolve(u.__await).then(function(t){invoke(\"next\",t,r,e)},function(t){invoke(\"throw\",t,r,e)}):a.resolve(u).then(function(t){o.value=t,r(o)},function(t){return invoke(\"throw\",t,r,e)})}e(i.arg)}(r,e,t,n)})}return t=t?t.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(t,n){var r=t.iterator[n.method];if(r===c){if(n.delegate=null,\"throw\"===n.method){if(t.iterator.return&&(n.method=\"return\",n.arg=c,maybeInvokeDelegate(t,n),\"throw\"===n.method))return v;n.method=\"throw\",n.arg=new TypeError(\"The iterator does not provide a 'throw' method\")}return v}var e=tryCatch(r,t.iterator,n.arg);if(\"throw\"===e.type)return n.method=\"throw\",n.arg=e.arg,n.delegate=null,v;var i=e.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,\"return\"!==n.method&&(n.method=\"next\",n.arg=c),n.delegate=null,v):i:(n.method=\"throw\",n.arg=new TypeError(\"iterator result is not an object\"),n.delegate=null,v)}function pushTryEntry(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function resetTryEntry(t){var n=t.completion||{};n.type=\"normal\",delete n.arg,t.completion=n}function Context(t){this.tryEntries=[{tryLoc:\"root\"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var n=t[i];if(n)return n.call(t);if(\"function\"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,e=function next(){for(;++r<t.length;)if(f.call(t,r))return next.value=t[r],next.done=!1,next;return next.value=c,next.done=!0,next};return e.next=e}}return{next:doneResult}}function doneResult(){return{value:c,done:!0}}return GeneratorFunction.prototype=y.constructor=GeneratorFunctionPrototype,GeneratorFunctionPrototype.constructor=GeneratorFunction,GeneratorFunctionPrototype[e]=GeneratorFunction.displayName=\"GeneratorFunction\",u.isGeneratorFunction=function(t){var n=\"function\"==typeof t&&t.constructor;return!!n&&(n===GeneratorFunction||\"GeneratorFunction\"===(n.displayName||n.name))},u.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,e in t||(t[e]=\"GeneratorFunction\")),t.prototype=Object.create(y),t},u.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),AsyncIterator.prototype[r]=function(){return this},u.AsyncIterator=AsyncIterator,u.async=function(t,n,r,e,i){void 0===i&&(i=Promise);var o=new AsyncIterator(wrap(t,n,r,e),i);return u.isGeneratorFunction(n)?o:o.next().then(function(t){return t.done?t.value:o.next()})},defineIteratorMethods(y),y[e]=\"Generator\",y[i]=function(){return this},y.toString=function(){return\"[object Generator]\"},u.keys=function(n){var r=[];for(var t in n)r.push(t);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in n)return next.value=t,next.done=!1,next}return next.done=!0,next}},u.values=values,Context.prototype={constructor:Context,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=c,this.done=!1,this.delegate=null,this.method=\"next\",this.arg=c,this.tryEntries.forEach(resetTryEntry),!t)for(var n in this)\"t\"===n.charAt(0)&&f.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=c)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if(\"throw\"===t.type)throw t.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var e=this;function handle(t,n){return i.type=\"throw\",i.arg=r,e.next=t,n&&(e.method=\"next\",e.arg=c),!!n}for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t],i=n.completion;if(\"root\"===n.tryLoc)return handle(\"end\");if(n.tryLoc<=this.prev){var o=f.call(n,\"catchLoc\"),u=f.call(n,\"finallyLoc\");if(o&&u){if(this.prev<n.catchLoc)return handle(n.catchLoc,!0);if(this.prev<n.finallyLoc)return handle(n.finallyLoc)}else if(o){if(this.prev<n.catchLoc)return handle(n.catchLoc,!0)}else{if(!u)throw new Error(\"try statement without catch or finally\");if(this.prev<n.finallyLoc)return handle(n.finallyLoc)}}}},abrupt:function(t,n){for(var r=this.tryEntries.length-1;0<=r;--r){var e=this.tryEntries[r];if(e.tryLoc<=this.prev&&f.call(e,\"finallyLoc\")&&this.prev<e.finallyLoc){var i=e;break}}i&&(\"break\"===t||\"continue\"===t)&&i.tryLoc<=n&&n<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=n,i?(this.method=\"next\",this.next=i.finallyLoc,v):this.complete(o)},complete:function(t,n){if(\"throw\"===t.type)throw t.arg;return\"break\"===t.type||\"continue\"===t.type?this.next=t.arg:\"return\"===t.type?(this.rval=this.arg=t.arg,this.method=\"return\",this.next=\"end\"):\"normal\"===t.type&&n&&(this.next=n),v},finish:function(t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),v}},catch:function(t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc===t){var e=r.completion;if(\"throw\"===e.type){var i=e.arg;resetTryEntry(r)}return i}}throw new Error(\"illegal catch attempt\")},delegateYield:function(t,n,r){return this.delegate={iterator:values(t),resultName:n,nextLoc:r},\"next\"===this.method&&(this.arg=c),v}},u}(\"object\"==typeof n?n.exports:{});try{regeneratorRuntime=e}catch(t){Function(\"r\",\"regeneratorRuntime = r\")(e)}},{}]},{},[1]);\n" + "</script>\n  <script>" + "(function(e,t){'object'==typeof exports&&'object'==typeof module?module.exports=t(require('xmldom'),function(){try{return require('jszip')}catch(t){}}()):'function'==typeof define&&define.amd?define(['xmldom','jszip'],t):'object'==typeof exports?exports.ePub=t(require('xmldom'),function(){try{return require('jszip')}catch(t){}}()):e.ePub=t(e.xmldom,e.jszip)})('undefined'==typeof self?this:self,function(e,t){var n=String.prototype,a=Math.sin,r=Math.round,s=Math.log,o=Math.LN2,l=Math.pow,p=Math.floor,u=Math.abs,d=Math.ceil,c=Math.max,g=Math.min,y=String.fromCharCode;return function(e){function t(a){if(n[a])return n[a].exports;var r=n[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e['default']}:function(){return e};return t.d(n,'a',n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p='/dist/',t(t.s=60)}([function(e){e.exports={options:{usePureJavaScript:!1}}},function(e,t,n){(function(t,a,r,s){function o(e){if(8!==e&&16!==e&&24!==e&&32!==e)throw new Error('Only 8, 16, 24, or 32 bits supported: '+e)}function l(e){if(this.data='',this.read=0,'string'==typeof e)this.data=e;else if(!(f.isArrayBuffer(e)||f.isArrayBufferView(e)))(e instanceof l||'object'==typeof e&&'string'==typeof e.data&&'number'==typeof e.read)&&(this.data=e.data,this.read=e.read);else if('undefined'!=typeof s&&e instanceof s)this.data=e.toString('binary');else{var t=new Uint8Array(e);try{this.data=y.apply(null,t)}catch(a){for(var n=0;n<t.length;++n)this.putByte(t[n])}}this._constructedStringLength=0}var i=n(0),h=n(123),f=e.exports=i.util=i.util||{};(function(){if('undefined'!=typeof t&&t.nextTick&&!t.browser)return f.nextTick=t.nextTick,void(f.setImmediate='function'==typeof a?a:f.nextTick);if('function'==typeof a)return f.setImmediate=function(){return a.apply(void 0,arguments)},void(f.nextTick=function(e){return a(e)});if(f.setImmediate=function(e){setTimeout(e,0)},'undefined'!=typeof window&&'function'==typeof window.postMessage){var e='forge.setImmediate',n=[];f.setImmediate=function(t){n.push(t),1===n.length&&window.postMessage(e,'*')},window.addEventListener('message',function(t){if(t.source===window&&t.data===e){t.stopPropagation();var a=n.slice();n.length=0,a.forEach(function(e){e()})}},!0)}if('undefined'!=typeof MutationObserver){var r=Date.now(),i=!0,s=document.createElement('div'),n=[];new MutationObserver(function(){var e=n.slice();n.length=0,e.forEach(function(e){e()})}).observe(s,{attributes:!0});var o=f.setImmediate;f.setImmediate=function(e){15<Date.now()-r?(r=Date.now(),o(e)):(n.push(e),1===n.length&&s.setAttribute('a',i=!i))}}f.nextTick=f.setImmediate})(),f.isNodejs='undefined'!=typeof t&&t.versions&&t.versions.node,f.globalScope=function(){return f.isNodejs?r:'undefined'==typeof self?window:self}(),f.isArray=Array.isArray||function(e){return'[object Array]'===Object.prototype.toString.call(e)},f.isArrayBuffer=function(e){return'undefined'!=typeof ArrayBuffer&&e instanceof ArrayBuffer},f.isArrayBufferView=function(e){return e&&f.isArrayBuffer(e.buffer)&&e.byteLength!==void 0},f.ByteBuffer=l,f.ByteStringBuffer=l;f.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,this._constructedStringLength>4096&&(this.data.substr(0,1),this._constructedStringLength=0)},f.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},f.ByteStringBuffer.prototype.isEmpty=function(){return 0>=this.length()},f.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(y(e))},f.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=y(e);for(var n=this.data;0<t;)1&t&&(n+=e),t>>>=1,0<t&&(e+=e);return this.data=n,this._optimizeConstructedString(t),this},f.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this},f.ByteStringBuffer.prototype.putString=function(e){return this.putBytes(f.encodeUtf8(e))},f.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(y(255&e>>8)+y(255&e))},f.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(y(255&e>>16)+y(255&e>>8)+y(255&e))},f.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(y(255&e>>24)+y(255&e>>16)+y(255&e>>8)+y(255&e))},f.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(y(255&e)+y(255&e>>8))},f.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(y(255&e)+y(255&e>>8)+y(255&e>>16))},f.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(y(255&e)+y(255&e>>8)+y(255&e>>16)+y(255&e>>24))},f.ByteStringBuffer.prototype.putInt=function(e,t){o(t);var n='';do t-=8,n+=y(255&e>>t);while(0<t);return this.putBytes(n)},f.ByteStringBuffer.prototype.putSignedInt=function(e,t){return 0>e&&(e+=2<<t-1),this.putInt(e,t)},f.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())},f.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},f.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e},f.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e},f.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e},f.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e},f.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e},f.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e},f.ByteStringBuffer.prototype.getInt=function(e){o(e);var t=0;do t=(t<<8)+this.data.charCodeAt(this.read++),e-=8;while(0<e);return t},f.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),n=2<<e-2;return t>=n&&(t-=n<<1),t},f.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=g(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t='':(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},f.ByteStringBuffer.prototype.bytes=function(e){return'undefined'==typeof e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},f.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)},f.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+y(t)+this.data.substr(this.read+e+1),this},f.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},f.ByteStringBuffer.prototype.copy=function(){var e=f.createBuffer(this.data);return e.read=this.read,e},f.ByteStringBuffer.prototype.compact=function(){return 0<this.read&&(this.data=this.data.slice(this.read),this.read=0),this},f.ByteStringBuffer.prototype.clear=function(){return this.data='',this.read=0,this},f.ByteStringBuffer.prototype.truncate=function(e){var t=c(0,this.length()-e);return this.data=this.data.substr(this.read,t),this.read=0,this},f.ByteStringBuffer.prototype.toHex=function(){for(var e='',t=this.read,n;t<this.data.length;++t)n=this.data.charCodeAt(t),16>n&&(e+='0'),e+=n.toString(16);return e},f.ByteStringBuffer.prototype.toString=function(){return f.decodeUtf8(this.bytes())},f.DataBuffer=function(e,t){t=t||{},this.read=t.readOffset||0,this.growSize=t.growSize||1024;var n=f.isArrayBuffer(e),a=f.isArrayBufferView(e);return n||a?(this.data=n?new DataView(e):new DataView(e.buffer,e.byteOffset,e.byteLength),void(this.write='writeOffset'in t?t.writeOffset:this.data.byteLength)):void(this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!==e&&e!==void 0&&this.putBytes(e),'writeOffset'in t&&(this.write=t.writeOffset))},f.DataBuffer.prototype.length=function(){return this.write-this.read},f.DataBuffer.prototype.isEmpty=function(){return 0>=this.length()},f.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=c(t||this.growSize,e);var n=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),a=new Uint8Array(this.length()+t);return a.set(n),this.data=new DataView(a.buffer),this},f.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this},f.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var n=0;n<t;++n)this.data.setUint8(e);return this},f.DataBuffer.prototype.putBytes=function(e,t){if(f.isArrayBufferView(e)){var n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),a=n.byteLength-n.byteOffset;this.accommodate(a);var r=new Uint8Array(this.data.buffer,this.write);return r.set(n),this.write+=a,this}if(f.isArrayBuffer(e)){var n=new Uint8Array(e);this.accommodate(n.byteLength);var r=new Uint8Array(this.data.buffer);return r.set(n,this.write),this.write+=n.byteLength,this}if(e instanceof f.DataBuffer||'object'==typeof e&&'number'==typeof e.read&&'number'==typeof e.write&&f.isArrayBufferView(e.data)){var n=new Uint8Array(e.data.byteLength,e.read,e.length());this.accommodate(n.byteLength);var r=new Uint8Array(e.data.byteLength,this.write);return r.set(n),this.write+=n.byteLength,this}if(e instanceof f.ByteStringBuffer&&(e=e.data,t='binary'),t=t||'binary','string'==typeof e){var i;if('hex'===t)return this.accommodate(d(e.length/2)),i=new Uint8Array(this.data.buffer,this.write),this.write+=f.binary.hex.decode(e,i,this.write),this;if('base64'===t)return this.accommodate(3*d(e.length/4)),i=new Uint8Array(this.data.buffer,this.write),this.write+=f.binary.base64.decode(e,i,this.write),this;if('utf8'===t&&(e=f.encodeUtf8(e),t='binary'),'binary'===t||'raw'===t)return this.accommodate(e.length),i=new Uint8Array(this.data.buffer,this.write),this.write+=f.binary.raw.decode(i),this;if('utf16'===t)return this.accommodate(2*e.length),i=new Uint16Array(this.data.buffer,this.write),this.write+=f.text.utf16.encode(i),this;throw new Error('Invalid encoding: '+t)}throw Error('Invalid parameter: '+e)},f.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this},f.DataBuffer.prototype.putString=function(e){return this.putBytes(e,'utf16')},f.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this},f.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,65535&e>>8),this.data.setInt8(this.write,255&e>>16),this.write+=3,this},f.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this},f.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this},f.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,255&e>>16),this.data.setInt16(this.write,65535&e>>8,!0),this.write+=3,this},f.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this},f.DataBuffer.prototype.putInt=function(e,t){o(t),this.accommodate(t/8);do t-=8,this.data.setInt8(this.write++,255&e>>t);while(0<t);return this},f.DataBuffer.prototype.putSignedInt=function(e,t){return o(t),this.accommodate(t/8),0>e&&(e+=2<<t-1),this.putInt(e,t)},f.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},f.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e},f.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e},f.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e},f.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e},f.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e},f.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e},f.DataBuffer.prototype.getInt=function(e){o(e);var t=0;do t=(t<<8)+this.data.getInt8(this.read++),e-=8;while(0<e);return t},f.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),n=2<<e-2;return t>=n&&(t-=n<<1),t},f.DataBuffer.prototype.getBytes=function(e){var t;return e?(e=g(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t='':(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},f.DataBuffer.prototype.bytes=function(e){return'undefined'==typeof e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},f.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)},f.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this},f.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},f.DataBuffer.prototype.copy=function(){return new f.DataBuffer(this)},f.DataBuffer.prototype.compact=function(){if(0<this.read){var e=new Uint8Array(this.data.buffer,this.read),t=new Uint8Array(e.byteLength);t.set(e),this.data=new DataView(t),this.write-=this.read,this.read=0}return this},f.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},f.DataBuffer.prototype.truncate=function(e){return this.write=c(0,this.length()-e),this.read=g(this.read,this.write),this},f.DataBuffer.prototype.toHex=function(){for(var e='',t=this.read,n;t<this.data.byteLength;++t)n=this.data.getUint8(t),16>n&&(e+='0'),e+=n.toString(16);return e},f.DataBuffer.prototype.toString=function(e){var t=new Uint8Array(this.data,this.read,this.length());if(e=e||'utf8','binary'===e||'raw'===e)return f.binary.raw.encode(t);if('hex'===e)return f.binary.hex.encode(t);if('base64'===e)return f.binary.base64.encode(t);if('utf8'===e)return f.text.utf8.decode(t);if('utf16'===e)return f.text.utf16.decode(t);throw new Error('Invalid encoding: '+e)},f.createBuffer=function(e,t){return t=t||'raw',void 0!==e&&'utf8'===t&&(e=f.encodeUtf8(e)),new f.ByteBuffer(e)},f.fillString=function(e,t){for(var n='';0<t;)1&t&&(n+=e),t>>>=1,0<t&&(e+=e);return n},f.xorBytes=function(e,a,r){for(var n='',s='',o='',t=0,i=0;0<r;--r,++t)s=e.charCodeAt(t)^a.charCodeAt(t),10<=i&&(n+=o,o='',i=0),o+=y(s),++i;return n+=o,n},f.hexToBytes=function(e){var t='',n=0;for(!0&e.length&&(n=1,t+=y(parseInt(e[0],16)));n<e.length;n+=2)t+=y(parseInt(e.substr(n,2),16));return t},f.bytesToHex=function(e){return f.createBuffer(e).toHex()},f.int32ToBytes=function(e){return y(255&e>>24)+y(255&e>>16)+y(255&e>>8)+y(255&e)};var m='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=',E=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],C='123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz';f.encode64=function(e,t){for(var n='',a='',r=0,i,s,o;r<e.length;)i=e.charCodeAt(r++),s=e.charCodeAt(r++),o=e.charCodeAt(r++),n+=m.charAt(i>>2),n+=m.charAt((3&i)<<4|s>>4),isNaN(s)?n+='==':(n+=m.charAt((15&s)<<2|o>>6),n+=isNaN(o)?'=':m.charAt(63&o)),t&&n.length>t&&(a+=n.substr(0,t)+'\\r\\n',n=n.substr(t));return a+=n,a},f.decode64=function(e){e=e.replace(/[^A-Za-z0-9\\+\\/\\=]/g,'');for(var t='',n=0,a,r,i,s;n<e.length;)a=E[e.charCodeAt(n++)-43],r=E[e.charCodeAt(n++)-43],i=E[e.charCodeAt(n++)-43],s=E[e.charCodeAt(n++)-43],t+=y(a<<2|r>>4),64!==i&&(t+=y((15&r)<<4|i>>2),64!==s&&(t+=y((3&i)<<6|s)));return t},f.encodeUtf8=function(e){return unescape(encodeURIComponent(e))},f.decodeUtf8=function(e){return decodeURIComponent(escape(e))},f.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:h.encode,decode:h.decode}},f.binary.raw.encode=function(e){return y.apply(null,e)},f.binary.raw.decode=function(e,t,n){var a=t;a||(a=new Uint8Array(e.length)),n=n||0;for(var r=n,s=0;s<e.length;++s)a[r++]=e.charCodeAt(s);return t?r-n:a},f.binary.hex.encode=f.bytesToHex,f.binary.hex.decode=function(e,t,n){var a=t;a||(a=new Uint8Array(d(e.length/2))),n=n||0;var r=0,i=n;for(1&e.length&&(r=1,a[i++]=parseInt(e[0],16));r<e.length;r+=2)a[i++]=parseInt(e.substr(r,2),16);return t?i-n:a},f.binary.base64.encode=function(e,t){for(var n='',a='',r=0,i,s,o;r<e.byteLength;)i=e[r++],s=e[r++],o=e[r++],n+=m.charAt(i>>2),n+=m.charAt((3&i)<<4|s>>4),isNaN(s)?n+='==':(n+=m.charAt((15&s)<<2|o>>6),n+=isNaN(o)?'=':m.charAt(63&o)),t&&n.length>t&&(a+=n.substr(0,t)+'\\r\\n',n=n.substr(t));return a+=n,a},f.binary.base64.decode=function(e,t,n){var a=t;a||(a=new Uint8Array(3*d(e.length/4))),e=e.replace(/[^A-Za-z0-9\\+\\/\\=]/g,''),n=n||0;for(var r=0,i=n,s,o,l,c;r<e.length;)s=E[e.charCodeAt(r++)-43],o=E[e.charCodeAt(r++)-43],l=E[e.charCodeAt(r++)-43],c=E[e.charCodeAt(r++)-43],a[i++]=s<<2|o>>4,64!==l&&(a[i++]=(15&o)<<4|l>>2,64!==c&&(a[i++]=(3&l)<<6|c));return t?i-n:a.subarray(0,i)},f.binary.base58.encode=function(e,t){return f.binary.baseN.encode(e,C,t)},f.binary.base58.decode=function(e,t){return f.binary.baseN.decode(e,C,t)},f.text={utf8:{},utf16:{}},f.text.utf8.encode=function(e,t,n){e=f.encodeUtf8(e);var a=t;a||(a=new Uint8Array(e.length)),n=n||0;for(var r=n,s=0;s<e.length;++s)a[r++]=e.charCodeAt(s);return t?r-n:a},f.text.utf8.decode=function(e){return f.decodeUtf8(y.apply(null,e))},f.text.utf16.encode=function(e,t,n){var a=t;a||(a=new Uint8Array(2*e.length));var r=new Uint16Array(a.buffer);n=n||0;for(var s=n,o=n,l=0;l<e.length;++l)r[o++]=e.charCodeAt(l),s+=2;return t?s-n:a},f.text.utf16.decode=function(e){return y.apply(null,new Uint16Array(e.buffer))},f.deflate=function(e,t,n){if(t=f.decode64(e.deflate(f.encode64(t)).rval),n){var a=2,r=t.charCodeAt(1);32&r&&(a=6),t=t.substring(a,t.length-4)}return t},f.inflate=function(e,t){var n=e.inflate(f.encode64(t)).rval;return null===n?null:f.decode64(n)};var v=function(e,t,n){if(!e)throw new Error('WebStorage not available.');var a;if(null===n?a=e.removeItem(t):(n=f.encode64(JSON.stringify(n)),a=e.setItem(t,n)),'undefined'!=typeof a&&!0!==a.rval){var r=new Error(a.error.message);throw r.id=a.error.id,r.name=a.error.name,r}},b=function(e,t){if(!e)throw new Error('WebStorage not available.');var n=e.getItem(t);if(e.init)if(null===n.rval){if(n.error){var a=new Error(n.error.message);throw a.id=n.error.id,a.name=n.error.name,a}n=null}else n=n.rval;return null!==n&&(n=JSON.parse(f.decode64(n))),n},S=function(e,t,n,a){var r=b(e,t);null===r&&(r={}),r[n]=a,v(e,t,r)},T=function(e,t,n){var a=b(e,t);return null!==a&&(a=n in a?a[n]:null),a},I=function(e,t,n){var a=b(e,t);if(null!==a&&n in a){delete a[n];var r=!0;for(var i in a){r=!1;break}r&&(a=null),v(e,t,a)}},A=function(e,t){v(e,t,null)},_=function(e,t,n){var a=null;'undefined'==typeof n&&(n=['web','flash']);var r=!1,i=null,s;for(var o in n){s=n[o];try{if('flash'===s||'both'===s){if(null===t[0])throw new Error('Flash local storage not available.');a=e.apply(this,t),r='flash'==s}('web'===s||'both'===s)&&(t[0]=localStorage,a=e.apply(this,t),r=!0)}catch(e){i=e}if(r)break}if(!r)throw i;return a};f.setItem=function(e,t,n,a,r){_(S,arguments,r)},f.getItem=function(e,t,n,a){return _(T,arguments,a)},f.removeItem=function(e,t,n,a){_(I,arguments,a)},f.clearItems=function(e,t,n){_(A,arguments,n)},f.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},f.format=function(e){for(var t=/%./g,n=0,a=[],r=0,i,s;i=t.exec(e);){s=e.substring(r,t.lastIndex-2),0<s.length&&a.push(s),r=t.lastIndex;var o=i[0][1];'s'===o||'o'===o?n<arguments.length?a.push(arguments[n++ +1]):a.push('<?>'):'%'===o?a.push('%'):a.push('<%'+o+'?>')}return a.push(e.substring(r)),a.join('')},f.formatNumber=function(e,a,r,o){var l=e,p=isNaN(a=u(a))?2:a,c=r===void 0?',':r,d=o===void 0?'.':o,t=0>l?'-':'',s=parseInt(l=u(+l||0).toFixed(p),10)+'',i=3<s.length?s.length%3:0;return t+(i?s.substr(0,i)+d:'')+s.substr(i).replace(/(\\d{3})(?=\\d)/g,'$1'+d)+(p?c+u(l-s).toFixed(p).slice(2):'')},f.formatSize=function(e){return e=1073741824<=e?f.formatNumber(e/1073741824,2,'.','')+' GiB':1048576<=e?f.formatNumber(e/1048576,2,'.','')+' MiB':1024<=e?f.formatNumber(e/1024,0)+' KiB':f.formatNumber(e,0)+' bytes',e},f.bytesFromIP=function(e){return-1===e.indexOf('.')?-1===e.indexOf(':')?null:f.bytesFromIPv6(e):f.bytesFromIPv4(e)},f.bytesFromIPv4=function(e){if(e=e.split('.'),4!==e.length)return null;for(var t=f.createBuffer(),n=0,a;n<e.length;++n){if(a=parseInt(e[n],10),isNaN(a))return null;t.putByte(a)}return t.getBytes()},f.bytesFromIPv6=function(e){var t=0;e=e.split(':').filter(function(n){return 0===n.length&&++t,!0});for(var n=2*(8-e.length+t),a=f.createBuffer(),r=0;8>r;++r){if(!e[r]||0===e[r].length){a.fillWithByte(0,n),n=0;continue}var i=f.hexToBytes(e[r]);2>i.length&&a.putByte(0),a.putBytes(i)}return a.getBytes()},f.bytesToIP=function(e){return 4===e.length?f.bytesToIPv4(e):16===e.length?f.bytesToIPv6(e):null},f.bytesToIPv4=function(e){if(4!==e.length)return null;for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t.join('.')},f.bytesToIPv6=function(e){if(16!==e.length)return null;for(var t=[],n=[],a=0,r=0,i;r<e.length;r+=2){for(i=f.bytesToHex(e[r]+e[r+1]);'0'===i[0]&&'0'!==i;)i=i.substr(1);if('0'===i){var s=n[n.length-1],o=t.length;s&&o===s.end+1?(s.end=o,s.end-s.start>n[a].end-n[a].start&&(a=n.length-1)):n.push({start:o,end:o})}t.push(i)}if(0<n.length){var l=n[a];0<l.end-l.start&&(t.splice(l.start,l.end-l.start+1,''),0===l.start&&t.unshift(''),7===l.end&&t.push(''))}return t.join(':')},f.estimateCores=function(e,t){function n(e,i,o){if(0===i){var l=p(e.reduce(function(e,t){return e+t},0)/e.length);return f.cores=c(1,l),URL.revokeObjectURL(s),t(null,f.cores)}a(o,function(t,a){e.push(r(o,a)),n(e,i-1,o)})}function a(t,e){for(var n=[],a=[],r=0,i;r<t;++r)i=new Worker(s),i.addEventListener('message',function(r){if(a.push(r.data),a.length===t){for(var s=0;s<t;++s)n[s].terminate();e(null,a)}}),n.push(i);for(var r=0;r<t;++r)n[r].postMessage(r)}function r(e,t){for(var a=[],r=0;r<e;++r)for(var n=t[r],s=a[r]=[],o=0;o<e;++o)if(r!==o){var i=t[o];(n.st>i.st&&n.st<i.et||i.st>n.st&&i.st<n.et)&&s.push(o)}return a.reduce(function(e,t){return c(e,t.length)},0)}if('function'==typeof e&&(t=e,e={}),e=e||{},'cores'in f&&!e.update)return t(null,f.cores);if('undefined'!=typeof navigator&&'hardwareConcurrency'in navigator&&0<navigator.hardwareConcurrency)return f.cores=navigator.hardwareConcurrency,t(null,f.cores);if('undefined'==typeof Worker)return f.cores=1,t(null,f.cores);if('undefined'==typeof Blob)return f.cores=2,t(null,f.cores);var s=URL.createObjectURL(new Blob(['(',function(){self.addEventListener('message',function(){for(var e=Date.now(),t=e+4;Date.now()<t;);self.postMessage({st:e,et:t})})}.toString(),')()'],{type:'application/javascript'}));n([],5,16)}}).call(t,n(32),n(118).setImmediate,n(9),n(20).Buffer)},function(e,t,n){'use strict';function a(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function r(){var e=new Date().getTime(),t='xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(t){var n=0|(e+16*Math.random())%16;return e=p(e/16),('x'==t?n:8|7&n).toString(16)});return t}function i(e){return!isNaN(parseFloat(e))&&isFinite(e)}function s(e,t,n,a,r){var i=a||0,o=r||t.length,l=parseInt(i+(o-i)/2),d;return(n||(n=function(e,t){return e>t?1:e<t?-1:e==t?0:void 0}),0>=o-i)?l:(d=n(t[l],e),1==o-i?0<=d?l:l+1:0===d?l:-1===d?s(e,t,n,l,o):s(e,t,n,i,l))}function o(e,t,n,a,r){var i=a||0,s=r||t.length,l=parseInt(i+(s-i)/2),d;return(n||(n=function(e,t){return e>t?1:e<t?-1:e==t?0:void 0}),0>=s-i)?-1:(d=n(t[l],e),1==s-i?0===d?l:-1:0===d?l:-1===d?o(e,t,n,l,s):o(e,t,n,i,l))}function l(e,t){for(var n=e.parentNode,a=n.childNodes,r=-1,s=0,i;s<a.length&&(i=a[s],i.nodeType===t&&r++,i!=e);s++);return r}function d(e,t){return new Blob([e],{type:t})}function u(e,t){return'undefined'==typeof e.querySelector?e.getElementsByTagName(t):e.querySelectorAll(t)}function g(e,t,n){for(var a=document.createTreeWalker(e,n,null,!1),r=void 0;r=a.nextNode();)t(r)}function h(e,t){if(t(e))return!0;if(e=e.firstChild,e)do{var n=h(e,t);if(n)return!0;e=e.nextSibling}while(e)}function y(e){for(var t=[e];e;e=e.parentNode)t.unshift(e);return t}Object.defineProperty(t,'__esModule',{value:!0});var f=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();t.uuid=r,t.documentHeight=function(){return c(document.documentElement.clientHeight,document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight)},t.isElement=function(e){return!!(e&&1==e.nodeType)},t.isNumber=i,t.isFloat=function(e){var t=parseFloat(e);return!1!==i(e)&&('string'==typeof e&&-1<e.indexOf('.')||p(t)!==t)},t.prefixed=function(e){var t=['-webkit-','-webkit-','-moz-','-o-','-ms-'],n=e.toLowerCase(),a=['Webkit','webkit','Moz','O','ms'].length;if('undefined'==typeof document||'undefined'!=typeof document.body.style[n])return e;for(var r=0;r<a;r++)if('undefined'!=typeof document.body.style[t[r]+n])return t[r]+n;return e},t.defaults=function(e){for(var t=1,n=arguments.length,a;t<n;t++)for(var r in a=arguments[t],a)void 0===e[r]&&(e[r]=a[r]);return e},t.extend=function(e){var t=[].slice.call(arguments,1);return t.forEach(function(t){t&&Object.getOwnPropertyNames(t).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}),e},t.insert=function(e,t,n){var a=s(e,t,n);return t.splice(a,0,e),a},t.locationOf=s,t.indexOfSorted=o,t.bounds=function(e){var t=window.getComputedStyle(e),n=0,a=0;return['width','paddingRight','paddingLeft','marginRight','marginLeft','borderRightWidth','borderLeftWidth'].forEach(function(e){n+=parseFloat(t[e])||0}),['height','paddingTop','paddingBottom','marginTop','marginBottom','borderTopWidth','borderBottomWidth'].forEach(function(e){a+=parseFloat(t[e])||0}),{height:a,width:n}},t.borders=function(e){var t=window.getComputedStyle(e),n=0,a=0;return['paddingRight','paddingLeft','marginRight','marginLeft','borderRightWidth','borderLeftWidth'].forEach(function(e){n+=parseFloat(t[e])||0}),['paddingTop','paddingBottom','marginTop','marginBottom','borderTopWidth','borderBottomWidth'].forEach(function(e){a+=parseFloat(t[e])||0}),{height:a,width:n}},t.nodeBounds=function(e){var t=void 0,n=e.ownerDocument;if(e.nodeType==Node.TEXT_NODE){var a=n.createRange();a.selectNodeContents(e),t=a.getBoundingClientRect()}else t=e.getBoundingClientRect();return t},t.windowBounds=function(){var e=window.innerWidth,t=window.innerHeight;return{top:0,left:0,right:e,bottom:t,width:e,height:t}},t.indexOfNode=l,t.indexOfTextNode=function(e){return l(e,C)},t.indexOfElementNode=function(e){return l(e,E)},t.isXml=function(e){return-1<['xml','opf','ncx'].indexOf(e)},t.createBlob=d,t.createBlobUrl=function(e,t){var n=d(e,t),a;return a=v.createObjectURL(n),a},t.revokeBlobUrl=function(e){return v.revokeObjectURL(e)},t.createBase64Url=function(e,t){var n,a;if('string'==typeof e)return n=btoa(encodeURIComponent(e)),a='data:'+t+';base64,'+n,a},t.type=function(e){return Object.prototype.toString.call(e).slice(8,-1)},t.parse=function(e,t,a){var r,i;return i='undefined'==typeof DOMParser||a?n(80).DOMParser:DOMParser,65279===e.charCodeAt(0)&&(e=e.slice(1)),r=new i().parseFromString(e,t),r},t.qs=function(e,t){var n;if(!e)throw new Error('No Element Provided');return'undefined'==typeof e.querySelector?(n=e.getElementsByTagName(t),n.length)?n[0]:void 0:e.querySelector(t)},t.qsa=u,t.qsp=function(e,t,n){var a,r;if('undefined'!=typeof e.querySelector){for(var i in t+='[',n)t+=i+'~=\\''+n[i]+'\\'';return t+=']',e.querySelector(t)}return(a=e.getElementsByTagName(t),r=Array.prototype.slice.call(a,0).filter(function(e){for(var t in n)if(e.getAttribute(t)===n[t])return!0;return!1}),r)?r[0]:void 0},t.sprint=function(e,t){var n=e.ownerDocument||e;'undefined'==typeof n.createTreeWalker?h(e,function(e){e&&3===e.nodeType&&t(e)},!0):g(e,t,NodeFilter.SHOW_TEXT)},t.treeWalker=g,t.walk=h,t.blob2base64=function(e){return new Promise(function(t){var n=new FileReader;n.readAsDataURL(e),n.onloadend=function(){t(n.result)}})},t.defer=function(){var e=this;this.resolve=null,this.reject=null,this.id=r(),this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n}),Object.freeze(this)},t.querySelectorByType=function(e,t,n){var a;if('undefined'!=typeof e.querySelector&&(a=e.querySelector(t+'[*|type=\"'+n+'\"]')),!a||0===a.length){a=u(e,t);for(var r=0;r<a.length;r++)if(a[r].getAttributeNS('http://www.idpf.org/2007/ops','type')===n||a[r].getAttribute('epub:type')===n)return a[r]}else return a},t.findChildren=function(e){for(var t=[],n=e.childNodes,a=0,r;a<n.length;a++)r=n[a],1===r.nodeType&&t.push(r);return t},t.parents=y,t.filterChildren=function(e,t,n){for(var a=[],r=e.childNodes,s=0,i;s<r.length;s++)if(i=r[s],1===i.nodeType&&i.nodeName.toLowerCase()===t){if(n)return i;a.push(i)}if(!n)return a},t.getParentByTagName=function(e,t){var n;if(null!==e&&''!==t)for(n=e.parentNode;1===n.nodeType;){if(n.tagName.toLowerCase()===t)return n;n=n.parentNode}};var m=t.requestAnimationFrame='undefined'!=typeof window&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame),E=1,C=3,v='undefined'==typeof URL?'undefined'==typeof window?void 0:window.URL||window.webkitURL||window.mozURL:URL,b=t.RangeObject=function(){function e(){a(this,e),this.collapsed=!1,this.commonAncestorContainer=void 0,this.endContainer=void 0,this.endOffset=void 0,this.startContainer=void 0,this.startOffset=void 0}return f(e,[{key:'setStart',value:function(e,t){this.startContainer=e,this.startOffset=t,this.endContainer?this.commonAncestorContainer=this._commonAncestorContainer():this.collapse(!0),this._checkCollapsed()}},{key:'setEnd',value:function(e,t){this.endContainer=e,this.endOffset=t,this.startContainer?(this.collapsed=!1,this.commonAncestorContainer=this._commonAncestorContainer()):this.collapse(!1),this._checkCollapsed()}},{key:'collapse',value:function(e){this.collapsed=!0,e?(this.endContainer=this.startContainer,this.endOffset=this.startOffset,this.commonAncestorContainer=this.startContainer.parentNode):(this.startContainer=this.endContainer,this.startOffset=this.endOffset,this.commonAncestorContainer=this.endOffset.parentNode)}},{key:'selectNode',value:function(e){var t=e.parentNode,n=Array.prototype.indexOf.call(t.childNodes,e);this.setStart(t,n),this.setEnd(t,n+1)}},{key:'selectNodeContents',value:function(e){var t=e.childNodes[e.childNodes-1],n=3===e.nodeType?e.textContent.length:parent.childNodes.length;this.setStart(e,0),this.setEnd(e,n)}},{key:'_commonAncestorContainer',value:function(e,t){var n=y(e||this.startContainer),a=y(t||this.endContainer);if(n[0]==a[0])for(var r=0;r<n.length;r++)if(n[r]!=a[r])return n[r-1]}},{key:'_checkCollapsed',value:function(){this.collapsed=this.startContainer===this.endContainer&&this.startOffset===this.endOffset}},{key:'toString',value:function(){}}]),e}()},function(e,t,n){'use strict';function a(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var r='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&'function'==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?'symbol':typeof e},i=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(2),o=1,l=3,d=function(){function e(t,n,i){a(this,e);var o;if(this.str='',this.base={},this.spinePos=0,this.range=!1,this.path={},this.start=null,this.end=null,!(this instanceof e))return new e(t,n,i);if('string'==typeof n?this.base=this.parseComponent(n):'object'===('undefined'==typeof n?'undefined':r(n))&&n.steps&&(this.base=n),o=this.checkType(t),'string'===o)return this.str=t,(0,s.extend)(this,this.parse(t));if('range'===o)return(0,s.extend)(this,this.fromRange(t,this.base,i));if('node'===o)return(0,s.extend)(this,this.fromNode(t,this.base,i));if('EpubCFI'===o&&t.path)return t;if(!t)return this;throw new TypeError('not a valid argument for EpubCFI')}return i(e,[{key:'checkType',value:function(t){return this.isCfiString(t)?'string':t&&'object'===('undefined'==typeof t?'undefined':r(t))&&('Range'===(0,s.type)(t)||'undefined'!=typeof t.startContainer)?'range':t&&'object'===('undefined'==typeof t?'undefined':r(t))&&'undefined'!=typeof t.nodeType?'node':t&&'object'===('undefined'==typeof t?'undefined':r(t))&&t instanceof e&&'EpubCFI'}},{key:'parse',value:function(e){var t={spinePos:-1,range:!1,base:{},path:{},start:null,end:null},n,a,r;return'string'==typeof e?(0===e.indexOf('epubcfi(')&&')'===e[e.length-1]&&(e=e.slice(8,e.length-1)),n=this.getChapterComponent(e),!n)?{spinePos:-1}:(t.base=this.parseComponent(n),a=this.getPathComponent(e),t.path=this.parseComponent(a),r=this.getRange(e),r&&(t.range=!0,t.start=this.parseComponent(r[0]),t.end=this.parseComponent(r[1])),t.spinePos=t.base.steps[1].index,t):{spinePos:-1}}},{key:'parseComponent',value:function(e){var t={steps:[],terminal:{offset:null,assertion:null}},n=e.split(':'),a=n[0].split('/'),r;return 1<n.length&&(r=n[1],t.terminal=this.parseTerminal(r)),''===a[0]&&a.shift(),t.steps=a.map(function(e){return this.parseStep(e)}.bind(this)),t}},{key:'parseStep',value:function(e){var t,n,a,r,i;if(r=e.match(/\\[(.*)\\]/),r&&r[1]&&(i=r[1]),n=parseInt(e),!isNaN(n))return 0==n%2?(t='element',a=n/2-1):(t='text',a=(n-1)/2),{type:t,index:a,id:i||null}}},{key:'parseTerminal',value:function(e){var t=e.match(/\\[(.*)\\]/),n,a;return t&&t[1]?(n=parseInt(e.split('[')[0]),a=t[1]):n=parseInt(e),(0,s.isNumber)(n)||(n=null),{offset:n,assertion:a}}},{key:'getChapterComponent',value:function(e){var t=e.split('!');return t[0]}},{key:'getPathComponent',value:function(e){var t=e.split('!');if(t[1]){var n=t[1].split(',');return n[0]}}},{key:'getRange',value:function(e){var t=e.split(',');return 3===t.length&&[t[1],t[2]]}},{key:'getCharecterOffsetComponent',value:function(e){var t=e.split(':');return t[1]||''}},{key:'joinSteps',value:function(e){return e?e.map(function(e){var t='';return'element'===e.type&&(t+=2*(e.index+1)),'text'===e.type&&(t+=1+2*e.index),e.id&&(t+='['+e.id+']'),t}).join('/'):''}},{key:'segmentString',value:function(e){var t='/';return t+=this.joinSteps(e.steps),e.terminal&&null!=e.terminal.offset&&(t+=':'+e.terminal.offset),e.terminal&&null!=e.terminal.assertion&&(t+='['+e.terminal.assertion+']'),t}},{key:'toString',value:function(){var e='epubcfi(';return e+=this.segmentString(this.base),e+='!',e+=this.segmentString(this.path),this.range&&this.start&&(e+=',',e+=this.segmentString(this.start)),this.range&&this.end&&(e+=',',e+=this.segmentString(this.end)),e+=')',e}},{key:'compare',value:function(t,n){var a,r,s,o,l,l;if('string'==typeof t&&(t=new e(t)),'string'==typeof n&&(n=new e(n)),t.spinePos>n.spinePos)return 1;if(t.spinePos<n.spinePos)return-1;t.range?(a=t.path.steps.concat(t.start.steps),s=t.start.terminal):(a=t.path.steps,s=t.path.terminal),n.range?(r=n.path.steps.concat(n.start.steps),o=n.start.terminal):(r=n.path.steps,o=n.path.terminal);for(var d=0;d<a.length;d++){if(!a[d])return-1;if(!r[d])return 1;if(a[d].index>r[d].index)return 1;if(a[d].index<r[d].index)return-1}return a.length<r.length?-1:s.offset>o.offset?1:s.offset<o.offset?-1:0}},{key:'step',value:function(e){var t=e.nodeType===l?'text':'element';return{id:e.id,tagName:e.tagName,type:t,index:this.position(e)}}},{key:'filteredStep',value:function(e,t){var n=this.filter(e,t),a;if(n)return a=n.nodeType===l?'text':'element',{id:n.id,tagName:n.tagName,type:a,index:this.filteredPosition(n,t)}}},{key:'pathTo',value:function(e,t,n){for(var a={steps:[],terminal:{offset:null,assertion:null}},r=e,i;r&&r.parentNode&&r.parentNode.nodeType!=9;)i=n?this.filteredStep(r,n):this.step(r),i&&a.steps.unshift(i),r=r.parentNode;return null!=t&&0<=t&&(a.terminal.offset=t,'text'!=a.steps[a.steps.length-1].type&&a.steps.push({type:'text',index:0})),a}},{key:'equalStep',value:function(e,t){return e&&t&&e.index===t.index&&e.id===t.id&&e.type===t.type}},{key:'fromRange',value:function(e,t,n){var a={range:!1,base:{},path:{},start:null,end:null},s=e.startContainer,o=e.endContainer,l=e.startOffset,d=e.endOffset,c=!1;if(n&&(c=null!=s.ownerDocument.querySelector('.'+n)),'string'==typeof t?(a.base=this.parseComponent(t),a.spinePos=a.base.steps[1].index):'object'===('undefined'==typeof t?'undefined':r(t))&&(a.base=t),e.collapsed)c&&(l=this.patchOffset(s,l,n)),a.path=this.pathTo(s,l,n);else{a.range=!0,c&&(l=this.patchOffset(s,l,n)),a.start=this.pathTo(s,l,n),c&&(d=this.patchOffset(o,d,n)),a.end=this.pathTo(o,d,n),a.path={steps:[],terminal:null};var p=a.start.steps.length,u;for(u=0;u<p&&this.equalStep(a.start.steps[u],a.end.steps[u]);u++)u===p-1?a.start.terminal===a.end.terminal&&(a.path.steps.push(a.start.steps[u]),a.range=!1):a.path.steps.push(a.start.steps[u]);a.start.steps=a.start.steps.slice(a.path.steps.length),a.end.steps=a.end.steps.slice(a.path.steps.length)}return a}},{key:'fromNode',value:function(e,t,n){var a={range:!1,base:{},path:{},start:null,end:null};return'string'==typeof t?(a.base=this.parseComponent(t),a.spinePos=a.base.steps[1].index):'object'===('undefined'==typeof t?'undefined':r(t))&&(a.base=t),a.path=this.pathTo(e,null,n),a}},{key:'filter',value:function(e,t){var n=!1,a,r,i,s,o;return e.nodeType===l?(n=!0,i=e.parentNode,a=e.parentNode.classList.contains(t)):(n=!1,a=e.classList.contains(t)),a&&n?(s=i.previousSibling,o=i.nextSibling,s&&s.nodeType===l?r=s:o&&o.nodeType===l&&(r=o),r?r:e):a&&!n?!1:e}},{key:'patchOffset',value:function(e,t,n){if(e.nodeType!=l)throw new Error('Anchor must be a text node');var a=e,r=t;for(e.parentNode.classList.contains(n)&&(a=e.parentNode);a.previousSibling;){if(a.previousSibling.nodeType!==o)r+=a.previousSibling.textContent.length;else if(a.previousSibling.classList.contains(n))r+=a.previousSibling.textContent.length;else break;a=a.previousSibling}return r}},{key:'normalizedMap',value:function(e,t,n){var a={},r=-1,s=e.length,d,i,c;for(d=0;d<s;d++)i=e[d].nodeType,i===o&&e[d].classList.contains(n)&&(i=l),0<d&&i===l&&c===l?a[d]=r:t===i&&(++r,a[d]=r),c=i;return a}},{key:'position',value:function(e){var t,n;return e.nodeType===o?(t=e.parentNode.children,!t&&(t=(0,s.findChildren)(e.parentNode)),n=Array.prototype.indexOf.call(t,e)):(t=this.textNodes(e.parentNode),n=t.indexOf(e)),n}},{key:'filteredPosition',value:function(e,t){var n,a,r;return e.nodeType===o?(n=e.parentNode.children,r=this.normalizedMap(n,o,t)):(n=e.parentNode.childNodes,e.parentNode.classList.contains(t)&&(e=e.parentNode,n=e.parentNode.childNodes),r=this.normalizedMap(n,l,t)),a=Array.prototype.indexOf.call(n,e),r[a]}},{key:'stepsToXpath',value:function(e){var t=['.','*'];return e.forEach(function(e){var n=e.index+1;e.id?t.push('*[position()='+n+' and @id=\\''+e.id+'\\']'):'text'===e.type?t.push('text()['+n+']'):t.push('*['+n+']')}),t.join('/')}},{key:'stepsToQuerySelector',value:function(e){var t=['html'];return e.forEach(function(e){var n=e.index+1;e.id?t.push('#'+e.id):'text'===e.type||t.push('*:nth-child('+n+')')}),t.join('>')}},{key:'textNodes',value:function(e,t){return Array.prototype.slice.call(e.childNodes).filter(function(e){return e.nodeType===l||t&&e.classList.contains(t)})}},{key:'walkToNode',value:function(e,t,n){var a=t||document,r=a.documentElement,o=e.length,l,d,c;for(c=0;c<o&&(d=e[c],'element'===d.type?d.id?r=a.getElementById(d.id):(l=r.children||(0,s.findChildren)(r),r=l[d.index]):'text'===d.type&&(r=this.textNodes(r,n)[d.index]),!!r);c++);return r}},{key:'findNode',value:function(e,t,n){var a=t||document,r,i;return n||'undefined'==typeof a.evaluate?n?r=this.walkToNode(e,a,n):r=this.walkToNode(e,a):(i=this.stepsToXpath(e),r=a.evaluate(i,a,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue),r}},{key:'fixMiss',value:function(e,t,n,a){var r=this.findNode(e.slice(0,-1),n,a),i=r.childNodes,s=this.normalizedMap(i,l,a),d=e[e.length-1].index,c,p;for(var u in s){if(!s.hasOwnProperty(u))return;if(s[u]===d)if(c=i[u],p=c.textContent.length,t>p)t-=p;else{r=c.nodeType===o?c.childNodes[0]:c;break}}return{container:r,offset:t}}},{key:'toRange',value:function(e,t){var n=e||document,a=this,r=!!t&&null!=n.querySelector('.'+t),i,o,l,d,c,p,u,g;if(i='undefined'==typeof n.createRange?new s.RangeObject:n.createRange(),a.range?(o=a.start,p=a.path.steps.concat(o.steps),d=this.findNode(p,n,r?t:null),l=a.end,u=a.path.steps.concat(l.steps),c=this.findNode(u,n,r?t:null)):(o=a.path,p=a.path.steps,d=this.findNode(a.path.steps,n,r?t:null)),d)try{null==o.terminal.offset?i.setStart(d,0):i.setStart(d,o.terminal.offset)}catch(a){g=this.fixMiss(p,o.terminal.offset,n,r?t:null),i.setStart(g.container,g.offset)}else return console.log('No startContainer found for',this.toString()),null;if(c)try{null==l.terminal.offset?i.setEnd(c,0):i.setEnd(c,l.terminal.offset)}catch(s){g=this.fixMiss(u,a.end.terminal.offset,n,r?t:null),i.setEnd(g.container,g.offset)}return i}},{key:'isCfiString',value:function(e){return'string'==typeof e&&0===e.indexOf('epubcfi(')&&')'===e[e.length-1]}},{key:'generateChapterComponent',value:function(e,t,n){var a=parseInt(t),r='/'+2*(e+1)+'/';return r+=2*(a+1),n&&(r+='['+n+']'),r}},{key:'collapse',value:function(e){this.range&&(this.range=!1,e?(this.path.steps=this.path.steps.concat(this.start.steps),this.path.terminal=this.start.terminal):(this.path.steps=this.path.steps.concat(this.end.steps),this.path.terminal=this.end.terminal))}}]),e}();t.default=d,e.exports=t['default']},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var n=t.EPUBJS_VERSION='0.3',a=t.DOM_EVENTS=['keydown','keyup','keypressed','mouseup','mousedown','click','touchend','touchstart','touchmove'],r=t.EVENTS={BOOK:{OPEN_FAILED:'openFailed'},CONTENTS:{EXPAND:'expand',RESIZE:'resize',SELECTED:'selected',SELECTED_RANGE:'selectedRange',LINK_CLICKED:'linkClicked'},LOCATIONS:{CHANGED:'changed'},MANAGERS:{RESIZE:'resize',RESIZED:'resized',ORIENTATION_CHANGE:'orientationchange',ADDED:'added',SCROLL:'scroll',SCROLLED:'scrolled',REMOVED:'removed'},VIEWS:{AXIS:'axis',LOAD_ERROR:'loaderror',RENDERED:'rendered',RESIZED:'resized',DISPLAYED:'displayed',SHOWN:'shown',HIDDEN:'hidden',MARK_CLICKED:'markClicked'},RENDITION:{STARTED:'started',ATTACHED:'attached',DISPLAYED:'displayed',DISPLAY_ERROR:'displayerror',RENDERED:'rendered',REMOVED:'removed',RESIZED:'resized',ORIENTATION_CHANGE:'orientationchange',LOCATION_CHANGED:'locationChanged',RELOCATED:'relocated',MARK_CLICKED:'markClicked',SELECTED:'selected',LAYOUT:'layout'},LAYOUT:{UPDATED:'updated'},ANNOTATION:{ATTACH:'attach',DETACH:'detach'}}},function(e,t,n){var a=n(0);n(11),n(51),n(52),n(1),function(){return a.random&&a.random.getBytes?void(e.exports=a.random):void function(t){function n(){var e=a.prng.create(r);return e.getBytes=function(t,n){return e.generate(t,n)},e.getBytesSync=function(t){return e.generate(t)},e}var r={},i=[,,,,],s=a.util.createBuffer();r.formatKey=function(e){var t=a.util.createBuffer(e);return e=[,,,,],e[0]=t.getInt32(),e[1]=t.getInt32(),e[2]=t.getInt32(),e[3]=t.getInt32(),a.aes._expandKey(e,!1)},r.formatSeed=function(e){var t=a.util.createBuffer(e);return e=[,,,,],e[0]=t.getInt32(),e[1]=t.getInt32(),e[2]=t.getInt32(),e[3]=t.getInt32(),e},r.cipher=function(e,t){return a.aes._updateBlock(e,t,i,!1),s.putInt32(i[0]),s.putInt32(i[1]),s.putInt32(i[2]),s.putInt32(i[3]),s.getBytes()},r.increment=function(e){return++e[3],e},r.md=a.md.sha256;var o=n(),l=null,d=a.util.globalScope,c=d.crypto||d.msCrypto;if(c&&c.getRandomValues&&(l=function(e){return c.getRandomValues(e)}),a.options.usePureJavaScript||!a.util.isNodejs&&!l){if('undefined'!=typeof window&&void 0!==window.document,o.collectInt(+new Date,32),'undefined'!=typeof navigator){var p='';for(var u in navigator)try{'string'==typeof navigator[u]&&(p+=navigator[u])}catch(t){}o.collect(p),p=null}t&&(t().mousemove(function(t){o.collectInt(t.clientX,16),o.collectInt(t.clientY,16)}),t().keypress(function(t){o.collectInt(t.charCode,8)}))}if(!a.random)a.random=o;else for(var u in o)a.random[u]=o[u];a.random.createInstance=n,e.exports=a.random}('undefined'==typeof jQuery?null:jQuery)}()},function(e,t,n){'use strict';var a=n(62),r=n(79),s=Function.prototype.apply,o=Function.prototype.call,i=Object.create,l=Object.defineProperty,d=Object.defineProperties,c=Object.prototype.hasOwnProperty,p={configurable:!0,enumerable:!1,writable:!0},u,g,h,y,f,m,E;u=function(e,t){var n;return r(t),c.call(this,'__ee__')?n=this.__ee__:(n=p.value=i(null),l(this,'__ee__',p),p.value=null),n[e]?'object'==typeof n[e]?n[e].push(t):n[e]=[n[e],t]:n[e]=t,this},g=function(e,t){var n,a;return r(t),a=this,u.call(this,e,n=function(){h.call(a,e,n),s.call(t,this,arguments)}),n.__eeOnceListener__=t,this},h=function(e,t){var n,a,s,o;if(r(t),!c.call(this,'__ee__'))return this;if(n=this.__ee__,!n[e])return this;if(a=n[e],'object'==typeof a)for(o=0;s=a[o];++o)(s===t||s.__eeOnceListener__===t)&&(2===a.length?n[e]=a[o?0:1]:a.splice(o,1));else(a===t||a.__eeOnceListener__===t)&&delete n[e];return this},y=function(e){var t,n,a,r,i;if(c.call(this,'__ee__')&&(r=this.__ee__[e],!!r))if('object'==typeof r){for(n=arguments.length,i=Array(n-1),t=1;t<n;++t)i[t-1]=arguments[t];for(r=r.slice(),t=0;a=r[t];++t)s.call(a,this,i)}else switch(arguments.length){case 1:o.call(r,this);break;case 2:o.call(r,this,arguments[1]);break;case 3:o.call(r,this,arguments[1],arguments[2]);break;default:for(n=arguments.length,i=Array(n-1),t=1;t<n;++t)i[t-1]=arguments[t];s.call(r,this,i);}},f={on:u,once:g,off:h,emit:y},m={on:a(u),once:a(g),off:a(h),emit:a(y)},E=d({},m),e.exports=t=function(e){return null==e?i(E):d(Object(e),m)},t.methods=f},function(e,t,n){function a(e,t,a){if(a>t){var n=new Error('Too few bytes to parse DER.');throw n.available=e.length(),n.remaining=t,n.requested=a,n}}function r(e,t,n,s){var l;a(e,t,2);var d=e.getByte();t--;var c=192&d,p=31&d;l=e.length();var u=i(e,t);if(t-=l-e.length(),void 0!==u&&u>t){if(s.strict){var g=new Error('Too few bytes to read ASN.1 value.');throw g.available=e.length(),g.remaining=t,g.requested=u,g}u=t}var h=32==(32&d),f,m;if(h)if(f=[],void 0===u)for(;;){if(a(e,t,2),'\\0\\0'===e.bytes(2)){e.getBytes(2),t-=2;break}l=e.length(),f.push(r(e,t,n+1,s)),t-=l-e.length()}else for(;0<u;)l=e.length(),f.push(r(e,u,n+1,s)),t-=l-e.length(),u-=l-e.length();if(void 0===f&&c===o.Class.UNIVERSAL&&p===o.Type.BITSTRING&&(m=e.bytes(u)),void 0===f&&s.decodeBitStrings&&c===o.Class.UNIVERSAL&&p===o.Type.BITSTRING&&1<u){var E=e.read,C=t,v=0;if(p===o.Type.BITSTRING&&(a(e,t,1),v=e.getByte(),t--),0===v)try{l=e.length();var b=r(e,t,n+1,{strict:!0,decodeBitStrings:!0}),S=l-e.length();t-=S,p==o.Type.BITSTRING&&S++;var T=b.tagClass;S===u&&(T===o.Class.UNIVERSAL||T===o.Class.CONTEXT_SPECIFIC)&&(f=[b])}catch(e){}void 0===f&&(e.read=E,t=C)}if(void 0===f){if(void 0===u){if(s.strict)throw new Error('Non-constructed ASN.1 object of indefinite length.');u=t}if(p===o.Type.BMPSTRING)for(f='';0<u;u-=2)a(e,t,2),f+=y(e.getInt16()),t-=2;else f=e.getBytes(u),t-=u}var I=void 0===m?null:{bitStringContents:m};return o.create(c,p,h,f,I)}var s=n(0);n(1),n(12);var o=e.exports=s.asn1=s.asn1||{};o.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},o.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},o.create=function(e,t,n,a,r){if(s.util.isArray(a)){for(var l=[],d=0;d<a.length;++d)void 0!==a[d]&&l.push(a[d]);a=l}var i={tagClass:e,type:t,constructed:n,composed:n||s.util.isArray(a),value:a};return r&&'bitStringContents'in r&&(i.bitStringContents=r.bitStringContents,i.original=o.copy(i)),i},o.copy=function(e,t){var n;if(s.util.isArray(e)){n=[];for(var a=0;a<e.length;++a)n.push(o.copy(e[a],t));return n}return'string'==typeof e?e:(n={tagClass:e.tagClass,type:e.type,constructed:e.constructed,composed:e.composed,value:o.copy(e.value,t)},t&&!t.excludeBitStringContents&&(n.bitStringContents=e.bitStringContents),n)},o.equals=function(e,t,n){if(s.util.isArray(e)){if(!s.util.isArray(t))return!1;if(e.length!==t.length)return!1;for(var a=0;a<e.length;++a)if(!o.equals(e[a],t[a]))return!1;return!0}if(typeof e!=typeof t)return!1;if('string'==typeof e)return e===t;var r=e.tagClass===t.tagClass&&e.type===t.type&&e.constructed===t.constructed&&e.composed===t.composed&&o.equals(e.value,t.value);return n&&n.includeBitStringContents&&(r=r&&e.bitStringContents===t.bitStringContents),r},o.getBerValueLength=function(e){var t=e.getByte();if(128!==t){var n;return n=128&t?e.getInt((127&t)<<3):t,n}};var i=function(e,t){var n=e.getByte();if(t--,128!==n){var r;if(!(128&n))r=n;else{var i=127&n;a(e,t,i),r=e.getInt(i<<3)}if(0>r)throw new Error('Negative length: '+r);return r}};o.fromDer=function(e,t){t===void 0&&(t={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),'boolean'==typeof t&&(t={strict:t,parseAllBytes:!0,decodeBitStrings:!0}),'strict'in t||(t.strict=!0),'parseAllBytes'in t||(t.parseAllBytes=!0),'decodeBitStrings'in t||(t.decodeBitStrings=!0),'string'==typeof e&&(e=s.util.createBuffer(e));var n=e.length(),a=r(e,e.length(),0,t);if(t.parseAllBytes&&0!==e.length()){var i=new Error('Unparsed DER bytes remain after ASN.1 parsing.');throw i.byteCount=n,i.remaining=e.length(),i}return a},o.toDer=function(e){var t=s.util.createBuffer(),n=e.tagClass|e.type,a=s.util.createBuffer(),r=!1;if('bitStringContents'in e&&(r=!0,e.original&&(r=o.equals(e,e.original))),r)a.putBytes(e.bitStringContents);else if(e.composed){e.constructed?n|=32:a.putByte(0);for(var l=0;l<e.value.length;++l)void 0!==e.value[l]&&a.putBuffer(o.toDer(e.value[l]))}else if(e.type===o.Type.BMPSTRING)for(var l=0;l<e.value.length;++l)a.putInt16(e.value.charCodeAt(l));else e.type===o.Type.INTEGER&&1<e.value.length&&(0===e.value.charCodeAt(0)&&0==(128&e.value.charCodeAt(1))||255===e.value.charCodeAt(0)&&128==(128&e.value.charCodeAt(1)))?a.putBytes(e.value.substr(1)):a.putBytes(e.value);if(t.putByte(n),127>=a.length())t.putByte(127&a.length());else{var i=a.length(),d='';do d+=y(255&i),i>>>=8;while(0<i);t.putByte(128|d.length);for(var l=d.length-1;0<=l;--l)t.putByte(d.charCodeAt(l))}return t.putBuffer(a),t},o.oidToDer=function(e){var t=e.split('.'),a=s.util.createBuffer();a.putByte(40*parseInt(t[0],10)+parseInt(t[1],10));for(var r=2,i,o,l,d;r<t.length;++r){i=!0,o=[],l=parseInt(t[r],10);do d=127&l,l>>>=7,i||(d|=128),o.push(d),i=!1;while(0<l);for(var c=o.length-1;0<=c;--c)a.putByte(o[c])}return a},o.derToOid=function(e){var t;'string'==typeof e&&(e=s.util.createBuffer(e));var n=e.getByte();t=p(n/40)+'.'+n%40;for(var a=0;0<e.length();)n=e.getByte(),a<<=7,128&n?a+=127&n:(t+='.'+(a+n),a=0);return t},o.utcTimeToDate=function(e){var t=new Date,n=parseInt(e.substr(0,2),10);n=50<=n?1900+n:2e3+n;var a=parseInt(e.substr(2,2),10)-1,r=parseInt(e.substr(4,2),10),i=parseInt(e.substr(6,2),10),s=parseInt(e.substr(8,2),10),o=0;if(11<e.length){var l=e.charAt(10),d=10;'+'!==l&&'-'!==l&&(o=parseInt(e.substr(10,2),10),d+=2)}if(t.setUTCFullYear(n,a,r),t.setUTCHours(i,s,o,0),d&&(l=e.charAt(d),'+'===l||'-'===l)){var c=parseInt(e.substr(d+1,2),10),p=parseInt(e.substr(d+4,2),10),u=60*c+p;u*=6e4,'+'===l?t.setTime(+t-u):t.setTime(+t+u)}return t},o.generalizedTimeToDate=function(e){var t=new Date,n=parseInt(e.substr(0,4),10),a=parseInt(e.substr(4,2),10)-1,r=parseInt(e.substr(6,2),10),i=parseInt(e.substr(8,2),10),s=parseInt(e.substr(10,2),10),o=parseInt(e.substr(12,2),10),l=0,d=0,p=!1;'Z'===e.charAt(e.length-1)&&(p=!0);var u=e.length-5,g=e.charAt(u);if('+'===g||'-'===g){var c=parseInt(e.substr(u+1,2),10),h=parseInt(e.substr(u+4,2),10);d=60*c+h,d*=6e4,'+'===g&&(d*=-1),p=!0}return'.'===e.charAt(14)&&(l=1e3*parseFloat(e.substr(14),10)),p?(t.setUTCFullYear(n,a,r),t.setUTCHours(i,s,o,l),t.setTime(+t+d)):(t.setFullYear(n,a,r),t.setHours(i,s,o,l)),t},o.dateToUtcTime=function(e){if('string'==typeof e)return e;var t='',n=[];n.push((''+e.getUTCFullYear()).substr(2)),n.push(''+(e.getUTCMonth()+1)),n.push(''+e.getUTCDate()),n.push(''+e.getUTCHours()),n.push(''+e.getUTCMinutes()),n.push(''+e.getUTCSeconds());for(var a=0;a<n.length;++a)2>n[a].length&&(t+='0'),t+=n[a];return t+='Z',t},o.dateToGeneralizedTime=function(e){if('string'==typeof e)return e;var t='',n=[];n.push(''+e.getUTCFullYear()),n.push(''+(e.getUTCMonth()+1)),n.push(''+e.getUTCDate()),n.push(''+e.getUTCHours()),n.push(''+e.getUTCMinutes()),n.push(''+e.getUTCSeconds());for(var a=0;a<n.length;++a)2>n[a].length&&(t+='0'),t+=n[a];return t+='Z',t},o.integerToDer=function(e){var t=s.util.createBuffer();if(-128<=e&&128>e)return t.putSignedInt(e,8);if(-32768<=e&&32768>e)return t.putSignedInt(e,16);if(-8388608<=e&&8388608>e)return t.putSignedInt(e,24);if(-2147483648<=e&&2147483648>e)return t.putSignedInt(e,32);var n=new Error('Integer too large; max is 32-bits.');throw n.integer=e,n},o.derToInteger=function(e){'string'==typeof e&&(e=s.util.createBuffer(e));var t=8*e.length();if(32<t)throw new Error('Integer too large; max is 32-bits.');return e.getSignedInt(t)},o.validate=function(e,t,n,a){var r=!1;if(!((e.tagClass===t.tagClass||'undefined'==typeof t.tagClass)&&(e.type===t.type||'undefined'==typeof t.type)))a&&(e.tagClass!==t.tagClass&&a.push('['+t.name+'] Expected tag class \"'+t.tagClass+'\", got \"'+e.tagClass+'\"'),e.type!==t.type&&a.push('['+t.name+'] Expected type \"'+t.type+'\", got \"'+e.type+'\"'));else if(e.constructed===t.constructed||'undefined'==typeof t.constructed){if(r=!0,t.value&&s.util.isArray(t.value))for(var l=0,d=0;r&&d<t.value.length;++d)r=t.value[d].optional||!1,e.value[l]&&(r=o.validate(e.value[l],t.value[d],n,a),r?++l:t.value[d].optional&&(r=!0)),!r&&a&&a.push('['+t.name+'] Tag class \"'+t.tagClass+'\", type \"'+t.type+'\" expected value length \"'+t.value.length+'\", got \"'+e.value.length+'\"');if(r&&n&&(t.capture&&(n[t.capture]=e.value),t.captureAsn1&&(n[t.captureAsn1]=e),t.captureBitStringContents&&'bitStringContents'in e&&(n[t.captureBitStringContents]=e.bitStringContents),t.captureBitStringValue&&'bitStringContents'in e)){if(2>e.bitStringContents.length)n[t.captureBitStringValue]='';else{var i=e.bitStringContents.charCodeAt(0);if(0!==i)throw new Error('captureBitStringValue only supported for zero unused bits');n[t.captureBitStringValue]=e.bitStringContents.slice(1)}}}else a&&a.push('['+t.name+'] Expected constructed \"'+t.constructed+'\", got \"'+e.constructed+'\"');return r};var l=/[^\\\\u0000-\\\\u00ff]/;o.prettyPrint=function(t,e,n){var a='';e=e||0,n=n||2,0<e&&(a+='\\n');for(var r='',d=0;d<e*n;++d)r+=' ';switch(a+=r+'Tag: ',t.tagClass){case o.Class.UNIVERSAL:a+='Universal:';break;case o.Class.APPLICATION:a+='Application:';break;case o.Class.CONTEXT_SPECIFIC:a+='Context-Specific:';break;case o.Class.PRIVATE:a+='Private:';}if(t.tagClass===o.Class.UNIVERSAL)switch(a+=t.type,t.type){case o.Type.NONE:a+=' (None)';break;case o.Type.BOOLEAN:a+=' (Boolean)';break;case o.Type.INTEGER:a+=' (Integer)';break;case o.Type.BITSTRING:a+=' (Bit string)';break;case o.Type.OCTETSTRING:a+=' (Octet string)';break;case o.Type.NULL:a+=' (Null)';break;case o.Type.OID:a+=' (Object Identifier)';break;case o.Type.ODESC:a+=' (Object Descriptor)';break;case o.Type.EXTERNAL:a+=' (External or Instance of)';break;case o.Type.REAL:a+=' (Real)';break;case o.Type.ENUMERATED:a+=' (Enumerated)';break;case o.Type.EMBEDDED:a+=' (Embedded PDV)';break;case o.Type.UTF8:a+=' (UTF8)';break;case o.Type.ROID:a+=' (Relative Object Identifier)';break;case o.Type.SEQUENCE:a+=' (Sequence)';break;case o.Type.SET:a+=' (Set)';break;case o.Type.PRINTABLESTRING:a+=' (Printable String)';break;case o.Type.IA5String:a+=' (IA5String (ASCII))';break;case o.Type.UTCTIME:a+=' (UTC time)';break;case o.Type.GENERALIZEDTIME:a+=' (Generalized time)';break;case o.Type.BMPSTRING:a+=' (BMP String)';}else a+=t.type;if(a+='\\n',a+=r+'Constructed: '+t.constructed+'\\n',t.composed){for(var i=0,c='',d=0;d<t.value.length;++d)void 0!==t.value[d]&&(i+=1,c+=o.prettyPrint(t.value[d],e+1,n),d+1<t.value.length&&(c+=','));a+=r+'Sub values: '+i+c}else{if(a+=r+'Value: ',t.type===o.Type.OID){var p=o.derToOid(t.value);a+=p,s.pki&&s.pki.oids&&p in s.pki.oids&&(a+=' ('+s.pki.oids[p]+') ')}if(t.type===o.Type.INTEGER)try{a+=o.derToInteger(t.value)}catch(e){a+='0x'+s.util.bytesToHex(t.value)}else if(t.type===o.Type.BITSTRING){if(a+=1<t.value.length?'0x'+s.util.bytesToHex(t.value.slice(1)):'(none)',0<t.value.length){var u=t.value.charCodeAt(0);1==u?a+=' (1 unused bit shown)':1<u&&(a+=' ('+u+' unused bits shown)')}}else if(t.type===o.Type.OCTETSTRING)l.test(t.value)||(a+='('+t.value+') '),a+='0x'+s.util.bytesToHex(t.value);else if(t.type===o.Type.UTF8)try{a+=s.util.decodeUtf8(t.value)}catch(n){if('URI malformed'===n.message)a+='0x'+s.util.bytesToHex(t.value)+' (malformed UTF8)';else throw n}else a+=t.type===o.Type.PRINTABLESTRING||t.type===o.Type.IA5String?t.value:l.test(t.value)?'0x'+s.util.bytesToHex(t.value):0===t.value.length?'[null]':t.value}return a}},function(e,t,n){var a=n(0);e.exports=a.md=a.md||{},a.md.algorithms=a.md.algorithms||{}},function(e){var t=function(){return this}();try{t=t||Function('return this')()||(1,eval)('this')}catch(n){'object'==typeof window&&(t=window)}e.exports=t},function(e,t,n){'use strict';function a(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var r=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(17),s=function(e){return e&&e.__esModule?e:{default:e}}(i),o=function(){function e(t){a(this,e);var n,r;n=t.indexOf('://'),-1<n&&(t=new URL(t).pathname),r=this.parse(t),this.path=t,this.directory=this.isDirectory(t)?t:r.dir+'/',this.filename=r.base,this.extension=r.ext.slice(1)}return r(e,[{key:'parse',value:function(e){return s.default.parse(e)}},{key:'isAbsolute',value:function(e){return s.default.isAbsolute(e||this.path)}},{key:'isDirectory',value:function(e){return'/'===e.charAt(e.length-1)}},{key:'resolve',value:function(e){return s.default.resolve(this.directory,e)}},{key:'relative',value:function(e){var t=e&&-1<e.indexOf('://');return t?e:s.default.relative(this.directory,e)}},{key:'splitPath',value:function(e){return this.splitPathRe.exec(e).slice(1)}},{key:'toString',value:function(){return this.path}}]),e}();t.default=o,e.exports=t['default']},function(e,t,n){function a(e,t){l.cipher.registerAlgorithm(e,function(){return new l.aes.Algorithm(e,t)})}function r(){d=!0,g=[0,1,2,4,8,16,32,64,128,27,54];for(var t=Array(256),a=0;128>a;++a)t[a]=a<<1,t[a+128]=283^a+128<<1;p=Array(256),u=Array(256),h=[,,,,],y=[,,,,];for(var a=0;4>a;++a)h[a]=Array(256),y[a]=Array(256);for(var r=0,e=0,a=0,i,s,o,l,c,f,m;256>a;++a){l=e^e<<1^e<<2^e<<3^e<<4,l=99^(l>>8^255&l),p[r]=l,u[l]=r,c=t[l],i=t[r],s=t[i],o=t[s],f=c<<24^l<<16^l<<8^(l^c),m=(i^s^o)<<24^(r^o)<<16^(r^s^o)<<8^(r^i^o);for(var E=0;4>E;++E)h[E][r]=f,y[E][l]=m,f=f<<24|f>>>8,m=m<<24|m>>>8;0==r?r=e=1:(r=i^t[t[t[i^o]]],e^=t[t[e]])}}function s(e,t){for(var a=e.slice(0),r=1,s=a.length,o=c*(s+6+1),l=s,i;l<o;++l)i=a[l-1],0==l%s?(i=p[255&i>>>16]<<24^p[255&i>>>8]<<16^p[255&i]<<8^p[i>>>24]^g[r]<<24,r++):6<s&&4==l%s&&(i=p[i>>>24]<<24^p[255&i>>>16]<<16^p[255&i>>>8]<<8^p[255&i]),a[l]=a[l-s]^i;if(t){var d=y[0],u=y[1],h=y[2],f=y[3],m=a.slice(0),E;o=a.length;for(var l=0,C=o-c;l<o;l+=c,C-=c)if(0===l||l===o-c)m[l]=a[C],m[l+1]=a[C+3],m[l+2]=a[C+2],m[l+3]=a[C+1];else for(var v=0;v<c;++v)E=a[C+v],m[l+(3&-v)]=d[p[E>>>24]]^u[p[255&E>>>16]]^h[p[255&E>>>8]]^f[p[255&E]];a=m}return a}function i(e,t,n,r){var s=e.length/4-1,o,l,g,f,m;r?(o=y[0],l=y[1],g=y[2],f=y[3],m=u):(o=h[0],l=h[1],g=h[2],f=h[3],m=p);var E,a,C,c,d,v,b;E=t[0]^e[0],a=t[r?3:1]^e[1],C=t[2]^e[2],c=t[r?1:3]^e[3];for(var S=3,i=1;i<s;++i)d=o[E>>>24]^l[255&a>>>16]^g[255&C>>>8]^f[255&c]^e[++S],v=o[a>>>24]^l[255&C>>>16]^g[255&c>>>8]^f[255&E]^e[++S],b=o[C>>>24]^l[255&c>>>16]^g[255&E>>>8]^f[255&a]^e[++S],c=o[c>>>24]^l[255&E>>>16]^g[255&a>>>8]^f[255&C]^e[++S],E=d,a=v,C=b;n[0]=m[E>>>24]<<24^m[255&a>>>16]<<16^m[255&C>>>8]<<8^m[255&c]^e[++S],n[r?3:1]=m[a>>>24]<<24^m[255&C>>>16]<<16^m[255&c>>>8]<<8^m[255&E]^e[++S],n[2]=m[C>>>24]<<24^m[255&c>>>16]<<16^m[255&E>>>8]<<8^m[255&a]^e[++S],n[r?1:3]=m[c>>>24]<<24^m[255&E>>>16]<<16^m[255&a>>>8]<<8^m[255&C]^e[++S]}function o(e){e=e||{};var t=(e.mode||'CBC').toUpperCase(),n='AES-'+t,a;a=e.decrypt?l.cipher.createDecipher(n,e.key):l.cipher.createCipher(n,e.key);var r=a.start;return a.start=function(e,t){var n=null;t instanceof l.util.ByteBuffer&&(n=t,t={}),t=t||{},t.output=n,t.iv=e,r.call(a,t)},a}var l=n(0);n(31),n(47),n(1),e.exports=l.aes=l.aes||{},l.aes.startEncrypting=function(e,t,n,a){var r=o({key:e,output:n,decrypt:!1,mode:a});return r.start(t),r},l.aes.createEncryptionCipher=function(e,t){return o({key:e,output:null,decrypt:!1,mode:t})},l.aes.startDecrypting=function(e,t,n,a){var r=o({key:e,output:n,decrypt:!0,mode:a});return r.start(t),r},l.aes.createDecryptionCipher=function(e,t){return o({key:e,output:null,decrypt:!0,mode:t})},l.aes.Algorithm=function(e,t){d||r();var n=this;n.name=e,n.mode=new t({blockSize:16,cipher:{encrypt:function(e,t){return i(n._w,e,t,!1)},decrypt:function(e,t){return i(n._w,e,t,!0)}}}),n._init=!1},l.aes.Algorithm.prototype.initialize=function(e){if(!this._init){var t=e.key,n;if('string'==typeof t&&(16===t.length||24===t.length||32===t.length))t=l.util.createBuffer(t);else if(l.util.isArray(t)&&(16===t.length||24===t.length||32===t.length)){n=t,t=l.util.createBuffer();for(var a=0;a<n.length;++a)t.putByte(n[a])}if(!l.util.isArray(t)){n=t,t=[];var r=n.length();if(16===r||24===r||32===r){r>>>=2;for(var a=0;a<r;++a)t.push(n.getInt32())}}if(!l.util.isArray(t)||4!==t.length&&6!==t.length&&8!==t.length)throw new Error('Invalid key parameter.');var i=this.mode.name,o=-1!==['CFB','OFB','CTR','GCM'].indexOf(i);this._w=s(t,e.decrypt&&!o),this._init=!0}},l.aes._expandKey=function(e,t){return d||r(),s(e,t)},l.aes._updateBlock=i,a('AES-ECB',l.cipher.modes.ecb),a('AES-CBC',l.cipher.modes.cbc),a('AES-CFB',l.cipher.modes.cfb),a('AES-OFB',l.cipher.modes.ofb),a('AES-CTR',l.cipher.modes.ctr),a('AES-GCM',l.cipher.modes.gcm);var d=!1,c=4,p,u,g,h,y},function(e,t,n){function a(e,t){s[e]=t,s[t]=e}function r(e,t){s[e]=t}var i=n(0);i.pki=i.pki||{};var s=e.exports=i.pki.oids=i.oids=i.oids||{};a('1.2.840.113549.1.1.1','rsaEncryption'),a('1.2.840.113549.1.1.4','md5WithRSAEncryption'),a('1.2.840.113549.1.1.5','sha1WithRSAEncryption'),a('1.2.840.113549.1.1.7','RSAES-OAEP'),a('1.2.840.113549.1.1.8','mgf1'),a('1.2.840.113549.1.1.9','pSpecified'),a('1.2.840.113549.1.1.10','RSASSA-PSS'),a('1.2.840.113549.1.1.11','sha256WithRSAEncryption'),a('1.2.840.113549.1.1.12','sha384WithRSAEncryption'),a('1.2.840.113549.1.1.13','sha512WithRSAEncryption'),a('1.3.101.112','EdDSA25519'),a('1.2.840.10040.4.3','dsa-with-sha1'),a('1.3.14.3.2.7','desCBC'),a('1.3.14.3.2.26','sha1'),a('1.3.14.3.2.29','sha1WithRSASignature'),a('2.16.840.1.101.3.4.2.1','sha256'),a('2.16.840.1.101.3.4.2.2','sha384'),a('2.16.840.1.101.3.4.2.3','sha512'),a('2.16.840.1.101.3.4.2.4','sha224'),a('2.16.840.1.101.3.4.2.5','sha512-224'),a('2.16.840.1.101.3.4.2.6','sha512-256'),a('1.2.840.113549.2.2','md2'),a('1.2.840.113549.2.5','md5'),a('1.2.840.113549.1.7.1','data'),a('1.2.840.113549.1.7.2','signedData'),a('1.2.840.113549.1.7.3','envelopedData'),a('1.2.840.113549.1.7.4','signedAndEnvelopedData'),a('1.2.840.113549.1.7.5','digestedData'),a('1.2.840.113549.1.7.6','encryptedData'),a('1.2.840.113549.1.9.1','emailAddress'),a('1.2.840.113549.1.9.2','unstructuredName'),a('1.2.840.113549.1.9.3','contentType'),a('1.2.840.113549.1.9.4','messageDigest'),a('1.2.840.113549.1.9.5','signingTime'),a('1.2.840.113549.1.9.6','counterSignature'),a('1.2.840.113549.1.9.7','challengePassword'),a('1.2.840.113549.1.9.8','unstructuredAddress'),a('1.2.840.113549.1.9.14','extensionRequest'),a('1.2.840.113549.1.9.20','friendlyName'),a('1.2.840.113549.1.9.21','localKeyId'),a('1.2.840.113549.1.9.22.1','x509Certificate'),a('1.2.840.113549.1.12.10.1.1','keyBag'),a('1.2.840.113549.1.12.10.1.2','pkcs8ShroudedKeyBag'),a('1.2.840.113549.1.12.10.1.3','certBag'),a('1.2.840.113549.1.12.10.1.4','crlBag'),a('1.2.840.113549.1.12.10.1.5','secretBag'),a('1.2.840.113549.1.12.10.1.6','safeContentsBag'),a('1.2.840.113549.1.5.13','pkcs5PBES2'),a('1.2.840.113549.1.5.12','pkcs5PBKDF2'),a('1.2.840.113549.1.12.1.1','pbeWithSHAAnd128BitRC4'),a('1.2.840.113549.1.12.1.2','pbeWithSHAAnd40BitRC4'),a('1.2.840.113549.1.12.1.3','pbeWithSHAAnd3-KeyTripleDES-CBC'),a('1.2.840.113549.1.12.1.4','pbeWithSHAAnd2-KeyTripleDES-CBC'),a('1.2.840.113549.1.12.1.5','pbeWithSHAAnd128BitRC2-CBC'),a('1.2.840.113549.1.12.1.6','pbewithSHAAnd40BitRC2-CBC'),a('1.2.840.113549.2.7','hmacWithSHA1'),a('1.2.840.113549.2.8','hmacWithSHA224'),a('1.2.840.113549.2.9','hmacWithSHA256'),a('1.2.840.113549.2.10','hmacWithSHA384'),a('1.2.840.113549.2.11','hmacWithSHA512'),a('1.2.840.113549.3.7','des-EDE3-CBC'),a('2.16.840.1.101.3.4.1.2','aes128-CBC'),a('2.16.840.1.101.3.4.1.22','aes192-CBC'),a('2.16.840.1.101.3.4.1.42','aes256-CBC'),a('2.5.4.3','commonName'),a('2.5.4.4','surname'),a('2.5.4.5','serialNumber'),a('2.5.4.6','countryName'),a('2.5.4.7','localityName'),a('2.5.4.8','stateOrProvinceName'),a('2.5.4.9','streetAddress'),a('2.5.4.10','organizationName'),a('2.5.4.11','organizationalUnitName'),a('2.5.4.12','title'),a('2.5.4.13','description'),a('2.5.4.15','businessCategory'),a('2.5.4.17','postalCode'),a('2.5.4.42','givenName'),a('1.3.6.1.4.1.311.60.2.1.2','jurisdictionOfIncorporationStateOrProvinceName'),a('1.3.6.1.4.1.311.60.2.1.3','jurisdictionOfIncorporationCountryName'),a('2.16.840.1.113730.1.1','nsCertType'),a('2.16.840.1.113730.1.13','nsComment'),r('2.5.29.1','authorityKeyIdentifier'),r('2.5.29.2','keyAttributes'),r('2.5.29.3','certificatePolicies'),r('2.5.29.4','keyUsageRestriction'),r('2.5.29.5','policyMapping'),r('2.5.29.6','subtreesConstraint'),r('2.5.29.7','subjectAltName'),r('2.5.29.8','issuerAltName'),r('2.5.29.9','subjectDirectoryAttributes'),r('2.5.29.10','basicConstraints'),r('2.5.29.11','nameConstraints'),r('2.5.29.12','policyConstraints'),r('2.5.29.13','basicConstraints'),a('2.5.29.14','subjectKeyIdentifier'),a('2.5.29.15','keyUsage'),r('2.5.29.16','privateKeyUsagePeriod'),a('2.5.29.17','subjectAltName'),a('2.5.29.18','issuerAltName'),a('2.5.29.19','basicConstraints'),r('2.5.29.20','cRLNumber'),r('2.5.29.21','cRLReason'),r('2.5.29.22','expirationDate'),r('2.5.29.23','instructionCode'),r('2.5.29.24','invalidityDate'),r('2.5.29.25','cRLDistributionPoints'),r('2.5.29.26','issuingDistributionPoint'),r('2.5.29.27','deltaCRLIndicator'),r('2.5.29.28','issuingDistributionPoint'),r('2.5.29.29','certificateIssuer'),r('2.5.29.30','nameConstraints'),a('2.5.29.31','cRLDistributionPoints'),a('2.5.29.32','certificatePolicies'),r('2.5.29.33','policyMappings'),r('2.5.29.34','policyConstraints'),a('2.5.29.35','authorityKeyIdentifier'),r('2.5.29.36','policyConstraints'),a('2.5.29.37','extKeyUsage'),r('2.5.29.46','freshestCRL'),r('2.5.29.54','inhibitAnyPolicy'),a('1.3.6.1.4.1.11129.2.4.2','timestampList'),a('1.3.6.1.5.5.7.1.1','authorityInfoAccess'),a('1.3.6.1.5.5.7.3.1','serverAuth'),a('1.3.6.1.5.5.7.3.2','clientAuth'),a('1.3.6.1.5.5.7.3.3','codeSigning'),a('1.3.6.1.5.5.7.3.4','emailProtection'),a('1.3.6.1.5.5.7.3.8','timeStamping')},function(e,t,n){function a(e){for(var t=e.name+': ',n=[],a=function(e,t){return' '+t},r=0;r<e.values.length;++r)n.push(e.values[r].replace(/^(\\S+\\r\\n)/,a));t+=n.join(',')+'\\r\\n';for(var i=0,s=-1,r=0;r<t.length;++r,++i)if(65<i&&-1!=s){var o=t[s];','===o?(++s,t=t.substr(0,s)+'\\r\\n '+t.substr(s)):t=t.substr(0,s)+'\\r\\n'+o+t.substr(s+1),i=r-s-1,s=-1,++r}else(' '===t[r]||'\\t'===t[r]||','===t[r])&&(s=r);return t}function r(e){return e.replace(/^\\s+/,'')}var s=n(0);n(1);var i=e.exports=s.pem=s.pem||{};i.encode=function(e,t){t=t||{};var n='-----BEGIN '+e.type+'-----\\r\\n',r;if(e.procType&&(r={name:'Proc-Type',values:[e.procType.version+'',e.procType.type]},n+=a(r)),e.contentDomain&&(r={name:'Content-Domain',values:[e.contentDomain]},n+=a(r)),e.dekInfo&&(r={name:'DEK-Info',values:[e.dekInfo.algorithm]},e.dekInfo.parameters&&r.values.push(e.dekInfo.parameters),n+=a(r)),e.headers)for(var o=0;o<e.headers.length;++o)n+=a(e.headers[o]);return e.procType&&(n+='\\r\\n'),n+=s.util.encode64(e.body,t.maxline||64)+'\\r\\n',n+='-----END '+e.type+'-----\\r\\n',n},i.decode=function(e){for(var t=[],n=/\\s*-----BEGIN ([A-Z0-9- ]+)-----\\r?\\n?([\\x21-\\x7e\\s]+?(?:\\r?\\n\\r?\\n))?([:A-Za-z0-9+\\/=\\s]+?)-----END \\1-----/g,a=/([\\x21-\\x7e]+):\\s*([\\x21-\\x7e\\s^:]+)/,i=/\\r?\\n/,o,l;o=n.exec(e),!!o;){l=o[1],'NEW CERTIFICATE REQUEST'===l&&(l='CERTIFICATE REQUEST');var d={type:l,procType:null,contentDomain:null,dekInfo:null,headers:[],body:s.util.decode64(o[3])};if(t.push(d),!!o[2]){for(var c=o[2].split(i),p=0;o&&p<c.length;){for(var u=c[p].replace(/\\s+$/,''),g=p+1,h;g<c.length&&(h=c[g],!!/\\s/.test(h[0]));++g)u+=h,p=g;if(o=u.match(a),o){for(var y={name:o[1],values:[]},f=o[2].split(','),m=0;m<f.length;++m)y.values.push(r(f[m]));if(!d.procType){if('Proc-Type'!==y.name)throw new Error('Invalid PEM formatted message. The first encapsulated header must be \"Proc-Type\".');else if(2!==y.values.length)throw new Error('Invalid PEM formatted message. The \"Proc-Type\" header must have two subfields.');d.procType={version:f[0],type:f[1]}}else if(!d.contentDomain&&'Content-Domain'===y.name)d.contentDomain=f[0]||'';else if(!d.dekInfo&&'DEK-Info'===y.name){if(0===y.values.length)throw new Error('Invalid PEM formatted message. The \"DEK-Info\" header must have at least one subfield.');d.dekInfo={algorithm:f[0],parameters:f[1]||null}}else d.headers.push(y)}++p}if('ENCRYPTED'===d.procType&&!d.dekInfo)throw new Error('Invalid PEM formatted message. The \"DEK-Info\" header must be present if \"Proc-Type\" is \"ENCRYPTED\".')}}if(0===t.length)throw new Error('Invalid PEM formatted message.');return t}},function(e,t,n){var a=n(0);n(8),n(1);var r=e.exports=a.hmac=a.hmac||{};r.create=function(){var e=null,t=null,n=null,r=null,i={};return i.start=function(s,o){if(null!==s)if('string'!=typeof s)t=s;else if(s=s.toLowerCase(),s in a.md.algorithms)t=a.md.algorithms[s].create();else throw new Error('Unknown hash algorithm \"'+s+'\"');if(null===o)o=e;else{if('string'==typeof o)o=a.util.createBuffer(o);else if(a.util.isArray(o)){var l=o;o=a.util.createBuffer();for(var d=0;d<l.length;++d)o.putByte(l[d])}var i=o.length();i>t.blockLength&&(t.start(),t.update(o.bytes()),o=t.digest()),n=a.util.createBuffer(),r=a.util.createBuffer(),i=o.length();for(var d=0,l;d<i;++d)l=o.at(d),n.putByte(54^l),r.putByte(92^l);if(i<t.blockLength)for(var l=t.blockLength-i,d=0;d<l;++d)n.putByte(54),r.putByte(92);e=o,n=n.bytes(),r=r.bytes()}t.start(),t.update(n)},i.update=function(e){t.update(e)},i.getMac=function(){var e=t.digest().bytes();return t.start(),t.update(r),t.update(e),t.digest()},i.digest=i.getMac,i}},function(e,t,n){function a(){o='\\x80',o+=s.util.fillString('\\0',64),l=!0}function r(n,r,s){for(var o=s.length(),l,t,a,p,c,d,e,u;64<=o;){for(t=n.h0,a=n.h1,p=n.h2,c=n.h3,d=n.h4,u=0;16>u;++u)l=s.getInt32(),r[u]=l,e=c^a&(p^c),l=(t<<5|t>>>27)+e+d+1518500249+l,d=c,c=p,p=(a<<30|a>>>2)>>>0,a=t,t=l;for(;20>u;++u)l=r[u-3]^r[u-8]^r[u-14]^r[u-16],l=l<<1|l>>>31,r[u]=l,e=c^a&(p^c),l=(t<<5|t>>>27)+e+d+1518500249+l,d=c,c=p,p=(a<<30|a>>>2)>>>0,a=t,t=l;for(;32>u;++u)l=r[u-3]^r[u-8]^r[u-14]^r[u-16],l=l<<1|l>>>31,r[u]=l,e=a^p^c,l=(t<<5|t>>>27)+e+d+1859775393+l,d=c,c=p,p=(a<<30|a>>>2)>>>0,a=t,t=l;for(;40>u;++u)l=r[u-6]^r[u-16]^r[u-28]^r[u-32],l=l<<2|l>>>30,r[u]=l,e=a^p^c,l=(t<<5|t>>>27)+e+d+1859775393+l,d=c,c=p,p=(a<<30|a>>>2)>>>0,a=t,t=l;for(;60>u;++u)l=r[u-6]^r[u-16]^r[u-28]^r[u-32],l=l<<2|l>>>30,r[u]=l,e=a&p|c&(a^p),l=(t<<5|t>>>27)+e+d+2400959708+l,d=c,c=p,p=(a<<30|a>>>2)>>>0,a=t,t=l;for(;80>u;++u)l=r[u-6]^r[u-16]^r[u-28]^r[u-32],l=l<<2|l>>>30,r[u]=l,e=a^p^c,l=(t<<5|t>>>27)+e+d+3395469782+l,d=c,c=p,p=(a<<30|a>>>2)>>>0,a=t,t=l;n.h0=0|n.h0+t,n.h1=0|n.h1+a,n.h2=0|n.h2+p,n.h3=0|n.h3+c,n.h4=0|n.h4+d,o-=64}}var s=n(0);n(8),n(1);var i=e.exports=s.sha1=s.sha1||{};s.md.sha1=s.md.algorithms.sha1=i,i.create=function(){l||a();var e=null,t=s.util.createBuffer(),n=Array(80),d={algorithm:'sha1',blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return d.start=function(){d.messageLength=0,d.fullMessageLength=d.messageLength64=[];for(var n=d.messageLengthSize/4,a=0;a<n;++a)d.fullMessageLength.push(0);return t=s.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},d},d.start(),d.update=function(a,o){'utf8'===o&&(a=s.util.encodeUtf8(a));var l=a.length;d.messageLength+=l,l=[l/4294967296>>>0,l>>>0];for(var c=d.fullMessageLength.length-1;0<=c;--c)d.fullMessageLength[c]+=l[1],l[1]=l[0]+(d.fullMessageLength[c]/4294967296>>>0),d.fullMessageLength[c]>>>=0,l[0]=l[1]/4294967296>>>0;return t.putBytes(a),r(e,n,t),(2048<t.read||0===t.length())&&t.compact(),d},d.digest=function(){var a=s.util.createBuffer();a.putBytes(t.bytes());var l=d.fullMessageLength[d.fullMessageLength.length-1]+d.messageLengthSize,c=l&d.blockLength-1;a.putBytes(o.substr(0,d.blockLength-c));for(var p=8*d.fullMessageLength[0],u=0,i,g;u<d.fullMessageLength.length-1;++u)i=8*d.fullMessageLength[u+1],g=i/4294967296>>>0,p+=g,a.putInt32(p>>>0),p=i>>>0;a.putInt32(p);var h={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4};r(h,n,a);var y=s.util.createBuffer();return y.putInt32(h.h0),y.putInt32(h.h1),y.putInt32(h.h2),y.putInt32(h.h3),y.putInt32(h.h4),y},d};var o=null,l=!1},function(e,t,n){'use strict';function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var i=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(10),o=a(s),l=n(17),d=a(l),c=function(){function e(t,n){r(this,e);var a=-1<t.indexOf('://'),i=t,s;if(this.Url=void 0,this.href=t,this.protocol='',this.origin='',this.hash='',this.hash='',this.search='',this.base=n,!a&&!1!==n&&'string'!=typeof n&&window&&window.location&&(this.base=window.location.href),a||this.base)try{this.Url=this.base?new URL(t,this.base):new URL(t),this.href=this.Url.href,this.protocol=this.Url.protocol,this.origin=this.Url.origin,this.hash=this.Url.hash,this.search=this.Url.search,i=this.Url.pathname+(this.Url.search?this.Url.search:'')}catch(t){this.Url=void 0,this.base&&(s=new o.default(this.base),i=s.resolve(i))}this.Path=new o.default(i),this.directory=this.Path.directory,this.filename=this.Path.filename,this.extension=this.Path.extension}return i(e,[{key:'path',value:function(){return this.Path}},{key:'resolve',value:function(e){var t=-1<e.indexOf('://'),n;return t?e:(n=d.default.resolve(this.directory,e),this.origin+n)}},{key:'relative',value:function(e){return d.default.relative(e,this.directory)}},{key:'toString',value:function(){return this.href}}]),e}();t.default=c,e.exports=t['default']},function(e){'use strict';function t(e){if('string'!=typeof e)throw new TypeError('Path must be a string. Received '+e)}function n(e,t){for(var n='',a=-1,r=0,s=0,i;s<=e.length;++s){if(s<e.length)i=e.charCodeAt(s);else if(47===i)break;else i=47;if(47===i){if(a==s-1||1==r);else if(a!=s-1&&2==r){if(2>n.length||46!==n.charCodeAt(n.length-1)||46!==n.charCodeAt(n.length-2))if(2<n.length){for(var o=n.length-1,l=o;0<=l&&47!==n.charCodeAt(l);--l);if(l!=o){n=-1==l?'':n.slice(0,l),a=s,r=0;continue}}else if(2===n.length||1===n.length){n='',a=s,r=0;continue}t&&(0<n.length?n+='/..':n='..')}else 0<n.length?n+='/'+e.slice(a+1,s):n=e.slice(a+1,s);a=s,r=0}else 46===i&&-1!=r?++r:r=-1}return n}function a(e,t){var n=t.dir||t.root,a=t.base||(t.name||'')+(t.ext||'');return n?n===t.root?n+a:n+e+a:a}if(!r)var r={cwd:function(){return'/'}};var s={resolve:function(){for(var e='',a=!1,s=arguments.length-1,i;-1<=s&&!a;s--){var o;(0<=s?o=arguments[s]:(void 0==i&&(i=r.cwd()),o=i),t(o),0!==o.length)&&(e=o+'/'+e,a=47===o.charCodeAt(0))}return e=n(e,!a),a?0<e.length?'/'+e:'/':0<e.length?e:'.'},normalize:function(e){if(t(e),0===e.length)return'.';var a=47===e.charCodeAt(0),r=47===e.charCodeAt(e.length-1);return e=n(e,!a),0!==e.length||a||(e='.'),0<e.length&&r&&(e+='/'),a?'/'+e:e},isAbsolute:function(e){return t(e),0<e.length&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return'.';for(var e=0,n,a;e<arguments.length;++e)a=arguments[e],t(a),0<a.length&&(void 0==n?n=a:n+='/'+a);return void 0===n?'.':s.normalize(n)},relative:function(e,n){if(t(e),t(n),e===n)return'';if(e=s.resolve(e),n=s.resolve(n),e===n)return'';for(var a=1;a<e.length&&47===e.charCodeAt(a);++a);for(var r=e.length,o=r-a,l=1;l<n.length&&47===n.charCodeAt(l);++l);for(var d=n.length,c=d-l,p=o<c?o:c,u=-1,g=0;g<=p;++g){if(g==p){if(c>p){if(47===n.charCodeAt(l+g))return n.slice(l+g+1);if(0==g)return n.slice(l+g)}else o>p&&(47===e.charCodeAt(a+g)?u=g:0==g&&(u=0));break}var i=e.charCodeAt(a+g),h=n.charCodeAt(l+g);if(i!==h)break;else 47===i&&(u=g)}var y='';for(g=a+u+1;g<=r;++g)(g===r||47===e.charCodeAt(g))&&(y+=0===y.length?'..':'/..');return 0<y.length?y+n.slice(l+u):(l+=u,47===n.charCodeAt(l)&&++l,n.slice(l))},_makeLong:function(e){return e},dirname:function(e){if(t(e),0===e.length)return'.';for(var n=e.charCodeAt(0),a=47===n,r=-1,s=!0,o=e.length-1;1<=o;--o)if(n=e.charCodeAt(o),47!==n)s=!1;else if(!s){r=o;break}return-1===r?a?'/':'.':a&&1===r?'//':e.slice(0,r)},basename:function(e,n){if(n!==void 0&&'string'!=typeof n)throw new TypeError('\"ext\" argument must be a string');t(e);var a=0,r=-1,s=!0,o;if(void 0!==n&&0<n.length&&n.length<=e.length){if(n.length===e.length&&n===e)return'';var i=n.length-1,l=-1;for(o=e.length-1;0<=o;--o){var d=e.charCodeAt(o);if(47!==d)-1==l&&(s=!1,l=o+1),0<=i&&(d===n.charCodeAt(i)?-1==--i&&(r=o):(i=-1,r=l));else if(!s){a=o+1;break}}return a===r?r=l:-1===r&&(r=e.length),e.slice(a,r)}for(o=e.length-1;0<=o;--o)if(47!==e.charCodeAt(o))-1==r&&(s=!1,r=o+1);else if(!s){a=o+1;break}return-1===r?'':e.slice(a,r)},extname:function(e){t(e);for(var n=-1,a=0,r=-1,s=!0,o=0,l=e.length-1,i;0<=l;--l){if(i=e.charCodeAt(l),47===i){if(!s){a=l+1;break}continue}-1==r&&(s=!1,r=l+1),46===i?-1==n?n=l:1!=o&&(o=1):-1!==n&&(o=-1)}return-1===n||-1===r||0==o||1==o&&n===r-1&&n===a+1?'':e.slice(n,r)},format:function(e){if(null===e||'object'!=typeof e)throw new TypeError('Parameter \"pathObject\" must be an object, not '+typeof e);return a('/',e)},parse:function(e){t(e);var n={root:'',dir:'',base:'',ext:'',name:''};if(0===e.length)return n;var a=e.charCodeAt(0),r=47===a,s;r?(n.root='/',s=1):s=0;for(var o=-1,l=0,d=-1,c=!0,p=e.length-1,i=0;p>=s;--p){if(a=e.charCodeAt(p),47===a){if(!c){l=p+1;break}continue}-1==d&&(c=!1,d=p+1),46===a?-1==o?o=p:1!=i&&(i=1):-1!=o&&(i=-1)}return-1==o||-1==d||0==i||1==i&&o==d-1&&o==l+1?-1!=d&&(0==l&&r?n.base=n.name=e.slice(1,d):n.base=n.name=e.slice(l,d)):(0==l&&r?(n.name=e.slice(1,o),n.base=e.slice(1,d)):(n.name=e.slice(l,o),n.base=e.slice(l,d)),n.ext=e.slice(o,d)),0<l?n.dir=e.slice(0,l-1):r&&(n.dir='/'),n},sep:'/',delimiter:':',posix:null};e.exports=s},function(e,t,n){'use strict';function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0}),t.replaceBase=function(e,t){var n=t.url,a=-1<n.indexOf('://'),i,s;e&&(s=(0,r.qs)(e,'head'),i=(0,r.qs)(s,'base'),!i&&(i=e.createElement('base'),s.insertBefore(i,s.firstChild)),!a&&window&&window.location&&(n=window.location.origin+n),i.setAttribute('href',n))},t.replaceCanonical=function(e,t){var n=t.canonical,a,i;e&&(a=(0,r.qs)(e,'head'),i=(0,r.qs)(a,'link[rel=\\'canonical\\']'),i?i.setAttribute('href',n):(i=e.createElement('link'),i.setAttribute('rel','canonical'),i.setAttribute('href',n),a.appendChild(i)))},t.replaceMeta=function(e,t){var n=t.idref,a,i;e&&(a=(0,r.qs)(e,'head'),i=(0,r.qs)(a,'link[property=\\'dc.identifier\\']'),i?i.setAttribute('content',n):(i=e.createElement('meta'),i.setAttribute('name','dc.identifier'),i.setAttribute('content',n),a.appendChild(i)))},t.replaceLinks=function(e,t){var n=e.querySelectorAll('a[href]');if(n.length)for(var a=(0,r.qs)(e.ownerDocument,'base'),o=a?a.getAttribute('href'):void 0,l=function(e){var n=e.getAttribute('href');if(0!==n.indexOf('mailto:')){var a=-1<n.indexOf('://');if(a)e.setAttribute('target','_blank');else{var r;try{r=new s.default(n,o)}catch(e){}e.onclick=function(){return r&&r.hash?t(r.Path.path+r.hash):r?t(r.Path.path):t(n),!1}}}}.bind(this),d=0;d<n.length;d++)l(n[d])},t.substitute=function(e,t,n){return t.forEach(function(t,a){t&&n[a]&&(e=e.replace(new RegExp(t,'g'),n[a]))}),e};var r=n(2),i=n(16),s=a(i),o=n(10),l=a(o)},function(e,t,n){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var a=n(2),r=n(10),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(e,t,n,r,s){function o(t){p.reject(t)}function l(){if(this.readyState===XMLHttpRequest.DONE){var e=!1;if((''===this.responseType||'document'===this.responseType)&&(e=this.responseXML),200===this.status||0===this.status||e){var n;if(!this.response&&!e)return p.reject({status:this.status,message:'Empty Response',stack:new Error().stack}),p.promise;if(403===this.status)return p.reject({status:this.status,response:this.response,message:'Forbidden',stack:new Error().stack}),p.promise;var r=this.response;if(y){var i=s.decrypt(this.response);r=i}n=e?this.responseXML:(0,a.isXml)(t)?(0,a.parse)(r,'text/xml'):'xhtml'==t?(0,a.parse)(r,'application/xhtml+xml'):'html'==t||'htm'==t?(0,a.parse)(r,'text/html'):'json'==t?JSON.parse(r):'blob'==t?d?r:new Blob([r]):r,p.resolve(n)}else p.reject({status:this.status,message:this.response,stack:new Error().stack})}}var d='undefined'!=typeof window&&window.URL,c=d?'blob':'arraybuffer',p=new a.defer,u=new XMLHttpRequest,g=XMLHttpRequest.prototype,h;for(h in'overrideMimeType'in g||Object.defineProperty(g,'overrideMimeType',{value:function(){}}),n&&(u.withCredentials=!0),u.onreadystatechange=l,u.onerror=o,u.open('GET',e,!0),r)u.setRequestHeader(h,r[h]);'json'==t&&u.setRequestHeader('Accept','application/json'),t||(t=new i.default(e).extension),'blob'==t&&(u.responseType=c),(0,a.isXml)(t)&&u.overrideMimeType('text/xml'),'xhtml'==t,'html'!=t&&'htm'!=t,'binary'==t&&(u.responseType='arraybuffer'),u.send();var y=s&&s.isFileEncrypted(e);return y&&(u.responseType='arraybuffer'),p.promise},e.exports=t['default']},function(e,t,n){'use strict';(function(e){function a(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function r(e,t){if(a()<t)throw new RangeError('Invalid typed array length');return s.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=s.prototype):(null===e&&(e=new s(t)),e.length=t),e}function s(e,t,n){if(!s.TYPED_ARRAY_SUPPORT&&!(this instanceof s))return new s(e,t,n);if('number'==typeof e){if('string'==typeof t)throw new Error('If encoding is specified then the first argument must be a string');return c(this,e)}return i(this,e,t,n)}function i(e,t,n,a){if('number'==typeof t)throw new TypeError('\"value\" argument must not be a number');return'undefined'!=typeof ArrayBuffer&&t instanceof ArrayBuffer?f(e,t,n,a):'string'==typeof t?u(e,t,n):m(e,t)}function o(e){if('number'!=typeof e)throw new TypeError('\"size\" argument must be a number');else if(0>e)throw new RangeError('\"size\" argument must not be negative')}function d(e,t,n,a){return o(t),0>=t?r(e,t):void 0===n?r(e,t):'string'==typeof a?r(e,t).fill(n,a):r(e,t).fill(n)}function c(e,t){if(o(t),e=r(e,0>t?0:0|E(t)),!s.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function u(e,t,n){if(('string'!=typeof n||''===n)&&(n='utf8'),!s.isEncoding(n))throw new TypeError('\"encoding\" must be a valid string encoding');var a=0|C(t,n);e=r(e,a);var i=e.write(t,n);return i!==a&&(e=e.slice(0,i)),e}function h(e,t){var n=0>t.length?0:0|E(t.length);e=r(e,n);for(var a=0;a<n;a+=1)e[a]=255&t[a];return e}function f(e,t,n,a){if(t.byteLength,0>n||t.byteLength<n)throw new RangeError('\\'offset\\' is out of bounds');if(t.byteLength<n+(a||0))throw new RangeError('\\'length\\' is out of bounds');return t=void 0===n&&void 0===a?new Uint8Array(t):void 0===a?new Uint8Array(t,n):new Uint8Array(t,n,a),s.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=s.prototype):e=h(e,t),e}function m(e,t){if(s.isBuffer(t)){var n=0|E(t.length);return(e=r(e,n),0===e.length)?e:(t.copy(e,0,0,n),e)}if(t){if('undefined'!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||'length'in t)return'number'!=typeof t.length||J(t.length)?r(e,0):h(e,t);if('Buffer'===t.type&&te(t.data))return h(e,t.data)}throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')}function E(e){if(e>=a())throw new RangeError('Attempt to allocate Buffer larger than maximum size: 0x'+a().toString(16)+' bytes');return 0|e}function C(e,t){if(s.isBuffer(e))return e.length;if('undefined'!=typeof ArrayBuffer&&'function'==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;'string'!=typeof e&&(e=''+e);var n=e.length;if(0===n)return 0;for(var a=!1;;)switch(t){case'ascii':case'latin1':case'binary':return n;case'utf8':case'utf-8':case void 0:return W(e).length;case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return 2*n;case'hex':return n>>>1;case'base64':return X(e).length;default:if(a)return W(e).length;t=(''+t).toLowerCase(),a=!0;}}function v(e,t,n){var a=!1;if((void 0===t||0>t)&&(t=0),t>this.length)return'';if((void 0===n||n>this.length)&&(n=this.length),0>=n)return'';if(n>>>=0,t>>>=0,n<=t)return'';for(e||(e='utf8');;)switch(e){case'hex':return P(this,t,n);case'utf8':case'utf-8':return x(this,t,n);case'ascii':return D(this,t,n);case'latin1':case'binary':return w(this,t,n);case'base64':return R(this,t,n);case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return U(this,t,n);default:if(a)throw new TypeError('Unknown encoding: '+e);e=(e+'').toLowerCase(),a=!0;}}function b(e,t,n){var a=e[t];e[t]=e[n],e[n]=a}function S(e,t,n,a,r){if(0===e.length)return-1;if('string'==typeof n?(a=n,n=0):2147483647<n?n=2147483647:-2147483648>n&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:e.length-1),0>n&&(n=e.length+n),n>=e.length){if(r)return-1;n=e.length-1}else if(0>n)if(r)n=0;else return-1;if('string'==typeof t&&(t=s.from(t,a)),s.isBuffer(t))return 0===t.length?-1:T(e,t,n,a,r);if('number'==typeof t)return t&=255,s.TYPED_ARRAY_SUPPORT&&'function'==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):T(e,[t],n,a,r);throw new TypeError('val must be string, number or Buffer')}function T(e,t,n,a,r){function s(e,t){return 1==o?e[t]:e.readUInt16BE(t*o)}var o=1,l=e.length,d=t.length;if(void 0!==a&&(a=(a+'').toLowerCase(),'ucs2'===a||'ucs-2'===a||'utf16le'===a||'utf-16le'===a)){if(2>e.length||2>t.length)return-1;o=2,l/=2,d/=2,n/=2}var c;if(r){var i=-1;for(c=n;c<l;c++)if(s(e,c)!==s(t,-1==i?0:c-i))-1!=i&&(c-=c-i),i=-1;else if(-1==i&&(i=c),c-i+1===d)return i*o}else for(n+d>l&&(n=l-d),c=n;0<=c;c--){for(var p=!0,u=0;u<d;u++)if(s(e,c+u)!==s(t,u)){p=!1;break}if(p)return c}return-1}function I(e,t,n,a){n=+n||0;var r=e.length-n;a?(a=+a,a>r&&(a=r)):a=r;var s=t.length;if(0!=s%2)throw new TypeError('Invalid hex string');a>s/2&&(a=s/2);for(var o=0,i;o<a;++o){if(i=parseInt(t.substr(2*o,2),16),isNaN(i))return o;e[n+o]=i}return o}function A(e,t,n,a){return Z(W(t,e.length-n),e,n,a)}function _(e,t,n,a){return Z(Y(t),e,n,a)}function k(e,t,n,a){return _(e,t,n,a)}function N(e,t,n,a){return Z(X(t),e,n,a)}function B(e,t,n,a){return Z(Q(t,e.length-n),e,n,a)}function R(e,t,n){return 0===t&&n===e.length?$.fromByteArray(e):$.fromByteArray(e.slice(t,n))}function x(e,t,n){n=g(e.length,n);for(var a=[],r=t;r<n;){var i=e[r],s=null,o=239<i?4:223<i?3:191<i?2:1;if(r+o<=n){var l,d,c,p;1==o?128>i&&(s=i):2==o?(l=e[r+1],128==(192&l)&&(p=(31&i)<<6|63&l,127<p&&(s=p))):3==o?(l=e[r+1],d=e[r+2],128==(192&l)&&128==(192&d)&&(p=(15&i)<<12|(63&l)<<6|63&d,2047<p&&(55296>p||57343<p)&&(s=p))):4==o?(l=e[r+1],d=e[r+2],c=e[r+3],128==(192&l)&&128==(192&d)&&128==(192&c)&&(p=(15&i)<<18|(63&l)<<12|(63&d)<<6|63&c,65535<p&&1114112>p&&(s=p))):void 0}null===s?(s=65533,o=1):65535<s&&(s-=65536,a.push(55296|1023&s>>>10),s=56320|1023&s),a.push(s),r+=o}return L(a)}function L(e){var t=e.length;if(t<=ne)return y.apply(String,e);for(var n='',a=0;a<t;)n+=y.apply(String,e.slice(a,a+=ne));return n}function D(e,t,n){var a='';n=g(e.length,n);for(var r=t;r<n;++r)a+=y(127&e[r]);return a}function w(e,t,n){var a='';n=g(e.length,n);for(var r=t;r<n;++r)a+=y(e[r]);return a}function P(e,t,n){var a=e.length;(!t||0>t)&&(t=0),(!n||0>n||n>a)&&(n=a);for(var r='',s=t;s<n;++s)r+=G(e[s]);return r}function U(e,t,n){for(var a=e.slice(t,n),r='',s=0;s<a.length;s+=2)r+=y(a[s]+256*a[s+1]);return r}function O(e,t,n){if(0!=e%1||0>e)throw new RangeError('offset is not uint');if(e+t>n)throw new RangeError('Trying to access beyond buffer length')}function V(e,t,n,a,r,i){if(!s.isBuffer(e))throw new TypeError('\"buffer\" argument must be a Buffer instance');if(t>r||t<i)throw new RangeError('\"value\" argument is out of bounds');if(n+a>e.length)throw new RangeError('Index out of range')}function K(e,t,n,a){0>t&&(t=65535+t+1);for(var r=0,i=g(e.length-n,2);r<i;++r)e[n+r]=(t&255<<8*(a?r:1-r))>>>8*(a?r:1-r)}function j(e,t,n,a){0>t&&(t=4294967295+t+1);for(var r=0,i=g(e.length-n,4);r<i;++r)e[n+r]=255&t>>>8*(a?r:3-r)}function M(e,t,n,a){if(n+a>e.length)throw new RangeError('Index out of range');if(0>n)throw new RangeError('Index out of range')}function q(e,t,n,a,r){return r||M(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),ee.write(e,t,n,a,23,4),n+4}function z(e,t,n,a,r){return r||M(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),ee.write(e,t,n,a,52,8),n+8}function F(e){if(e=H(e).replace(ae,''),2>e.length)return'';for(;0!=e.length%4;)e+='=';return e}function H(e){return e.trim?e.trim():e.replace(/^\\s+|\\s+$/g,'')}function G(e){return 16>e?'0'+e.toString(16):e.toString(16)}function W(e,t){t=t||Infinity;for(var n=e.length,a=null,r=[],s=0,i;s<n;++s){if(i=e.charCodeAt(s),55295<i&&57344>i){if(!a){if(56319<i){-1<(t-=3)&&r.push(239,191,189);continue}else if(s+1===n){-1<(t-=3)&&r.push(239,191,189);continue}a=i;continue}if(56320>i){-1<(t-=3)&&r.push(239,191,189),a=i;continue}i=(a-55296<<10|i-56320)+65536}else a&&-1<(t-=3)&&r.push(239,191,189);if(a=null,128>i){if(0>(t-=1))break;r.push(i)}else if(2048>i){if(0>(t-=2))break;r.push(192|i>>6,128|63&i)}else if(65536>i){if(0>(t-=3))break;r.push(224|i>>12,128|63&i>>6,128|63&i)}else if(1114112>i){if(0>(t-=4))break;r.push(240|i>>18,128|63&i>>12,128|63&i>>6,128|63&i)}else throw new Error('Invalid code point')}return r}function Y(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function Q(e,t){for(var n=[],a=0,r,i,s;a<e.length&&!(0>(t-=2));++a)r=e.charCodeAt(a),i=r>>8,s=r%256,n.push(s),n.push(i);return n}function X(e){return $.toByteArray(F(e))}function Z(e,t,n,a){for(var r=0;r<a&&!(r+n>=t.length||r>=e.length);++r)t[r+n]=e[r];return r}function J(e){return e!==e}/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <http://feross.org>\n * @license  MIT\n */var $=n(120),ee=n(121),te=n(122);t.Buffer=s,t.SlowBuffer=function(e){return+e!=e&&(e=0),s.alloc(+e)},t.INSPECT_MAX_BYTES=50,s.TYPED_ARRAY_SUPPORT=e.TYPED_ARRAY_SUPPORT===void 0?function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&'function'==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}():e.TYPED_ARRAY_SUPPORT,t.kMaxLength=a(),s.poolSize=8192,s._augment=function(e){return e.__proto__=s.prototype,e},s.from=function(e,t,n){return i(null,e,t,n)},s.TYPED_ARRAY_SUPPORT&&(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,'undefined'!=typeof Symbol&&Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0})),s.alloc=function(e,t,n){return d(null,e,t,n)},s.allocUnsafe=function(e){return c(null,e)},s.allocUnsafeSlow=function(e){return c(null,e)},s.isBuffer=function(e){return!!(null!=e&&e._isBuffer)},s.compare=function(e,t){if(!s.isBuffer(e)||!s.isBuffer(t))throw new TypeError('Arguments must be Buffers');if(e===t)return 0;for(var n=e.length,a=t.length,r=0,i=g(n,a);r<i;++r)if(e[r]!==t[r]){n=e[r],a=t[r];break}return n<a?-1:a<n?1:0},s.isEncoding=function(e){switch((e+'').toLowerCase()){case'hex':case'utf8':case'utf-8':case'ascii':case'latin1':case'binary':case'base64':case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return!0;default:return!1;}},s.concat=function(e,t){if(!te(e))throw new TypeError('\"list\" argument must be an Array of Buffers');if(0===e.length)return s.alloc(0);var n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var a=s.allocUnsafe(t),r=0;for(n=0;n<e.length;++n){var i=e[n];if(!s.isBuffer(i))throw new TypeError('\"list\" argument must be an Array of Buffers');i.copy(a,r),r+=i.length}return a},s.byteLength=C,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var e=this.length;if(0!=e%2)throw new RangeError('Buffer size must be a multiple of 16-bits');for(var t=0;t<e;t+=2)b(this,t,t+1);return this},s.prototype.swap32=function(){var e=this.length;if(0!=e%4)throw new RangeError('Buffer size must be a multiple of 32-bits');for(var t=0;t<e;t+=4)b(this,t,t+3),b(this,t+1,t+2);return this},s.prototype.swap64=function(){var e=this.length;if(0!=e%8)throw new RangeError('Buffer size must be a multiple of 64-bits');for(var t=0;t<e;t+=8)b(this,t,t+7),b(this,t+1,t+6),b(this,t+2,t+5),b(this,t+3,t+4);return this},s.prototype.toString=function(){var e=0|this.length;return 0==e?'':0===arguments.length?x(this,0,e):v.apply(this,arguments)},s.prototype.equals=function(e){if(!s.isBuffer(e))throw new TypeError('Argument must be a Buffer');return this===e||0===s.compare(this,e)},s.prototype.inspect=function(){var e='',n=t.INSPECT_MAX_BYTES;return 0<this.length&&(e=this.toString('hex',0,n).match(/.{2}/g).join(' '),this.length>n&&(e+=' ... ')),'<Buffer '+e+'>'},s.prototype.compare=function(e,t,n,a,r){if(!s.isBuffer(e))throw new TypeError('Argument must be a Buffer');if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===a&&(a=0),void 0===r&&(r=this.length),0>t||n>e.length||0>a||r>this.length)throw new RangeError('out of range index');if(a>=r&&t>=n)return 0;if(a>=r)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,a>>>=0,r>>>=0,this===e)return 0;for(var o=r-a,l=n-t,d=g(o,l),c=this.slice(a,r),p=e.slice(t,n),u=0;u<d;++u)if(c[u]!==p[u]){o=c[u],l=p[u];break}return o<l?-1:l<o?1:0},s.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},s.prototype.indexOf=function(e,t,n){return S(this,e,t,n,!0)},s.prototype.lastIndexOf=function(e,t,n){return S(this,e,t,n,!1)},s.prototype.write=function(e,t,n,a){if(void 0===t)a='utf8',n=this.length,t=0;else if(void 0===n&&'string'==typeof t)a=t,n=this.length,t=0;else if(isFinite(t))t|=0,isFinite(n)?(n|=0,void 0===a&&(a='utf8')):(a=n,n=void 0);else throw new Error('Buffer.write(string, encoding, offset[, length]) is no longer supported');var r=this.length-t;if((void 0===n||n>r)&&(n=r),0<e.length&&(0>n||0>t)||t>this.length)throw new RangeError('Attempt to write outside buffer bounds');a||(a='utf8');for(var i=!1;;)switch(a){case'hex':return I(this,e,t,n);case'utf8':case'utf-8':return A(this,e,t,n);case'ascii':return _(this,e,t,n);case'latin1':case'binary':return k(this,e,t,n);case'base64':return N(this,e,t,n);case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return B(this,e,t,n);default:if(i)throw new TypeError('Unknown encoding: '+a);a=(''+a).toLowerCase(),i=!0;}},s.prototype.toJSON=function(){return{type:'Buffer',data:Array.prototype.slice.call(this._arr||this,0)}};var ne=4096;s.prototype.slice=function(e,t){var n=this.length;e=~~e,t=t===void 0?n:~~t,0>e?(e+=n,0>e&&(e=0)):e>n&&(e=n),0>t?(t+=n,0>t&&(t=0)):t>n&&(t=n),t<e&&(t=e);var a;if(s.TYPED_ARRAY_SUPPORT)a=this.subarray(e,t),a.__proto__=s.prototype;else{var r=t-e;a=new s(r,void 0);for(var o=0;o<r;++o)a[o]=this[o+e]}return a},s.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||O(e,t,this.length);for(var a=this[e],r=1,s=0;++s<t&&(r*=256);)a+=this[e+s]*r;return a},s.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||O(e,t,this.length);for(var a=this[e+--t],r=1;0<t&&(r*=256);)a+=this[e+--t]*r;return a},s.prototype.readUInt8=function(e,t){return t||O(e,1,this.length),this[e]},s.prototype.readUInt16LE=function(e,t){return t||O(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUInt16BE=function(e,t){return t||O(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUInt32LE=function(e,t){return t||O(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},s.prototype.readUInt32BE=function(e,t){return t||O(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||O(e,t,this.length);for(var a=this[e],r=1,s=0;++s<t&&(r*=256);)a+=this[e+s]*r;return r*=128,a>=r&&(a-=l(2,8*t)),a},s.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||O(e,t,this.length);for(var a=t,r=1,i=this[e+--a];0<a&&(r*=256);)i+=this[e+--a]*r;return r*=128,i>=r&&(i-=l(2,8*t)),i},s.prototype.readInt8=function(e,t){return t||O(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},s.prototype.readInt16LE=function(e,t){t||O(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(e,t){t||O(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(e,t){return t||O(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return t||O(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readFloatLE=function(e,t){return t||O(e,4,this.length),ee.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return t||O(e,4,this.length),ee.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return t||O(e,8,this.length),ee.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return t||O(e,8,this.length),ee.read(this,e,!1,52,8)},s.prototype.writeUIntLE=function(e,t,n,a){if(e=+e,t|=0,n|=0,!a){var r=l(2,8*n)-1;V(this,e,t,n,r,0)}var s=1,o=0;for(this[t]=255&e;++o<n&&(s*=256);)this[t+o]=255&e/s;return t+n},s.prototype.writeUIntBE=function(e,t,n,a){if(e=+e,t|=0,n|=0,!a){var r=l(2,8*n)-1;V(this,e,t,n,r,0)}var s=n-1,i=1;for(this[t+s]=255&e;0<=--s&&(i*=256);)this[t+s]=255&e/i;return t+n},s.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||V(this,e,t,1,255,0),s.TYPED_ARRAY_SUPPORT||(e=p(e)),this[t]=255&e,t+1},s.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||V(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):K(this,e,t,!0),t+2},s.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||V(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):K(this,e,t,!1),t+2},s.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||V(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):j(this,e,t,!0),t+4},s.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||V(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):j(this,e,t,!1),t+4},s.prototype.writeIntLE=function(e,t,n,a){if(e=+e,t|=0,!a){var r=l(2,8*n-1);V(this,e,t,n,r-1,-r)}var s=0,i=1,o=0;for(this[t]=255&e;++s<n&&(i*=256);)0>e&&0==o&&0!==this[t+s-1]&&(o=1),this[t+s]=255&(e/i>>0)-o;return t+n},s.prototype.writeIntBE=function(e,t,n,a){if(e=+e,t|=0,!a){var r=l(2,8*n-1);V(this,e,t,n,r-1,-r)}var s=n-1,i=1,o=0;for(this[t+s]=255&e;0<=--s&&(i*=256);)0>e&&0==o&&0!==this[t+s+1]&&(o=1),this[t+s]=255&(e/i>>0)-o;return t+n},s.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||V(this,e,t,1,127,-128),s.TYPED_ARRAY_SUPPORT||(e=p(e)),0>e&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||V(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):K(this,e,t,!0),t+2},s.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||V(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):K(this,e,t,!1),t+2},s.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||V(this,e,t,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):j(this,e,t,!0),t+4},s.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||V(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):j(this,e,t,!1),t+4},s.prototype.writeFloatLE=function(e,t,n){return q(this,e,t,!0,n)},s.prototype.writeFloatBE=function(e,t,n){return q(this,e,t,!1,n)},s.prototype.writeDoubleLE=function(e,t,n){return z(this,e,t,!0,n)},s.prototype.writeDoubleBE=function(e,t,n){return z(this,e,t,!1,n)},s.prototype.copy=function(e,t,n,a){if(n||(n=0),a||0===a||(a=this.length),t>=e.length&&(t=e.length),t||(t=0),0<a&&a<n&&(a=n),a===n)return 0;if(0===e.length||0===this.length)return 0;if(0>t)throw new RangeError('targetStart out of bounds');if(0>n||n>=this.length)throw new RangeError('sourceStart out of bounds');if(0>a)throw new RangeError('sourceEnd out of bounds');a>this.length&&(a=this.length),e.length-t<a-n&&(a=e.length-t+n);var r=a-n,o;if(this===e&&n<t&&t<a)for(o=r-1;0<=o;--o)e[o+t]=this[o+n];else if(1e3>r||!s.TYPED_ARRAY_SUPPORT)for(o=0;o<r;++o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+r),t);return r},s.prototype.fill=function(e,t,n,a){if('string'==typeof e){if('string'==typeof t?(a=t,t=0,n=this.length):'string'==typeof n&&(a=n,n=this.length),1===e.length){var r=e.charCodeAt(0);256>r&&(e=r)}if(void 0!==a&&'string'!=typeof a)throw new TypeError('encoding must be a string');if('string'==typeof a&&!s.isEncoding(a))throw new TypeError('Unknown encoding: '+a)}else'number'==typeof e&&(e&=255);if(0>t||this.length<t||this.length<n)throw new RangeError('Out of range index');if(n<=t)return this;t>>>=0,n=n===void 0?this.length:n>>>0,e||(e=0);var o;if('number'==typeof e)for(o=t;o<n;++o)this[o]=e;else{var i=s.isBuffer(e)?e:W(new s(e,a).toString()),l=i.length;for(o=0;o<n-t;++o)this[o+t]=i[o%l]}return this};var ae=/[^+\\/0-9A-Za-z-_]/g}).call(t,n(9))},function(e,t,n){function a(e,t){o.cipher.registerAlgorithm(e,function(){return new o.des.Algorithm(e,t)})}function r(e){for(var t=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],a=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],r=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],s=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],o=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],l=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],d=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],c=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],p=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],u=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],g=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],h=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],y=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],f=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],m=8<e.length()?3:1,E=[],C=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],v=0,n=0,b;n<m;n++){var S=e.getInt32(),T=e.getInt32();b=252645135&(S>>>4^T),T^=b,S^=b<<4,b=65535&(T>>>-16^S),S^=b,T^=b<<-16,b=858993459&(S>>>2^T),T^=b,S^=b<<2,b=65535&(T>>>-16^S),S^=b,T^=b<<-16,b=1431655765&(S>>>1^T),T^=b,S^=b<<1,b=16711935&(T>>>8^S),S^=b,T^=b<<8,b=1431655765&(S>>>1^T),T^=b,S^=b<<1,b=S<<8|240&T>>>20,S=T<<24|16711680&T<<8|65280&T>>>8|240&T>>>24,T=b;for(var I=0;I<C.length;++I){C[I]?(S=S<<2|S>>>26,T=T<<2|T>>>26):(S=S<<1|S>>>27,T=T<<1|T>>>27),S&=-15,T&=-15;var i=t[S>>>28]|a[15&S>>>24]|r[15&S>>>20]|s[15&S>>>16]|o[15&S>>>12]|l[15&S>>>8]|d[15&S>>>4],A=c[T>>>28]|p[15&T>>>24]|u[15&T>>>20]|g[15&T>>>16]|h[15&T>>>12]|y[15&T>>>8]|f[15&T>>>4];b=65535&(A>>>16^i),E[v++]=i^b,E[v++]=A^b<<16}}return E}function i(e,t,n,a){var r=32===e.length?3:9,s;s=3==r?a?[30,-2,-2]:[0,32,2]:a?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var o=t[0],f=t[1],m;m=252645135&(o>>>4^f),f^=m,o^=m<<4,m=65535&(o>>>16^f),f^=m,o^=m<<16,m=858993459&(f>>>2^o),o^=m,f^=m<<2,m=16711935&(f>>>8^o),o^=m,f^=m<<8,m=1431655765&(o>>>1^f),f^=m,o^=m<<1,o=o<<1|o>>>31,f=f<<1|f>>>31;for(var E=0;E<r;E+=3){for(var C=s[E+1],v=s[E+2],b=s[E];b!=C;b+=v){var i=f^e[b],S=(f>>>4|f<<28)^e[b+1];m=o,o=f,f=m^(d[63&i>>>24]|p[63&i>>>16]|g[63&i>>>8]|y[63&i]|l[63&S>>>24]|c[63&S>>>16]|u[63&S>>>8]|h[63&S])}m=o,o=f,f=m}o=o>>>1|o<<31,f=f>>>1|f<<31,m=1431655765&(o>>>1^f),f^=m,o^=m<<1,m=16711935&(f>>>8^o),o^=m,f^=m<<8,m=858993459&(f>>>2^o),o^=m,f^=m<<2,m=65535&(o>>>16^f),f^=m,o^=m<<16,m=252645135&(o>>>4^f),f^=m,o^=m<<4,n[0]=o,n[1]=f}function s(e){e=e||{};var t=(e.mode||'CBC').toUpperCase(),n='DES-'+t,a;a=e.decrypt?o.cipher.createDecipher(n,e.key):o.cipher.createCipher(n,e.key);var r=a.start;return a.start=function(e,t){var n=null;t instanceof o.util.ByteBuffer&&(n=t,t={}),t=t||{},t.output=n,t.iv=e,r.call(a,t)},a}var o=n(0);n(31),n(47),n(1),e.exports=o.des=o.des||{},o.des.startEncrypting=function(e,t,n,a){var r=s({key:e,output:n,decrypt:!1,mode:a||(null===t?'ECB':'CBC')});return r.start(t),r},o.des.createEncryptionCipher=function(e,t){return s({key:e,output:null,decrypt:!1,mode:t})},o.des.startDecrypting=function(e,t,n,a){var r=s({key:e,output:n,decrypt:!0,mode:a||(null===t?'ECB':'CBC')});return r.start(t),r},o.des.createDecryptionCipher=function(e,t){return s({key:e,output:null,decrypt:!0,mode:t})},o.des.Algorithm=function(e,t){var n=this;n.name=e,n.mode=new t({blockSize:8,cipher:{encrypt:function(e,t){return i(n._keys,e,t,!1)},decrypt:function(e,t){return i(n._keys,e,t,!0)}}}),n._init=!1},o.des.Algorithm.prototype.initialize=function(e){if(!this._init){var t=o.util.createBuffer(e.key);if(0===this.name.indexOf('3DES')&&24!==t.length())throw new Error('Invalid Triple-DES key size: '+8*t.length());this._keys=r(t),this._init=!0}},a('DES-ECB',o.cipher.modes.ecb),a('DES-CBC',o.cipher.modes.cbc),a('DES-CFB',o.cipher.modes.cfb),a('DES-OFB',o.cipher.modes.ofb),a('DES-CTR',o.cipher.modes.ctr),a('3DES-ECB',o.cipher.modes.ecb),a('3DES-CBC',o.cipher.modes.cbc),a('3DES-CFB',o.cipher.modes.cfb),a('3DES-OFB',o.cipher.modes.ofb),a('3DES-CTR',o.cipher.modes.ctr);var l=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],d=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],c=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],p=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],u=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],g=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],h=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],y=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696]},function(e,t,n){function a(e,t,n){var a=g.util.createBuffer(),r=d(t.n.bitLength()/8);if(e.length>r-11){var s=new Error('Message is too long for PKCS#1 v1.5 padding.');throw s.length=e.length,s.max=r-11,s}a.putByte(0),a.putByte(n);var o=r-3-e.length,l;if(0===n||1===n){l=0===n?0:255;for(var c=0;c<o;++c)a.putByte(l)}else for(;0<o;){for(var i=0,p=g.random.getBytes(o),c=0;c<o;++c)l=p.charCodeAt(c),0===l?++i:a.putByte(l);o=i}return a.putByte(0),a.putBytes(e),a}function r(e,t,n,a){var r=d(t.n.bitLength()/8),s=g.util.createBuffer(e),o=s.getByte(),l=s.getByte();if(0!==o||n&&0!==l&&1!==l||!n&&2!=l||n&&0===l&&'undefined'==typeof a)throw new Error('Encryption block is invalid.');var c=0;if(0===l){c=r-3-a;for(var p=0;p<c;++p)if(0!==s.getByte())throw new Error('Encryption block is invalid.')}else if(1===l)for(c=0;1<s.length();){if(255!==s.getByte()){--s.read;break}++c}else if(2===l)for(c=0;1<s.length();){if(0===s.getByte()){--s.read;break}++c}var i=s.getByte();if(0!==i||c!=r-3-s.length())throw new Error('Encryption block is invalid.');return s.getBytes()}function i(e,t,n){function a(){r(e.pBits,function(t,a){return t?n(t):(e.p=a,null===e.q?void r(e.qBits,i):i(t,e.q))})}function r(e,t){g.prime.generateProbablePrime(e,s,t)}function i(t,s){if(t)return n(t);if(e.q=s,0>e.p.compareTo(e.q)){var o=e.p;e.p=e.q,e.q=o}if(0!==e.p.subtract(h.ONE).gcd(e.e).compareTo(h.ONE))return e.p=null,void a();if(0!==e.q.subtract(h.ONE).gcd(e.e).compareTo(h.ONE))return e.q=null,void r(e.qBits,i);if(e.p1=e.p.subtract(h.ONE),e.q1=e.q.subtract(h.ONE),e.phi=e.p1.multiply(e.q1),0!==e.phi.gcd(e.e).compareTo(h.ONE))return e.p=e.q=null,void a();if(e.n=e.p.multiply(e.q),e.n.bitLength()!==e.bits)return e.q=null,void r(e.qBits,i);var l=e.e.modInverse(e.phi);e.keys={privateKey:E.rsa.setPrivateKey(e.n,e.e,l,e.p,e.q,l.mod(e.p1),l.mod(e.q1),e.q.modInverse(e.p)),publicKey:E.rsa.setPublicKey(e.n,e.e)},n(null,e.keys)}'function'==typeof t&&(n=t,t={}),t=t||{};var s={algorithm:{name:t.algorithm||'PRIMEINC',options:{workers:t.workers||2,workLoad:t.workLoad||100,workerScript:t.workerScript}}};'prng'in t&&(s.prng=t.prng),a()}function s(e){var t=e.toString(16);'8'<=t[0]&&(t='00'+t);var n=g.util.hexToBytes(t);return 1<n.length&&(0===n.charCodeAt(0)&&0==(128&n.charCodeAt(1))||255===n.charCodeAt(0)&&128==(128&n.charCodeAt(1)))?n.substr(1):n}function o(e){return 100>=e?27:150>=e?18:200>=e?15:250>=e?12:300>=e?9:350>=e?8:400>=e?7:500>=e?6:600>=e?5:800>=e?4:1250>=e?3:2}function l(e){return g.util.isNodejs&&'function'==typeof y[e]}function c(e){return'undefined'!=typeof m.globalScope&&'object'==typeof m.globalScope.crypto&&'object'==typeof m.globalScope.crypto.subtle&&'function'==typeof m.globalScope.crypto.subtle[e]}function p(e){return'undefined'!=typeof m.globalScope&&'object'==typeof m.globalScope.msCrypto&&'object'==typeof m.globalScope.msCrypto.subtle&&'function'==typeof m.globalScope.msCrypto.subtle[e]}function u(e){for(var t=g.util.hexToBytes(e.toString(16)),n=new Uint8Array(t.length),a=0;a<t.length;++a)n[a]=t.charCodeAt(a);return n}var g=n(0);if(n(7),n(23),n(12),n(54),n(55),n(5),n(1),'undefined'==typeof h)var h=g.jsbn.BigInteger;var y=g.util.isNodejs?n(35):null,f=g.asn1,m=g.util;g.pki=g.pki||{},e.exports=g.pki.rsa=g.rsa=g.rsa||{};var E=g.pki,C=[6,4,2,4,2,4,6,2],v={name:'PrivateKeyInfo',tagClass:f.Class.UNIVERSAL,type:f.Type.SEQUENCE,constructed:!0,value:[{name:'PrivateKeyInfo.version',tagClass:f.Class.UNIVERSAL,type:f.Type.INTEGER,constructed:!1,capture:'privateKeyVersion'},{name:'PrivateKeyInfo.privateKeyAlgorithm',tagClass:f.Class.UNIVERSAL,type:f.Type.SEQUENCE,constructed:!0,value:[{name:'AlgorithmIdentifier.algorithm',tagClass:f.Class.UNIVERSAL,type:f.Type.OID,constructed:!1,capture:'privateKeyOid'}]},{name:'PrivateKeyInfo',tagClass:f.Class.UNIVERSAL,type:f.Type.OCTETSTRING,constructed:!1,capture:'privateKey'}]},b={name:'RSAPrivateKey',tagClass:f.Class.UNIVERSAL,type:f.Type.SEQUENCE,constructed:!0,value:[{name:'RSAPrivateKey.version',tagClass:f.Class.UNIVERSAL,type:f.Type.INTEGER,constructed:!1,capture:'privateKeyVersion'},{name:'RSAPrivateKey.modulus',tagClass:f.Class.UNIVERSAL,type:f.Type.INTEGER,constructed:!1,capture:'privateKeyModulus'},{name:'RSAPrivateKey.publicExponent',tagClass:f.Class.UNIVERSAL,type:f.Type.INTEGER,constructed:!1,capture:'privateKeyPublicExponent'},{name:'RSAPrivateKey.privateExponent',tagClass:f.Class.UNIVERSAL,type:f.Type.INTEGER,constructed:!1,capture:'privateKeyPrivateExponent'},{name:'RSAPrivateKey.prime1',tagClass:f.Class.UNIVERSAL,type:f.Type.INTEGER,constructed:!1,capture:'privateKeyPrime1'},{name:'RSAPrivateKey.prime2',tagClass:f.Class.UNIVERSAL,type:f.Type.INTEGER,constructed:!1,capture:'privateKeyPrime2'},{name:'RSAPrivateKey.exponent1',tagClass:f.Class.UNIVERSAL,type:f.Type.INTEGER,constructed:!1,capture:'privateKeyExponent1'},{name:'RSAPrivateKey.exponent2',tagClass:f.Class.UNIVERSAL,type:f.Type.INTEGER,constructed:!1,capture:'privateKeyExponent2'},{name:'RSAPrivateKey.coefficient',tagClass:f.Class.UNIVERSAL,type:f.Type.INTEGER,constructed:!1,capture:'privateKeyCoefficient'}]},S={name:'RSAPublicKey',tagClass:f.Class.UNIVERSAL,type:f.Type.SEQUENCE,constructed:!0,value:[{name:'RSAPublicKey.modulus',tagClass:f.Class.UNIVERSAL,type:f.Type.INTEGER,constructed:!1,capture:'publicKeyModulus'},{name:'RSAPublicKey.exponent',tagClass:f.Class.UNIVERSAL,type:f.Type.INTEGER,constructed:!1,capture:'publicKeyExponent'}]},T=g.pki.rsa.publicKeyValidator={name:'SubjectPublicKeyInfo',tagClass:f.Class.UNIVERSAL,type:f.Type.SEQUENCE,constructed:!0,captureAsn1:'subjectPublicKeyInfo',value:[{name:'SubjectPublicKeyInfo.AlgorithmIdentifier',tagClass:f.Class.UNIVERSAL,type:f.Type.SEQUENCE,constructed:!0,value:[{name:'AlgorithmIdentifier.algorithm',tagClass:f.Class.UNIVERSAL,type:f.Type.OID,constructed:!1,capture:'publicKeyOid'}]},{name:'SubjectPublicKeyInfo.subjectPublicKey',tagClass:f.Class.UNIVERSAL,type:f.Type.BITSTRING,constructed:!1,value:[{name:'SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey',tagClass:f.Class.UNIVERSAL,type:f.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:'rsaPublicKey'}]}]},I={name:'DigestInfo',tagClass:f.Class.UNIVERSAL,type:f.Type.SEQUENCE,constructed:!0,value:[{name:'DigestInfo.DigestAlgorithm',tagClass:f.Class.UNIVERSAL,type:f.Type.SEQUENCE,constructed:!0,value:[{name:'DigestInfo.DigestAlgorithm.algorithmIdentifier',tagClass:f.Class.UNIVERSAL,type:f.Type.OID,constructed:!1,capture:'algorithmIdentifier'},{name:'DigestInfo.DigestAlgorithm.parameters',tagClass:f.Class.UNIVERSAL,type:f.Type.NULL,capture:'parameters',optional:!0,constructed:!1}]},{name:'DigestInfo.digest',tagClass:f.Class.UNIVERSAL,type:f.Type.OCTETSTRING,constructed:!1,capture:'digest'}]},A=function(e){var t;if(e.algorithm in E.oids)t=E.oids[e.algorithm];else{var n=new Error('Unknown message digest algorithm.');throw n.algorithm=e.algorithm,n}var a=f.oidToDer(t).getBytes(),r=f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[]),i=f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[]);i.value.push(f.create(f.Class.UNIVERSAL,f.Type.OID,!1,a)),i.value.push(f.create(f.Class.UNIVERSAL,f.Type.NULL,!1,''));var s=f.create(f.Class.UNIVERSAL,f.Type.OCTETSTRING,!1,e.digest().getBytes());return r.value.push(i),r.value.push(s),f.toDer(r).getBytes()},_=function(e,t,n){if(n)return e.modPow(t.e,t.n);if(!t.p||!t.q)return e.modPow(t.d,t.n);t.dP||(t.dP=t.d.mod(t.p.subtract(h.ONE))),t.dQ||(t.dQ=t.d.mod(t.q.subtract(h.ONE))),t.qInv||(t.qInv=t.q.modInverse(t.p));var a;do a=new h(g.util.bytesToHex(g.random.getBytes(t.n.bitLength()/8)),16);while(0<=a.compareTo(t.n)||!a.gcd(t.n).equals(h.ONE));e=e.multiply(a.modPow(t.e,t.n)).mod(t.n);for(var r=e.mod(t.p).modPow(t.dP,t.p),i=e.mod(t.q).modPow(t.dQ,t.q);0>r.compareTo(i);)r=r.add(t.p);var s=r.subtract(i).multiply(t.qInv).mod(t.p).multiply(t.q).add(i);return s=s.multiply(a.modInverse(t.n)).mod(t.n),s};E.rsa.encrypt=function(e,t,n){var r=n,i=d(t.n.bitLength()/8),s;!1!==n&&!0!==n?(r=2===n,s=a(e,t,n)):(s=g.util.createBuffer(),s.putBytes(e));for(var o=new h(s.toHex(),16),l=_(o,t,r),c=l.toString(16),p=g.util.createBuffer(),u=i-d(c.length/2);0<u;)p.putByte(0),--u;return p.putBytes(g.util.hexToBytes(c)),p.getBytes()},E.rsa.decrypt=function(e,t,n,a){var i=d(t.n.bitLength()/8);if(e.length!==i){var s=new Error('Encrypted message length is invalid.');throw s.length=e.length,s.expected=i,s}var o=new h(g.util.createBuffer(e).toHex(),16);if(0<=o.compareTo(t.n))throw new Error('Encrypted message is invalid.');for(var l=_(o,t,n),c=l.toString(16),p=g.util.createBuffer(),u=i-d(c.length/2);0<u;)p.putByte(0),--u;return p.putBytes(g.util.hexToBytes(c)),!1===a?p.getBytes():r(p.getBytes(),t,n)},E.rsa.createKeyPairGenerationState=function(t,n,e){'string'==typeof t&&(t=parseInt(t,10)),t=t||2048,e=e||{};var a=e.prng||g.random,r=e.algorithm||'PRIMEINC',i;if('PRIMEINC'===r)i={algorithm:r,state:0,bits:t,rng:{nextBytes:function(e){for(var t=a.getBytesSync(e.length),n=0;n<e.length;++n)e[n]=t.charCodeAt(n)}},eInt:n||65537,e:new h(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null},i.e.fromInt(i.eInt);else throw new Error('Invalid key generation algorithm: '+r);return i},E.rsa.stepKeyPairGenerationState=function(e,t){'algorithm'in e||(e.algorithm='PRIMEINC');var n=new h(null);n.fromInt(30);for(var a=0,r=function(e,t){return e|t},i=+new Date,s=0,l;null===e.keys&&(0>=t||s<t);){if(0===e.state){var c=null===e.p?e.pBits:e.qBits,p=c-1;0===e.pqState?(e.num=new h(c,e.rng),!e.num.testBit(p)&&e.num.bitwiseTo(h.ONE.shiftLeft(p),r,e.num),e.num.dAddOffset(31-e.num.mod(n).byteValue(),0),a=0,++e.pqState):1===e.pqState?e.num.bitLength()>c?e.pqState=0:e.num.isProbablePrime(o(e.num.bitLength()))?++e.pqState:e.num.dAddOffset(C[a++%8],0):2===e.pqState?e.pqState=0===e.num.subtract(h.ONE).gcd(e.e).compareTo(h.ONE)?3:0:3===e.pqState&&(e.pqState=0,null===e.p?e.p=e.num:e.q=e.num,null!==e.p&&null!==e.q&&++e.state,e.num=null)}else if(1===e.state)0>e.p.compareTo(e.q)&&(e.num=e.p,e.p=e.q,e.q=e.num),++e.state;else if(2===e.state)e.p1=e.p.subtract(h.ONE),e.q1=e.q.subtract(h.ONE),e.phi=e.p1.multiply(e.q1),++e.state;else if(3===e.state)0===e.phi.gcd(e.e).compareTo(h.ONE)?++e.state:(e.p=null,e.q=null,e.state=0);else if(4===e.state)e.n=e.p.multiply(e.q),e.n.bitLength()===e.bits?++e.state:(e.q=null,e.state=0);else if(5===e.state){var u=e.e.modInverse(e.phi);e.keys={privateKey:E.rsa.setPrivateKey(e.n,e.e,u,e.p,e.q,u.mod(e.p1),u.mod(e.q1),e.q.modInverse(e.p)),publicKey:E.rsa.setPublicKey(e.n,e.e)}}l=+new Date,s+=l-i,i=l}return null!==e.keys},E.rsa.generateKeyPair=function(t,n,a,r){if(1===arguments.length?'object'==typeof t?(a=t,t=void 0):'function'==typeof t&&(r=t,t=void 0):2===arguments.length?'number'==typeof t?'function'==typeof n?(r=n,n=void 0):'number'!=typeof n&&(a=n,n=void 0):(a=t,r=n,t=void 0,n=void 0):3===arguments.length&&('number'==typeof n?'function'==typeof a&&(r=a,a=void 0):(r=a,a=n,n=void 0)),a=a||{},void 0===t&&(t=a.bits||2048),void 0===n&&(n=a.e||65537),!g.options.usePureJavaScript&&!a.prng&&256<=t&&16384>=t&&(65537===n||3===n))if(r){if(l('generateKeyPair'))return y.generateKeyPair('rsa',{modulusLength:t,publicExponent:n,publicKeyEncoding:{type:'spki',format:'pem'},privateKeyEncoding:{type:'pkcs8',format:'pem'}},function(e,t,n){return e?r(e):void r(null,{privateKey:E.privateKeyFromPem(n),publicKey:E.publicKeyFromPem(t)})});if(c('generateKey')&&c('exportKey'))return m.globalScope.crypto.subtle.generateKey({name:'RSASSA-PKCS1-v1_5',modulusLength:t,publicExponent:u(n),hash:{name:'SHA-256'}},!0,['sign','verify']).then(function(e){return m.globalScope.crypto.subtle.exportKey('pkcs8',e.privateKey)}).then(void 0,function(e){r(e)}).then(function(e){if(e){var t=E.privateKeyFromAsn1(f.fromDer(g.util.createBuffer(e)));r(null,{privateKey:t,publicKey:E.setRsaPublicKey(t.n,t.e)})}});if(p('generateKey')&&p('exportKey')){var s=m.globalScope.msCrypto.subtle.generateKey({name:'RSASSA-PKCS1-v1_5',modulusLength:t,publicExponent:u(n),hash:{name:'SHA-256'}},!0,['sign','verify']);return s.oncomplete=function(t){var e=t.target.result,n=m.globalScope.msCrypto.subtle.exportKey('pkcs8',e.privateKey);n.oncomplete=function(t){var e=t.target.result,n=E.privateKeyFromAsn1(f.fromDer(g.util.createBuffer(e)));r(null,{privateKey:n,publicKey:E.setRsaPublicKey(n.n,n.e)})},n.onerror=function(e){r(e)}},void(s.onerror=function(e){r(e)})}}else if(l('generateKeyPairSync')){var o=y.generateKeyPairSync('rsa',{modulusLength:t,publicExponent:n,publicKeyEncoding:{type:'spki',format:'pem'},privateKeyEncoding:{type:'pkcs8',format:'pem'}});return{privateKey:E.privateKeyFromPem(o.privateKey),publicKey:E.publicKeyFromPem(o.publicKey)}}var d=E.rsa.createKeyPairGenerationState(t,n,a);return r?void i(d,a,r):(E.rsa.stepKeyPairGenerationState(d,0),d.keys)},E.setRsaPublicKey=E.rsa.setPublicKey=function(t,i){var s={n:t,e:i};return s.encrypt=function(t,n,r){if('string'==typeof n?n=n.toUpperCase():void 0===n&&(n='RSAES-PKCS1-V1_5'),'RSAES-PKCS1-V1_5'===n)n={encode:function(e,t){return a(e,t,2).getBytes()}};else if('RSA-OAEP'===n||'RSAES-OAEP'===n)n={encode:function(e,t){return g.pkcs1.encode_rsa_oaep(t,e,r)}};else if(-1!==['RAW','NONE','NULL',null].indexOf(n))n={encode:function(t){return t}};else if('string'==typeof n)throw new Error('Unsupported encryption scheme: \"'+n+'\".');var i=n.encode(t,s,!0);return E.rsa.encrypt(i,s,!0)},s.verify=function(e,t,n,a){'string'==typeof n?n=n.toUpperCase():void 0===n&&(n='RSASSA-PKCS1-V1_5'),void 0===a&&(a={_parseAllDigestBytes:!0}),'_parseAllDigestBytes'in a||(a._parseAllDigestBytes=!0),'RSASSA-PKCS1-V1_5'===n?n={verify:function(e,t){t=r(t,s,!0);var n=f.fromDer(t,{parseAllBytes:a._parseAllDigestBytes}),i={},o=[];if(!f.validate(n,I,i,o)){var l=new Error('ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.');throw l.errors=o,l}var d=f.derToOid(i.algorithmIdentifier);if(d!==g.oids.md2&&d!==g.oids.md5&&d!==g.oids.sha1&&d!==g.oids.sha224&&d!==g.oids.sha256&&d!==g.oids.sha384&&d!==g.oids.sha512&&d!==g.oids['sha512-224']&&d!==g.oids['sha512-256']){var l=new Error('Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.');throw l.oid=d,l}if((d===g.oids.md2||d===g.oids.md5)&&!('parameters'in i))throw new Error('ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.');return e===i.digest}}:('NONE'===n||'NULL'===n||null===n)&&(n={verify:function(e,t){return t=r(t,s,!0),e===t}});var i=E.rsa.decrypt(t,s,!0,!1);return n.verify(e,i,s.n.bitLength())},s},E.setRsaPrivateKey=E.rsa.setPrivateKey=function(t,a,i,s,o,l,c,u){var h={n:t,e:a,d:i,p:s,q:o,dP:l,dQ:c,qInv:u};return h.decrypt=function(e,t,n){'string'==typeof t?t=t.toUpperCase():void 0===t&&(t='RSAES-PKCS1-V1_5');var a=E.rsa.decrypt(e,h,!1,!1);if('RSAES-PKCS1-V1_5'===t)t={decode:r};else if('RSA-OAEP'===t||'RSAES-OAEP'===t)t={decode:function(e,t){return g.pkcs1.decode_rsa_oaep(t,e,n)}};else if(-1!==['RAW','NONE','NULL',null].indexOf(t))t={decode:function(e){return e}};else throw new Error('Unsupported encryption scheme: \"'+t+'\".');return t.decode(a,h,!1)},h.sign=function(e,t){var n=!1;'string'==typeof t&&(t=t.toUpperCase()),void 0===t||'RSASSA-PKCS1-V1_5'===t?(t={encode:A},n=1):('NONE'===t||'NULL'===t||null===t)&&(t={encode:function(){return e}},n=1);var a=t.encode(e,h.n.bitLength());return E.rsa.encrypt(a,h,n)},h},E.wrapRsaPrivateKey=function(e){return f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.INTEGER,!1,f.integerToDer(0).getBytes()),f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.OID,!1,f.oidToDer(E.oids.rsaEncryption).getBytes()),f.create(f.Class.UNIVERSAL,f.Type.NULL,!1,'')]),f.create(f.Class.UNIVERSAL,f.Type.OCTETSTRING,!1,f.toDer(e).getBytes())])},E.privateKeyFromAsn1=function(t){var a={},r=[];if(f.validate(t,v,a,r)&&(t=f.fromDer(g.util.createBuffer(a.privateKey))),a={},r=[],!f.validate(t,b,a,r)){var i=new Error('Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.');throw i.errors=r,i}var s,n,e,o,l,d,c,p;return s=g.util.createBuffer(a.privateKeyModulus).toHex(),n=g.util.createBuffer(a.privateKeyPublicExponent).toHex(),e=g.util.createBuffer(a.privateKeyPrivateExponent).toHex(),o=g.util.createBuffer(a.privateKeyPrime1).toHex(),l=g.util.createBuffer(a.privateKeyPrime2).toHex(),d=g.util.createBuffer(a.privateKeyExponent1).toHex(),c=g.util.createBuffer(a.privateKeyExponent2).toHex(),p=g.util.createBuffer(a.privateKeyCoefficient).toHex(),E.setRsaPrivateKey(new h(s,16),new h(n,16),new h(e,16),new h(o,16),new h(l,16),new h(d,16),new h(c,16),new h(p,16))},E.privateKeyToAsn1=E.privateKeyToRSAPrivateKey=function(e){return f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.INTEGER,!1,f.integerToDer(0).getBytes()),f.create(f.Class.UNIVERSAL,f.Type.INTEGER,!1,s(e.n)),f.create(f.Class.UNIVERSAL,f.Type.INTEGER,!1,s(e.e)),f.create(f.Class.UNIVERSAL,f.Type.INTEGER,!1,s(e.d)),f.create(f.Class.UNIVERSAL,f.Type.INTEGER,!1,s(e.p)),f.create(f.Class.UNIVERSAL,f.Type.INTEGER,!1,s(e.q)),f.create(f.Class.UNIVERSAL,f.Type.INTEGER,!1,s(e.dP)),f.create(f.Class.UNIVERSAL,f.Type.INTEGER,!1,s(e.dQ)),f.create(f.Class.UNIVERSAL,f.Type.INTEGER,!1,s(e.qInv))])},E.publicKeyFromAsn1=function(t){var a={},r=[];if(f.validate(t,T,a,r)){var i=f.derToOid(a.publicKeyOid);if(i!==E.oids.rsaEncryption){var s=new Error('Cannot read public key. Unknown OID.');throw s.oid=i,s}t=a.rsaPublicKey}if(r=[],!f.validate(t,S,a,r)){var s=new Error('Cannot read public key. ASN.1 object does not contain an RSAPublicKey.');throw s.errors=r,s}var o=g.util.createBuffer(a.publicKeyModulus).toHex(),n=g.util.createBuffer(a.publicKeyExponent).toHex();return E.setRsaPublicKey(new h(o,16),new h(n,16))},E.publicKeyToAsn1=E.publicKeyToSubjectPublicKeyInfo=function(e){return f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.OID,!1,f.oidToDer(E.oids.rsaEncryption).getBytes()),f.create(f.Class.UNIVERSAL,f.Type.NULL,!1,'')]),f.create(f.Class.UNIVERSAL,f.Type.BITSTRING,!1,[E.publicKeyToRSAPublicKey(e)])])},E.publicKeyToRSAPublicKey=function(e){return f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.INTEGER,!1,s(e.n)),f.create(f.Class.UNIVERSAL,f.Type.INTEGER,!1,s(e.e))])}},function(e,t,n){function h(e,t,n){this.data=[],null!=e&&('number'==typeof e?this.fromNumber(e,t,n):null==t&&'string'!=typeof e?this.fromString(e,256):this.fromString(e,t))}function u(){return new h(null)}function a(e,t,a,r,i,s){for(var n=16383&t,o=t>>14;0<=--s;){var d=16383&this.data[e],l=this.data[e++]>>14,c=o*d+l*n;d=n*d+((16383&c)<<14)+a.data[r]+i,i=(d>>28)+(c>>14)+o*l,a.data[r++]=268435455&d}return i}function y(e){return x.charAt(e)}function r(e,t){var n=L[e.charCodeAt(t)];return null==n?-1:n}function f(e){var t=u();return t.fromInt(e),t}function d(e){var n=1,a;return 0!=(a=e>>>16)&&(e=a,n+=16),0!=(a=e>>8)&&(e=a,n+=8),0!=(a=e>>4)&&(e=a,n+=4),0!=(a=e>>2)&&(e=a,n+=2),0!=(a=e>>1)&&(e=a,n+=1),n}function E(e){this.m=e}function C(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function i(e,t){return e&t}function m(e,t){return e|t}function v(e,t){return e^t}function b(e,t){return e&~t}function S(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function T(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function I(){}function A(e){return e}function _(e){this.r2=u(),this.q3=u(),h.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function N(){return{nextBytes:function(e){for(var t=0;t<e.length;++t)e[t]=p(256*Math.random())}}}var k=n(0);e.exports=k.jsbn=k.jsbn||{};var B;k.jsbn.BigInteger=h,'undefined'==typeof navigator?(h.prototype.am=a,B=28):'Microsoft Internet Explorer'==navigator.appName?(h.prototype.am=function(e,t,a,r,i,s){for(var n=32767&t,o=t>>15;0<=--s;){var d=32767&this.data[e],l=this.data[e++]>>15,c=o*d+l*n;d=n*d+((32767&c)<<15)+a.data[r]+(1073741823&i),i=(d>>>30)+(c>>>15)+o*l+(i>>>30),a.data[r++]=1073741823&d}return i},B=30):'Netscape'!=navigator.appName?(h.prototype.am=function(e,t,a,r,i,s){for(;0<=--s;){var n=t*this.data[e++]+a.data[r]+i;i=p(n/67108864),a.data[r++]=67108863&n}return i},B=26):(h.prototype.am=a,B=28),h.prototype.DB=B,h.prototype.DM=(1<<B)-1,h.prototype.DV=1<<B;var R=52;h.prototype.FV=4503599627370496,h.prototype.F1=R-B,h.prototype.F2=2*B-R;var x='0123456789abcdefghijklmnopqrstuvwxyz',L=[],D,w;for(D=48,w=0;9>=w;++w)L[D++]=w;for(D=97,w=10;36>w;++w)L[D++]=w;for(D=65,w=10;36>w;++w)L[D++]=w;E.prototype.convert=function(e){return 0>e.s||0<=e.compareTo(this.m)?e.mod(this.m):e},E.prototype.revert=function(e){return e},E.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},E.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},E.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},C.prototype.convert=function(e){var t=u();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),0>e.s&&0<t.compareTo(h.ZERO)&&this.m.subTo(t,t),t},C.prototype.revert=function(e){var t=u();return e.copyTo(t),this.reduce(t),t},C.prototype.reduce=function(e){for(;e.t<=this.mt2;)e.data[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e.data[t],a=n*this.mpl+((n*this.mph+(e.data[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(n=t+this.m.t,e.data[n]+=this.m.am(0,a,e,t,0,this.m.t);e.data[n]>=e.DV;)e.data[n]-=e.DV,e.data[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),0<=e.compareTo(this.m)&&e.subTo(this.m,e)},C.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},C.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},h.prototype.copyTo=function(e){for(var t=this.t-1;0<=t;--t)e.data[t]=this.data[t];e.t=this.t,e.s=this.s},h.prototype.fromInt=function(e){this.t=1,this.s=0>e?-1:0,0<e?this.data[0]=e:-1>e?this.data[0]=e+this.DV:this.t=0},h.prototype.fromString=function(e,t){var n;if(16==t)n=4;else if(8==t)n=3;else if(256==t)n=8;else if(2==t)n=1;else if(32==t)n=5;else if(4==t)n=2;else return void this.fromRadix(e,t);this.t=0,this.s=0;for(var a=e.length,i=!1,s=0;0<=--a;){var o=8==n?255&e[a]:r(e,a);if(0>o){'-'==e.charAt(a)&&(i=!0);continue}i=!1,0==s?this.data[this.t++]=o:s+n>this.DB?(this.data[this.t-1]|=(o&(1<<this.DB-s)-1)<<s,this.data[this.t++]=o>>this.DB-s):this.data[this.t-1]|=o<<s,s+=n,s>=this.DB&&(s-=this.DB)}8==n&&0!=(128&e[0])&&(this.s=-1,0<s&&(this.data[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),i&&h.ZERO.subTo(this,this)},h.prototype.clamp=function(){for(var e=this.s&this.DM;0<this.t&&this.data[this.t-1]==e;)--this.t},h.prototype.dlShiftTo=function(e,t){var n;for(n=this.t-1;0<=n;--n)t.data[n+e]=this.data[n];for(n=e-1;0<=n;--n)t.data[n]=0;t.t=this.t+e,t.s=this.s},h.prototype.drShiftTo=function(e,t){for(var n=e;n<this.t;++n)t.data[n-e]=this.data[n];t.t=c(this.t-e,0),t.s=this.s},h.prototype.lShiftTo=function(e,t){var n=e%this.DB,a=this.DB-n,r=p(e/this.DB),s=this.s<<n&this.DM,o;for(o=this.t-1;0<=o;--o)t.data[o+r+1]=this.data[o]>>a|s,s=(this.data[o]&(1<<a)-1)<<n;for(o=r-1;0<=o;--o)t.data[o]=0;t.data[r]=s,t.t=this.t+r+1,t.s=this.s,t.clamp()},h.prototype.rShiftTo=function(e,t){t.s=this.s;var n=p(e/this.DB);if(n>=this.t)return void(t.t=0);var a=e%this.DB,r=this.DB-a,s=(1<<a)-1;t.data[0]=this.data[n]>>a;for(var o=n+1;o<this.t;++o)t.data[o-n-1]|=(this.data[o]&s)<<r,t.data[o-n]=this.data[o]>>a;0<a&&(t.data[this.t-n-1]|=(this.s&s)<<r),t.t=this.t-n,t.clamp()},h.prototype.subTo=function(e,t){for(var n=0,a=0,r=g(e.t,this.t);n<r;)a+=this.data[n]-e.data[n],t.data[n++]=a&this.DM,a>>=this.DB;if(e.t<this.t){for(a-=e.s;n<this.t;)a+=this.data[n],t.data[n++]=a&this.DM,a>>=this.DB;a+=this.s}else{for(a+=this.s;n<e.t;)a-=e.data[n],t.data[n++]=a&this.DM,a>>=this.DB;a-=e.s}t.s=0>a?-1:0,-1>a?t.data[n++]=this.DV+a:0<a&&(t.data[n++]=a),t.t=n,t.clamp()},h.prototype.multiplyTo=function(e,t){var n=this.abs(),a=e.abs(),r=n.t;for(t.t=r+a.t;0<=--r;)t.data[r]=0;for(r=0;r<a.t;++r)t.data[r+n.t]=n.am(0,a.data[r],t,r,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&h.ZERO.subTo(t,t)},h.prototype.squareTo=function(e){for(var t=this.abs(),n=e.t=2*t.t;0<=--n;)e.data[n]=0;for(n=0;n<t.t-1;++n){var a=t.am(n,t.data[n],e,2*n,0,1);(e.data[n+t.t]+=t.am(n+1,2*t.data[n],e,2*n+1,a,t.t-n-1))>=t.DV&&(e.data[n+t.t]-=t.DV,e.data[n+t.t+1]=1)}0<e.t&&(e.data[e.t-1]+=t.am(n,t.data[n],e,2*n,0,1)),e.s=0,e.clamp()},h.prototype.divRemTo=function(n,a,s){var r=n.abs();if(!(0>=r.t)){var o=this.abs();if(o.t<r.t)return null!=a&&a.fromInt(0),void(null!=s&&this.copyTo(s));null==s&&(s=u());var l=u(),c=this.s,g=n.s,y=this.DB-d(r.data[r.t-1]);0<y?(r.lShiftTo(y,l),o.lShiftTo(y,s)):(r.copyTo(l),o.copyTo(s));var f=l.t,m=l.data[f-1];if(0!=m){var E=m*(1<<this.F1)+(1<f?l.data[f-2]>>this.F2:0),C=this.FV/E,v=(1<<this.F1)/E,b=1<<this.F2,e=s.t,i=e-f,S=null==a?u():a;for(l.dlShiftTo(i,S),0<=s.compareTo(S)&&(s.data[s.t++]=1,s.subTo(S,s)),h.ONE.dlShiftTo(f,S),S.subTo(l,l);l.t<f;)l.data[l.t++]=0;for(;0<=--i;){var t=s.data[--e]==m?this.DM:p(s.data[e]*C+(s.data[e-1]+b)*v);if((s.data[e]+=l.am(0,t,s,i,0,f))<t)for(l.dlShiftTo(i,S),s.subTo(S,s);s.data[e]<--t;)s.subTo(S,s)}null!=a&&(s.drShiftTo(f,a),c!=g&&h.ZERO.subTo(a,a)),s.t=f,s.clamp(),0<y&&s.rShiftTo(y,s),0>c&&h.ZERO.subTo(s,s)}}},h.prototype.invDigit=function(){if(1>this.t)return 0;var e=this.data[0];if(0==(1&e))return 0;var t=3&e;return t=15&t*(2-(15&e)*t),t=255&t*(2-(255&e)*t),t=65535&t*(2-(65535&(65535&e)*t)),t=t*(2-e*t%this.DV)%this.DV,0<t?this.DV-t:-t},h.prototype.isEven=function(){return 0==(0<this.t?1&this.data[0]:this.s)},h.prototype.exp=function(n,e){if(4294967295<n||1>n)return h.ONE;var a=u(),r=u(),s=e.convert(this),o=d(n)-1;for(s.copyTo(a);0<=--o;)if(e.sqrTo(a,r),0<(n&1<<o))e.mulTo(r,s,a);else{var i=a;a=r,r=i}return e.revert(a)},h.prototype.toString=function(e){if(0>this.s)return'-'+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else if(4==e)t=2;else return this.toRadix(e);var n=(1<<t)-1,a=!1,s='',r=this.t,i=this.DB-r*this.DB%t,o;if(0<r--)for(i<this.DB&&0<(o=this.data[r]>>i)&&(a=!0,s=y(o));0<=r;)i<t?(o=(this.data[r]&(1<<i)-1)<<t-i,o|=this.data[--r]>>(i+=this.DB-t)):(o=this.data[r]>>(i-=t)&n,0>=i&&(i+=this.DB,--r)),0<o&&(a=!0),a&&(s+=y(o));return a?s:'0'},h.prototype.negate=function(){var e=u();return h.ZERO.subTo(this,e),e},h.prototype.abs=function(){return 0>this.s?this.negate():this},h.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(t=n-e.t,0!=t)return 0>this.s?-t:t;for(;0<=--n;)if(0!=(t=this.data[n]-e.data[n]))return t;return 0},h.prototype.bitLength=function(){return 0>=this.t?0:this.DB*(this.t-1)+d(this.data[this.t-1]^this.s&this.DM)},h.prototype.mod=function(e){var t=u();return this.abs().divRemTo(e,null,t),0>this.s&&0<t.compareTo(h.ZERO)&&e.subTo(t,t),t},h.prototype.modPowInt=function(t,e){var n;return n=256>t||e.isEven()?new E(e):new C(e),this.exp(t,n)},h.ZERO=f(0),h.ONE=f(1),I.prototype.convert=A,I.prototype.revert=A,I.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n)},I.prototype.sqrTo=function(e,t){e.squareTo(t)},_.prototype.convert=function(e){if(0>e.s||e.t>2*this.m.t)return e.mod(this.m);if(0>e.compareTo(this.m))return e;var t=u();return e.copyTo(t),this.reduce(t),t},_.prototype.revert=function(e){return e},_.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);0>e.compareTo(this.r2);)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);0<=e.compareTo(this.m);)e.subTo(this.m,e)},_.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},_.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var P=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],U=67108864/P[P.length-1];h.prototype.chunkSize=function(e){return p(o*this.DB/s(e))},h.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||2>e||36<e)return'0';var t=this.chunkSize(e),n=l(e,t),a=f(n),i=u(),s=u(),o='';for(this.divRemTo(a,i,s);0<i.signum();)o=(n+s.intValue()).toString(e).substr(1)+o,i.divRemTo(a,i,s);return s.intValue().toString(e)+o},h.prototype.fromRadix=function(e,t){this.fromInt(0),null==t&&(t=10);for(var n=this.chunkSize(t),a=l(t,n),s=!1,o=0,d=0,c=0,i;c<e.length;++c){if(i=r(e,c),0>i){'-'==e.charAt(c)&&0==this.signum()&&(s=!0);continue}d=t*d+i,++o>=n&&(this.dMultiply(a),this.dAddOffset(d,0),o=0,d=0)}0<o&&(this.dMultiply(l(t,o)),this.dAddOffset(d,0)),s&&h.ZERO.subTo(this,this)},h.prototype.fromNumber=function(e,n,a){if(!('number'==typeof n)){var r=[],i=7&e;r.length=(e>>3)+1,n.nextBytes(r),0<i?r[0]&=(1<<i)-1:r[0]=0,this.fromString(r,256)}else if(2>e)this.fromInt(1);else for(this.fromNumber(e,a),this.testBit(e-1)||this.bitwiseTo(h.ONE.shiftLeft(e-1),m,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(n);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(h.ONE.shiftLeft(e-1),this)},h.prototype.bitwiseTo=function(e,t,n){var a=g(e.t,this.t),r,i;for(r=0;r<a;++r)n.data[r]=t(this.data[r],e.data[r]);if(e.t<this.t){for(i=e.s&this.DM,r=a;r<this.t;++r)n.data[r]=t(this.data[r],i);n.t=this.t}else{for(i=this.s&this.DM,r=a;r<e.t;++r)n.data[r]=t(i,e.data[r]);n.t=e.t}n.s=t(this.s,e.s),n.clamp()},h.prototype.changeBit=function(e,t){var n=h.ONE.shiftLeft(e);return this.bitwiseTo(n,t,n),n},h.prototype.addTo=function(e,t){for(var n=0,a=0,r=g(e.t,this.t);n<r;)a+=this.data[n]+e.data[n],t.data[n++]=a&this.DM,a>>=this.DB;if(e.t<this.t){for(a+=e.s;n<this.t;)a+=this.data[n],t.data[n++]=a&this.DM,a>>=this.DB;a+=this.s}else{for(a+=this.s;n<e.t;)a+=e.data[n],t.data[n++]=a&this.DM,a>>=this.DB;a+=e.s}t.s=0>a?-1:0,0<a?t.data[n++]=a:-1>a&&(t.data[n++]=this.DV+a),t.t=n,t.clamp()},h.prototype.dMultiply=function(e){this.data[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},h.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this.data[this.t++]=0;for(this.data[t]+=e;this.data[t]>=this.DV;)this.data[t]-=this.DV,++t>=this.t&&(this.data[this.t++]=0),++this.data[t]}},h.prototype.multiplyLowerTo=function(e,t,n){var a=g(this.t+e.t,t);for(n.s=0,n.t=a;0<a;)n.data[--a]=0;var r;for(r=n.t-this.t;a<r;++a)n.data[a+this.t]=this.am(0,e.data[a],n,a,0,this.t);for(r=g(e.t,t);a<r;++a)this.am(0,e.data[a],n,a,0,t-a);n.clamp()},h.prototype.multiplyUpperTo=function(e,t,n){--t;var a=n.t=this.t+e.t-t;for(n.s=0;0<=--a;)n.data[a]=0;for(a=c(t-this.t,0);a<e.t;++a)n.data[this.t+a-t]=this.am(t-a,e.data[a],n,0,0,this.t+a-t);n.clamp(),n.drShiftTo(1,n)},h.prototype.modInt=function(e){if(0>=e)return 0;var t=this.DV%e,n=0>this.s?e-1:0;if(0<this.t)if(0==t)n=this.data[0]%e;else for(var a=this.t-1;0<=a;--a)n=(t*n+this.data[a])%e;return n},h.prototype.millerRabin=function(e){var t=this.subtract(h.ONE),n=t.getLowestSetBit();if(0>=n)return!1;for(var s=t.shiftRight(n),r=N(),o=0,i;o<e;++o){do i=new h(this.bitLength(),r);while(0>=i.compareTo(h.ONE)||0<=i.compareTo(t));var a=i.modPow(s,this);if(0!=a.compareTo(h.ONE)&&0!=a.compareTo(t)){for(var l=1;l++<n&&0!=a.compareTo(t);)if(a=a.modPowInt(2,this),0==a.compareTo(h.ONE))return!1;if(0!=a.compareTo(t))return!1}}return!0},h.prototype.clone=function(){var e=u();return this.copyTo(e),e},h.prototype.intValue=function(){if(0>this.s){if(1==this.t)return this.data[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this.data[0];if(0==this.t)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]},h.prototype.byteValue=function(){return 0==this.t?this.s:this.data[0]<<24>>24},h.prototype.shortValue=function(){return 0==this.t?this.s:this.data[0]<<16>>16},h.prototype.signum=function(){return 0>this.s?-1:0>=this.t||1==this.t&&0>=this.data[0]?0:1},h.prototype.toByteArray=function(){var e=this.t,t=[];t[0]=this.s;var n=this.DB-e*this.DB%8,a=0,r;if(0<e--)for(n<this.DB&&(r=this.data[e]>>n)!=(this.s&this.DM)>>n&&(t[a++]=r|this.s<<this.DB-n);0<=e;)8>n?(r=(this.data[e]&(1<<n)-1)<<8-n,r|=this.data[--e]>>(n+=this.DB-8)):(r=255&this.data[e]>>(n-=8),0>=n&&(n+=this.DB,--e)),0!=(128&r)&&(r|=-256),0==a&&(128&this.s)!=(128&r)&&++a,(0<a||r!=this.s)&&(t[a++]=r);return t},h.prototype.equals=function(e){return 0==this.compareTo(e)},h.prototype.min=function(e){return 0>this.compareTo(e)?this:e},h.prototype.max=function(e){return 0<this.compareTo(e)?this:e},h.prototype.and=function(e){var t=u();return this.bitwiseTo(e,i,t),t},h.prototype.or=function(e){var t=u();return this.bitwiseTo(e,m,t),t},h.prototype.xor=function(e){var t=u();return this.bitwiseTo(e,v,t),t},h.prototype.andNot=function(e){var t=u();return this.bitwiseTo(e,b,t),t},h.prototype.not=function(){for(var e=u(),t=0;t<this.t;++t)e.data[t]=this.DM&~this.data[t];return e.t=this.t,e.s=~this.s,e},h.prototype.shiftLeft=function(e){var t=u();return 0>e?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},h.prototype.shiftRight=function(e){var t=u();return 0>e?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},h.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this.data[e])return e*this.DB+S(this.data[e]);return 0>this.s?this.t*this.DB:-1},h.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,n=0;n<this.t;++n)e+=T(this.data[n]^t);return e},h.prototype.testBit=function(e){var t=p(e/this.DB);return t>=this.t?0!=this.s:0!=(this.data[t]&1<<e%this.DB)},h.prototype.setBit=function(e){return this.changeBit(e,m)},h.prototype.clearBit=function(e){return this.changeBit(e,b)},h.prototype.flipBit=function(e){return this.changeBit(e,v)},h.prototype.add=function(e){var t=u();return this.addTo(e,t),t},h.prototype.subtract=function(e){var t=u();return this.subTo(e,t),t},h.prototype.multiply=function(e){var t=u();return this.multiplyTo(e,t),t},h.prototype.divide=function(e){var t=u();return this.divRemTo(e,t,null),t},h.prototype.remainder=function(e){var t=u();return this.divRemTo(e,null,t),t},h.prototype.divideAndRemainder=function(e){var t=u(),n=u();return this.divRemTo(e,t,n),[t,n]},h.prototype.modPow=function(a,e){var s=a.bitLength(),i=f(1),r,o;if(0>=s)return i;r=18>s?1:48>s?3:144>s?4:768>s?5:6,o=8>s?new E(e):e.isEven()?new _(e):new C(e);var l=[],c=3,n=r-1,p=(1<<r)-1;if(l[1]=o.convert(this),1<r){var g=u();for(o.sqrTo(l[1],g);c<=p;)l[c]=u(),o.mulTo(g,l[c-2],l[c]),c+=2}var h=a.t-1,y=!0,m=u(),v,b;for(s=d(a.data[h])-1;0<=h;){for(s>=n?v=a.data[h]>>s-n&p:(v=(a.data[h]&(1<<s+1)-1)<<n-s,0<h&&(v|=a.data[h-1]>>this.DB+s-n)),c=r;0==(1&v);)v>>=1,--c;if(0>(s-=c)&&(s+=this.DB,--h),y)l[v].copyTo(i),y=!1;else{for(;1<c;)o.sqrTo(i,m),o.sqrTo(m,i),c-=2;0<c?o.sqrTo(i,m):(b=i,i=m,m=b),o.mulTo(m,l[v],i)}for(;0<=h&&0==(a.data[h]&1<<s);)o.sqrTo(i,m),b=i,i=m,m=b,0>--s&&(s=this.DB-1,--h)}return o.revert(i)},h.prototype.modInverse=function(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return h.ZERO;for(var n=e.clone(),r=this.clone(),i=f(1),a=f(0),s=f(0),o=f(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),t?((!i.isEven()||!a.isEven())&&(i.addTo(this,i),a.subTo(e,a)),i.rShiftTo(1,i)):!a.isEven()&&a.subTo(e,a),a.rShiftTo(1,a);for(;r.isEven();)r.rShiftTo(1,r),t?((!s.isEven()||!o.isEven())&&(s.addTo(this,s),o.subTo(e,o)),s.rShiftTo(1,s)):!o.isEven()&&o.subTo(e,o),o.rShiftTo(1,o);0<=n.compareTo(r)?(n.subTo(r,n),t&&i.subTo(s,i),a.subTo(o,a)):(r.subTo(n,r),t&&s.subTo(i,s),o.subTo(a,o))}if(0!=r.compareTo(h.ONE))return h.ZERO;if(0<=o.compareTo(e))return o.subtract(e);if(0>o.signum())o.addTo(e,o);else return o;return 0>o.signum()?o.add(e):o},h.prototype.pow=function(t){return this.exp(t,new I)},h.prototype.gcd=function(e){var n=0>this.s?this.negate():this.clone(),a=0>e.s?e.negate():e.clone();if(0>n.compareTo(a)){var r=n;n=a,a=r}var t=n.getLowestSetBit(),i=a.getLowestSetBit();if(0>i)return n;for(t<i&&(i=t),0<i&&(n.rShiftTo(i,n),a.rShiftTo(i,a));0<n.signum();)0<(t=n.getLowestSetBit())&&n.rShiftTo(t,n),0<(t=a.getLowestSetBit())&&a.rShiftTo(t,a),0<=n.compareTo(a)?(n.subTo(a,n),n.rShiftTo(1,n)):(a.subTo(n,a),a.rShiftTo(1,a));return 0<i&&a.lShiftTo(i,a),a},h.prototype.isProbablePrime=function(e){var t=this.abs(),n;if(1==t.t&&t.data[0]<=P[P.length-1]){for(n=0;n<P.length;++n)if(t.data[0]==P[n])return!0;return!1}if(t.isEven())return!1;for(n=1;n<P.length;){for(var a=P[n],r=n+1;r<P.length&&a<U;)a*=P[r++];for(a=t.modInt(a);n<r;)if(0==a%P[n++])return!1}return t.millerRabin(e)}},function(e,t,n){'use strict';var a=n(73)();e.exports=function(e){return e!==a&&null!==e}},function(e,t){'use strict';function n(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var a=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(t){n(this,e),this.context=t||this,this.hooks=[]}return a(e,[{key:'register',value:function(){for(var e=0;e<arguments.length;++e)if('function'==typeof arguments[e])this.hooks.push(arguments[e]);else for(var t=0;t<arguments[e].length;++t)this.hooks.push(arguments[e][t])}},{key:'deregister',value:function(e){for(var t=void 0,n=0;n<this.hooks.length;n++)if(t=this.hooks[n],t===e){this.hooks.splice(n,1);break}}},{key:'trigger',value:function(){var e=arguments,t=this.context,n=[];return this.hooks.forEach(function(a){var r=a.apply(t,e);r&&'function'==typeof r.then&&n.push(r)}),Promise.all(n)}},{key:'list',value:function(){return this.hooks}},{key:'clear',value:function(){return this.hooks=[]}}]),e}();t.default=r,e.exports=t['default']},function(e,t,n){'use strict';function a(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0}),t.Task=void 0;var r=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(2),s=function(){function e(t){a(this,e),this._q=[],this.context=t,this.tick=i.requestAnimationFrame,this.running=!1,this.paused=!1}return r(e,[{key:'enqueue',value:function(){var e=[].shift.call(arguments),t=arguments,n,a,r;if(!e)throw new Error('No Task Provided');return'function'==typeof e?(n=new i.defer,a=n.promise,r={task:e,args:t,deferred:n,promise:a}):r={promise:e},this._q.push(r),!1!=this.paused||this.running||this.run(),r.promise}},{key:'dequeue',value:function(){var e,t,n;if(this._q.length&&!this.paused){if(e=this._q.shift(),t=e.task,t)return n=t.apply(this.context,e.args),n&&'function'==typeof n.then?n.then(function(){e.deferred.resolve.apply(this.context,arguments)}.bind(this),function(){e.deferred.reject.apply(this.context,arguments)}.bind(this)):(e.deferred.resolve.apply(this.context,n),e.promise);if(e.promise)return e.promise}else return e=new i.defer,e.deferred.resolve(),e.promise}},{key:'dump',value:function(){for(;this._q.length;)this.dequeue()}},{key:'run',value:function(){var e=this;return this.running||(this.running=!0,this.defered=new i.defer),this.tick.call(window,function(){e._q.length?e.dequeue().then(function(){this.run()}.bind(e)):(e.defered.resolve(),e.running=void 0)}),!0==this.paused&&(this.paused=!1),this.defered.promise}},{key:'flush',value:function(){return this.running?this.running:this._q.length?(this.running=this.dequeue().then(function(){return this.running=void 0,this.flush()}.bind(this)),this.running):void 0}},{key:'clear',value:function(){this._q=[]}},{key:'length',value:function(){return this._q.length}},{key:'pause',value:function(){this.paused=!0}},{key:'stop',value:function(){this._q=[],this.running=!1,this.paused=!0}}]),e}();t.default=s,t.Task=function e(t,n,r){return a(this,e),function(){var e=this,n=arguments||[];return new Promise(function(a,i){n.push(function(e,t){!e&&t?i(t):a(e)}),t.apply(r||e,n)})}}},function(e){'use strict';var t={application:{ecmascript:['es','ecma'],javascript:'js',ogg:'ogx',pdf:'pdf',postscript:['ps','ai','eps','epsi','epsf','eps2','eps3'],\"rdf+xml\":'rdf',smil:['smi','smil'],\"xhtml+xml\":['xhtml','xht'],xml:['xml','xsl','xsd','opf','ncx'],zip:'zip',\"x-httpd-eruby\":'rhtml',\"x-latex\":'latex',\"x-maker\":['frm','maker','frame','fm','fb','book','fbdoc'],\"x-object\":'o',\"x-shockwave-flash\":['swf','swfl'],\"x-silverlight\":'scr',\"epub+zip\":'epub',\"font-tdpfr\":'pfr',\"inkml+xml\":['ink','inkml'],json:'json',\"jsonml+json\":'jsonml',\"mathml+xml\":'mathml',\"metalink+xml\":'metalink',mp4:'mp4s',\"omdoc+xml\":'omdoc',oxps:'oxps',\"vnd.amazon.ebook\":'azw',widget:'wgt',\"x-dtbook+xml\":'dtb',\"x-dtbresource+xml\":'res',\"x-font-bdf\":'bdf',\"x-font-ghostscript\":'gsf',\"x-font-linux-psf\":'psf',\"x-font-otf\":'otf',\"x-font-pcf\":'pcf',\"x-font-snf\":'snf',\"x-font-ttf\":['ttf','ttc'],\"x-font-type1\":['pfa','pfb','pfm','afm'],\"x-font-woff\":'woff',\"x-mobipocket-ebook\":['prc','mobi'],\"x-mspublisher\":'pub',\"x-nzb\":'nzb',\"x-tgif\":'obj',\"xaml+xml\":'xaml',\"xml-dtd\":'dtd',\"xproc+xml\":'xpl',\"xslt+xml\":'xslt',\"internet-property-stream\":'acx',\"x-compress\":'z',\"x-compressed\":'tgz',\"x-gzip\":'gz'},audio:{flac:'flac',midi:['mid','midi','kar','rmi'],mpeg:['mpga','mpega','mp2','mp3','m4a','mp2a','m2a','m3a'],mpegurl:'m3u',ogg:['oga','ogg','spx'],\"x-aiff\":['aif','aiff','aifc'],\"x-ms-wma\":'wma',\"x-wav\":'wav',adpcm:'adp',mp4:'mp4a',webm:'weba',\"x-aac\":'aac',\"x-caf\":'caf',\"x-matroska\":'mka',\"x-pn-realaudio-plugin\":'rmp',xm:'xm',mid:['mid','rmi']},image:{gif:'gif',ief:'ief',jpeg:['jpeg','jpg','jpe'],pcx:'pcx',png:'png',\"svg+xml\":['svg','svgz'],tiff:['tiff','tif'],\"x-icon\":'ico',bmp:'bmp',webp:'webp',\"x-pict\":['pic','pct'],\"x-tga\":'tga',\"cis-cod\":'cod'},text:{\"cache-manifest\":['manifest','appcache'],css:'css',csv:'csv',html:['html','htm','shtml','stm'],mathml:'mml',plain:['txt','text','brf','conf','def','list','log','in','bas'],richtext:'rtx',\"tab-separated-values\":'tsv',\"x-bibtex\":'bib'},video:{mpeg:['mpeg','mpg','mpe','m1v','m2v','mp2','mpa','mpv2'],mp4:['mp4','mp4v','mpg4'],quicktime:['qt','mov'],ogg:'ogv',\"vnd.mpegurl\":['mxu','m4u'],\"x-flv\":'flv',\"x-la-asf\":['lsf','lsx'],\"x-mng\":'mng',\"x-ms-asf\":['asf','asx','asr'],\"x-ms-wm\":'wm',\"x-ms-wmv\":'wmv',\"x-ms-wmx\":'wmx',\"x-ms-wvx\":'wvx',\"x-msvideo\":'avi',\"x-sgi-movie\":'movie',\"x-matroska\":['mpv','mkv','mk3d','mks'],\"3gpp2\":'3g2',h261:'h261',h263:'h263',h264:'h264',jpeg:'jpgv',jpm:['jpm','jpgm'],mj2:['mj2','mjp2'],\"vnd.ms-playready.media.pyv\":'pyv',\"vnd.uvvu.mp4\":['uvu','uvvu'],\"vnd.vivo\":'viv',webm:'webm',\"x-f4v\":'f4v',\"x-m4v\":'m4v',\"x-ms-vob\":'vob',\"x-smv\":'smv'}},n=function(){var e={},n,a,r,i;for(n in t)if(t.hasOwnProperty(n))for(a in t[n])if(t[n].hasOwnProperty(a))if(r=t[n][a],'string'==typeof r)e[r]=n+'/'+a;else for(i=0;i<r.length;i++)e[r[i]]=n+'/'+a;return e}();e.exports={lookup:function(e){return e&&n[e.split('.').pop().toLowerCase()]||'text/plain'}}},function(e,t,n){'use strict';function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var s=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(6),l=a(o),d=n(2),c=n(3),p=a(c),u=n(41),g=a(u),h=n(18),y=n(4),f='undefined'!=typeof navigator,m=f&&/Chrome/.test(navigator.userAgent),E=f&&!m&&/AppleWebKit/.test(navigator.userAgent),C=function(){function e(t,n,a,r){i(this,e),this.epubcfi=new p.default,this.document=t,this.documentElement=this.document.documentElement,this.content=n||this.document.body,this.window=this.document.defaultView,this._size={width:0,height:0},this.sectionIndex=r||0,this.cfiBase=a||'',this.epubReadingSystem('epub.js',y.EPUBJS_VERSION),this.listeners()}return s(e,[{key:'width',value:function(e){var t=this.content;return e&&(0,d.isNumber)(e)&&(e+='px'),e&&(t.style.width=e),this.window.getComputedStyle(t).width}},{key:'height',value:function(e){var t=this.content;return e&&(0,d.isNumber)(e)&&(e+='px'),e&&(t.style.height=e),this.window.getComputedStyle(t).height}},{key:'contentWidth',value:function(e){var t=this.content||this.document.body;return e&&(0,d.isNumber)(e)&&(e+='px'),e&&(t.style.width=e),this.window.getComputedStyle(t).width}},{key:'contentHeight',value:function(e){var t=this.content||this.document.body;return e&&(0,d.isNumber)(e)&&(e+='px'),e&&(t.style.height=e),this.window.getComputedStyle(t).height}},{key:'textWidth',value:function(){var e=void 0,t=void 0,n=this.document.createRange(),a=this.content||this.document.body,i=(0,d.borders)(a);return n.selectNodeContents(a),e=n.getBoundingClientRect(),t=e.width,i&&i.width&&(t+=i.width),r(t)}},{key:'textHeight',value:function(){var e=void 0,t=void 0,n=this.document.createRange(),a=this.content||this.document.body,i=(0,d.borders)(a);return n.selectNodeContents(a),e=n.getBoundingClientRect(),t=e.height,t&&i.height&&(t+=i.height),t&&e.top&&(t+=e.top),r(t)}},{key:'scrollWidth',value:function(){var e=this.documentElement.scrollWidth;return e}},{key:'scrollHeight',value:function(){var e=this.documentElement.scrollHeight;return e}},{key:'overflow',value:function(e){return e&&(this.documentElement.style.overflow=e),this.window.getComputedStyle(this.documentElement).overflow}},{key:'overflowX',value:function(e){return e&&(this.documentElement.style.overflowX=e),this.window.getComputedStyle(this.documentElement).overflowX}},{key:'overflowY',value:function(e){return e&&(this.documentElement.style.overflowY=e),this.window.getComputedStyle(this.documentElement).overflowY}},{key:'css',value:function(e,t,n){var a=this.content||this.document.body;return t?a.style.setProperty(e,t,n?'important':''):a.style.removeProperty(e),this.window.getComputedStyle(a)[e]}},{key:'viewport',value:function(e){var t=this.document.querySelector('meta[name=\\'viewport\\']'),n={width:void 0,height:void 0,scale:void 0,minimum:void 0,maximum:void 0,scalable:void 0},a=[],r={};if(t&&t.hasAttribute('content')){var i=t.getAttribute('content'),s=i.match(/width\\s*=\\s*([^,]*)/),o=i.match(/height\\s*=\\s*([^,]*)/),l=i.match(/initial-scale\\s*=\\s*([^,]*)/),c=i.match(/minimum-scale\\s*=\\s*([^,]*)/),p=i.match(/maximum-scale\\s*=\\s*([^,]*)/),u=i.match(/user-scalable\\s*=\\s*([^,]*)/);s&&s.length&&'undefined'!=typeof s[1]&&(n.width=s[1]),o&&o.length&&'undefined'!=typeof o[1]&&(n.height=o[1]),l&&l.length&&'undefined'!=typeof l[1]&&(n.scale=l[1]),c&&c.length&&'undefined'!=typeof c[1]&&(n.minimum=c[1]),p&&p.length&&'undefined'!=typeof p[1]&&(n.maximum=p[1]),u&&u.length&&'undefined'!=typeof u[1]&&(n.scalable=u[1])}return r=(0,d.defaults)(e||{},n),e&&(r.width&&a.push('width='+r.width),r.height&&a.push('height='+r.height),r.scale&&a.push('initial-scale='+r.scale),'no'===r.scalable?(a.push('minimum-scale='+r.scale),a.push('maximum-scale='+r.scale),a.push('user-scalable='+r.scalable)):(r.scalable&&a.push('user-scalable='+r.scalable),r.minimum&&a.push('minimum-scale='+r.minimum),r.maximum&&a.push('minimum-scale='+r.maximum)),!t&&(t=this.document.createElement('meta'),t.setAttribute('name','viewport'),this.document.querySelector('head').appendChild(t)),t.setAttribute('content',a.join(', ')),this.window.scrollTo(0,0)),r}},{key:'expand',value:function(){this.emit(y.EVENTS.CONTENTS.EXPAND)}},{key:'listeners',value:function(){this.imageLoadListeners(),this.mediaQueryListeners(),this.addEventListeners(),this.addSelectionListeners(),this.resizeListeners(),this.linksHandler()}},{key:'removeListeners',value:function(){this.removeEventListeners(),this.removeSelectionListeners(),clearTimeout(this.expanding)}},{key:'resizeCheck',value:function(){var e=this.textWidth(),t=this.textHeight();(e!=this._size.width||t!=this._size.height)&&(this._size={width:e,height:t},this.onResize&&this.onResize(this._size),this.emit(y.EVENTS.CONTENTS.RESIZE,this._size))}},{key:'resizeListeners',value:function(){clearTimeout(this.expanding),requestAnimationFrame(this.resizeCheck.bind(this))}},{key:'transitionListeners',value:function(){var e=this.content;e.style.transitionProperty='font, font-size, font-size-adjust, font-stretch, font-variation-settings, font-weight, width, height',e.style.transitionDuration='0.001ms',e.style.transitionTimingFunction='linear',e.style.transitionDelay='0',this._resizeCheck=this.resizeCheck.bind(this),this.document.addEventListener('transitionend',this._resizeCheck)}},{key:'mediaQueryListeners',value:function(){for(var e=this.document.styleSheets,t=function(e){e.matches&&!this._expanding&&setTimeout(this.expand.bind(this),1)}.bind(this),n=0;n<e.length;n+=1){var a;try{a=e[n].cssRules}catch(t){return}if(!a)return;for(var r=0;r<a.length;r+=1)if(a[r].media){var i=this.window.matchMedia(a[r].media.mediaText);i.addListener(t)}}}},{key:'resizeObservers',value:function(){var e=this;this.observer=new MutationObserver(function(){e.resizeCheck()});this.observer.observe(this.document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})}},{key:'imageLoadListeners',value:function(){for(var e=this.document.querySelectorAll('img'),t=0,n;t<e.length;t++)n=e[t],'undefined'!=typeof n.naturalWidth&&0===n.naturalWidth&&(n.onload=this.expand.bind(this))}},{key:'fontLoadListeners',value:function(){this.document&&this.document.fonts&&this.document.fonts.ready.then(function(){this.resizeCheck()}.bind(this))}},{key:'root',value:function(){return this.document?this.document.documentElement:null}},{key:'locationOf',value:function(e,t){var n={left:0,top:0},a;if(!this.document)return n;if(this.epubcfi.isCfiString(e)){var r=new p.default(e).toRange(this.document,t);if(r){try{if(!r.endContainer||r.startContainer==r.endContainer&&r.startOffset==r.endOffset){var i=r.startContainer.textContent.indexOf(' ',r.startOffset);-1==i&&(i=r.startContainer.textContent.length),r.setEnd(r.startContainer,i)}}catch(t){console.error('setting end offset to start container length failed',t)}if(r.startContainer.nodeType===Node.ELEMENT_NODE)a=r.startContainer.getBoundingClientRect(),n.left=a.left,n.top=a.top;else if(E){var s=r.startContainer,o=new Range;try{s.nodeType===1?a=s.getBoundingClientRect():r.startOffset+2<s.length?(o.setStart(s,r.startOffset),o.setEnd(s,r.startOffset+2),a=o.getBoundingClientRect()):0<r.startOffset-2?(o.setStart(s,r.startOffset-2),o.setEnd(s,r.startOffset),a=o.getBoundingClientRect()):a=s.parentNode.getBoundingClientRect()}catch(t){console.error(t,t.stack)}}else a=r.getBoundingClientRect()}}else if('string'==typeof e&&-1<e.indexOf('#')){var l=e.substring(e.indexOf('#')+1),d=this.document.getElementById(l);if(d)if(E){var c=new Range;c.selectNode(d),a=c.getBoundingClientRect()}else a=d.getBoundingClientRect()}return a&&(n.left=a.left,n.top=a.top),n}},{key:'addStylesheet',value:function(e){return new Promise(function(t){var n=!1,a;return this.document?(a=this.document.querySelector('link[href=\\''+e+'\\']'),a?void t(!0):void(a=this.document.createElement('link'),a.type='text/css',a.rel='stylesheet',a.href=e,a.onload=a.onreadystatechange=function(){n||this.readyState&&'complete'!=this.readyState||(n=!0,setTimeout(function(){t(!0)},1))},this.document.head.appendChild(a))):void t(!1)}.bind(this))}},{key:'_getStylesheetNode',value:function(e){var t;return(e='epubjs-inserted-css-'+(e||''),!!this.document)&&(t=this.document.getElementById(e),t||(t=this.document.createElement('style'),t.id=e,this.document.head.appendChild(t)),t)}},{key:'addStylesheetCss',value:function(e,t){if(!this.document||!e)return!1;var n;return n=this._getStylesheetNode(t),n.innerHTML=e,!0}},{key:'addStylesheetRules',value:function(e,t){var n;if(this.document&&e&&0!==e.length)if(n=this._getStylesheetNode(t).sheet,'[object Array]'===Object.prototype.toString.call(e))for(var a=0,r=e.length;a<r;a++){var i=1,s=e[a],o=e[a][0],l='';'[object Array]'===Object.prototype.toString.call(s[1][0])&&(s=s[1],i=0);for(var d=s.length,c;i<d;i++)c=s[i],l+=c[0]+':'+c[1]+(c[2]?' !important':'')+';\\n';n.insertRule(o+'{'+l+'}',n.cssRules.length)}else{var p=Object.keys(e);p.forEach(function(t){var a=e[t];if(Array.isArray(a))a.forEach(function(e){var a=Object.keys(e),r=a.map(function(t){return t+':'+e[t]}).join(';');n.insertRule(t+'{'+r+'}',n.cssRules.length)});else{var r=Object.keys(a),i=r.map(function(e){return e+':'+a[e]}).join(';');n.insertRule(t+'{'+i+'}',n.cssRules.length)}})}}},{key:'addScript',value:function(e){return new Promise(function(t){var n=!1,a;return this.document?void(a=this.document.createElement('script'),a.type='text/javascript',a.async=!0,a.src=e,a.onload=a.onreadystatechange=function(){n||this.readyState&&'complete'!=this.readyState||(n=!0,setTimeout(function(){t(!0)},1))},this.document.head.appendChild(a)):void t(!1)}.bind(this))}},{key:'addClass',value:function(e){var t;this.document&&(t=this.content||this.document.body,t&&t.classList.add(e))}},{key:'removeClass',value:function(e){var t;this.document&&(t=this.content||this.document.body,t&&t.classList.remove(e))}},{key:'addEventListeners',value:function(){this.document&&(this._triggerEvent=this.triggerEvent.bind(this),y.DOM_EVENTS.forEach(function(e){this.document.addEventListener(e,this._triggerEvent,{passive:!0})},this))}},{key:'removeEventListeners',value:function(){this.document&&(y.DOM_EVENTS.forEach(function(e){this.document.removeEventListener(e,this._triggerEvent,{passive:!0})},this),this._triggerEvent=void 0)}},{key:'triggerEvent',value:function(t){this.emit(t.type,t)}},{key:'addSelectionListeners',value:function(){this.document&&(this._onSelectionChange=this.onSelectionChange.bind(this),this.document.addEventListener('selectionchange',this._onSelectionChange,{passive:!0}))}},{key:'removeSelectionListeners',value:function(){this.document&&(this.document.removeEventListener('selectionchange',this._onSelectionChange,{passive:!0}),this._onSelectionChange=void 0)}},{key:'onSelectionChange',value:function(){this.selectionEndTimeout&&clearTimeout(this.selectionEndTimeout),this.selectionEndTimeout=setTimeout(function(){var e=this.window.getSelection();this.triggerSelectedEvent(e)}.bind(this),250)}},{key:'triggerSelectedEvent',value:function(e){var t,n;e&&0<e.rangeCount&&(t=e.getRangeAt(0),!t.collapsed&&(n=new p.default(t,this.cfiBase).toString(),this.emit(y.EVENTS.CONTENTS.SELECTED,n),this.emit(y.EVENTS.CONTENTS.SELECTED_RANGE,t)))}},{key:'range',value:function(e,t){var n=new p.default(e);return n.toRange(this.document,t)}},{key:'cfiFromRange',value:function(e,t){return new p.default(e,this.cfiBase,t).toString()}},{key:'cfiFromNode',value:function(e,t){return new p.default(e,this.cfiBase,t).toString()}},{key:'map',value:function(e){var t=new g.default(e);return t.section()}},{key:'size',value:function(e,t){var n={scale:1,scalable:'no'};this.layoutStyle('scrolling'),0<=e&&(this.width(e),n.width=e,this.css('padding','0 '+e/12+'px')),0<=t&&(this.height(t),n.height=t),this.css('margin','0'),this.css('box-sizing','border-box'),this.viewport(n)}},{key:'columns',value:function(e,t,n,a){var r=(0,d.prefixed)('column-axis'),i=(0,d.prefixed)('column-gap'),s=(0,d.prefixed)('column-width'),o=(0,d.prefixed)('column-fill'),l=this.writingMode(),c=0===l.indexOf('vertical')?'vertical':'horizontal';this.layoutStyle('paginated'),'rtl'===this.content.dir&&this.direction('rtl'),this.width(e),this.height(t),this.viewport({width:e,height:t,scale:1,scalable:'no'}),this.css('overflow-y','hidden'),this.css('margin','0',!0),'vertical'==c?(this.css('padding-top',a/2+'px',!0),this.css('padding-bottom',a/2+'px',!0),this.css('padding-left','20px'),this.css('padding-right','20px')):(this.css('padding-top','20px'),this.css('padding-bottom','20px'),this.css('padding-left',a/2+'px',!0),this.css('padding-right',a/2+'px',!0)),this.css('box-sizing','border-box'),this.css('max-width','inherit'),this.css(r,'horizontal'),this.css(o,'auto'),this.css(i,a+'px'),this.css(s,n+'px'),this.css('-webkit-line-box-contain','block glyphs replaced')}},{key:'scaler',value:function(e,t,n){var a='';this.css('transform-origin','top left'),(0<=t||0<=n)&&(a=' translate('+(t||0)+'px, '+(n||0)+'px )'),this.css('transform','scale('+e+')'+a)}},{key:'fit',value:function(e,t,n){var a=this.viewport(),r=parseInt(a.width),i=parseInt(a.height),s=e/r,o=t/i,l=s<o?s:o;if(this.layoutStyle('paginated'),this.width(r),this.height(i),this.overflow('hidden'),this.scaler(l,0,0),this.css('background-size',r*l+'px '+i*l+'px'),this.css('background-color','transparent'),n&&n.properties.includes('page-spread-left')){this.css('margin-left',e-r*l+'px')}}},{key:'direction',value:function(e){this.documentElement&&(this.documentElement.style.direction=e)}},{key:'mapPage',value:function(e,t,n,a,r){var i=new g.default(t,r);return i.page(this,e,n,a)}},{key:'linksHandler',value:function(){var e=this;(0,h.replaceLinks)(this.content,function(t){e.emit(y.EVENTS.CONTENTS.LINK_CLICKED,t)})}},{key:'writingMode',value:function(e){var t=(0,d.prefixed)('writing-mode');return e&&this.documentElement&&(this.documentElement.style[t]=e),this.window.getComputedStyle(this.documentElement)[t]||''}},{key:'layoutStyle',value:function(e){return e&&(this._layoutStyle=e,navigator.epubReadingSystem.layoutStyle=this._layoutStyle),this._layoutStyle||'paginated'}},{key:'epubReadingSystem',value:function(e,t){return navigator.epubReadingSystem={name:e,version:t,layoutStyle:this.layoutStyle(),hasFeature:function(e){return'dom-manipulation'===e||'layout-changes'===e||'touch-events'===e||'mouse-events'===e||'keyboard-events'===e||'spine-scripting'!==e&&!1}},navigator.epubReadingSystem}},{key:'destroy',value:function(){this.observer&&this.observer.disconnect(),this.document.removeEventListener('transitionend',this._resizeCheck),this.removeListeners()}}],[{key:'listenedEvents',get:function(){return y.DOM_EVENTS}}]),e}();(0,l.default)(C.prototype),t.default=C,e.exports=t['default']},function(e,t,n){'use strict';function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var i='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&'function'==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?'symbol':typeof e},s=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(6),l=a(o),c=n(2),u=n(41),g=a(u),h=n(26),y=a(h),f=n(97),m=a(f),E=n(109),C=a(E),v=n(4),b=function(){function e(t){r(this,e),this.name='default',this.optsSettings=t.settings,this.View=t.view,this.request=t.request,this.renditionQueue=t.queue,this.q=new y.default(this),this.settings=(0,c.extend)(this.settings||{},{infinite:!0,hidden:!1,width:void 0,height:void 0,axis:void 0,flow:'scrolled',ignoreClass:'',fullsize:void 0}),(0,c.extend)(this.settings,t.settings||{}),this.viewSettings={ignoreClass:this.settings.ignoreClass,axis:this.settings.axis,flow:this.settings.flow,layout:this.layout,method:this.settings.method,width:0,height:0,forceEvenPages:!0},this.rendered=!1}return s(e,[{key:'render',value:function(e,t){var n=e.tagName;'undefined'==typeof this.settings.fullsize&&n&&('body'==n.toLowerCase()||'html'==n.toLowerCase())&&(this.settings.fullsize=!0),this.settings.fullsize&&(this.settings.overflow='visible',this.overflow=this.settings.overflow),this.settings.size=t,this.stage=new m.default({width:t.width,height:t.height,overflow:this.overflow,hidden:this.settings.hidden,axis:this.settings.axis,fullsize:this.settings.fullsize,direction:this.settings.direction}),this.stage.attachTo(e),this.container=this.stage.getContainer(),this.views=new C.default(this.container),this._bounds=this.bounds(),this._stageSize=this.stage.size(),this.viewSettings.width=this._stageSize.width,this.viewSettings.height=this._stageSize.height,this.stage.onResize(this.onResized.bind(this)),this.stage.onOrientationChange(this.onOrientationChange.bind(this)),this.addEventListeners(),this.layout&&this.updateLayout(),this.rendered=!0}},{key:'addEventListeners',value:function(){var e;window.addEventListener('unload',function(){this.destroy()}.bind(this)),e=this.settings.fullsize?window:this.container,this._onScroll=this.onScroll.bind(this),e.addEventListener('scroll',this._onScroll)}},{key:'removeEventListeners',value:function(){var e;e=this.settings.fullsize?window:this.container,e.removeEventListener('scroll',this._onScroll),this._onScroll=void 0}},{key:'destroy',value:function(){clearTimeout(this.orientationTimeout),clearTimeout(this.resizeTimeout),clearTimeout(this.afterScrolled),this.clear(),this.removeEventListeners(),this.stage.destroy(),this.rendered=!1}},{key:'onOrientationChange',value:function(){var e=window,t=e.orientation;this.optsSettings.resizeOnOrientationChange&&this.resize(),clearTimeout(this.orientationTimeout),this.orientationTimeout=setTimeout(function(){this.orientationTimeout=void 0,this.optsSettings.resizeOnOrientationChange&&this.resize(),this.emit(v.EVENTS.MANAGERS.ORIENTATION_CHANGE,t)}.bind(this),500)}},{key:'onResized',value:function(){this.resize()}},{key:'resize',value:function(e,t,n){var a=this.stage.size(e,t);return this.winBounds=(0,c.windowBounds)(),this.orientationTimeout&&this.winBounds.width===this.winBounds.height?void(this._stageSize=void 0):void(this._stageSize&&this._stageSize.width===a.width&&this._stageSize.height===a.height||(this._stageSize=a,this._bounds=this.bounds(),this.clear(),this.viewSettings.width=this._stageSize.width,this.viewSettings.height=this._stageSize.height,this.updateLayout(),this.emit(v.EVENTS.MANAGERS.RESIZED,{width:this._stageSize.width,height:this._stageSize.height},n)))}},{key:'createView',value:function(e,t){return new this.View(e,(0,c.extend)(this.viewSettings,{forceRight:t}))}},{key:'handleNextPrePaginated',value:function(e,t,n){var a;if('pre-paginated'===this.layout.name&&1<this.layout.divisor){if(e||0===t.index)return;if(a=t.next(),a&&!a.properties.includes('page-spread-left'))return n.call(this,a)}}},{key:'display',value:function(e,t){var n=new c.defer,a=n.promise;(t===e.href||(0,c.isNumber)(t))&&(t=void 0);var r=this.views.find(e);if(r&&e&&'pre-paginated'!==this.layout.name){var i=r.offset();if('ltr'===this.settings.direction)this.scrollTo(i.left,i.top,!0);else{var s=r.width();this.scrollTo(i.left+s,i.top,!0)}if(t){var o=r.locationOf(t);this.moveTo(o)}return n.resolve(),a}this.clear();var l=!1;return'pre-paginated'===this.layout.name&&2===this.layout.divisor&&e.properties.includes('page-spread-right')&&(l=!0),this.add(e,l).then(function(e){if(t){var n=e.locationOf(t);this.moveTo(n)}}.bind(this),function(e){n.reject(e)}).then(function(){return this.handleNextPrePaginated(l,e,this.add)}.bind(this)).then(function(){this.views.show(),n.resolve()}.bind(this)),a}},{key:'afterDisplayed',value:function(e){this.emit(v.EVENTS.MANAGERS.ADDED,e)}},{key:'afterResized',value:function(e){this.emit(v.EVENTS.MANAGERS.RESIZE,e.section)}},{key:'moveTo',value:function(e){var t=0,n=0;this.isPaginated?(t=p(e.left/this.layout.delta)*this.layout.delta,t+this.layout.delta>this.container.scrollWidth&&(t=this.container.scrollWidth-this.layout.delta)):n=e.top,this.scrollTo(t,n,!0)}},{key:'add',value:function(e,t){var n=this,a=this.createView(e,t);return this.views.append(a),a.onDisplayed=this.afterDisplayed.bind(this),a.onResize=this.afterResized.bind(this),a.on(v.EVENTS.VIEWS.AXIS,function(e){n.updateAxis(e)}),a.display(this.request)}},{key:'append',value:function(e,t){var n=this,a=this.createView(e,t);return this.views.append(a),a.onDisplayed=this.afterDisplayed.bind(this),a.onResize=this.afterResized.bind(this),a.on(v.EVENTS.VIEWS.AXIS,function(e){n.updateAxis(e)}),a.display(this.request)}},{key:'prepend',value:function(e,t){var n=this,a=this.createView(e,t);return a.on(v.EVENTS.VIEWS.RESIZED,function(e){n.counter(e)}),this.views.prepend(a),a.onDisplayed=this.afterDisplayed.bind(this),a.onResize=this.afterResized.bind(this),a.on(v.EVENTS.VIEWS.AXIS,function(e){n.updateAxis(e)}),a.display(this.request)}},{key:'counter',value:function(e){'vertical'===this.settings.axis?this.scrollBy(0,e.heightDelta,!0):this.scrollBy(e.widthDelta,0,!0)}},{key:'next',value:function(){var e=this.settings.direction,t,n;if(this.views.length){if(this.isPaginated&&'horizontal'===this.settings.axis&&(!e||'ltr'===e))this.scrollLeft=this.container.scrollLeft,n=this.container.scrollLeft+this.container.offsetWidth+this.layout.delta,n<=this.container.scrollWidth?this.scrollBy(this.layout.delta,0,!0):t=this.views.last().section.next();else if(this.isPaginated&&'horizontal'===this.settings.axis&&'rtl'===e)this.scrollLeft=this.container.scrollLeft,n=this.container.scrollLeft,0<n?this.scrollBy(this.layout.delta,0,!0):t=this.views.last().section.next();else if(this.isPaginated&&'vertical'===this.settings.axis){this.scrollTop=this.container.scrollTop;var a=this.container.scrollTop+this.container.offsetHeight;a<this.container.scrollHeight?this.scrollBy(0,this.layout.height,!0):t=this.views.last().section.next()}else t=this.views.last().section.next();if(t){this.clear();var r=!1;return'pre-paginated'===this.layout.name&&2===this.layout.divisor&&t.properties.includes('page-spread-right')&&(r=!0),this.append(t,r).then(function(){return this.handleNextPrePaginated(r,t,this.append)}.bind(this),function(e){return e}).then(function(){this.views.show()}.bind(this))}}}},{key:'prev',value:function(){var e=this.settings.direction,t,n;if(this.views.length){if(this.isPaginated&&'horizontal'===this.settings.axis&&(!e||'ltr'===e))this.scrollLeft=this.container.scrollLeft,n=this.container.scrollLeft,0<n?this.scrollBy(-this.layout.delta,0,!0):t=this.views.first().section.prev();else if(this.isPaginated&&'horizontal'===this.settings.axis&&'rtl'===e)this.scrollLeft=this.container.scrollLeft,n=this.container.scrollLeft+this.container.offsetWidth+this.layout.delta,n<=this.container.scrollWidth?this.scrollBy(-this.layout.delta,0,!0):t=this.views.first().section.prev();else if(this.isPaginated&&'vertical'===this.settings.axis){this.scrollTop=this.container.scrollTop;var a=this.container.scrollTop;0<a?this.scrollBy(0,-this.layout.height,!0):t=this.views.first().section.prev()}else t=this.views.first().section.prev();if(t){this.clear();var r=!1;return'pre-paginated'===this.layout.name&&2===this.layout.divisor&&'object'!==i(t.prev())&&(r=!0),this.prepend(t,r).then(function(){var e;if('pre-paginated'===this.layout.name&&1<this.layout.divisor&&(e=t.prev(),e))return this.prepend(e)}.bind(this),function(e){return e}).then(function(){this.isPaginated&&'horizontal'===this.settings.axis&&('rtl'===this.settings.direction?this.scrollTo(0,0,!0):this.scrollTo(this.container.scrollWidth-this.layout.delta,0,!0)),this.views.show()}.bind(this))}}}},{key:'current',value:function(){var e=this.visible();return e.length?e[e.length-1]:null}},{key:'clear',value:function(){this.views&&(this.views.hide(),this.scrollTo(0,0,!0),this.views.clear())}},{key:'currentLocation',value:function(){return this.location='vertical'===this.settings.axis?this.scrolledLocation():this.paginatedLocation(),this.location}},{key:'scrolledLocation',value:function(){var e=this,t=this.visible(),n=this.container.getBoundingClientRect(),a=n.height<window.innerHeight?n.height:window.innerHeight,r=0,s=0;this.settings.fullsize&&(r=window.scrollY);var i=t.map(function(t){var o=t.section,l=o.index,c=o.href,p=t.position(),u=t.height(),g=r+n.top-p.top+s,h=g+a-s;h>u&&(h=u,s=h-g);var y=e.layout.count(u,a).pages,f=d(g/a),m=[],E=d(h/a);m=[];for(var C=f,i;C<=E;C++)i=C+1,m.push(i);var v=e.mapping.page(t.contents,t.section.cfiBase,g,h);return{index:l,href:c,pages:m,totalPages:y,mapping:v}});return i}},{key:'paginatedLocation',value:function(){var e=this,t=this.visible(),n=this.container.getBoundingClientRect(),a=0,r=0;this.settings.fullsize&&(a=window.scrollX);var i=t.map(function(t){var s=t.section,o=s.index,l=s.href,d=t.offset().left,c=t.position().left,u=t.width(),g=a+n.left-c+d+r,h=g+e.layout.width-r,y=e.mapping.page(t.contents,t.section.cfiBase,g,h),f=e.layout.count(u).pages,m=p(g/e.layout.pageWidth),E=[],C=p(h/e.layout.pageWidth);if(0>m&&(m=0,++C),'rtl'===e.settings.direction){var v=m;m=f-C,C=f-v}for(var b=m+1,i;b<=C;b++)i=b,E.push(i);return{index:o,href:l,pages:E,totalPages:f,mapping:y}});return i}},{key:'isVisible',value:function(e,t,n,a){var r=e.position(),i=a||this.bounds();return'horizontal'===this.settings.axis&&r.right>i.left-t&&r.left<i.right+n||'vertical'===this.settings.axis&&r.bottom>i.top-t&&r.top<i.bottom+n}},{key:'visible',value:function(){for(var e=this.bounds(),t=this.views.displayed(),n=t.length,a=[],r=0,i,s;r<n;r++)s=t[r],i=this.isVisible(s,0,0,e),!0===i&&a.push(s);return a}},{key:'scrollBy',value:function(e,t,n){var a='rtl'===this.settings.direction?-1:1;n&&(this.ignore=!0),this.settings.fullsize?window.scrollBy(e*a,t*a):(e&&(this.container.scrollLeft+=e*a),t&&(this.container.scrollTop+=t)),this.scrolled=!0}},{key:'scrollTo',value:function(e,t,n){n&&(this.ignore=!0),this.settings.fullsize?window.scrollTo(e,t):(this.container.scrollLeft=e,this.container.scrollTop=t),this.scrolled=!0}},{key:'onScroll',value:function(){var e=void 0,t=void 0;this.settings.fullsize?(e=window.scrollY,t=window.scrollX):(e=this.container.scrollTop,t=this.container.scrollLeft),this.scrollTop=e,this.scrollLeft=t,this.ignore?this.ignore=!1:(this.emit(v.EVENTS.MANAGERS.SCROLL,{top:e,left:t}),clearTimeout(this.afterScrolled),this.afterScrolled=setTimeout(function(){this.emit(v.EVENTS.MANAGERS.SCROLLED,{top:this.scrollTop,left:this.scrollLeft})}.bind(this),20))}},{key:'bounds',value:function(){var e;return e=this.stage.bounds(),e}},{key:'applyLayout',value:function(e){this.layout=e,this.updateLayout(),this.views&&0<this.views.length&&'pre-paginated'===this.layout.name&&this.display(this.views.first().section)}},{key:'updateLayout',value:function(){this.stage&&(this._stageSize=this.stage.size(),this.isPaginated?(this.layout.calculate(this._stageSize.width,this._stageSize.height,this.settings.gap),this.settings.offset=this.layout.delta):this.layout.calculate(this._stageSize.width,this._stageSize.height),this.viewSettings.width=this.layout.width,this.viewSettings.height=this.layout.height,this.setLayout(this.layout))}},{key:'setLayout',value:function(e){this.viewSettings.layout=e,this.mapping=new g.default(e.props,this.settings.direction,this.settings.axis),this.views&&this.views.forEach(function(t){t&&t.setLayout(e)})}},{key:'updateAxis',value:function(e,t){this.isPaginated||(e='vertical'),(t||e!==this.settings.axis)&&(this.settings.axis=e,this.stage&&this.stage.axis(e),this.viewSettings.axis=e,this.mapping&&(this.mapping=new g.default(this.layout.props,this.settings.direction,this.settings.axis)),this.layout&&('vertical'===e?this.layout.spread('none'):this.layout.spread(this.layout.settings.spread)))}},{key:'updateFlow',value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:'auto',n='paginated'===e||'auto'===e;this.isPaginated=n,'scrolled-doc'===e||'scrolled-continuous'===e||'scrolled'===e?this.updateAxis('vertical'):this.updateAxis('horizontal'),this.viewSettings.flow=e,this.overflow=this.settings.overflow?this.settings.overflow:n?'hidden':t,this.stage&&this.stage.overflow(this.overflow),this.updateLayout()}},{key:'getContents',value:function(){var e=[];return this.views?(this.views.forEach(function(t){var n=t&&t.contents;n&&e.push(n)}),e):e}},{key:'direction',value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:'ltr';this.settings.direction=e,this.stage&&this.stage.direction(e),this.viewSettings.direction=e,this.updateLayout()}},{key:'isRendered',value:function(){return this.rendered}}]),e}();(0,l.default)(b.prototype),t.default=b,e.exports=t['default']},function(e){e.exports=function(e){var t=typeof e;return null!=e&&('object'==t||'function'==t)}},function(e,t,n){var a=n(0);n(1),e.exports=a.cipher=a.cipher||{},a.cipher.algorithms=a.cipher.algorithms||{},a.cipher.createCipher=function(e,t){var n=e;if('string'==typeof n&&(n=a.cipher.getAlgorithm(n),n&&(n=n())),!n)throw new Error('Unsupported algorithm: '+e);return new a.cipher.BlockCipher({algorithm:n,key:t,decrypt:!1})},a.cipher.createDecipher=function(e,t){var n=e;if('string'==typeof n&&(n=a.cipher.getAlgorithm(n),n&&(n=n())),!n)throw new Error('Unsupported algorithm: '+e);return new a.cipher.BlockCipher({algorithm:n,key:t,decrypt:!0})},a.cipher.registerAlgorithm=function(e,t){e=e.toUpperCase(),a.cipher.algorithms[e]=t},a.cipher.getAlgorithm=function(e){return e=e.toUpperCase(),e in a.cipher.algorithms?a.cipher.algorithms[e]:null};var r=a.cipher.BlockCipher=function(e){this.algorithm=e.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=e.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=e.decrypt,this.algorithm.initialize(e)};r.prototype.start=function(e){e=e||{};var t={};for(var n in e)t[n]=e[n];t.decrypt=this._decrypt,this._finish=!1,this._input=a.util.createBuffer(),this.output=e.output||a.util.createBuffer(),this.mode.start(t)},r.prototype.update=function(e){for(e&&this._input.putBuffer(e);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()},r.prototype.finish=function(e){e&&('ECB'===this.mode.name||'CBC'===this.mode.name)&&(this.mode.pad=function(t){return e(this.blockSize,t,!1)},this.mode.unpad=function(t){return e(this.blockSize,t,!0)});var t={decrypt:this._decrypt,overflow:this._input.length()%this.blockSize};return(this._decrypt||!this.mode.pad||this.mode.pad(this._input,t))&&(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,t)?!1:this.mode.afterFinish&&!this.mode.afterFinish(this.output,t)?!1:!0)}},function(e){function t(){throw new Error('setTimeout has not been defined')}function n(){throw new Error('clearTimeout has not been defined')}function a(e){if(c===setTimeout)return setTimeout(e,0);if((c===t||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function r(e){if(p===clearTimeout)return clearTimeout(e);if((p===n||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(e);try{return p(e)}catch(t){try{return p.call(null,e)}catch(t){return p.call(this,e)}}}function i(){g&&y&&(g=!1,y.length?u=y.concat(u):h=-1,u.length&&s())}function s(){if(!g){var e=a(i);g=!0;for(var t=u.length;t;){for(y=u,u=[];++h<t;)y&&y[h].run();h=-1,t=u.length}y=null,g=!1,r(e)}}function o(e,t){this.fun=e,this.array=t}function l(){}var d=e.exports={},c,p;(function(){try{c='function'==typeof setTimeout?setTimeout:t}catch(n){c=t}try{p='function'==typeof clearTimeout?clearTimeout:n}catch(t){p=n}})();var u=[],g=!1,h=-1,y;d.nextTick=function(e){var t=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new o(e,t)),1!==u.length||g||a(s)},o.prototype.run=function(){this.fun.apply(null,this.array)},d.title='browser',d.browser=!0,d.env={},d.argv=[],d.version='',d.versions={},d.on=l,d.addListener=l,d.once=l,d.off=l,d.removeListener=l,d.removeAllListeners=l,d.emit=l,d.prependListener=l,d.prependOnceListener=l,d.listeners=function(){return[]},d.binding=function(){throw new Error('process.binding is not supported')},d.cwd=function(){return'/'},d.chdir=function(){throw new Error('process.chdir is not supported')},d.umask=function(){return 0}},function(e,t,n){function r(){l='\\x80',l+=o.util.fillString('\\0',64),g=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],h=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],y=Array(64);for(var e=0;64>e;++e)y[e]=p(4294967296*u(a(e+1)));d=!0}function s(e,n,s){for(var o=s.length(),l,t,a,p,c,u,f,r;64<=o;){for(t=e.h0,a=e.h1,p=e.h2,c=e.h3,r=0;16>r;++r)n[r]=s.getInt32Le(),u=c^a&(p^c),l=t+u+y[r]+n[r],f=h[r],t=c,c=p,p=a,a+=l<<f|l>>>32-f;for(;32>r;++r)u=p^c&(a^p),l=t+u+y[r]+n[g[r]],f=h[r],t=c,c=p,p=a,a+=l<<f|l>>>32-f;for(;48>r;++r)u=a^p^c,l=t+u+y[r]+n[g[r]],f=h[r],t=c,c=p,p=a,a+=l<<f|l>>>32-f;for(;64>r;++r)u=p^(a|~c),l=t+u+y[r]+n[g[r]],f=h[r],t=c,c=p,p=a,a+=l<<f|l>>>32-f;e.h0=0|e.h0+t,e.h1=0|e.h1+a,e.h2=0|e.h2+p,e.h3=0|e.h3+c,o-=64}}var o=n(0);n(8),n(1);var i=e.exports=o.md5=o.md5||{};o.md.md5=o.md.algorithms.md5=i,i.create=function(){d||r();var e=null,t=o.util.createBuffer(),n=Array(16),a={algorithm:'md5',blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8};return a.start=function(){a.messageLength=0,a.fullMessageLength=a.messageLength64=[];for(var n=a.messageLengthSize/4,r=0;r<n;++r)a.fullMessageLength.push(0);return t=o.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},a},a.start(),a.update=function(r,l){'utf8'===l&&(r=o.util.encodeUtf8(r));var d=r.length;a.messageLength+=d,d=[d/4294967296>>>0,d>>>0];for(var c=a.fullMessageLength.length-1;0<=c;--c)a.fullMessageLength[c]+=d[1],d[1]=d[0]+(a.fullMessageLength[c]/4294967296>>>0),a.fullMessageLength[c]>>>=0,d[0]=d[1]/4294967296>>>0;return t.putBytes(r),s(e,n,t),(2048<t.read||0===t.length())&&t.compact(),a},a.digest=function(){var r=o.util.createBuffer();r.putBytes(t.bytes());var d=a.fullMessageLength[a.fullMessageLength.length-1]+a.messageLengthSize,c=d&a.blockLength-1;r.putBytes(l.substr(0,a.blockLength-c));for(var p=0,u=a.fullMessageLength.length-1,i;0<=u;--u)i=8*a.fullMessageLength[u]+p,p=i/4294967296>>>0,r.putInt32Le(i>>>0);var g={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3};s(g,n,r);var h=o.util.createBuffer();return h.putInt32Le(g.h0),h.putInt32Le(g.h1),h.putInt32Le(g.h2),h.putInt32Le(g.h3),h},a};var l=null,g=null,h=null,y=null,d=!1},function(e,t,n){(function(t){var a=n(0);n(14),n(8),n(1);var r=a.pkcs5=a.pkcs5||{},o;a.util.isNodejs&&!a.options.usePureJavaScript&&(o=n(35)),e.exports=a.pbkdf2=r.pbkdf2=function(e,n,s,l,c,p){function u(){return S>f?p(null,E):void(r.start(null,null),r.update(n),r.update(a.util.int32ToBytes(S)),C=b=r.digest().getBytes(),i=2,g())}function g(){return i<=s?(r.start(null,null),r.update(b),v=r.digest().getBytes(),C=a.util.xorBytes(C,v,h),b=v,++i,a.util.setImmediate(g)):void(E+=S<f?C:C.substr(0,m),++S,u())}if('function'==typeof c&&(p=c,c=null),a.util.isNodejs&&!a.options.usePureJavaScript&&o.pbkdf2&&(null===c||'object'!=typeof c)&&(4<o.pbkdf2Sync.length||!c||'sha1'===c))return'string'!=typeof c&&(c='sha1'),e=t.from(e,'binary'),n=t.from(n,'binary'),p?4===o.pbkdf2Sync.length?o.pbkdf2(e,n,s,l,function(e,t){return e?p(e):void p(null,t.toString('binary'))}):o.pbkdf2(e,n,s,l,c,function(e,t){return e?p(e):void p(null,t.toString('binary'))}):4===o.pbkdf2Sync.length?o.pbkdf2Sync(e,n,s,l).toString('binary'):o.pbkdf2Sync(e,n,s,l,c).toString('binary');if(('undefined'==typeof c||null===c)&&(c='sha1'),'string'==typeof c){if(!(c in a.md.algorithms))throw new Error('Unknown hash algorithm: '+c);c=a.md[c].create()}var h=c.digestLength;if(l>4294967295*h){var y=new Error('Derived key is too long.');if(p)return p(y);throw y}var f=d(l/h),m=l-(f-1)*h,r=a.hmac.create();r.start(c,e);var E='',C,v,b;if(!p){for(var S=1;S<=f;++S){r.start(null,null),r.update(n),r.update(a.util.int32ToBytes(S)),C=b=r.digest().getBytes();for(var i=2;i<=s;++i)r.start(null,null),r.update(b),v=r.digest().getBytes(),C=a.util.xorBytes(C,v,h),b=v;E+=S<f?C:C.substr(0,m)}return E}var S=1,i;u()}}).call(t,n(20).Buffer)},function(){},function(e,t,n){function a(e,t){'string'==typeof t&&(t={shortName:t});for(var n=null,a=0,r;null==n&&a<e.attributes.length;++a)r=e.attributes[a],t.type&&t.type===r.type?n=r:t.name&&t.name===r.name?n=r:t.shortName&&t.shortName===r.shortName&&(n=r);return n}function r(e){for(var t=p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[]),n=e.attributes,a=0,r,i;a<n.length;++a){r=n[a];var s=r.value,o=p.Type.PRINTABLESTRING;'valueTagClass'in r&&(o=r.valueTagClass,o===p.Type.UTF8&&(s=c.util.encodeUtf8(s))),i=p.create(p.Class.UNIVERSAL,p.Type.SET,!0,[p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[p.create(p.Class.UNIVERSAL,p.Type.OID,!1,p.oidToDer(r.type).getBytes()),p.create(p.Class.UNIVERSAL,o,!1,s)])]),t.value.push(i)}return t}function i(e){for(var t=0,n;t<e.length;++t){if(n=e[t],'undefined'==typeof n.name&&(n.type&&n.type in u.oids?n.name=u.oids[n.type]:n.shortName&&n.shortName in h&&(n.name=u.oids[h[n.shortName]])),'undefined'==typeof n.type)if(n.name&&n.name in u.oids)n.type=u.oids[n.name];else{var a=new Error('Attribute type not specified.');throw a.attribute=n,a}if('undefined'==typeof n.shortName&&n.name&&n.name in h&&(n.shortName=h[n.name]),n.type===g.extensionRequest&&(n.valueConstructed=!0,n.valueTagClass=p.Type.SEQUENCE,!n.value&&n.extensions)){n.value=[];for(var r=0;r<n.extensions.length;++r)n.value.push(u.certificateExtensionToAsn1(s(n.extensions[r])))}if('undefined'==typeof n.value){var a=new Error('Attribute value not specified.');throw a.attribute=n,a}}}function s(t,e){if(e=e||{},'undefined'==typeof t.name&&t.id&&t.id in u.oids&&(t.name=u.oids[t.id]),'undefined'==typeof t.id)if(t.name&&t.name in u.oids)t.id=u.oids[t.name];else{var a=new Error('Extension ID not specified.');throw a.extension=t,a}if('undefined'!=typeof t.value)return t;if('keyUsage'===t.name){var i=0,s=0,o=0;t.digitalSignature&&(s|=128,i=7),t.nonRepudiation&&(s|=64,i=6),t.keyEncipherment&&(s|=32,i=5),t.dataEncipherment&&(s|=16,i=4),t.keyAgreement&&(s|=8,i=3),t.keyCertSign&&(s|=4,i=2),t.cRLSign&&(s|=2,i=1),t.encipherOnly&&(s|=1,i=0),t.decipherOnly&&(o|=128,i=7);var l=y(i);0==o?0!=s&&(l+=y(s)):l+=y(s)+y(o),t.value=p.create(p.Class.UNIVERSAL,p.Type.BITSTRING,!1,l)}else if('basicConstraints'===t.name)t.value=p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[]),t.cA&&t.value.value.push(p.create(p.Class.UNIVERSAL,p.Type.BOOLEAN,!1,'\\xFF')),'pathLenConstraint'in t&&t.value.value.push(p.create(p.Class.UNIVERSAL,p.Type.INTEGER,!1,p.integerToDer(t.pathLenConstraint).getBytes()));else if('extKeyUsage'===t.name){t.value=p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[]);var d=t.value.value;for(var h in t)!0===t[h]&&(h in g?d.push(p.create(p.Class.UNIVERSAL,p.Type.OID,!1,p.oidToDer(g[h]).getBytes())):-1!==h.indexOf('.')&&d.push(p.create(p.Class.UNIVERSAL,p.Type.OID,!1,p.oidToDer(h).getBytes())))}else if('nsCertType'===t.name){var i=0,s=0;t.client&&(s|=128,i=7),t.server&&(s|=64,i=6),t.email&&(s|=32,i=5),t.objsign&&(s|=16,i=4),t.reserved&&(s|=8,i=3),t.sslCA&&(s|=4,i=2),t.emailCA&&(s|=2,i=1),t.objCA&&(s|=1,i=0);var l=y(i);0!=s&&(l+=y(s)),t.value=p.create(p.Class.UNIVERSAL,p.Type.BITSTRING,!1,l)}else if('subjectAltName'===t.name||'issuerAltName'===t.name){t.value=p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[]);for(var f=0,n;f<t.altNames.length;++f){n=t.altNames[f];var l=n.value;if(!(7===n.type&&n.ip))8===n.type&&(l=n.oid?p.oidToDer(p.oidToDer(n.oid)):p.oidToDer(l));else if(l=c.util.bytesFromIP(n.ip),null===l){var a=new Error('Extension \"ip\" value is not a valid IPv4 or IPv6 address.');throw a.extension=t,a}t.value.value.push(p.create(p.Class.CONTEXT_SPECIFIC,n.type,!1,l))}}else if('nsComment'===t.name&&e.cert){if(!/^[\\x00-\\x7F]*$/.test(t.comment)||1>t.comment.length||128<t.comment.length)throw new Error('Invalid \"nsComment\" content.');t.value=p.create(p.Class.UNIVERSAL,p.Type.IA5STRING,!1,t.comment)}else if('subjectKeyIdentifier'===t.name&&e.cert){var m=e.cert.generateSubjectKeyIdentifier();t.subjectKeyIdentifier=m.toHex(),t.value=p.create(p.Class.UNIVERSAL,p.Type.OCTETSTRING,!1,m.getBytes())}else if('authorityKeyIdentifier'===t.name&&e.cert){t.value=p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[]);var d=t.value.value;if(t.keyIdentifier){var E=!0===t.keyIdentifier?e.cert.generateSubjectKeyIdentifier().getBytes():t.keyIdentifier;d.push(p.create(p.Class.CONTEXT_SPECIFIC,0,!1,E))}if(t.authorityCertIssuer){var C=[p.create(p.Class.CONTEXT_SPECIFIC,4,!0,[r(!0===t.authorityCertIssuer?e.cert.issuer:t.authorityCertIssuer)])];d.push(p.create(p.Class.CONTEXT_SPECIFIC,1,!0,C))}if(t.serialNumber){var v=c.util.hexToBytes(!0===t.serialNumber?e.cert.serialNumber:t.serialNumber);d.push(p.create(p.Class.CONTEXT_SPECIFIC,2,!1,v))}}else if('cRLDistributionPoints'===t.name){t.value=p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[]);for(var d=t.value.value,b=p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[]),S=p.create(p.Class.CONTEXT_SPECIFIC,0,!0,[]),f=0,n;f<t.altNames.length;++f){n=t.altNames[f];var l=n.value;if(!(7===n.type&&n.ip))8===n.type&&(l=n.oid?p.oidToDer(p.oidToDer(n.oid)):p.oidToDer(l));else if(l=c.util.bytesFromIP(n.ip),null===l){var a=new Error('Extension \"ip\" value is not a valid IPv4 or IPv6 address.');throw a.extension=t,a}S.value.push(p.create(p.Class.CONTEXT_SPECIFIC,n.type,!1,l))}b.value.push(p.create(p.Class.CONTEXT_SPECIFIC,0,!0,[S])),d.push(b)}if('undefined'==typeof t.value){var a=new Error('Extension value not specified.');throw a.extension=t,a}return t}function o(e,t){switch(e){case g['RSASSA-PSS']:var n=[];return void 0!==t.hash.algorithmOid&&n.push(p.create(p.Class.CONTEXT_SPECIFIC,0,!0,[p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[p.create(p.Class.UNIVERSAL,p.Type.OID,!1,p.oidToDer(t.hash.algorithmOid).getBytes()),p.create(p.Class.UNIVERSAL,p.Type.NULL,!1,'')])])),void 0!==t.mgf.algorithmOid&&n.push(p.create(p.Class.CONTEXT_SPECIFIC,1,!0,[p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[p.create(p.Class.UNIVERSAL,p.Type.OID,!1,p.oidToDer(t.mgf.algorithmOid).getBytes()),p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[p.create(p.Class.UNIVERSAL,p.Type.OID,!1,p.oidToDer(t.mgf.hash.algorithmOid).getBytes()),p.create(p.Class.UNIVERSAL,p.Type.NULL,!1,'')])])])),void 0!==t.saltLength&&n.push(p.create(p.Class.CONTEXT_SPECIFIC,2,!0,[p.create(p.Class.UNIVERSAL,p.Type.INTEGER,!1,p.integerToDer(t.saltLength).getBytes())])),p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,n);default:return p.create(p.Class.UNIVERSAL,p.Type.NULL,!1,'');}}function l(e){var t=p.create(p.Class.CONTEXT_SPECIFIC,0,!0,[]);if(0===e.attributes.length)return t;for(var n=e.attributes,a=0;a<n.length;++a){var r=n[a],i=r.value,s=p.Type.UTF8;'valueTagClass'in r&&(s=r.valueTagClass),s===p.Type.UTF8&&(i=c.util.encodeUtf8(i));var o=!1;'valueConstructed'in r&&(o=r.valueConstructed);var l=p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[p.create(p.Class.UNIVERSAL,p.Type.OID,!1,p.oidToDer(r.type).getBytes()),p.create(p.Class.UNIVERSAL,p.Type.SET,!0,[p.create(p.Class.UNIVERSAL,s,o,i)])]);t.value.push(l)}return t}function d(e){return e>=I&&e<A?p.create(p.Class.UNIVERSAL,p.Type.UTCTIME,!1,p.dateToUtcTime(e)):p.create(p.Class.UNIVERSAL,p.Type.GENERALIZEDTIME,!1,p.dateToGeneralizedTime(e))}var c=n(0);n(11),n(7),n(21),n(8),n(125),n(12),n(13),n(37),n(22),n(1);var p=c.asn1,u=e.exports=c.pki=c.pki||{},g=u.oids,h={};h.CN=g.commonName,h.commonName='CN',h.C=g.countryName,h.countryName='C',h.L=g.localityName,h.localityName='L',h.ST=g.stateOrProvinceName,h.stateOrProvinceName='ST',h.O=g.organizationName,h.organizationName='O',h.OU=g.organizationalUnitName,h.organizationalUnitName='OU',h.E=g.emailAddress,h.emailAddress='E';var f=c.pki.rsa.publicKeyValidator,m={name:'Certificate',tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,value:[{name:'Certificate.TBSCertificate',tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,captureAsn1:'tbsCertificate',value:[{name:'Certificate.TBSCertificate.version',tagClass:p.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:'Certificate.TBSCertificate.version.integer',tagClass:p.Class.UNIVERSAL,type:p.Type.INTEGER,constructed:!1,capture:'certVersion'}]},{name:'Certificate.TBSCertificate.serialNumber',tagClass:p.Class.UNIVERSAL,type:p.Type.INTEGER,constructed:!1,capture:'certSerialNumber'},{name:'Certificate.TBSCertificate.signature',tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,value:[{name:'Certificate.TBSCertificate.signature.algorithm',tagClass:p.Class.UNIVERSAL,type:p.Type.OID,constructed:!1,capture:'certinfoSignatureOid'},{name:'Certificate.TBSCertificate.signature.parameters',tagClass:p.Class.UNIVERSAL,optional:!0,captureAsn1:'certinfoSignatureParams'}]},{name:'Certificate.TBSCertificate.issuer',tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,captureAsn1:'certIssuer'},{name:'Certificate.TBSCertificate.validity',tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,value:[{name:'Certificate.TBSCertificate.validity.notBefore (utc)',tagClass:p.Class.UNIVERSAL,type:p.Type.UTCTIME,constructed:!1,optional:!0,capture:'certValidity1UTCTime'},{name:'Certificate.TBSCertificate.validity.notBefore (generalized)',tagClass:p.Class.UNIVERSAL,type:p.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:'certValidity2GeneralizedTime'},{name:'Certificate.TBSCertificate.validity.notAfter (utc)',tagClass:p.Class.UNIVERSAL,type:p.Type.UTCTIME,constructed:!1,optional:!0,capture:'certValidity3UTCTime'},{name:'Certificate.TBSCertificate.validity.notAfter (generalized)',tagClass:p.Class.UNIVERSAL,type:p.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:'certValidity4GeneralizedTime'}]},{name:'Certificate.TBSCertificate.subject',tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,captureAsn1:'certSubject'},f,{name:'Certificate.TBSCertificate.issuerUniqueID',tagClass:p.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:'Certificate.TBSCertificate.issuerUniqueID.id',tagClass:p.Class.UNIVERSAL,type:p.Type.BITSTRING,constructed:!1,captureBitStringValue:'certIssuerUniqueId'}]},{name:'Certificate.TBSCertificate.subjectUniqueID',tagClass:p.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:'Certificate.TBSCertificate.subjectUniqueID.id',tagClass:p.Class.UNIVERSAL,type:p.Type.BITSTRING,constructed:!1,captureBitStringValue:'certSubjectUniqueId'}]},{name:'Certificate.TBSCertificate.extensions',tagClass:p.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:'certExtensions',optional:!0}]},{name:'Certificate.signatureAlgorithm',tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,value:[{name:'Certificate.signatureAlgorithm.algorithm',tagClass:p.Class.UNIVERSAL,type:p.Type.OID,constructed:!1,capture:'certSignatureOid'},{name:'Certificate.TBSCertificate.signature.parameters',tagClass:p.Class.UNIVERSAL,optional:!0,captureAsn1:'certSignatureParams'}]},{name:'Certificate.signatureValue',tagClass:p.Class.UNIVERSAL,type:p.Type.BITSTRING,constructed:!1,captureBitStringValue:'certSignature'}]},E={name:'rsapss',tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,value:[{name:'rsapss.hashAlgorithm',tagClass:p.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:'rsapss.hashAlgorithm.AlgorithmIdentifier',tagClass:p.Class.UNIVERSAL,type:p.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:'rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm',tagClass:p.Class.UNIVERSAL,type:p.Type.OID,constructed:!1,capture:'hashOid'}]}]},{name:'rsapss.maskGenAlgorithm',tagClass:p.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:'rsapss.maskGenAlgorithm.AlgorithmIdentifier',tagClass:p.Class.UNIVERSAL,type:p.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:'rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm',tagClass:p.Class.UNIVERSAL,type:p.Type.OID,constructed:!1,capture:'maskGenOid'},{name:'rsapss.maskGenAlgorithm.AlgorithmIdentifier.params',tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,value:[{name:'rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm',tagClass:p.Class.UNIVERSAL,type:p.Type.OID,constructed:!1,capture:'maskGenHashOid'}]}]}]},{name:'rsapss.saltLength',tagClass:p.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:'rsapss.saltLength.saltLength',tagClass:p.Class.UNIVERSAL,type:p.Class.INTEGER,constructed:!1,capture:'saltLength'}]},{name:'rsapss.trailerField',tagClass:p.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:'rsapss.trailer.trailer',tagClass:p.Class.UNIVERSAL,type:p.Class.INTEGER,constructed:!1,capture:'trailer'}]}]},C={name:'CertificationRequestInfo',tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,captureAsn1:'certificationRequestInfo',value:[{name:'CertificationRequestInfo.integer',tagClass:p.Class.UNIVERSAL,type:p.Type.INTEGER,constructed:!1,capture:'certificationRequestInfoVersion'},{name:'CertificationRequestInfo.subject',tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,captureAsn1:'certificationRequestInfoSubject'},f,{name:'CertificationRequestInfo.attributes',tagClass:p.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:'certificationRequestInfoAttributes',value:[{name:'CertificationRequestInfo.attributes',tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,value:[{name:'CertificationRequestInfo.attributes.type',tagClass:p.Class.UNIVERSAL,type:p.Type.OID,constructed:!1},{name:'CertificationRequestInfo.attributes.value',tagClass:p.Class.UNIVERSAL,type:p.Type.SET,constructed:!0}]}]}]},v={name:'CertificationRequest',tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,captureAsn1:'csr',value:[C,{name:'CertificationRequest.signatureAlgorithm',tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,value:[{name:'CertificationRequest.signatureAlgorithm.algorithm',tagClass:p.Class.UNIVERSAL,type:p.Type.OID,constructed:!1,capture:'csrSignatureOid'},{name:'CertificationRequest.signatureAlgorithm.parameters',tagClass:p.Class.UNIVERSAL,optional:!0,captureAsn1:'csrSignatureParams'}]},{name:'CertificationRequest.signature',tagClass:p.Class.UNIVERSAL,type:p.Type.BITSTRING,constructed:!1,captureBitStringValue:'csrSignature'}]};u.RDNAttributesAsArray=function(e,t){for(var n=[],a=0,r,s,o;a<e.value.length;++a){r=e.value[a];for(var l=0;l<r.value.length;++l)o={},s=r.value[l],o.type=p.derToOid(s.value[0].value),o.value=s.value[1].value,o.valueTagClass=s.value[1].type,o.type in g&&(o.name=g[o.type],o.name in h&&(o.shortName=h[o.name])),t&&(t.update(o.type),t.update(o.value)),n.push(o)}return n},u.CRIAttributesAsArray=function(e){for(var t=[],n=0;n<e.length;++n)for(var a=e[n],r=p.derToOid(a.value[0].value),i=a.value[1].value,s=0,o;s<i.length;++s){if(o={},o.type=r,o.value=i[s].value,o.valueTagClass=i[s].type,o.type in g&&(o.name=g[o.type],o.name in h&&(o.shortName=h[o.name])),o.type===g.extensionRequest){o.extensions=[];for(var l=0;l<o.value.length;++l)o.extensions.push(u.certificateExtensionFromAsn1(o.value[l]))}t.push(o)}return t};var b=function(e,t,n){var a={};if(e!==g['RSASSA-PSS'])return a;n&&(a={hash:{algorithmOid:g.sha1},mgf:{algorithmOid:g.mgf1,hash:{algorithmOid:g.sha1}},saltLength:20});var r={},i=[];if(!p.validate(t,E,r,i)){var s=new Error('Cannot read RSASSA-PSS parameter block.');throw s.errors=i,s}return void 0!==r.hashOid&&(a.hash=a.hash||{},a.hash.algorithmOid=p.derToOid(r.hashOid)),void 0!==r.maskGenOid&&(a.mgf=a.mgf||{},a.mgf.algorithmOid=p.derToOid(r.maskGenOid),a.mgf.hash=a.mgf.hash||{},a.mgf.hash.algorithmOid=p.derToOid(r.maskGenHashOid)),void 0!==r.saltLength&&(a.saltLength=r.saltLength.charCodeAt(0)),a},S=function(e){switch(g[e.signatureOid]){case'sha1WithRSAEncryption':case'sha1WithRSASignature':return c.md.sha1.create();case'md5WithRSAEncryption':return c.md.md5.create();case'sha256WithRSAEncryption':return c.md.sha256.create();case'sha384WithRSAEncryption':return c.md.sha384.create();case'sha512WithRSAEncryption':return c.md.sha512.create();case'RSASSA-PSS':return c.md.sha256.create();default:var t=new Error('Could not compute '+e.type+' digest. Unknown signature OID.');throw t.signatureOid=e.signatureOid,t;}},T=function(e){var t=e.certificate,n;switch(t.signatureOid){case g.sha1WithRSAEncryption:case g.sha1WithRSASignature:break;case g['RSASSA-PSS']:var a,r;if(a=g[t.signatureParameters.mgf.hash.algorithmOid],void 0===a||void 0===c.md[a]){var i=new Error('Unsupported MGF hash function.');throw i.oid=t.signatureParameters.mgf.hash.algorithmOid,i.name=a,i}if(r=g[t.signatureParameters.mgf.algorithmOid],void 0===r||void 0===c.mgf[r]){var i=new Error('Unsupported MGF function.');throw i.oid=t.signatureParameters.mgf.algorithmOid,i.name=r,i}if(r=c.mgf[r].create(c.md[a].create()),a=g[t.signatureParameters.hash.algorithmOid],void 0===a||void 0===c.md[a]){var i=new Error('Unsupported RSASSA-PSS hash function.');throw i.oid=t.signatureParameters.hash.algorithmOid,i.name=a,i}n=c.pss.create(c.md[a].create(),r,t.signatureParameters.saltLength);}return t.publicKey.verify(e.md.digest().getBytes(),e.signature,n)};u.certificateFromPem=function(e,t,n){var a=c.pem.decode(e)[0];if('CERTIFICATE'!==a.type&&'X509 CERTIFICATE'!==a.type&&'TRUSTED CERTIFICATE'!==a.type){var r=new Error('Could not convert certificate from PEM; PEM header type is not \"CERTIFICATE\", \"X509 CERTIFICATE\", or \"TRUSTED CERTIFICATE\".');throw r.headerType=a.type,r}if(a.procType&&'ENCRYPTED'===a.procType.type)throw new Error('Could not convert certificate from PEM; PEM is encrypted.');var i=p.fromDer(a.body,n);return u.certificateFromAsn1(i,t)},u.certificateToPem=function(e,t){var n={type:'CERTIFICATE',body:p.toDer(u.certificateToAsn1(e)).getBytes()};return c.pem.encode(n,{maxline:t})},u.publicKeyFromPem=function(e){var t=c.pem.decode(e)[0];if('PUBLIC KEY'!==t.type&&'RSA PUBLIC KEY'!==t.type){var n=new Error('Could not convert public key from PEM; PEM header type is not \"PUBLIC KEY\" or \"RSA PUBLIC KEY\".');throw n.headerType=t.type,n}if(t.procType&&'ENCRYPTED'===t.procType.type)throw new Error('Could not convert public key from PEM; PEM is encrypted.');var a=p.fromDer(t.body);return u.publicKeyFromAsn1(a)},u.publicKeyToPem=function(e,t){var n={type:'PUBLIC KEY',body:p.toDer(u.publicKeyToAsn1(e)).getBytes()};return c.pem.encode(n,{maxline:t})},u.publicKeyToRSAPublicKeyPem=function(e,t){var n={type:'RSA PUBLIC KEY',body:p.toDer(u.publicKeyToRSAPublicKey(e)).getBytes()};return c.pem.encode(n,{maxline:t})},u.getPublicKeyFingerprint=function(e,t){t=t||{};var n=t.md||c.md.sha1.create(),a=t.type||'RSAPublicKey',r;switch(a){case'RSAPublicKey':r=p.toDer(u.publicKeyToRSAPublicKey(e)).getBytes();break;case'SubjectPublicKeyInfo':r=p.toDer(u.publicKeyToAsn1(e)).getBytes();break;default:throw new Error('Unknown fingerprint type \"'+t.type+'\".');}n.start(),n.update(r);var i=n.digest();if('hex'===t.encoding){var s=i.toHex();return t.delimiter?s.match(/.{2}/g).join(t.delimiter):s}if('binary'===t.encoding)return i.getBytes();if(t.encoding)throw new Error('Unknown encoding \"'+t.encoding+'\".');return i},u.certificationRequestFromPem=function(e,t,n){var a=c.pem.decode(e)[0];if('CERTIFICATE REQUEST'!==a.type){var r=new Error('Could not convert certification request from PEM; PEM header type is not \"CERTIFICATE REQUEST\".');throw r.headerType=a.type,r}if(a.procType&&'ENCRYPTED'===a.procType.type)throw new Error('Could not convert certification request from PEM; PEM is encrypted.');var i=p.fromDer(a.body,n);return u.certificationRequestFromAsn1(i,t)},u.certificationRequestToPem=function(e,t){var n={type:'CERTIFICATE REQUEST',body:p.toDer(u.certificationRequestToAsn1(e)).getBytes()};return c.pem.encode(n,{maxline:t})},u.createCertificate=function(){var e={};return e.version=2,e.serialNumber='00',e.signatureOid=null,e.signature=null,e.siginfo={},e.siginfo.algorithmOid=null,e.validity={},e.validity.notBefore=new Date,e.validity.notAfter=new Date,e.issuer={},e.issuer.getField=function(t){return a(e.issuer,t)},e.issuer.addField=function(t){i([t]),e.issuer.attributes.push(t)},e.issuer.attributes=[],e.issuer.hash=null,e.subject={},e.subject.getField=function(t){return a(e.subject,t)},e.subject.addField=function(t){i([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.extensions=[],e.publicKey=null,e.md=null,e.setSubject=function(t,n){i(t),e.subject.attributes=t,delete e.subject.uniqueId,n&&(e.subject.uniqueId=n),e.subject.hash=null},e.setIssuer=function(t,n){i(t),e.issuer.attributes=t,delete e.issuer.uniqueId,n&&(e.issuer.uniqueId=n),e.issuer.hash=null},e.setExtensions=function(t){for(var n=0;n<t.length;++n)s(t[n],{cert:e});e.extensions=t},e.getExtension=function(t){'string'==typeof t&&(t={name:t});for(var n=null,a=0,r;null==n&&a<e.extensions.length;++a)r=e.extensions[a],t.id&&r.id===t.id?n=r:t.name&&r.name===t.name&&(n=r);return n},e.sign=function(t,n){e.md=n||c.md.sha1.create();var a=g[e.md.algorithm+'WithRSAEncryption'];if(!a){var r=new Error('Could not compute certificate digest. Unknown message digest algorithm OID.');throw r.algorithm=e.md.algorithm,r}e.signatureOid=e.siginfo.algorithmOid=a,e.tbsCertificate=u.getTBSCertificate(e);var i=p.toDer(e.tbsCertificate);e.md.update(i.getBytes()),e.signature=t.sign(e.md)},e.verify=function(t){var n=!1;if(!e.issued(t)){var a=t.issuer,r=e.subject,i=new Error('The parent certificate did not issue the given child certificate; the child certificate\\'s issuer does not match the parent\\'s subject.');throw i.expectedIssuer=r.attributes,i.actualIssuer=a.attributes,i}var s=t.md;if(null===s){s=S({signatureOid:t.signatureOid,type:'certificate'});var o=t.tbsCertificate||u.getTBSCertificate(t),l=p.toDer(o);s.update(l.getBytes())}return null!==s&&(n=T({certificate:e,md:s,signature:t.signature})),n},e.isIssuer=function(t){var a=!1,r=e.issuer,i=t.subject;if(r.hash&&i.hash)a=r.hash===i.hash;else if(r.attributes.length===i.attributes.length){a=!0;for(var s=0,n,o;a&&s<r.attributes.length;++s)n=r.attributes[s],o=i.attributes[s],(n.type!==o.type||n.value!==o.value)&&(a=!1)}return a},e.issued=function(t){return t.isIssuer(e)},e.generateSubjectKeyIdentifier=function(){return u.getPublicKeyFingerprint(e.publicKey,{type:'RSAPublicKey'})},e.verifySubjectKeyIdentifier=function(){for(var t=g.subjectKeyIdentifier,n=0,a;n<e.extensions.length;++n)if(a=e.extensions[n],a.id===t){var r=e.generateSubjectKeyIdentifier().getBytes();return c.util.hexToBytes(a.subjectKeyIdentifier)===r}return!1},e},u.certificateFromAsn1=function(e,t){var n={},r=[];if(!p.validate(e,m,n,r)){var s=new Error('Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.');throw s.errors=r,s}var o=p.derToOid(n.publicKeyOid);if(o!==u.oids.rsaEncryption)throw new Error('Cannot read public key. OID is not RSA.');var l=u.createCertificate();l.version=n.certVersion?n.certVersion.charCodeAt(0):0;var d=c.util.createBuffer(n.certSerialNumber);l.serialNumber=d.toHex(),l.signatureOid=c.asn1.derToOid(n.certSignatureOid),l.signatureParameters=b(l.signatureOid,n.certSignatureParams,!0),l.siginfo.algorithmOid=c.asn1.derToOid(n.certinfoSignatureOid),l.siginfo.parameters=b(l.siginfo.algorithmOid,n.certinfoSignatureParams,!1),l.signature=n.certSignature;var g=[];if(void 0!==n.certValidity1UTCTime&&g.push(p.utcTimeToDate(n.certValidity1UTCTime)),void 0!==n.certValidity2GeneralizedTime&&g.push(p.generalizedTimeToDate(n.certValidity2GeneralizedTime)),void 0!==n.certValidity3UTCTime&&g.push(p.utcTimeToDate(n.certValidity3UTCTime)),void 0!==n.certValidity4GeneralizedTime&&g.push(p.generalizedTimeToDate(n.certValidity4GeneralizedTime)),2<g.length)throw new Error('Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.');if(2>g.length)throw new Error('Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.');if(l.validity.notBefore=g[0],l.validity.notAfter=g[1],l.tbsCertificate=n.tbsCertificate,t){l.md=S({signatureOid:l.signatureOid,type:'certificate'});var h=p.toDer(l.tbsCertificate);l.md.update(h.getBytes())}var y=c.md.sha1.create(),f=p.toDer(n.certIssuer);y.update(f.getBytes()),l.issuer.getField=function(e){return a(l.issuer,e)},l.issuer.addField=function(e){i([e]),l.issuer.attributes.push(e)},l.issuer.attributes=u.RDNAttributesAsArray(n.certIssuer),n.certIssuerUniqueId&&(l.issuer.uniqueId=n.certIssuerUniqueId),l.issuer.hash=y.digest().toHex();var E=c.md.sha1.create(),C=p.toDer(n.certSubject);return E.update(C.getBytes()),l.subject.getField=function(e){return a(l.subject,e)},l.subject.addField=function(e){i([e]),l.subject.attributes.push(e)},l.subject.attributes=u.RDNAttributesAsArray(n.certSubject),n.certSubjectUniqueId&&(l.subject.uniqueId=n.certSubjectUniqueId),l.subject.hash=E.digest().toHex(),l.extensions=n.certExtensions?u.certificateExtensionsFromAsn1(n.certExtensions):[],l.publicKey=u.publicKeyFromAsn1(n.subjectPublicKeyInfo),l},u.certificateExtensionsFromAsn1=function(e){for(var t=[],n=0,a;n<e.value.length;++n){a=e.value[n];for(var r=0;r<a.value.length;++r)t.push(u.certificateExtensionFromAsn1(a.value[r]))}return t},u.certificateExtensionFromAsn1=function(t){var a={};if(a.id=p.derToOid(t.value[0].value),a.critical=!1,t.value[1].type===p.Type.BOOLEAN?(a.critical=0!==t.value[1].value.charCodeAt(0),a.value=t.value[2].value):a.value=t.value[1].value,a.id in g)if(a.name=g[a.id],'keyUsage'===a.name){var e=p.fromDer(a.value),r=0,i=0;1<e.value.length&&(r=e.value.charCodeAt(1),i=2<e.value.length?e.value.charCodeAt(2):0),a.digitalSignature=128==(128&r),a.nonRepudiation=64==(64&r),a.keyEncipherment=32==(32&r),a.dataEncipherment=16==(16&r),a.keyAgreement=8==(8&r),a.keyCertSign=4==(4&r),a.cRLSign=2==(2&r),a.encipherOnly=1==(1&r),a.decipherOnly=128==(128&i)}else if('basicConstraints'===a.name){var e=p.fromDer(a.value);a.cA=0<e.value.length&&e.value[0].type===p.Type.BOOLEAN&&0!==e.value[0].value.charCodeAt(0);var s=null;0<e.value.length&&e.value[0].type===p.Type.INTEGER?s=e.value[0].value:1<e.value.length&&(s=e.value[1].value),null!==s&&(a.pathLenConstraint=p.derToInteger(s))}else if('extKeyUsage'===a.name)for(var e=p.fromDer(a.value),o=0,l;o<e.value.length;++o)l=p.derToOid(e.value[o].value),l in g?a[g[l]]=!0:a[l]=!0;else if('nsCertType'===a.name){var e=p.fromDer(a.value),r=0;1<e.value.length&&(r=e.value.charCodeAt(1)),a.client=128==(128&r),a.server=64==(64&r),a.email=32==(32&r),a.objsign=16==(16&r),a.reserved=8==(8&r),a.sslCA=4==(4&r),a.emailCA=2==(2&r),a.objCA=1==(1&r)}else if('subjectAltName'===a.name||'issuerAltName'===a.name){a.altNames=[];for(var e=p.fromDer(a.value),d=0,n;d<e.value.length;++d){n=e.value[d];var u={type:n.type,value:n.value};switch(a.altNames.push(u),n.type){case 1:case 2:case 6:break;case 7:u.ip=c.util.bytesToIP(n.value);break;case 8:u.oid=p.derToOid(n.value);break;default:}}}else if('subjectKeyIdentifier'===a.name){var e=p.fromDer(a.value);a.subjectKeyIdentifier=c.util.bytesToHex(e.value)}return a},u.certificationRequestFromAsn1=function(e,t){var n={},r=[];if(!p.validate(e,v,n,r)){var s=new Error('Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.');throw s.errors=r,s}var o=p.derToOid(n.publicKeyOid);if(o!==u.oids.rsaEncryption)throw new Error('Cannot read public key. OID is not RSA.');var l=u.createCertificationRequest();if(l.version=n.csrVersion?n.csrVersion.charCodeAt(0):0,l.signatureOid=c.asn1.derToOid(n.csrSignatureOid),l.signatureParameters=b(l.signatureOid,n.csrSignatureParams,!0),l.siginfo.algorithmOid=c.asn1.derToOid(n.csrSignatureOid),l.siginfo.parameters=b(l.siginfo.algorithmOid,n.csrSignatureParams,!1),l.signature=n.csrSignature,l.certificationRequestInfo=n.certificationRequestInfo,t){l.md=S({signatureOid:l.signatureOid,type:'certification request'});var d=p.toDer(l.certificationRequestInfo);l.md.update(d.getBytes())}var g=c.md.sha1.create();return l.subject.getField=function(e){return a(l.subject,e)},l.subject.addField=function(e){i([e]),l.subject.attributes.push(e)},l.subject.attributes=u.RDNAttributesAsArray(n.certificationRequestInfoSubject,g),l.subject.hash=g.digest().toHex(),l.publicKey=u.publicKeyFromAsn1(n.subjectPublicKeyInfo),l.getAttribute=function(e){return a(l,e)},l.addAttribute=function(e){i([e]),l.attributes.push(e)},l.attributes=u.CRIAttributesAsArray(n.certificationRequestInfoAttributes||[]),l},u.createCertificationRequest=function(){var e={};return e.version=0,e.signatureOid=null,e.signature=null,e.siginfo={},e.siginfo.algorithmOid=null,e.subject={},e.subject.getField=function(t){return a(e.subject,t)},e.subject.addField=function(t){i([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.publicKey=null,e.attributes=[],e.getAttribute=function(t){return a(e,t)},e.addAttribute=function(t){i([t]),e.attributes.push(t)},e.md=null,e.setSubject=function(t){i(t),e.subject.attributes=t,e.subject.hash=null},e.setAttributes=function(t){i(t),e.attributes=t},e.sign=function(t,n){e.md=n||c.md.sha1.create();var a=g[e.md.algorithm+'WithRSAEncryption'];if(!a){var r=new Error('Could not compute certification request digest. Unknown message digest algorithm OID.');throw r.algorithm=e.md.algorithm,r}e.signatureOid=e.siginfo.algorithmOid=a,e.certificationRequestInfo=u.getCertificationRequestInfo(e);var i=p.toDer(e.certificationRequestInfo);e.md.update(i.getBytes()),e.signature=t.sign(e.md)},e.verify=function(){var t=!1,n=e.md;if(null===n){n=S({signatureOid:e.signatureOid,type:'certification request'});var a=e.certificationRequestInfo||u.getCertificationRequestInfo(e),r=p.toDer(a);n.update(r.getBytes())}return null!==n&&(t=T({certificate:e,md:n,signature:e.signature})),t},e};var I=new Date('1950-01-01T00:00:00Z'),A=new Date('2050-01-01T00:00:00Z');u.getTBSCertificate=function(e){var t=d(e.validity.notBefore),n=d(e.validity.notAfter),a=p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[p.create(p.Class.CONTEXT_SPECIFIC,0,!0,[p.create(p.Class.UNIVERSAL,p.Type.INTEGER,!1,p.integerToDer(e.version).getBytes())]),p.create(p.Class.UNIVERSAL,p.Type.INTEGER,!1,c.util.hexToBytes(e.serialNumber)),p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[p.create(p.Class.UNIVERSAL,p.Type.OID,!1,p.oidToDer(e.siginfo.algorithmOid).getBytes()),o(e.siginfo.algorithmOid,e.siginfo.parameters)]),r(e.issuer),p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[t,n]),r(e.subject),u.publicKeyToAsn1(e.publicKey)]);return e.issuer.uniqueId&&a.value.push(p.create(p.Class.CONTEXT_SPECIFIC,1,!0,[p.create(p.Class.UNIVERSAL,p.Type.BITSTRING,!1,'\\0'+e.issuer.uniqueId)])),e.subject.uniqueId&&a.value.push(p.create(p.Class.CONTEXT_SPECIFIC,2,!0,[p.create(p.Class.UNIVERSAL,p.Type.BITSTRING,!1,'\\0'+e.subject.uniqueId)])),0<e.extensions.length&&a.value.push(u.certificateExtensionsToAsn1(e.extensions)),a},u.getCertificationRequestInfo=function(e){var t=p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[p.create(p.Class.UNIVERSAL,p.Type.INTEGER,!1,p.integerToDer(e.version).getBytes()),r(e.subject),u.publicKeyToAsn1(e.publicKey),l(e)]);return t},u.distinguishedNameToAsn1=function(e){return r(e)},u.certificateToAsn1=function(e){var t=e.tbsCertificate||u.getTBSCertificate(e);return p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[t,p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[p.create(p.Class.UNIVERSAL,p.Type.OID,!1,p.oidToDer(e.signatureOid).getBytes()),o(e.signatureOid,e.signatureParameters)]),p.create(p.Class.UNIVERSAL,p.Type.BITSTRING,!1,'\\0'+e.signature)])},u.certificateExtensionsToAsn1=function(e){var t=p.create(p.Class.CONTEXT_SPECIFIC,3,!0,[]),n=p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[]);t.value.push(n);for(var a=0;a<e.length;++a)n.value.push(u.certificateExtensionToAsn1(e[a]));return t},u.certificateExtensionToAsn1=function(e){var t=p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[]);t.value.push(p.create(p.Class.UNIVERSAL,p.Type.OID,!1,p.oidToDer(e.id).getBytes())),e.critical&&t.value.push(p.create(p.Class.UNIVERSAL,p.Type.BOOLEAN,!1,'\\xFF'));var n=e.value;return'string'!=typeof e.value&&(n=p.toDer(n).getBytes()),t.value.push(p.create(p.Class.UNIVERSAL,p.Type.OCTETSTRING,!1,n)),t},u.certificationRequestToAsn1=function(e){var t=e.certificationRequestInfo||u.getCertificationRequestInfo(e);return p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[t,p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[p.create(p.Class.UNIVERSAL,p.Type.OID,!1,p.oidToDer(e.signatureOid).getBytes()),o(e.signatureOid,e.signatureParameters)]),p.create(p.Class.UNIVERSAL,p.Type.BITSTRING,!1,'\\0'+e.signature)])},u.createCaStore=function(e){function t(e){return n(e),a.certs[e.hash]||null}function n(e){if(!e.hash){var t=c.md.sha1.create();e.attributes=u.RDNAttributesAsArray(r(e),t),e.hash=t.digest().toHex()}}var a={certs:{}};if(a.getIssuer=function(e){var n=t(e.issuer);return n},a.addCertificate=function(e){if('string'==typeof e&&(e=c.pki.certificateFromPem(e)),n(e.subject),!a.hasCertificate(e))if(e.subject.hash in a.certs){var t=a.certs[e.subject.hash];c.util.isArray(t)||(t=[t]),t.push(e),a.certs[e.subject.hash]=t}else a.certs[e.subject.hash]=e},a.hasCertificate=function(e){'string'==typeof e&&(e=c.pki.certificateFromPem(e));var n=t(e.subject);if(!n)return!1;c.util.isArray(n)||(n=[n]);for(var a=p.toDer(u.certificateToAsn1(e)).getBytes(),r=0,i;r<n.length;++r)if(i=p.toDer(u.certificateToAsn1(n[r])).getBytes(),a===i)return!0;return!1},a.listAllCertificates=function(){var e=[];for(var t in a.certs)if(a.certs.hasOwnProperty(t)){var n=a.certs[t];if(!c.util.isArray(n))e.push(n);else for(var r=0;r<n.length;++r)e.push(n[r])}return e},a.removeCertificate=function(e){var r;if('string'==typeof e&&(e=c.pki.certificateFromPem(e)),n(e.subject),!a.hasCertificate(e))return null;var s=t(e.subject);if(!c.util.isArray(s))return r=a.certs[e.subject.hash],delete a.certs[e.subject.hash],r;for(var o=p.toDer(u.certificateToAsn1(e)).getBytes(),l=0,i;l<s.length;++l)i=p.toDer(u.certificateToAsn1(s[l])).getBytes(),o===i&&(r=s[l],s.splice(l,1));return 0===s.length&&delete a.certs[e.subject.hash],r},e)for(var s=0,i;s<e.length;++s)i=e[s],a.addCertificate(i);return a},u.certificateError={bad_certificate:'forge.pki.BadCertificate',unsupported_certificate:'forge.pki.UnsupportedCertificate',certificate_revoked:'forge.pki.CertificateRevoked',certificate_expired:'forge.pki.CertificateExpired',certificate_unknown:'forge.pki.CertificateUnknown',unknown_ca:'forge.pki.UnknownCertificateAuthority'},u.verifyCertificateChain=function(e,t,n){'function'==typeof n&&(n={verify:n}),n=n||{},t=t.slice(0);var a=t.slice(0),r=n.validityCheckDate;'undefined'==typeof r&&(r=new Date);var s=!0,o=null,l=0;do{var d=t.shift(),p=null,g=!1;if(r&&(r<d.validity.notBefore||r>d.validity.notAfter)&&(o={message:'Certificate is not valid yet or has expired.',error:u.certificateError.certificate_expired,notBefore:d.validity.notBefore,notAfter:d.validity.notAfter,now:r}),null===o){if(p=t[0]||e.getIssuer(d),null===p&&d.isIssuer(d)&&(g=!0,p=d),p){var h=p;c.util.isArray(h)||(h=[h]);for(var y=!1;!y&&0<h.length;){p=h.shift();try{y=p.verify(d)}catch(e){}}y||(o={message:'Certificate signature is invalid.',error:u.certificateError.bad_certificate})}null!==o||p&&!g||e.hasCertificate(d)||(o={message:'Certificate is not trusted.',error:u.certificateError.unknown_ca})}if(null===o&&p&&!d.isIssuer(p)&&(o={message:'Certificate issuer is invalid.',error:u.certificateError.bad_certificate}),null===o)for(var f={keyUsage:!0,basicConstraints:!0},m=0,i;null==o&&m<d.extensions.length;++m)i=d.extensions[m],i.critical&&!(i.name in f)&&(o={message:'Certificate has an unsupported critical extension.',error:u.certificateError.unsupported_certificate});if(null===o&&(!s||0===t.length&&(!p||g))){var E=d.getExtension('basicConstraints'),C=d.getExtension('keyUsage');if(null===C||C.keyCertSign&&null!==E||(o={message:'Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn\\'t the first then the certificate must be a valid CA.',error:u.certificateError.bad_certificate}),null!==o||null===E||E.cA||(o={message:'Certificate basicConstraints indicates the certificate is not a CA.',error:u.certificateError.bad_certificate}),null===o&&null!==C&&'pathLenConstraint'in E){var v=l-1;v>E.pathLenConstraint&&(o={message:'Certificate basicConstraints pathLenConstraint violated.',error:u.certificateError.bad_certificate})}}var b=null===o||o.error,S=n.verify?n.verify(b,l,a):b;if(!0===S)o=null;else throw!0===b&&(o={message:'The application rejected the certificate.',error:u.certificateError.bad_certificate}),(S||0===S)&&('object'!=typeof S||c.util.isArray(S)?'string'==typeof S&&(o.error=S):(S.message&&(o.message=S.message),S.error&&(o.error=S.error))),o;s=!1,++l}while(0<t.length);return!0}},function(e,t,n){var a=n(0);n(5),n(1);var r=e.exports=a.pss=a.pss||{};r.create=function(e){3===arguments.length&&(e={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var t=e.md,n=e.mgf,r=t.digestLength,s=e.salt||null;'string'==typeof s&&(s=a.util.createBuffer(s));var o;if('saltLength'in e)o=e.saltLength;else if(null!==s)o=s.length();else throw new Error('Salt length not specified or specific salt not given.');if(null!==s&&s.length()!==o)throw new Error('Given salt length does not match length of given salt.');var l=e.prng||a.random,i={};return i.encode=function(e,c){var p=c-1,u=d(p/8),g=e.digest().getBytes(),f;if(u<r+o+2)throw new Error('Message is too long to encrypt.');var i=null===s?l.getBytesSync(o):s.bytes();var m=new a.util.ByteBuffer;m.fillWithByte(0,8),m.putBytes(g),m.putBytes(i),t.start(),t.update(m.getBytes());var E=t.digest().getBytes(),h=new a.util.ByteBuffer;h.fillWithByte(0,u-o-r-2),h.putByte(1),h.putBytes(i);var C=h.getBytes(),v=u-r-1,b=n.generate(E,v),S='';for(f=0;f<v;f++)S+=y(C.charCodeAt(f)^b.charCodeAt(f));return S=y(S.charCodeAt(0)&~(255&65280>>8*u-p))+S.substr(1),S+E+'\\xBC'},i.verify=function(e,s,l){var c=l-1,p=d(c/8),u;if(s=s.substr(-p),p<r+o+2)throw new Error('Inconsistent parameters to PSS signature verification.');if(188!==s.charCodeAt(p-1))throw new Error('Encoded message does not end in 0xBC.');var i=p-r-1,g=s.substr(0,i),f=s.substr(i,r),h=255&65280>>8*p-c;if(0!=(g.charCodeAt(0)&h))throw new Error('Bits beyond keysize not zero as expected.');var m=n.generate(f,i),E='';for(u=0;u<i;u++)E+=y(g.charCodeAt(u)^m.charCodeAt(u));E=y(E.charCodeAt(0)&~h)+E.substr(1);var C=p-r-o-2;for(u=0;u<C;u++)if(0!==E.charCodeAt(u))throw new Error('Leftmost octets not zero as expected');if(1!==E.charCodeAt(C))throw new Error('Inconsistent PSS signature, 0x01 marker not found');var v=E.substr(-o),b=new a.util.ByteBuffer;b.fillWithByte(0,8),b.putBytes(e),b.putBytes(v),t.start(),t.update(b.getBytes());var S=t.digest().getBytes();return f===S},i}},function(e){'use strict';var t;e.exports=function(e){return e!==t&&null!==e}},function(e,t){function n(e,t){for(var n in e)t[n]=e[n]}function a(e,a){var r=e.prototype;if(Object.create){var t=Object.create(a.prototype);r.__proto__=t}if(!(r instanceof a)){function i(){}i.prototype=a.prototype,i=new i,n(r,i),e.prototype=r=i}r.constructor!=e&&('function'!=typeof e&&console.error('unknow Class:'+e),r.constructor=e)}function r(e,t){if(t instanceof Error)var n=t;else n=this,Error.call(this,ae[e]),this.message=ae[e],Error.captureStackTrace&&Error.captureStackTrace(this,r);return n.code=e,t&&(this.message=this.message+': '+t),n}function s(){}function i(e,t){this._node=e,this._refresh=t,o(this)}function o(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var a=e._refresh(e._node);M(e,'length',a.length),n(a,e),e._inc=t}}function l(){}function d(e,t){for(var n=e.length;n--;)if(e[n]===t)return n}function c(e,t,n,a){if(a?t[d(t,a)]=n:t[t.length++]=n,e){n.ownerElement=e;var r=e.ownerDocument;r&&(a&&E(r,e,a),m(r,e,n))}}function p(e,t,n){var a=d(t,n);if(0<=a){for(var i=t.length-1;a<i;)t[a]=t[++a];if(t.length=i,e){var s=e.ownerDocument;s&&(E(s,e,n),n.ownerElement=null)}}else throw r(pe,new Error(e.tagName+'@'+n))}function u(e){if(this._features={},e)for(var t in e)this._features=e[t]}function g(){}function h(e){return'<'==e&&'&lt;'||'>'==e&&'&gt;'||'&'==e&&'&amp;'||'\"'==e&&'&quot;'||'&#'+e.charCodeAt()+';'}function y(e,t){if(t(e))return!0;if(e=e.firstChild)do if(y(e,t))return!0;while(e=e.nextSibling)}function f(){}function m(e,t,n){e&&e._inc++;var a=n.namespaceURI;'http://www.w3.org/2000/xmlns/'==a&&(t._nsMap[n.prefix?n.localName:'']=n.value)}function E(e,t,n){e&&e._inc++;var a=n.namespaceURI;'http://www.w3.org/2000/xmlns/'==a&&delete t._nsMap[n.prefix?n.localName:'']}function C(e,t,n){if(e&&e._inc){e._inc++;var a=t.childNodes;if(n)a[a.length++]=n;else{for(var r=t.firstChild,s=0;r;)a[s++]=r,r=r.nextSibling;a.length=s}}}function v(e,t){var n=t.previousSibling,a=t.nextSibling;return n?n.nextSibling=a:e.firstChild=a,a?a.previousSibling=n:e.lastChild=n,C(e.ownerDocument,e),t}function b(e,t,n){var a=t.parentNode;if(a&&a.removeChild(t),t.nodeType===ee){var r=t.firstChild;if(null==r)return t;var i=t.lastChild}else r=i=t;var s=n?n.previousSibling:e.lastChild;r.previousSibling=s,i.nextSibling=n,s?s.nextSibling=r:e.firstChild=r,null==n?e.lastChild=i:n.previousSibling=i;do r.parentNode=e;while(r!==i&&(r=r.nextSibling));return C(e.ownerDocument||e,e),t.nodeType==ee&&(t.firstChild=t.lastChild=null),t}function S(e,t){var n=t.parentNode;if(n){var a=e.lastChild;n.removeChild(t);var a=e.lastChild}var a=e.lastChild;return t.parentNode=e,t.previousSibling=a,t.nextSibling=null,a?a.nextSibling=t:e.firstChild=t,e.lastChild=t,C(e.ownerDocument,e,t),t}function T(){this._nsMap={}}function I(){}function A(){}function _(){}function k(){}function N(){}function B(){}function R(){}function x(){}function L(){}function D(){}function w(){}function P(){}function U(e,t){var n=[],a=9==this.nodeType?this.documentElement:this,r=a.prefix,i=a.namespaceURI;if(i&&null==r){var r=a.lookupPrefix(i);if(null==r)var s=[{namespace:i,prefix:null}]}return V(this,n,e,t,s),n.join('')}function O(e,t,n){var a=e.prefix||'',r=e.namespaceURI;if(!a&&!r)return!1;if('xml'===a&&'http://www.w3.org/XML/1998/namespace'===r||'http://www.w3.org/2000/xmlns/'==r)return!1;for(var s=n.length;s--;){var i=n[s];if(i.prefix==a)return i.namespace!=r}return!0}function V(e,t,n,a,r){if(a){if(e=a(e),!e)return;if('string'==typeof e)return void t.push(e)}switch(e.nodeType){case F:r||(r=[]);var s=r.length,o=e.attributes,l=o.length,d=e.firstChild,c=e.tagName;n=q===e.namespaceURI||n,t.push('<',c);for(var p=0,i;p<l;p++)i=o.item(p),'xmlns'==i.prefix?r.push({prefix:i.localName,namespace:i.value}):'xmlns'==i.nodeName&&r.push({prefix:'',namespace:i.value});for(var p=0,i;p<l;p++){if(i=o.item(p),O(i,n,r)){var u=i.prefix||'',g=i.namespaceURI,y=u?' xmlns:'+u:' xmlns';t.push(y,'=\"',g,'\"'),r.push({prefix:u,namespace:g})}V(i,t,n,a,r)}if(O(e,n,r)){var u=e.prefix||'',g=e.namespaceURI,y=u?' xmlns:'+u:' xmlns';t.push(y,'=\"',g,'\"'),r.push({prefix:u,namespace:g})}if(d||n&&!/^(?:meta|link|img|br|hr|input)$/i.test(c)){if(t.push('>'),n&&/^script$/i.test(c))for(;d;)d.data?t.push(d.data):V(d,t,n,a,r),d=d.nextSibling;else for(;d;)V(d,t,n,a,r),d=d.nextSibling;t.push('</',c,'>')}else t.push('/>');return;case J:case ee:for(var d=e.firstChild;d;)V(d,t,n,a,r),d=d.nextSibling;return;case H:return t.push(' ',e.name,'=\"',e.value.replace(/[<&\"]/g,h),'\"');case G:return t.push(e.data.replace(/[<&]/g,h));case W:return t.push('<![CDATA[',e.data,']]>');case Z:return t.push('<!--',e.data,'-->');case $:var f=e.publicId,m=e.systemId;if(t.push('<!DOCTYPE ',e.name),f)t.push(' PUBLIC \"',f),m&&'.'!=m&&t.push('\" \"',m),t.push('\">');else if(m&&'.'!=m)t.push(' SYSTEM \"',m,'\">');else{var E=e.internalSubset;E&&t.push(' [',E,']'),t.push('>')}return;case X:return t.push('<?',e.target,' ',e.data,'?>');case Y:return t.push('&',e.nodeName,';');default:t.push('??',e.nodeName);}}function K(e,t,n){var a;switch(t.nodeType){case F:a=t.cloneNode(!1),a.ownerDocument=e;case ee:break;case H:n=!0;}if(a||(a=t.cloneNode(!1)),a.ownerDocument=e,a.parentNode=null,n)for(var r=t.firstChild;r;)a.appendChild(K(e,r,n)),r=r.nextSibling;return a}function j(e,t,a){var r=new t.constructor;for(var o in t){var n=t[o];'object'!=typeof n&&n!=r[o]&&(r[o]=n)}switch(t.childNodes&&(r.childNodes=new s),r.ownerDocument=e,r.nodeType){case F:var d=t.attributes,c=r.attributes=new l,p=d.length;c._ownerElement=r;for(var u=0;u<p;u++)r.setAttributeNode(j(e,d.item(u),!0));break;;case H:a=!0;}if(a)for(var i=t.firstChild;i;)r.appendChild(j(e,i,a)),i=i.nextSibling;return r}function M(e,t,n){e[t]=n}var q='http://www.w3.org/1999/xhtml',z={},F=z.ELEMENT_NODE=1,H=z.ATTRIBUTE_NODE=2,G=z.TEXT_NODE=3,W=z.CDATA_SECTION_NODE=4,Y=z.ENTITY_REFERENCE_NODE=5,Q=z.ENTITY_NODE=6,X=z.PROCESSING_INSTRUCTION_NODE=7,Z=z.COMMENT_NODE=8,J=z.DOCUMENT_NODE=9,$=z.DOCUMENT_TYPE_NODE=10,ee=z.DOCUMENT_FRAGMENT_NODE=11,te=z.NOTATION_NODE=12,ne={},ae={},re=ne.INDEX_SIZE_ERR=(ae[1]='Index size error',1),ie=ne.DOMSTRING_SIZE_ERR=(ae[2]='DOMString size error',2),se=ne.HIERARCHY_REQUEST_ERR=(ae[3]='Hierarchy request error',3),oe=ne.WRONG_DOCUMENT_ERR=(ae[4]='Wrong document',4),le=ne.INVALID_CHARACTER_ERR=(ae[5]='Invalid character',5),de=ne.NO_DATA_ALLOWED_ERR=(ae[6]='No data allowed',6),ce=ne.NO_MODIFICATION_ALLOWED_ERR=(ae[7]='No modification allowed',7),pe=ne.NOT_FOUND_ERR=(ae[8]='Not found',8),ue=ne.NOT_SUPPORTED_ERR=(ae[9]='Not supported',9),ge=ne.INUSE_ATTRIBUTE_ERR=(ae[10]='Attribute in use',10),he=ne.INVALID_STATE_ERR=(ae[11]='Invalid state',11),ye=ne.SYNTAX_ERR=(ae[12]='Syntax error',12),fe=ne.INVALID_MODIFICATION_ERR=(ae[13]='Invalid modification',13),me=ne.NAMESPACE_ERR=(ae[14]='Invalid namespace',14),Ee=ne.INVALID_ACCESS_ERR=(ae[15]='Invalid access',15);r.prototype=Error.prototype,n(ne,r);s.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var n=[],a=0;a<this.length;a++)V(this[a],n,e,t);return n.join('')}},i.prototype.item=function(e){return o(this),this[e]},a(i,s);l.prototype={length:0,item:s.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var n=this[t];if(n.nodeName==e)return n}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new r(ge);var n=this.getNamedItem(e.nodeName);return c(this._ownerElement,this,e,n),n},setNamedItemNS:function(e){var t=e.ownerElement,n;if(t&&t!=this._ownerElement)throw new r(ge);return n=this.getNamedItemNS(e.namespaceURI,e.localName),c(this._ownerElement,this,e,n),n},removeNamedItem:function(e){var t=this.getNamedItem(e);return p(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var n=this.getNamedItemNS(e,t);return p(this._ownerElement,this,n),n},getNamedItemNS:function(e,t){for(var n=this.length;n--;){var a=this[n];if(a.localName==t&&a.namespaceURI==e)return a}return null}};u.prototype={hasFeature:function(e,t){var n=this._features[e.toLowerCase()];return n&&(!t||t in n)},createDocument:function(e,t,n){var a=new f;if(a.implementation=this,a.childNodes=new s,a.doctype=n,n&&a.appendChild(n),t){var r=a.createElementNS(e,t);a.appendChild(r)}return a},createDocumentType:function(e,t,n){var a=new B;return a.name=e,a.nodeName=e,a.publicId=t,a.systemId=n,a}};g.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return b(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t),t&&this.removeChild(t)},removeChild:function(e){return v(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return j(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==G&&e.nodeType==G?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return 0<this.attributes.length},lookupPrefix:function(e){for(var t=this;t;){var a=t._nsMap;if(a)for(var r in a)if(a[r]==e)return r;t=t.nodeType==H?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var n=t._nsMap;if(n&&e in n)return n[e];t=t.nodeType==H?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){var t=this.lookupPrefix(e);return null==t}},n(z,g),n(z,g.prototype),f.prototype={nodeName:'#document',nodeType:J,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==ee){for(var n=e.firstChild,a;n;)a=n.nextSibling,this.insertBefore(n,t),n=a;return e}return null==this.documentElement&&e.nodeType==F&&(this.documentElement=e),b(this,e,t),e.ownerDocument=this,e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),v(this,e)},importNode:function(e,t){return K(this,e,t)},getElementById:function(e){var t=null;return y(this.documentElement,function(n){if(n.nodeType==F&&n.getAttribute('id')==e)return t=n,!0}),t},createElement:function(e){var t=new T;t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.childNodes=new s;var n=t.attributes=new l;return n._ownerElement=t,t},createDocumentFragment:function(){var e=new D;return e.ownerDocument=this,e.childNodes=new s,e},createTextNode:function(e){var t=new _;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new k;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new N;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var n=new w;return n.ownerDocument=this,n.tagName=n.target=e,n.nodeValue=n.data=t,n},createAttribute:function(e){var t=new I;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new L;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var n=new T,a=t.split(':'),r=n.attributes=new l;return n.childNodes=new s,n.ownerDocument=this,n.nodeName=t,n.tagName=t,n.namespaceURI=e,2==a.length?(n.prefix=a[0],n.localName=a[1]):n.localName=t,r._ownerElement=n,n},createAttributeNS:function(e,t){var n=new I,a=t.split(':');return n.ownerDocument=this,n.nodeName=t,n.name=t,n.namespaceURI=e,n.specified=!0,2==a.length?(n.prefix=a[0],n.localName=a[1]):n.localName=t,n}},a(f,g);T.prototype={nodeType:F,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||''},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var n=this.ownerDocument.createAttribute(e);n.value=n.nodeValue=''+t,this.setAttributeNode(n)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===ee?this.insertBefore(e,null):S(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);n&&this.removeAttributeNode(n)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);return n&&n.value||''},setAttributeNS:function(e,t,n){var a=this.ownerDocument.createAttributeNS(e,t);a.value=a.nodeValue=''+n,this.setAttributeNode(a)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new i(this,function(t){var n=[];return y(t,function(a){a!==t&&a.nodeType==F&&('*'===e||a.tagName==e)&&n.push(a)}),n})},getElementsByTagNameNS:function(e,t){return new i(this,function(n){var a=[];return y(n,function(r){r!==n&&r.nodeType===F&&('*'===e||r.namespaceURI===e)&&('*'===t||r.localName==t)&&a.push(r)}),a})}},f.prototype.getElementsByTagName=T.prototype.getElementsByTagName,f.prototype.getElementsByTagNameNS=T.prototype.getElementsByTagNameNS,a(T,g);I.prototype.nodeType=H,a(I,g);A.prototype={data:'',substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(){throw new Error(ae[se])},deleteData:function(e,t){this.replaceData(e,t,'')},replaceData:function(e,t,n){var a=this.data.substring(0,e),r=this.data.substring(e+t);n=a+n+r,this.nodeValue=this.data=n,this.length=n.length}},a(A,g);_.prototype={nodeName:'#text',nodeType:G,splitText:function(e){var t=this.data,n=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var a=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling),a}},a(_,A);k.prototype={nodeName:'#comment',nodeType:Z},a(k,A);N.prototype={nodeName:'#cdata-section',nodeType:W},a(N,A);B.prototype.nodeType=$,a(B,g);R.prototype.nodeType=te,a(R,g);x.prototype.nodeType=Q,a(x,g);L.prototype.nodeType=Y,a(L,g);D.prototype.nodeName='#document-fragment',D.prototype.nodeType=ee,a(D,g),w.prototype.nodeType=X,a(w,g),P.prototype.serializeToString=function(e,t,n){return U.call(e,t,n)},g.prototype.toString=U;try{if(Object.defineProperty){function e(t){switch(t.nodeType){case F:case ee:var n=[];for(t=t.firstChild;t;)7!==t.nodeType&&8!==t.nodeType&&n.push(e(t)),t=t.nextSibling;return n.join('');default:return t.nodeValue;}}Object.defineProperty(i.prototype,'length',{get:function(){return o(this),this.$$length}}),Object.defineProperty(g.prototype,'textContent',{get:function(){return e(this)},set:function(e){switch(this.nodeType){case F:case ee:for(;this.firstChild;)this.removeChild(this.firstChild);(e||e+'')&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e;}}}),M=function(e,t,n){e['$$'+t]=n}}}catch(t){}t.DOMImplementation=u,t.XMLSerializer=P},function(e,t,n){'use strict';function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var i='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&'function'==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?'symbol':typeof e},s=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(6),l=a(o),d=n(2),c=n(25),p=a(c),u=n(3),g=a(u),h=n(26),y=a(h),f=n(91),m=a(f),E=n(92),C=a(E),v=n(28),b=a(v),S=n(93),T=a(S),I=n(4),A=n(42),_=a(A),k=n(29),N=a(k),B=n(46),R=a(B),x=function(){function e(t,n){r(this,e),this.settings=(0,d.extend)(this.settings||{},{width:null,height:null,ignoreClass:'',manager:'default',view:'iframe',flow:null,layout:null,spread:null,minSpreadWidth:800,stylesheet:null,resizeOnOrientationChange:!0,script:null,snap:!1}),(0,d.extend)(this.settings,n),'object'===i(this.settings.manager)&&(this.manager=this.settings.manager),this.book=t,this.hooks={},this.hooks.display=new p.default(this),this.hooks.serialize=new p.default(this),this.hooks.content=new p.default(this),this.hooks.unloaded=new p.default(this),this.hooks.layout=new p.default(this),this.hooks.render=new p.default(this),this.hooks.show=new p.default(this),this.hooks.content.register(this.handleLinks.bind(this)),this.hooks.content.register(this.passEvents.bind(this)),this.hooks.content.register(this.adjustImages.bind(this)),this.book.spine.hooks.content.register(this.injectIdentifier.bind(this)),this.settings.stylesheet&&this.book.spine.hooks.content.register(this.injectStylesheet.bind(this)),this.settings.script&&this.book.spine.hooks.content.register(this.injectScript.bind(this)),this.themes=new C.default(this),this.annotations=new T.default(this),this.epubcfi=new g.default,this.q=new y.default(this),this.location=void 0,this.q.enqueue(this.book.opened),this.starting=new d.defer,this.started=this.starting.promise,this.q.enqueue(this.start)}return s(e,[{key:'setManager',value:function(e){this.manager=e}},{key:'requireManager',value:function(e){var t;return t='string'==typeof e&&'default'===e?N.default:'string'==typeof e&&'continuous'===e?R.default:e,t}},{key:'requireView',value:function(e){var t;return t='string'==typeof e&&'iframe'===e?_.default:e,t}},{key:'start',value:function(){switch(this.settings.layout||'pre-paginated'!==this.book.package.metadata.layout&&'true'!==this.book.displayOptions.fixedLayout||(this.settings.layout='pre-paginated'),this.book.package.metadata.spread){case'none':this.settings.spread='none';break;case'both':this.settings.spread=!0;}this.manager||(this.ViewManager=this.requireManager(this.settings.manager),this.View=this.requireView(this.settings.view),this.manager=new this.ViewManager({view:this.View,queue:this.q,request:this.book.load.bind(this.book),settings:this.settings})),this.direction(this.book.package.metadata.direction),this.settings.globalLayoutProperties=this.determineLayoutProperties(this.book.package.metadata),this.flow(this.settings.globalLayoutProperties.flow),this.layout(this.settings.globalLayoutProperties),this.manager.on(I.EVENTS.MANAGERS.ADDED,this.afterDisplayed.bind(this)),this.manager.on(I.EVENTS.MANAGERS.REMOVED,this.afterRemoved.bind(this)),this.manager.on(I.EVENTS.MANAGERS.RESIZED,this.onResized.bind(this)),this.manager.on(I.EVENTS.MANAGERS.ORIENTATION_CHANGE,this.onOrientationChange.bind(this)),this.manager.on(I.EVENTS.MANAGERS.SCROLLED,this.reportLocation.bind(this)),this.emit(I.EVENTS.RENDITION.STARTED),this.starting.resolve()}},{key:'attachTo',value:function(e){return this.q.enqueue(function(){this.manager.render(e,{width:this.settings.width,height:this.settings.height}),this.emit(I.EVENTS.RENDITION.ATTACHED)}.bind(this))}},{key:'display',value:function(e){return this.displaying&&this.displaying.resolve(),this.q.enqueue(this._display,e)}},{key:'_display',value:function(e){var t=this;if(this.book){var n=this.epubcfi.isCfiString(e),a=new d.defer,r=a.promise,i;return(this.displaying=a,this.book.locations.length()&&(0,d.isFloat)(e)&&(e=this.book.locations.cfiFromPercentage(parseFloat(e))),i=this.book.spine.get(e),!i&&e.includes('.xhtml')&&(i=this.book.spine.get('xhtml/'+e)),!i)?(a.reject(new Error('No Section Found')),r):(this.manager.display(i,e).then(function(){a.resolve(i),t.displaying=void 0,t.emit(I.EVENTS.RENDITION.DISPLAYED,i),t.reportLocation()},function(e){t.emit(I.EVENTS.RENDITION.DISPLAY_ERROR,e)}),r)}}},{key:'afterDisplayed',value:function(e){var t=this;e.on(I.EVENTS.VIEWS.MARK_CLICKED,function(n,a){return t.triggerMarkEvent(n,a,e.contents)}),this.hooks.render.trigger(e,this).then(function(){e.contents?t.hooks.content.trigger(e.contents,t).then(function(){t.emit(I.EVENTS.RENDITION.RENDERED,e.section,e)}):t.emit(I.EVENTS.RENDITION.RENDERED,e.section,e)})}},{key:'afterRemoved',value:function(e){var t=this;this.hooks.unloaded.trigger(e,this).then(function(){t.emit(I.EVENTS.RENDITION.REMOVED,e.section,e)})}},{key:'onResized',value:function(e,t){this.emit(I.EVENTS.RENDITION.RESIZED,{width:e.width,height:e.height},t),this.location&&this.location.start&&this.display(t||this.location.start.cfi)}},{key:'onOrientationChange',value:function(e){this.emit(I.EVENTS.RENDITION.ORIENTATION_CHANGE,e)}},{key:'moveTo',value:function(e){this.manager.moveTo(e)}},{key:'resize',value:function(e,t,n){e&&(this.settings.width=e),t&&(this.settings.height=t),this.manager.resize(e,t,n)}},{key:'clear',value:function(){this.manager.clear()}},{key:'next',value:function(){return this.q.enqueue(this.manager.next.bind(this.manager)).then(this.reportLocation.bind(this))}},{key:'prev',value:function(){return this.q.enqueue(this.manager.prev.bind(this.manager)).then(this.reportLocation.bind(this))}},{key:'determineLayoutProperties',value:function(e){var t=this.settings.layout||e.layout||'reflowable',n=this.settings.spread||e.spread||'auto',a=this.settings.orientation||e.orientation||'auto',r=this.settings.flow||e.flow||'auto',i=e.viewport||'',s=this.settings.minSpreadWidth||e.minSpreadWidth||800,o=this.settings.direction||e.direction||'ltr',l;return(0===this.settings.width||0<this.settings.width)&&(0===this.settings.height||0<this.settings.height),l={layout:t,spread:n,orientation:a,flow:r,viewport:i,minSpreadWidth:s,direction:o},l}},{key:'flow',value:function(e){var t=e;('scrolled'===e||'scrolled-doc'===e||'scrolled-continuous'===e)&&(t='scrolled'),('auto'===e||'paginated'===e)&&(t='paginated'),this.settings.flow=e,this._layout&&this._layout.flow(t),this.manager&&this._layout&&this.manager.applyLayout(this._layout),this.manager&&this.manager.updateFlow(t),this.manager&&this.manager.isRendered()&&this.location&&(this.manager.clear(),this.display(this.location.start.cfi))}},{key:'layout',value:function(e){var t=this;return e&&(this._layout=new m.default(e),this._layout.spread(e.spread,this.settings.minSpreadWidth),this._layout.on(I.EVENTS.LAYOUT.UPDATED,function(e,n){t.emit(I.EVENTS.RENDITION.LAYOUT,e,n)})),this.manager&&this._layout&&this.manager.applyLayout(this._layout),this._layout}},{key:'spread',value:function(e,t){this.settings.spread=e,t&&(this.settings.minSpreadWidth=t),this._layout&&this._layout.spread(e,t),this.manager&&this.manager.isRendered()&&this.manager.updateLayout()}},{key:'direction',value:function(e){this.settings.direction=e||'ltr',this.manager&&this.manager.direction(this.settings.direction),this.manager&&this.manager.isRendered()&&this.location&&(this.manager.clear(),this.display(this.location.start.cfi))}},{key:'reportLocation',value:function(){return this.q.enqueue(function(){requestAnimationFrame(function(){var e=this.manager.currentLocation();if(e&&e.then&&'function'==typeof e.then)e.then(function(e){var t=this.located(e);t&&t.start&&t.end&&(this.location=t,this.emit(I.EVENTS.RENDITION.LOCATION_CHANGED,{index:this.location.start.index,href:this.location.start.href,start:this.location.start.cfi,end:this.location.end.cfi,percentage:this.location.start.percentage}),this.emit(I.EVENTS.RENDITION.RELOCATED,this.location))}.bind(this));else if(e){var t=this.located(e);if(!t||!t.start||!t.end)return;this.location=t,this.emit(I.EVENTS.RENDITION.LOCATION_CHANGED,{index:this.location.start.index,href:this.location.start.href,start:this.location.start.cfi,end:this.location.end.cfi,percentage:this.location.start.percentage}),this.emit(I.EVENTS.RENDITION.RELOCATED,this.location)}}.bind(this))}.bind(this))}},{key:'currentLocation',value:function(){var e=this.manager.currentLocation();if(e&&e.then&&'function'==typeof e.then)e.then(function(e){var t=this.located(e);return t}.bind(this));else if(e){var t=this.located(e);return t}}},{key:'located',value:function(e){if(!e.length)return{};var t=e[0],n=e[e.length-1],a={start:{index:t.index,href:t.href,cfi:t.mapping.start,displayed:{page:t.pages[0]||1,total:t.totalPages}},end:{index:n.index,href:n.href,cfi:n.mapping.end,displayed:{page:n.pages[n.pages.length-1]||1,total:n.totalPages}}},r=this.book.locations.locationFromCfi(t.mapping.start),i=this.book.locations.locationFromCfi(n.mapping.end);null!=r&&(a.start.location=r,a.start.percentage=this.book.locations.percentageFromLocation(r)),null!=i&&(a.end.location=i,a.end.percentage=this.book.locations.percentageFromLocation(i));var s=this.book.pageList.pageFromCfi(t.mapping.start),o=this.book.pageList.pageFromCfi(n.mapping.end);return-1!=s&&(a.start.page=s),-1!=o&&(a.end.page=o),n.index===this.book.spine.last().index&&a.end.displayed.page>=a.end.displayed.total&&(a.atEnd=!0),t.index===this.book.spine.first().index&&1===a.start.displayed.page&&(a.atStart=!0),a}},{key:'destroy',value:function(){this.manager&&this.manager.destroy(),this.book=void 0}},{key:'passEvents',value:function(t){var n=this;I.DOM_EVENTS.forEach(function(a){t.on(a,function(e){return n.triggerViewEvent(e,t)})}),t.on(I.EVENTS.CONTENTS.SELECTED,function(a){return n.triggerSelectedEvent(a,t)})}},{key:'triggerViewEvent',value:function(t,e){this.emit(t.type,t,e)}},{key:'triggerSelectedEvent',value:function(e,t){this.emit(I.EVENTS.RENDITION.SELECTED,e,t)}},{key:'triggerMarkEvent',value:function(e,t,n){this.emit(I.EVENTS.RENDITION.MARK_CLICKED,e,t,n)}},{key:'getRange',value:function(e,t){var n=new g.default(e),a=this.manager.visible().filter(function(e){if(n.spinePos===e.index)return!0});if(a.length)return a[0].contents.range(n,t)}},{key:'adjustImages',value:function(e){if('pre-paginated'===this._layout.name)return new Promise(function(e){e()});var t=e.window.getComputedStyle(e.content,null),n=.95*(e.content.offsetHeight-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom))),a=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight);return e.addStylesheetRules({img:{\"max-width\":(this._layout.columnWidth?this._layout.columnWidth-a+'px':'100%')+'!important',\"max-height\":n+'px!important',\"object-fit\":'contain',\"page-break-inside\":'avoid',\"break-inside\":'avoid',\"box-sizing\":'border-box'},svg:{\"max-width\":(this._layout.columnWidth?this._layout.columnWidth-a+'px':'100%')+'!important',\"max-height\":n+'px!important',\"page-break-inside\":'avoid',\"break-inside\":'avoid'}}),new Promise(function(e){setTimeout(function(){e()},1)})}},{key:'getContents',value:function(){return this.manager?this.manager.getContents():[]}},{key:'views',value:function(){var e=this.manager?this.manager.views:void 0;return e||[]}},{key:'handleLinks',value:function(e){var t=this;e&&e.on(I.EVENTS.CONTENTS.LINK_CLICKED,function(e){var n=t.book.path.relative(e);t.display(n)})}},{key:'injectStylesheet',value:function(e){var t=e.createElement('link');t.setAttribute('type','text/css'),t.setAttribute('rel','stylesheet'),t.setAttribute('href',this.settings.stylesheet),e.getElementsByTagName('head')[0].appendChild(t)}},{key:'injectScript',value:function(e){var t=e.createElement('script');t.setAttribute('type','text/javascript'),t.setAttribute('src',this.settings.script),t.textContent=' ',e.getElementsByTagName('head')[0].appendChild(t)}},{key:'injectIdentifier',value:function(e){var t=this.book.packaging.metadata.identifier,n=e.createElement('meta');n.setAttribute('name','dc.relation.ispartof'),t&&n.setAttribute('content',t),e.getElementsByTagName('head')[0].appendChild(n)}}]),e}();(0,l.default)(x.prototype),t.default=x,e.exports=t['default']},function(e,t,n){'use strict';function a(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var i=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(3),o=function(e){return e&&e.__esModule?e:{default:e}}(s),l=n(2),c=function(){function e(t,n,r,i){a(this,e),this.layout=t,this.horizontal='horizontal'===r,this.direction=n||'ltr',this._dev=i}return i(e,[{key:'section',value:function(e){var t=this.findRanges(e),n=this.rangeListToCfiList(e.section.cfiBase,t);return n}},{key:'page',value:function(e,t,n,a){var i=e&&e.document&&e.document.body,s;if(i){if(s=this.rangePairToCfiPair(t,{start:this.findStart(i,n,a),end:this.findEnd(i,n,a)}),!0===this._dev){var l=e.document,d=new o.default(s.start).toRange(l),c=new o.default(s.end).toRange(l),p=l.defaultView.getSelection(),u=l.createRange();p.removeAllRanges(),u.setStart(d.startContainer,d.startOffset),u.setEnd(c.endContainer,c.endOffset),p.addRange(u)}return s}}},{key:'walk',value:function(e,t){if(!(e&&e.nodeType===Node.TEXT_NODE)){var n={acceptNode:function(e){return 0<e.data.trim().length?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}},a=n.acceptNode;a.acceptNode=n.acceptNode;for(var r=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,a,!1),i,s;(i=r.nextNode())&&(s=t(i),!s););return s}}},{key:'findRanges',value:function(e){for(var t=[],n=e.contents.scrollWidth(),a=d(n/this.layout.spreadWidth),r=a*this.layout.divisor,s=this.layout.columnWidth,o=this.layout.gap,l=0,i,c;l<r.pages;l++)i=(s+o)*l,c=s*(l+1)+o*l,t.push({start:this.findStart(e.document.body,i,c),end:this.findEnd(e.document.body,i,c)});return t}},{key:'findStart',value:function(e,t,n){for(var a=this,r=[e],i=e,s,o;r.length;)if(s=r.shift(),o=this.walk(s,function(e){var s,o,d,c,p;if(p=(0,l.nodeBounds)(e),a.horizontal&&'ltr'===a.direction){if(s=a.horizontal?p.left:p.top,o=a.horizontal?p.right:p.bottom,s>=t&&s<=n)return e;if(o>t)return e;i=e,r.push(e)}else if(a.horizontal&&'rtl'===a.direction){if(s=p.left,o=p.right,o<=n&&o>=t)return e;if(s<n)return e;i=e,r.push(e)}else{if(d=p.top,c=p.bottom,d>=t&&d<=n)return e;if(c>t)return e;i=e,r.push(e)}}),o)return this.findTextStartRange(o,t,n);return this.findTextStartRange(i,t,n)}},{key:'findEnd',value:function(e,t,n){for(var a=this,i=[e],s=e,o,d;i.length;)if(o=i.shift(),d=this.walk(o,function(e){var o,d,c,p,u;if(u=(0,l.nodeBounds)(e),a.horizontal&&'ltr'===a.direction){if(o=r(u.left),d=r(u.right),o>n&&s)return s;if(d>n)return e;s=e,i.push(e)}else if(a.horizontal&&'rtl'===a.direction){if(o=r(a.horizontal?u.left:u.top),d=r(a.horizontal?u.right:u.bottom),d<t&&s)return s;if(o<t)return e;s=e,i.push(e)}else{if(c=r(u.top),p=r(u.bottom),c>n&&s)return s;if(p>n)return e;s=e,i.push(e)}}),d)return this.findTextEndRange(d,t,n);return this.findTextEndRange(s,t,n)}},{key:'findTextStartRange',value:function(e,t,n){for(var a=this.splitTextNodeIntoRanges(e),r=0,i,s,o,l,d;r<a.length;r++)if(i=a[r],s=i.getBoundingClientRect(),this.horizontal&&'ltr'===this.direction){if(o=s.left,o>=t)return i;}else if(this.horizontal&&'rtl'===this.direction){if(d=s.right,d<=n)return i;}else if(l=s.top,l>=t)return i;return a[0]}},{key:'findTextEndRange',value:function(e,t,n){for(var a=this.splitTextNodeIntoRanges(e),r=0,i,s,o,l,d,c,p;r<a.length;r++){if(s=a[r],o=s.getBoundingClientRect(),this.horizontal&&'ltr'===this.direction){if(l=o.left,d=o.right,l>n&&i)return i;if(d>n)return s}else if(this.horizontal&&'rtl'===this.direction){if(l=o.left,d=o.right,d<t&&i)return i;if(l<t)return s}else{if(c=o.top,p=o.bottom,c>n&&i)return i;if(p>n)return s}i=s}return a[a.length-1]}},{key:'splitTextNodeIntoRanges',value:function(e,t){var n=[],a=e.textContent||'',r=a.trim(),i=e.ownerDocument,s=t||' ',o=r.indexOf(s),l;if(-1===o||e.nodeType!=Node.TEXT_NODE)return l=i.createRange(),l.selectNodeContents(e),[l];for(l=i.createRange(),l.setStart(e,0),l.setEnd(e,o),n.push(l),l=!1;-1!=o;)o=r.indexOf(s,o+1),0<o&&(l&&(l.setEnd(e,o),n.push(l)),l=i.createRange(),l.setStart(e,o+1));return l&&(l.setEnd(e,r.length),n.push(l)),n}},{key:'rangePairToCfiPair',value:function(e,t){var n=t.start,a=t.end;n.collapse(!0),a.collapse(!1);var r=new o.default(n,e).toString(),i=new o.default(a,e).toString();return{start:r,end:i}}},{key:'rangeListToCfiList',value:function(e,t){for(var n=[],a=0,r;a<t.length;a++)r=this.rangePairToCfiPair(e,t[a]),n.push(r);return n}},{key:'axis',value:function(e){return e&&(this.horizontal='horizontal'===e),this.horizontal}}]),e}();t.default=c,e.exports=t['default']},function(e,t,n){'use strict';function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var i=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(6),o=a(s),l=n(2),c=n(3),p=a(c),u=n(28),g=a(u),h=n(4),y=n(94),f=function(){function e(t,n){r(this,e),this.settings=(0,l.extend)({ignoreClass:'',axis:n.layout&&'scrolled'===n.layout.props.flow?'vertical':'horizontal',direction:void 0,width:0,height:0,layout:void 0,globalLayoutProperties:{},method:void 0,forceRight:!1},n||{}),this.id='epubjs-view-'+(0,l.uuid)(),this.section=t,this.index=t.index,this.element=this.container(this.settings.axis),this.added=!1,this.displayed=!1,this.rendered=!1,this.fixedWidth=0,this.fixedHeight=0,this.epubcfi=new p.default,this.layout=this.settings.layout,this.pane=void 0,this.highlights={},this.underlines={},this.marks={}}return i(e,[{key:'container',value:function(e){var t=document.createElement('div');return t.classList.add('epub-view'),t.style.height='0px',t.style.width='0px',t.style.overflow='hidden',t.style.position='relative',t.style.display='block',t.style.flex=e&&'horizontal'==e?'none':'initial',t}},{key:'create',value:function(){return this.iframe?this.iframe:(this.element||(this.element=this.createContainer()),this.iframe=document.createElement('iframe'),this.iframe.id=this.id,this.iframe.scrolling='no',this.iframe.style.overflow='hidden',this.iframe.seamless='seamless',this.iframe.style.border='none',this.iframe.setAttribute('enable-annotation','true'),this.resizing=!0,this.element.style.visibility='hidden',this.iframe.style.visibility='hidden',this.iframe.style.width='0',this.iframe.style.height='0',this._width=0,this._height=0,this.element.setAttribute('ref',this.index),this.added=!0,this.elementBounds=(0,l.bounds)(this.element),this.supportsSrcdoc=!!('srcdoc'in this.iframe),this.settings.method||(this.settings.method=this.supportsSrcdoc?'srcdoc':'write'),this.iframe)}},{key:'render',value:function(e){return this.create(),this.size(),this.sectionRender||(this.sectionRender=this.section.render(e)),this.sectionRender.then(function(e){return this.load(e)}.bind(this)).then(function(){var e=this;this.layout.format(this.contents,this.section);var t=this.contents.writingMode(),n=0===t.indexOf('vertical')?'vertical':'horizontal';return this.setAxis(n),this.emit(h.EVENTS.VIEWS.AXIS,n),this.addListeners(),new Promise(function(t){e.expand(),e.settings.forceRight&&(e.element.style.marginLeft=e.width()+'px'),t()})}.bind(this),function(t){return this.emit(h.EVENTS.VIEWS.LOAD_ERROR,t),new Promise(function(e,n){n(t)})}.bind(this)).then(function(){this.emit(h.EVENTS.VIEWS.RENDERED,this.section)}.bind(this))}},{key:'reset',value:function(){this.iframe&&(this.iframe.style.width='0',this.iframe.style.height='0',this._width=0,this._height=0,this._textWidth=void 0,this._contentWidth=void 0,this._textHeight=void 0,this._contentHeight=void 0),this._needsReframe=!0}},{key:'size',value:function(e,t){var n=e||this.settings.width,a=t||this.settings.height;'pre-paginated'===this.layout.name?this.lock('both',n,a):'horizontal'===this.settings.axis?this.lock('height',n,a):this.lock('width',n,a),this.settings.width=n,this.settings.height=a}},{key:'lock',value:function(e,t,n){var a=(0,l.borders)(this.element),r;r=this.iframe?(0,l.borders)(this.iframe):{width:0,height:0},'width'==e&&(0,l.isNumber)(t)&&(this.lockedWidth=t-a.width-r.width),'height'==e&&(0,l.isNumber)(n)&&(this.lockedHeight=n-a.height-r.height),'both'===e&&(0,l.isNumber)(t)&&(0,l.isNumber)(n)&&(this.lockedWidth=t-a.width-r.width,this.lockedHeight=n-a.height-r.height),this.displayed&&this.iframe&&this.expand()}},{key:'expand',value:function(){var e=this.lockedWidth,t=this.lockedHeight,n;!this.iframe||this._expanding||(this._expanding=!0,'pre-paginated'===this.layout.name?(e=this.layout.columnWidth,t=this.layout.height):'horizontal'===this.settings.axis?(e=this.contents.textWidth(),0<e%this.layout.pageWidth&&(e=d(e/this.layout.pageWidth)*this.layout.pageWidth),this.settings.forceEvenPages&&(n=e/this.layout.pageWidth,1<this.layout.divisor&&'reflowable'===this.layout.name&&0<n%2&&(e+=this.layout.pageWidth))):'vertical'===this.settings.axis&&(t=this.contents.textHeight()),(this._needsReframe||e!=this._width||t!=this._height)&&this.reframe(e,t),this._expanding=!1)}},{key:'reframe',value:function(e,t){var n=this,a;(0,l.isNumber)(e)&&(this.element.style.width=e+'px',this.iframe.style.width=e+'px',this._width=e),(0,l.isNumber)(t)&&(this.element.style.height=t+'px',this.iframe.style.height=t+'px',this._height=t);var r=this.prevBounds?e-this.prevBounds.width:e,i=this.prevBounds?t-this.prevBounds.height:t;a={width:e,height:t,widthDelta:r,heightDelta:i},this.pane&&this.pane.render(),requestAnimationFrame(function(){var e;for(var t in n.marks)n.marks.hasOwnProperty(t)&&(e=n.marks[t],n.placeMark(e.element,e.range))}),this.onResize(this,a),this.emit(h.EVENTS.VIEWS.RESIZED,a),this.prevBounds=a,this.elementBounds=(0,l.bounds)(this.element)}},{key:'load',value:function(e){var t=new l.defer,n=t.promise;if(!this.iframe)return t.reject(new Error('No Iframe Available')),n;if(this.iframe.onload=function(e){this.onLoad(e,t)}.bind(this),'blobUrl'===this.settings.method)this.blobUrl=(0,l.createBlobUrl)(e,'application/xhtml+xml'),this.iframe.src=this.blobUrl,this.element.appendChild(this.iframe);else if('srcdoc'===this.settings.method)this.iframe.srcdoc=e,this.element.appendChild(this.iframe);else{if(this.element.appendChild(this.iframe),this.document=this.iframe.contentDocument,!this.document)return t.reject(new Error('No Document Available')),n;if(this.iframe.contentDocument.open(),window.MSApp&&MSApp.execUnsafeLocalFunction){var a=this;MSApp.execUnsafeLocalFunction(function(){a.iframe.contentDocument.write(e)})}else this.iframe.contentDocument.write(e);this.iframe.contentDocument.close()}return n}},{key:'onLoad',value:function(e,t){var n=this;this.window=this.iframe.contentWindow,this.document=this.iframe.contentDocument,this.contents=new g.default(this.document,this.document.body,this.section.cfiBase,this.section.index),this.rendering=!1;var a=this.document.querySelector('link[rel=\\'canonical\\']');a?a.setAttribute('href',this.section.canonical):(a=this.document.createElement('link'),a.setAttribute('rel','canonical'),a.setAttribute('href',this.section.canonical),this.document.querySelector('head').appendChild(a)),this.contents.on(h.EVENTS.CONTENTS.EXPAND,function(){n.displayed&&n.iframe&&(n.expand(),n.contents&&n.layout.format(n.contents))}),this.contents.on(h.EVENTS.CONTENTS.RESIZE,function(){n.displayed&&n.iframe&&(n.expand(),n.contents&&n.layout.format(n.contents))}),t.resolve(this.contents)}},{key:'setLayout',value:function(e){this.layout=e,this.contents&&(this.layout.format(this.contents),this.expand())}},{key:'setAxis',value:function(e){'scrolled'===this.layout.props.flow&&(e='vertical'),this.settings.axis=e,this.element.style.flex='horizontal'==e?'none':'initial',this.size()}},{key:'addListeners',value:function(){}},{key:'removeListeners',value:function(){}},{key:'display',value:function(e){var t=new l.defer;return this.displayed?t.resolve(this):this.render(e).then(function(){this.emit(h.EVENTS.VIEWS.DISPLAYED,this),this.onDisplayed(this),this.displayed=!0,t.resolve(this)}.bind(this),function(e){t.reject(e,this)}),t.promise}},{key:'show',value:function(){this.element.style.visibility='visible',this.iframe&&(this.iframe.style.visibility='visible',this.iframe.style.transform='translateZ(0)',this.iframe.offsetWidth,this.iframe.style.transform=null),this.emit(h.EVENTS.VIEWS.SHOWN,this)}},{key:'hide',value:function(){this.element.style.visibility='hidden',this.iframe.style.visibility='hidden',this.stopExpanding=!0,this.emit(h.EVENTS.VIEWS.HIDDEN,this)}},{key:'offset',value:function(){return{top:this.element.offsetTop,left:this.element.offsetLeft}}},{key:'width',value:function(){return this._width}},{key:'height',value:function(){return this._height}},{key:'position',value:function(){return this.element.getBoundingClientRect()}},{key:'locationOf',value:function(e){var t=this.iframe.getBoundingClientRect(),n=this.contents.locationOf(e,this.settings.ignoreClass);return{left:n.left,top:n.top}}},{key:'onDisplayed',value:function(){}},{key:'onResize',value:function(){}},{key:'bounds',value:function(e){return(e||!this.elementBounds)&&(this.elementBounds=(0,l.bounds)(this.element)),this.elementBounds}},{key:'highlight',value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2],a=this,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:'epubjs-hl',i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{};if(this.contents){var s=Object.assign({fill:'yellow',\"fill-opacity\":'0.3',\"mix-blend-mode\":'multiply'},i),o=this.contents.range(e),l=function(){a.emit(h.EVENTS.VIEWS.MARK_CLICKED,e,t)};t.epubcfi=e,this.pane||(this.pane=new y.Pane(this.iframe,this.element));var d=new y.Highlight(o,r,t,s),c=this.pane.addMark(d);return this.highlights[e]={mark:c,element:c.element,listeners:[l,n]},c.element.setAttribute('ref',r),c.element.addEventListener('click',l),c.element.addEventListener('touchstart',l),n&&(c.element.addEventListener('click',n),c.element.addEventListener('touchstart',n)),c}}},{key:'underline',value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2],a=this,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:'epubjs-ul',i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{};if(this.contents){var s=Object.assign({stroke:'black',\"stroke-opacity\":'0.3',\"mix-blend-mode\":'multiply'},i),o=this.contents.range(e),l=function(){a.emit(h.EVENTS.VIEWS.MARK_CLICKED,e,t)};t.epubcfi=e,this.pane||(this.pane=new y.Pane(this.iframe,this.element));var d=new y.Underline(o,r,t,s),c=this.pane.addMark(d);return this.underlines[e]={mark:c,element:c.element,listeners:[l,n]},c.element.setAttribute('ref',r),c.element.addEventListener('click',l),c.element.addEventListener('touchstart',l),n&&(c.element.addEventListener('click',n),c.element.addEventListener('touchstart',n)),c}}},{key:'mark',value:function(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},a=arguments[2];if(this.contents){if(e in this.marks){var r=this.marks[e];return r}var i=this.contents.range(e);if(i){var s=i.commonAncestorContainer,o=1===s.nodeType?s:s.parentNode,l=function(){t.emit(h.EVENTS.VIEWS.MARK_CLICKED,e,n)};i.collapsed&&1===s.nodeType?(i=new Range,i.selectNodeContents(s)):i.collapsed&&(i=new Range,i.selectNodeContents(o));var d=this.document.createElement('a');return d.setAttribute('ref','epubjs-mk'),d.style.position='absolute',d.dataset.epubcfi=e,n&&Object.keys(n).forEach(function(e){d.dataset[e]=n[e]}),a&&(d.addEventListener('click',a),d.addEventListener('touchstart',a)),d.addEventListener('click',l),d.addEventListener('touchstart',l),this.placeMark(d,i),this.element.appendChild(d),this.marks[e]={element:d,range:i,listeners:[l,a]},o}}}},{key:'placeMark',value:function(e,t){var n,a,r;if('pre-paginated'===this.layout.name||'horizontal'!==this.settings.axis){var s=t.getBoundingClientRect();n=s.top,a=s.right}else for(var o=t.getClientRects(),l=void 0,c=0;c!=o.length;c++)l=o[c],(!r||l.left<r)&&(r=l.left,a=d(r/this.layout.props.pageWidth)*this.layout.props.pageWidth-this.layout.gap/2,n=l.top);e.style.top=n+'px',e.style.left=a+'px'}},{key:'unhighlight',value:function(e){var t;e in this.highlights&&(t=this.highlights[e],this.pane.removeMark(t.mark),t.listeners.forEach(function(e){e&&(t.element.removeEventListener('click',e),t.element.removeEventListener('touchstart',e))}),delete this.highlights[e])}},{key:'ununderline',value:function(e){var t;e in this.underlines&&(t=this.underlines[e],this.pane.removeMark(t.mark),t.listeners.forEach(function(e){e&&(t.element.removeEventListener('click',e),t.element.removeEventListener('touchstart',e))}),delete this.underlines[e])}},{key:'unmark',value:function(e){var t;e in this.marks&&(t=this.marks[e],this.element.removeChild(t.element),t.listeners.forEach(function(e){e&&(t.element.removeEventListener('click',e),t.element.removeEventListener('touchstart',e))}),delete this.marks[e])}},{key:'destroy',value:function(){for(var e in this.highlights)this.unhighlight(e);for(var t in this.underlines)this.ununderline(t);for(var n in this.marks)this.unmark(n);this.blobUrl&&(0,l.revokeBlobUrl)(this.blobUrl),this.displayed&&(this.displayed=!1,this.removeListeners(),this.contents.destroy(),this.stopExpanding=!0,this.element.removeChild(this.iframe),this.iframe=void 0,this.contents=void 0,this._textWidth=null,this._textHeight=null,this._width=null,this._height=null)}}]),e}();(0,o.default)(f.prototype),t.default=f,e.exports=t['default']},function(e,t,n){var a=n(30),r=n(99),i=n(101);e.exports=function(e,t,n){function s(t){var n=C,a=v;return C=v=void 0,y=t,S=e.apply(a,n),S}function o(e){return y=e,T=setTimeout(p,t),f?s(e):S}function l(e){var n=e-I,a=e-y,r=t-n;return m?g(r,b-a):r}function d(e){var n=e-I,a=e-y;return void 0==I||n>=t||0>n||m&&a>=b}function p(){var e=r();return d(e)?u(e):void(T=setTimeout(p,l(e)))}function u(e){return(T=void 0,E&&C)?s(e):(C=v=void 0,S)}function h(){var e=r(),n=d(e);if(C=arguments,v=this,I=e,n){if(void 0===T)return o(I);if(m)return clearTimeout(T),T=setTimeout(p,t),s(I)}return void 0===T&&(T=setTimeout(p,t)),S}var y=0,f=!1,m=!1,E=!0,C,v,b,S,T,I;if('function'!=typeof e)throw new TypeError('Expected a function');return t=i(t)||0,a(n)&&(f=!!n.leading,m='maxWait'in n,b=m?c(i(n.maxWait)||0,t):b,E='trailing'in n?!!n.trailing:E),h.cancel=function(){void 0!==T&&clearTimeout(T),y=0,C=I=v=T=void 0},h.flush=function(){return void 0===T?S:u(r())},h}},function(e,t,n){var a=n(100),r='object'==typeof self&&self&&self.Object===Object&&self,i=a||r||Function('return this')();e.exports=i},function(e,t,n){var a=n(44),r=a.Symbol;e.exports=r},function(e,t,n){'use strict';function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function i(e,t){if(!e)throw new ReferenceError('this hasn\\'t been initialised - super() hasn\\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function s(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,'__esModule',{value:!0});var o='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&'function'==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?'symbol':typeof e},l=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),d=function e(t,n,a){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(r===void 0){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,a)}if('value'in r)return r.value;var s=r.get;return void 0===s?void 0:s.call(a)},c=n(2),g=n(29),h=a(g),y=n(110),f=a(y),m=n(4),E=n(43),C=a(E),v=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.name='continuous',n.settings=(0,c.extend)(n.settings||{},{infinite:!0,overflow:void 0,axis:void 0,flow:'scrolled',offset:500,offsetDelta:250,width:void 0,height:void 0,snap:!1,afterScrolledTimeout:10}),(0,c.extend)(n.settings,e.settings||{}),'undefined'!=e.settings.gap&&0===e.settings.gap&&(n.settings.gap=e.settings.gap),n.viewSettings={ignoreClass:n.settings.ignoreClass,axis:n.settings.axis,flow:n.settings.flow,layout:n.layout,width:0,height:0,forceEvenPages:!1},n.scrollTop=0,n.scrollLeft=0,n}return s(t,e),l(t,[{key:'display',value:function(e,t){return h.default.prototype.display.call(this,e,t).then(function(){return this.fill()}.bind(this))}},{key:'fill',value:function(e){var t=this,n=e||new c.defer;return this.q.enqueue(function(){return t.check()}).then(function(e){e?t.fill(n):n.resolve()}),n.promise}},{key:'moveTo',value:function(e){var t=0,n=0,a=0,r=0;this.isPaginated?(t=p(e.left/this.layout.delta)*this.layout.delta,a=t+this.settings.offsetDelta):(n=e.top,r=e.top+this.settings.offsetDelta),(0<t||0<n)&&this.scrollBy(t,n,!0)}},{key:'afterResized',value:function(e){this.emit(m.EVENTS.MANAGERS.RESIZE,e.section)}},{key:'removeShownListeners',value:function(e){e.onDisplayed=function(){}}},{key:'add',value:function(e){var t=this,n=this.createView(e);return this.views.append(n),n.on(m.EVENTS.VIEWS.RESIZED,function(){n.expanded=!0}),n.on(m.EVENTS.VIEWS.AXIS,function(e){t.updateAxis(e)}),n.onDisplayed=this.afterDisplayed.bind(this),n.onResize=this.afterResized.bind(this),n.display(this.request)}},{key:'append',value:function(e){var t=this,n=this.createView(e);return n.on(m.EVENTS.VIEWS.RESIZED,function(){n.expanded=!0}),n.on(m.EVENTS.VIEWS.AXIS,function(e){t.updateAxis(e)}),this.views.append(n),n.onDisplayed=this.afterDisplayed.bind(this),n}},{key:'prepend',value:function(e){var t=this,n=this.createView(e);return n.on(m.EVENTS.VIEWS.RESIZED,function(e){t.counter(e),n.expanded=!0}),n.on(m.EVENTS.VIEWS.AXIS,function(e){t.updateAxis(e)}),this.views.prepend(n),n.onDisplayed=this.afterDisplayed.bind(this),n}},{key:'counter',value:function(e){'vertical'===this.settings.axis?this.scrollBy(0,e.heightDelta,!0):this.scrollBy(e.widthDelta,0,!0)}},{key:'update',value:function(e){for(var t=this.bounds(),n=this.views.all(),a=n.length,r=[],s='undefined'==typeof e?this.settings.offset||0:e,o=new c.defer,l=[],d=0,i,p;d<a;d++)if(p=n[d],i=this.isVisible(p,s,s,t),!0===i){if(!p.displayed){var u=p.display(this.request).then(function(e){e.show()},function(){p.hide()});l.push(u)}else p.show();r.push(p)}else this.q.enqueue(p.destroy.bind(p)),clearTimeout(this.trimTimeout),this.trimTimeout=setTimeout(function(){this.q.enqueue(this.trim.bind(this))}.bind(this),250);return l.length?Promise.all(l).catch(function(e){o.reject(e)}):(o.resolve(),o.promise)}},{key:'check',value:function(e,t){var n=this,a=new c.defer,r=[],i='horizontal'===this.settings.axis,s=this.settings.offset||0;e&&i&&(s=e),t&&!i&&(s=t);var o=this._bounds,l='rtl'===this.settings.direction,d=i&&l?-1:1,u=i?this.scrollLeft:this.scrollTop*d,g=i?p(o.width):o.height,h=i?this.container.scrollWidth:this.container.scrollHeight,y=function(){var e=n.views.first(),t=e&&e.section.prev();t&&r.push(n.prepend(t))},f=function(){var e=n.views.last(),t=e&&e.section.next();t&&r.push(n.append(t))};u+g+s>=h&&(i&&l?y():f()),0>u-s&&(i&&l?f():y());var m=r.map(function(e){return e.display(n.request)});return r.length?Promise.all(m).then(function(){return n.check()}).then(function(){return n.update(s)},function(e){return e}):(this.q.enqueue(function(){this.update()}.bind(this)),a.resolve(!1),a.promise)}},{key:'trim',value:function(){for(var e=new c.defer,t=this.views.displayed(),n=t[0],a=t[t.length-1],r=this.views.indexOf(n),s=this.views.indexOf(a),o=this.views.slice(0,r),l=this.views.slice(s+1),d=0;d<o.length-1;d++)this.erase(o[d],o);for(var i=1;i<l.length;i++)this.erase(l[i]);return e.resolve(),e.promise}},{key:'erase',value:function(e,t){var n,a;this.settings.fullsize?(n=window.scrollY,a=window.scrollX):(n=this.container.scrollTop,a=this.container.scrollLeft);var r=e.bounds();this.views.remove(e),t&&('vertical'===this.settings.axis?this.scrollTo(0,n-r.height,!0):this.scrollTo(a-p(r.width),0,!0))}},{key:'addEventListeners',value:function(){window.addEventListener('unload',function(){this.ignore=!0,this.destroy()}.bind(this)),this.addScrollListeners(),this.isPaginated&&this.settings.snap&&(this.snapper=new f.default(this,this.settings.snap&&'object'===o(this.settings.snap)&&this.settings.snap))}},{key:'addScrollListeners',value:function(){var e;this.tick=c.requestAnimationFrame,this.settings.fullsize?(this.prevScrollTop=window.scrollY,this.prevScrollLeft=window.scrollX):(this.prevScrollTop=this.container.scrollTop,this.prevScrollLeft=this.container.scrollLeft),this.scrollDeltaVert=0,this.scrollDeltaHorz=0,this.settings.fullsize?(e=window,this.scrollTop=window.scrollY,this.scrollLeft=window.scrollX):(e=this.container,this.scrollTop=this.container.scrollTop,this.scrollLeft=this.container.scrollLeft),this._onScroll=this.onScroll.bind(this),e.addEventListener('scroll',this._onScroll),this._scrolled=(0,C.default)(this.scrolled.bind(this),30),this.didScroll=!1}},{key:'removeEventListeners',value:function(){var e;e=this.settings.fullsize?window:this.container,e.removeEventListener('scroll',this._onScroll),this._onScroll=void 0}},{key:'onScroll',value:function(){var e=void 0,t=void 0,n='rtl'===this.settings.direction?-1:1;this.settings.fullsize?(e=window.scrollY*n,t=window.scrollX*n):(e=this.container.scrollTop,t=this.container.scrollLeft),this.scrollTop=e,this.scrollLeft=t,this.ignore?this.ignore=!1:this._scrolled(),this.scrollDeltaVert+=u(e-this.prevScrollTop),this.scrollDeltaHorz+=u(t-this.prevScrollLeft),this.prevScrollTop=e,this.prevScrollLeft=t,clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout(function(){this.scrollDeltaVert=0,this.scrollDeltaHorz=0}.bind(this),150),clearTimeout(this.afterScrolled),this.didScroll=!1}},{key:'scrolled',value:function(){this.q.enqueue(function(){this.check()}.bind(this)),this.emit(m.EVENTS.MANAGERS.SCROLL,{top:this.scrollTop,left:this.scrollLeft}),clearTimeout(this.afterScrolled),this.afterScrolled=setTimeout(function(){this.snapper&&this.snapper.supportsTouch&&this.snapper.needsSnap()||this.emit(m.EVENTS.MANAGERS.SCROLLED,{top:this.scrollTop,left:this.scrollLeft})}.bind(this),this.settings.afterScrolledTimeout)}},{key:'next',value:function(){var e=this.settings.direction,t='pre-paginated'===this.layout.props.name&&this.layout.props.spread?2*this.layout.props.delta:this.layout.props.delta;this.views.length&&(this.isPaginated&&'horizontal'===this.settings.axis?this.scrollBy(t,0,!0):this.scrollBy(0,this.layout.height,!0),this.q.enqueue(function(){this.check()}.bind(this)))}},{key:'prev',value:function(){var e=this.settings.direction,t='pre-paginated'===this.layout.props.name&&this.layout.props.spread?2*this.layout.props.delta:this.layout.props.delta;this.views.length&&(this.isPaginated&&'horizontal'===this.settings.axis?this.scrollBy(-t,0,!0):this.scrollBy(0,-this.layout.height,!0),this.q.enqueue(function(){this.check()}.bind(this)))}},{key:'updateFlow',value:function(e){this.rendered&&this.snapper&&(this.snapper.destroy(),this.snapper=void 0),d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),'updateFlow',this).call(this,e,'scroll'),this.rendered&&this.isPaginated&&this.settings.snap&&(this.snapper=new f.default(this,this.settings.snap&&'object'===o(this.settings.snap)&&this.settings.snap))}},{key:'destroy',value:function(){d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),'destroy',this).call(this),this.snapper&&this.snapper.destroy()}}]),t}(h.default);t.default=v,e.exports=t['default']},function(e,t,n){function a(e,t){if('string'==typeof e&&(e=o.util.createBuffer(e)),o.util.isArray(e)&&4<e.length){var n=e;e=o.util.createBuffer();for(var a=0;a<n.length;++a)e.putByte(n[a])}if(e.length()<t)throw new Error('Invalid IV length; got '+e.length()+' bytes and expected '+t+' bytes.');if(!o.util.isArray(e)){for(var r=[],a=0;a<t/4;++a)r.push(e.getInt32());e=r}return e}function r(e){e[e.length-1]=4294967295&e[e.length-1]+1}function s(e){return[0|e/4294967296,4294967295&e]}var o=n(0);n(1),o.cipher=o.cipher||{};var i=e.exports=o.cipher.modes=o.cipher.modes||{};i.ecb=function(e){e=e||{},this.name='ECB',this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=Array(this._ints),this._outBlock=Array(this._ints)},i.ecb.prototype.start=function(){},i.ecb.prototype.encrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&0<e.length()))return!0;for(var a=0;a<this._ints;++a)this._inBlock[a]=e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var a=0;a<this._ints;++a)t.putInt32(this._outBlock[a])},i.ecb.prototype.decrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&0<e.length()))return!0;for(var a=0;a<this._ints;++a)this._inBlock[a]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var a=0;a<this._ints;++a)t.putInt32(this._outBlock[a])},i.ecb.prototype.pad=function(e){var t=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(t,t),!0},i.ecb.prototype.unpad=function(e,t){if(0<t.overflow)return!1;var n=e.length(),a=e.at(n-1);return!(a>this.blockSize<<2)&&(e.truncate(a),!0)},i.cbc=function(e){e=e||{},this.name='CBC',this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=Array(this._ints),this._outBlock=Array(this._ints)},i.cbc.prototype.start=function(e){if(null===e.iv){if(!this._prev)throw new Error('Invalid IV parameter.');this._iv=this._prev.slice(0)}else if(!('iv'in e))throw new Error('Invalid IV parameter.');else this._iv=a(e.iv,this.blockSize),this._prev=this._iv.slice(0)},i.cbc.prototype.encrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&0<e.length()))return!0;for(var a=0;a<this._ints;++a)this._inBlock[a]=this._prev[a]^e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var a=0;a<this._ints;++a)t.putInt32(this._outBlock[a]);this._prev=this._outBlock},i.cbc.prototype.decrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&0<e.length()))return!0;for(var a=0;a<this._ints;++a)this._inBlock[a]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var a=0;a<this._ints;++a)t.putInt32(this._prev[a]^this._outBlock[a]);this._prev=this._inBlock.slice(0)},i.cbc.prototype.pad=function(e){var t=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(t,t),!0},i.cbc.prototype.unpad=function(e,t){if(0<t.overflow)return!1;var n=e.length(),a=e.at(n-1);return!(a>this.blockSize<<2)&&(e.truncate(a),!0)},i.cfb=function(e){e=e||{},this.name='CFB',this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=Array(this._ints),this._partialBlock=Array(this._ints),this._partialOutput=o.util.createBuffer(),this._partialBytes=0},i.cfb.prototype.start=function(e){if(!('iv'in e))throw new Error('Invalid IV parameter.');this._iv=a(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},i.cfb.prototype.encrypt=function(e,t,n){var a=e.length();if(0===a)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&a>=this.blockSize){for(var r=0;r<this._ints;++r)this._inBlock[r]=e.getInt32()^this._outBlock[r],t.putInt32(this._inBlock[r]);return}var i=(this.blockSize-a)%this.blockSize;0<i&&(i=this.blockSize-i),this._partialOutput.clear();for(var r=0;r<this._ints;++r)this._partialBlock[r]=e.getInt32()^this._outBlock[r],this._partialOutput.putInt32(this._partialBlock[r]);if(0<i)e.read-=this.blockSize;else for(var r=0;r<this._ints;++r)this._inBlock[r]=this._partialBlock[r];return 0<this._partialBytes&&this._partialOutput.getBytes(this._partialBytes),0<i&&!n?(t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0):void(t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=0)},i.cfb.prototype.decrypt=function(e,t,n){var a=e.length();if(0===a)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&a>=this.blockSize){for(var r=0;r<this._ints;++r)this._inBlock[r]=e.getInt32(),t.putInt32(this._inBlock[r]^this._outBlock[r]);return}var i=(this.blockSize-a)%this.blockSize;0<i&&(i=this.blockSize-i),this._partialOutput.clear();for(var r=0;r<this._ints;++r)this._partialBlock[r]=e.getInt32(),this._partialOutput.putInt32(this._partialBlock[r]^this._outBlock[r]);if(0<i)e.read-=this.blockSize;else for(var r=0;r<this._ints;++r)this._inBlock[r]=this._partialBlock[r];return 0<this._partialBytes&&this._partialOutput.getBytes(this._partialBytes),0<i&&!n?(t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0):void(t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=0)},i.ofb=function(e){e=e||{},this.name='OFB',this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=Array(this._ints),this._partialOutput=o.util.createBuffer(),this._partialBytes=0},i.ofb.prototype.start=function(e){if(!('iv'in e))throw new Error('Invalid IV parameter.');this._iv=a(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},i.ofb.prototype.encrypt=function(e,t,n){var a=e.length();if(0===e.length())return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&a>=this.blockSize){for(var r=0;r<this._ints;++r)t.putInt32(e.getInt32()^this._outBlock[r]),this._inBlock[r]=this._outBlock[r];return}var i=(this.blockSize-a)%this.blockSize;0<i&&(i=this.blockSize-i),this._partialOutput.clear();for(var r=0;r<this._ints;++r)this._partialOutput.putInt32(e.getInt32()^this._outBlock[r]);if(0<i)e.read-=this.blockSize;else for(var r=0;r<this._ints;++r)this._inBlock[r]=this._outBlock[r];return 0<this._partialBytes&&this._partialOutput.getBytes(this._partialBytes),0<i&&!n?(t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0):void(t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=0)},i.ofb.prototype.decrypt=i.ofb.prototype.encrypt,i.ctr=function(e){e=e||{},this.name='CTR',this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=Array(this._ints),this._partialOutput=o.util.createBuffer(),this._partialBytes=0},i.ctr.prototype.start=function(e){if(!('iv'in e))throw new Error('Invalid IV parameter.');this._iv=a(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},i.ctr.prototype.encrypt=function(e,t,n){var a=e.length();if(0===a)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&a>=this.blockSize)for(var s=0;s<this._ints;++s)t.putInt32(e.getInt32()^this._outBlock[s]);else{var i=(this.blockSize-a)%this.blockSize;0<i&&(i=this.blockSize-i),this._partialOutput.clear();for(var s=0;s<this._ints;++s)this._partialOutput.putInt32(e.getInt32()^this._outBlock[s]);if(0<i&&(e.read-=this.blockSize),0<this._partialBytes&&this._partialOutput.getBytes(this._partialBytes),0<i&&!n)return t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=0}r(this._inBlock)},i.ctr.prototype.decrypt=i.ctr.prototype.encrypt,i.gcm=function(e){e=e||{},this.name='GCM',this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=Array(this._ints),this._outBlock=Array(this._ints),this._partialOutput=o.util.createBuffer(),this._partialBytes=0,this._R=3774873600},i.gcm.prototype.start=function(e){if(!('iv'in e))throw new Error('Invalid IV parameter.');var t=o.util.createBuffer(e.iv);this._cipherLength=0;var n;if(n='additionalData'in e?o.util.createBuffer(e.additionalData):o.util.createBuffer(),this._tagLength='tagLength'in e?e.tagLength:128,this._tag=null,e.decrypt&&(this._tag=o.util.createBuffer(e.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error('Authentication tag does not match tag length.');this._hashBlock=Array(this._ints),this.tag=null,this._hashSubkey=Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var a=t.length();if(12===a)this._j0=[t.getInt32(),t.getInt32(),t.getInt32(),1];else{for(this._j0=[0,0,0,0];0<t.length();)this._j0=this.ghash(this._hashSubkey,this._j0,[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(s(8*a)))}this._inBlock=this._j0.slice(0),r(this._inBlock),this._partialBytes=0,n=o.util.createBuffer(n),this._aDataLength=s(8*n.length());var i=n.length()%this.blockSize;for(i&&n.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];0<n.length();)this._s=this.ghash(this._hashSubkey,this._s,[n.getInt32(),n.getInt32(),n.getInt32(),n.getInt32()])},i.gcm.prototype.encrypt=function(e,t,n){var a=e.length();if(0===a)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&a>=this.blockSize){for(var s=0;s<this._ints;++s)t.putInt32(this._outBlock[s]^=e.getInt32());this._cipherLength+=this.blockSize}else{var i=(this.blockSize-a)%this.blockSize;0<i&&(i=this.blockSize-i),this._partialOutput.clear();for(var s=0;s<this._ints;++s)this._partialOutput.putInt32(e.getInt32()^this._outBlock[s]);if(0>=i||n){if(n){var o=a%this.blockSize;this._cipherLength+=o,this._partialOutput.truncate(this.blockSize-o)}else this._cipherLength+=this.blockSize;for(var s=0;s<this._ints;++s)this._outBlock[s]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(0<this._partialBytes&&this._partialOutput.getBytes(this._partialBytes),0<i&&!n)return e.read-=this.blockSize,t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),r(this._inBlock)},i.gcm.prototype.decrypt=function(e,t,n){var a=e.length();if(a<this.blockSize&&!(n&&0<a))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),r(this._inBlock),this._hashBlock[0]=e.getInt32(),this._hashBlock[1]=e.getInt32(),this._hashBlock[2]=e.getInt32(),this._hashBlock[3]=e.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var s=0;s<this._ints;++s)t.putInt32(this._outBlock[s]^this._hashBlock[s]);this._cipherLength+=a<this.blockSize?a%this.blockSize:this.blockSize},i.gcm.prototype.afterFinish=function(e,t){var n=!0;t.decrypt&&t.overflow&&e.truncate(this.blockSize-t.overflow),this.tag=o.util.createBuffer();var a=this._aDataLength.concat(s(8*this._cipherLength));this._s=this.ghash(this._hashSubkey,this._s,a);var r=[];this.cipher.encrypt(this._j0,r);for(var l=0;l<this._ints;++l)this.tag.putInt32(this._s[l]^r[l]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),t.decrypt&&this.tag.bytes()!==this._tag&&(n=!1),n},i.gcm.prototype.multiply=function(e,t){for(var n=[0,0,0,0],a=t.slice(0),r=0,i;128>r;++r)i=e[0|r/32]&1<<31-r%32,i&&(n[0]^=a[0],n[1]^=a[1],n[2]^=a[2],n[3]^=a[3]),this.pow(a,a);return n},i.gcm.prototype.pow=function(e,t){for(var n=1&e[3],a=3;0<a;--a)t[a]=e[a]>>>1|(1&e[a-1])<<31;t[0]=e[0]>>>1,n&&(t[0]^=this._R)},i.gcm.prototype.tableMultiply=function(e){for(var t=[0,0,0,0],n=0;32>n;++n){var a=0|n/8,r=15&e[a]>>>4*(7-n%8),i=this._m[n][r];t[0]^=i[0],t[1]^=i[1],t[2]^=i[2],t[3]^=i[3]}return t},i.gcm.prototype.ghash=function(e,t,n){return t[0]^=n[0],t[1]^=n[1],t[2]^=n[2],t[3]^=n[3],this.tableMultiply(t)},i.gcm.prototype.generateHashTable=function(e,t){for(var n=8/t,a=4*n,r=16*n,s=Array(r),o=0;o<r;++o){var i=[0,0,0,0],l=0|o/a,d=(a-1-o%a)*t;i[l]=1<<t-1<<d,s[o]=this.generateSubHashTable(this.multiply(i,e),t)}return s},i.gcm.prototype.generateSubHashTable=function(e,t){var n=1<<t,a=n>>>1,r=Array(n);r[a]=e.slice(0);for(var s=a>>>1;0<s;)this.pow(r[2*s],r[s]=[]),s>>=1;for(s=2;s<a;){for(var i=1;i<s;++i){var o=r[s],l=r[i];r[s+i]=[o[0]^l[0],o[1]^l[1],o[2]^l[2],o[3]^l[3]]}s*=2}for(r[0]=[0,0,0,0],s=a+1;s<n;++s){var d=r[s^a];r[s]=[e[0]^d[0],e[1]^d[1],e[2]^d[2],e[3]^d[3]]}return r}},function(e,t,n){var a=n(0);n(7),n(14),n(33),n(13),n(49),n(5),n(15),n(1);var r=function(e,t,n,r){var s=a.util.createBuffer(),o=e.length>>1,l=o+(1&e.length),c=e.substr(0,l),p=e.substr(o,l),u=a.util.createBuffer(),g=a.hmac.create();n=t+n;var h=d(r/16),y=d(r/20);g.start('MD5',c);var f=a.util.createBuffer();u.putBytes(n);for(var m=0;m<h;++m)g.start(null,null),g.update(u.getBytes()),u.putBuffer(g.digest()),g.start(null,null),g.update(u.bytes()+n),f.putBuffer(g.digest());g.start('SHA1',p);var i=a.util.createBuffer();u.clear(),u.putBytes(n);for(var m=0;m<y;++m)g.start(null,null),g.update(u.getBytes()),u.putBuffer(g.digest()),g.start(null,null),g.update(u.bytes()+n),i.putBuffer(g.digest());return s.putBytes(a.util.xorBytes(f.getBytes(),i.getBytes(),r)),s},i=function(e,t){var n=!1;try{var r=e.deflate(t.fragment.getBytes());t.fragment=a.util.createBuffer(r),t.length=r.length,n=!0}catch(e){}return n},s=function(e,t){var n=!1;try{var r=e.inflate(t.fragment.getBytes());t.fragment=a.util.createBuffer(r),t.length=r.length,n=!0}catch(e){}return n},o=function(e,t){var n=0;return 1===t?n=e.getByte():2===t?n=e.getInt16():3===t?n=e.getInt24():4===t?n=e.getInt32():void 0,a.util.createBuffer(e.getBytes(n))},l=function(e,t,n){e.putInt(n.length(),t<<3),e.putBuffer(n)},p={};p.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}},p.SupportedVersions=[p.Versions.TLS_1_1,p.Versions.TLS_1_0],p.Version=p.SupportedVersions[0],p.MaxFragment=15360,p.ConnectionEnd={server:0,client:1},p.PRFAlgorithm={tls_prf_sha256:0},p.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2},p.CipherType={stream:0,block:1,aead:2},p.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4},p.CompressionMethod={none:0,deflate:1},p.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24},p.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20},p.Alert={},p.Alert.Level={warning:1,fatal:2},p.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100},p.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2},p.CipherSuites={},p.getCipherSuite=function(e){var t=null;for(var n in p.CipherSuites){var a=p.CipherSuites[n];if(a.id[0]===e.charCodeAt(0)&&a.id[1]===e.charCodeAt(1)){t=a;break}}return t},p.handleUnexpected=function(e){var t=!e.open&&e.entity===p.ConnectionEnd.client;t||e.error(e,{message:'Unexpected message. Received TLS record out of order.',send:!0,alert:{level:p.Alert.Level.fatal,description:p.Alert.Description.unexpected_message}})},p.handleHelloRequest=function(e){!e.handshaking&&0<e.handshakes&&(p.queue(e,p.createAlert(e,{level:p.Alert.Level.warning,description:p.Alert.Description.no_renegotiation})),p.flush(e)),e.process()},p.parseHelloMessage=function(e,t,n){var r=null,s=e.entity===p.ConnectionEnd.client;if(38>n)e.error(e,{message:s?'Invalid ServerHello message. Message too short.':'Invalid ClientHello message. Message too short.',send:!0,alert:{level:p.Alert.Level.fatal,description:p.Alert.Description.illegal_parameter}});else{var l=t.fragment,d=l.length();if(r={version:{major:l.getByte(),minor:l.getByte()},random:a.util.createBuffer(l.getBytes(32)),session_id:o(l,1),extensions:[]},s?(r.cipher_suite=l.getBytes(2),r.compression_method=l.getByte()):(r.cipher_suites=o(l,2),r.compression_methods=o(l,1)),d=n-(d-l.length()),0<d){for(var c=o(l,2);0<c.length();)r.extensions.push({type:[c.getByte(),c.getByte()],data:o(c,2)});if(!s)for(var u=0,i;u<r.extensions.length;++u)if(i=r.extensions[u],0===i.type[0]&&0===i.type[1])for(var g=o(i.data,2),h;0<g.length()&&(h=g.getByte(),0===h);)e.session.extensions.server_name.serverNameList.push(o(g,2).getBytes())}if(e.session.version&&(r.version.major!==e.session.version.major||r.version.minor!==e.session.version.minor))return e.error(e,{message:'TLS version change is disallowed during renegotiation.',send:!0,alert:{level:p.Alert.Level.fatal,description:p.Alert.Description.protocol_version}});if(s)e.session.cipherSuite=p.getCipherSuite(r.cipher_suite);else for(var y=a.util.createBuffer(r.cipher_suites.bytes());0<y.length()&&(e.session.cipherSuite=p.getCipherSuite(y.getBytes(2)),null===e.session.cipherSuite););if(null===e.session.cipherSuite)return e.error(e,{message:'No cipher suites in common.',send:!0,alert:{level:p.Alert.Level.fatal,description:p.Alert.Description.handshake_failure},cipherSuite:a.util.bytesToHex(r.cipher_suite)});e.session.compressionMethod=s?r.compression_method:p.CompressionMethod.none}return r},p.createSecurityParameters=function(e,t){var n=e.entity===p.ConnectionEnd.client,a=t.random.bytes(),r=n?e.session.sp.client_random:a,i=n?a:p.createRandom().getBytes();e.session.sp={entity:e.entity,prf_algorithm:p.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:e.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:r,server_random:i}},p.handleServerHello=function(e,t,n){var a=p.parseHelloMessage(e,t,n);if(!e.fail){if(a.version.minor<=e.version.minor)e.version.minor=a.version.minor;else return e.error(e,{message:'Incompatible TLS version.',send:!0,alert:{level:p.Alert.Level.fatal,description:p.Alert.Description.protocol_version}});e.session.version=e.version;var r=a.session_id.bytes();0<r.length&&r===e.session.id?(e.expect=f,e.session.resuming=!0,e.session.sp.server_random=a.random.bytes()):(e.expect=u,e.session.resuming=!1,p.createSecurityParameters(e,a)),e.session.id=r,e.process()}},p.handleClientHello=function(e,t,n){var r=p.parseHelloMessage(e,t,n);if(!e.fail){var s=r.session_id.bytes(),o=null;if(e.sessionCache&&(o=e.sessionCache.getSession(s),null===o?s='':(o.version.major!==r.version.major||o.version.minor>r.version.minor)&&(o=null,s='')),0===s.length&&(s=a.random.getBytes(32)),e.session.id=s,e.session.clientHelloVersion=r.version,e.session.sp={},o)e.version=e.session.version=o.version,e.session.sp=o.sp;else{for(var l=1,i;l<p.SupportedVersions.length&&(i=p.SupportedVersions[l],!(i.minor<=r.version.minor));++l);e.version={major:i.major,minor:i.minor},e.session.version=e.version}null===o?(e.expect=!1===e.verifyClient?S:v,e.session.resuming=!1,p.createSecurityParameters(e,r)):(e.expect=I,e.session.resuming=!0,e.session.sp.client_random=r.random.bytes()),e.open=!0,p.queue(e,p.createRecord(e,{type:p.ContentType.handshake,data:p.createServerHello(e)})),e.session.resuming?(p.queue(e,p.createRecord(e,{type:p.ContentType.change_cipher_spec,data:p.createChangeCipherSpec()})),e.state.pending=p.createConnectionState(e),e.state.current.write=e.state.pending.write,p.queue(e,p.createRecord(e,{type:p.ContentType.handshake,data:p.createFinished(e)}))):(p.queue(e,p.createRecord(e,{type:p.ContentType.handshake,data:p.createCertificate(e)})),!e.fail&&(p.queue(e,p.createRecord(e,{type:p.ContentType.handshake,data:p.createServerKeyExchange(e)})),!1!==e.verifyClient&&p.queue(e,p.createRecord(e,{type:p.ContentType.handshake,data:p.createCertificateRequest(e)})),p.queue(e,p.createRecord(e,{type:p.ContentType.handshake,data:p.createServerHelloDone(e)})))),p.flush(e),e.process()}},p.handleCertificate=function(e,t,n){if(3>n)return e.error(e,{message:'Invalid Certificate message. Message too short.',send:!0,alert:{level:p.Alert.Level.fatal,description:p.Alert.Description.illegal_parameter}});var r=t.fragment,i={certificate_list:o(r,3)},s=[],l,d;try{for(;0<i.certificate_list.length();)l=o(i.certificate_list,3),d=a.asn1.fromDer(l),l=a.pki.certificateFromAsn1(d,!0),s.push(l)}catch(t){return e.error(e,{message:'Could not parse certificate list.',cause:t,send:!0,alert:{level:p.Alert.Level.fatal,description:p.Alert.Description.bad_certificate}})}var c=e.entity===p.ConnectionEnd.client;(c||!0===e.verifyClient)&&0===s.length?e.error(e,{message:c?'No server certificate provided.':'No client certificate provided.',send:!0,alert:{level:p.Alert.Level.fatal,description:p.Alert.Description.illegal_parameter}}):0===s.length?e.expect=c?g:S:(c?e.session.serverCertificate=s[0]:e.session.clientCertificate=s[0],p.verifyCertificateChain(e,s)&&(e.expect=c?g:S)),e.process()},p.handleServerKeyExchange=function(e,t,n){return 0<n?e.error(e,{message:'Invalid key parameters. Only RSA is supported.',send:!0,alert:{level:p.Alert.Level.fatal,description:p.Alert.Description.unsupported_certificate}}):void(e.expect=h,e.process())},p.handleClientKeyExchange=function(e,t,n){if(48>n)return e.error(e,{message:'Invalid key parameters. Only RSA is supported.',send:!0,alert:{level:p.Alert.Level.fatal,description:p.Alert.Description.unsupported_certificate}});var r=t.fragment,i={enc_pre_master_secret:o(r,2).getBytes()},s=null;if(e.getPrivateKey)try{s=e.getPrivateKey(e,e.session.serverCertificate),s=a.pki.privateKeyFromPem(s)}catch(t){e.error(e,{message:'Could not get private key.',cause:t,send:!0,alert:{level:p.Alert.Level.fatal,description:p.Alert.Description.internal_error}})}if(null===s)return e.error(e,{message:'No private key set.',send:!0,alert:{level:p.Alert.Level.fatal,description:p.Alert.Description.internal_error}});try{var l=e.session.sp;l.pre_master_secret=s.decrypt(i.enc_pre_master_secret);var d=e.session.clientHelloVersion;if(d.major!==l.pre_master_secret.charCodeAt(0)||d.minor!==l.pre_master_secret.charCodeAt(1))throw new Error('TLS version rollback attack detected.')}catch(e){l.pre_master_secret=a.random.getBytes(48)}e.expect=I,null!==e.session.clientCertificate&&(e.expect=T),e.process()},p.handleCertificateRequest=function(e,t,n){if(3>n)return e.error(e,{message:'Invalid CertificateRequest. Message too short.',send:!0,alert:{level:p.Alert.Level.fatal,description:p.Alert.Description.illegal_parameter}});var a=t.fragment,r={certificate_types:o(a,1),certificate_authorities:o(a,2)};e.session.certificateRequest=r,e.expect=y,e.process()},p.handleCertificateVerify=function(e,t,n){if(2>n)return e.error(e,{message:'Invalid CertificateVerify. Message too short.',send:!0,alert:{level:p.Alert.Level.fatal,description:p.Alert.Description.illegal_parameter}});var r=t.fragment;r.read-=4;var i=r.bytes();r.read+=4;var s={signature:o(r,2).getBytes()},l=a.util.createBuffer();l.putBuffer(e.session.md5.digest()),l.putBuffer(e.session.sha1.digest()),l=l.getBytes();try{var d=e.session.clientCertificate;if(!d.publicKey.verify(l,s.signature,'NONE'))throw new Error('CertificateVerify signature does not match.');e.session.md5.update(i),e.session.sha1.update(i)}catch(t){return e.error(e,{message:'Bad signature in CertificateVerify.',send:!0,alert:{level:p.Alert.Level.fatal,description:p.Alert.Description.handshake_failure}})}e.expect=I,e.process()},p.handleServerHelloDone=function(e,t,n){if(0<n)return e.error(e,{message:'Invalid ServerHelloDone message. Invalid length.',send:!0,alert:{level:p.Alert.Level.fatal,description:p.Alert.Description.record_overflow}});if(null===e.serverCertificate){var r={message:'No server certificate provided. Not enough security.',send:!0,alert:{level:p.Alert.Level.fatal,description:p.Alert.Description.insufficient_security}},i=e.verify(e,r.alert.description,0,[]);if(!0!==i)return(i||0===i)&&('object'!=typeof i||a.util.isArray(i)?'number'==typeof i&&(r.alert.description=i):(i.message&&(r.message=i.message),i.alert&&(r.alert.description=i.alert))),e.error(e,r)}null!==e.session.certificateRequest&&(t=p.createRecord(e,{type:p.ContentType.handshake,data:p.createCertificate(e)}),p.queue(e,t)),t=p.createRecord(e,{type:p.ContentType.handshake,data:p.createClientKeyExchange(e)}),p.queue(e,t),e.expect=C;var s=function(e,t){null!==e.session.certificateRequest&&null!==e.session.clientCertificate&&p.queue(e,p.createRecord(e,{type:p.ContentType.handshake,data:p.createCertificateVerify(e,t)})),p.queue(e,p.createRecord(e,{type:p.ContentType.change_cipher_spec,data:p.createChangeCipherSpec()})),e.state.pending=p.createConnectionState(e),e.state.current.write=e.state.pending.write,p.queue(e,p.createRecord(e,{type:p.ContentType.handshake,data:p.createFinished(e)})),e.expect=f,p.flush(e),e.process()};return null===e.session.certificateRequest||null===e.session.clientCertificate?s(e,null):void p.getClientSignature(e,s)},p.handleChangeCipherSpec=function(e,t){if(1!==t.fragment.getByte())return e.error(e,{message:'Invalid ChangeCipherSpec message received.',send:!0,alert:{level:p.Alert.Level.fatal,description:p.Alert.Description.illegal_parameter}});var n=e.entity===p.ConnectionEnd.client;(e.session.resuming&&n||!e.session.resuming&&!n)&&(e.state.pending=p.createConnectionState(e)),e.state.current.read=e.state.pending.read,(!e.session.resuming&&n||e.session.resuming&&!n)&&(e.state.pending=null),e.expect=n?m:b,e.process()},p.handleFinished=function(e,t){var n=t.fragment;n.read-=4;var i=n.bytes();n.read+=4;var s=t.fragment.getBytes();n=a.util.createBuffer(),n.putBuffer(e.session.md5.digest()),n.putBuffer(e.session.sha1.digest());var o=e.entity===p.ConnectionEnd.client,l=o?'server finished':'client finished',d=e.session.sp;return n=r(d.master_secret,l,n.getBytes(),12),n.getBytes()===s?void(e.session.md5.update(i),e.session.sha1.update(i),(e.session.resuming&&o||!e.session.resuming&&!o)&&(p.queue(e,p.createRecord(e,{type:p.ContentType.change_cipher_spec,data:p.createChangeCipherSpec()})),e.state.current.write=e.state.pending.write,e.state.pending=null,p.queue(e,p.createRecord(e,{type:p.ContentType.handshake,data:p.createFinished(e)}))),e.expect=o?E:A,e.handshaking=!1,++e.handshakes,e.peerCertificate=o?e.session.serverCertificate:e.session.clientCertificate,p.flush(e),e.isConnected=!0,e.connected(e),e.process()):e.error(e,{message:'Invalid verify_data in Finished message.',send:!0,alert:{level:p.Alert.Level.fatal,description:p.Alert.Description.decrypt_error}})},p.handleAlert=function(e,t){var n=t.fragment,a={level:n.getByte(),description:n.getByte()},r;switch(a.description){case p.Alert.Description.close_notify:r='Connection closed.';break;case p.Alert.Description.unexpected_message:r='Unexpected message.';break;case p.Alert.Description.bad_record_mac:r='Bad record MAC.';break;case p.Alert.Description.decryption_failed:r='Decryption failed.';break;case p.Alert.Description.record_overflow:r='Record overflow.';break;case p.Alert.Description.decompression_failure:r='Decompression failed.';break;case p.Alert.Description.handshake_failure:r='Handshake failure.';break;case p.Alert.Description.bad_certificate:r='Bad certificate.';break;case p.Alert.Description.unsupported_certificate:r='Unsupported certificate.';break;case p.Alert.Description.certificate_revoked:r='Certificate revoked.';break;case p.Alert.Description.certificate_expired:r='Certificate expired.';break;case p.Alert.Description.certificate_unknown:r='Certificate unknown.';break;case p.Alert.Description.illegal_parameter:r='Illegal parameter.';break;case p.Alert.Description.unknown_ca:r='Unknown certificate authority.';break;case p.Alert.Description.access_denied:r='Access denied.';break;case p.Alert.Description.decode_error:r='Decode error.';break;case p.Alert.Description.decrypt_error:r='Decrypt error.';break;case p.Alert.Description.export_restriction:r='Export restriction.';break;case p.Alert.Description.protocol_version:r='Unsupported protocol version.';break;case p.Alert.Description.insufficient_security:r='Insufficient security.';break;case p.Alert.Description.internal_error:r='Internal error.';break;case p.Alert.Description.user_canceled:r='User canceled.';break;case p.Alert.Description.no_renegotiation:r='Renegotiation not supported.';break;default:r='Unknown error.';}return a.description===p.Alert.Description.close_notify?e.close():void(e.error(e,{message:r,send:!1,origin:e.entity===p.ConnectionEnd.client?'server':'client',alert:a}),e.process())},p.handleHandshake=function(e,t){var n=t.fragment,r=n.getByte(),i=n.getInt24();if(i>n.length())return e.fragmented=t,t.fragment=a.util.createBuffer(),n.read-=4,e.process();e.fragmented=null,n.read-=4;var s=n.bytes(i+4);n.read+=4,r in j[e.entity][e.expect]?(e.entity===p.ConnectionEnd.server&&!e.open&&!e.fail&&(e.handshaking=!0,e.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:a.md.md5.create(),sha1:a.md.sha1.create()}),r!==p.HandshakeType.hello_request&&r!==p.HandshakeType.certificate_verify&&r!==p.HandshakeType.finished&&(e.session.md5.update(s),e.session.sha1.update(s)),j[e.entity][e.expect][r](e,t,i)):p.handleUnexpected(e,t)},p.handleApplicationData=function(e,t){e.data.putBuffer(t.fragment),e.dataReady(e),e.process()},p.handleHeartbeat=function(e,t){var n=t.fragment,r=n.getByte(),i=n.getInt16(),s=n.getBytes(i);if(r===p.HeartbeatMessageType.heartbeat_request){if(e.handshaking||i>s.length)return e.process();p.queue(e,p.createRecord(e,{type:p.ContentType.heartbeat,data:p.createHeartbeat(p.HeartbeatMessageType.heartbeat_response,s)})),p.flush(e)}else if(r===p.HeartbeatMessageType.heartbeat_response){if(s!==e.expectedHeartbeatPayload)return e.process();e.heartbeatReceived&&e.heartbeatReceived(e,a.util.createBuffer(s))}e.process()};var u=1,g=2,h=3,y=4,f=5,m=6,E=7,C=8,v=1,S=2,T=3,I=4,b=5,A=6,_=p.handleUnexpected,k=p.handleChangeCipherSpec,N=p.handleAlert,B=p.handleHandshake,R=p.handleApplicationData,x=p.handleHeartbeat,L=[];L[p.ConnectionEnd.client]=[[_,N,B,_,x],[_,N,B,_,x],[_,N,B,_,x],[_,N,B,_,x],[_,N,B,_,x],[k,N,_,_,x],[_,N,B,_,x],[_,N,B,R,x],[_,N,B,_,x]],L[p.ConnectionEnd.server]=[[_,N,B,_,x],[_,N,B,_,x],[_,N,B,_,x],[_,N,B,_,x],[k,N,_,_,x],[_,N,B,_,x],[_,N,B,R,x],[_,N,B,_,x]];var D=p.handleHelloRequest,w=p.handleServerHello,P=p.handleCertificate,U=p.handleServerKeyExchange,O=p.handleCertificateRequest,V=p.handleServerHelloDone,K=p.handleFinished,j=[];j[p.ConnectionEnd.client]=[[_,_,w,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],[D,_,_,_,_,_,_,_,_,_,_,P,U,O,V,_,_,_,_,_,_],[D,_,_,_,_,_,_,_,_,_,_,_,U,O,V,_,_,_,_,_,_],[D,_,_,_,_,_,_,_,_,_,_,_,_,O,V,_,_,_,_,_,_],[D,_,_,_,_,_,_,_,_,_,_,_,_,_,V,_,_,_,_,_,_],[D,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],[D,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,K],[D,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],[D,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_]];var M=p.handleClientHello,q=p.handleClientKeyExchange,z=p.handleCertificateVerify;j[p.ConnectionEnd.server]=[[_,M,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],[_,_,_,_,_,_,_,_,_,_,_,P,_,_,_,_,_,_,_,_,_],[_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,q,_,_,_,_],[_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,z,_,_,_,_,_],[_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],[_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,K],[_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],[_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_]],p.generateKeys=function(e,t){var n=r,a=t.client_random+t.server_random;e.session.resuming||(t.master_secret=n(t.pre_master_secret,'master secret',a,48).bytes(),t.pre_master_secret=null),a=t.server_random+t.client_random;var i=2*t.mac_key_length+2*t.enc_key_length,s=e.version.major===p.Versions.TLS_1_0.major&&e.version.minor===p.Versions.TLS_1_0.minor;s&&(i+=2*t.fixed_iv_length);var o=n(t.master_secret,'key expansion',a,i),l={client_write_MAC_key:o.getBytes(t.mac_key_length),server_write_MAC_key:o.getBytes(t.mac_key_length),client_write_key:o.getBytes(t.enc_key_length),server_write_key:o.getBytes(t.enc_key_length)};return s&&(l.client_write_IV=o.getBytes(t.fixed_iv_length),l.server_write_IV=o.getBytes(t.fixed_iv_length)),l},p.createConnectionState=function(e){var t=e.entity===p.ConnectionEnd.client,n=function(){var e={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(){return!0},compressionState:null,compressFunction:function(){return!0},updateSequenceNumber:function(){4294967295===e.sequenceNumber[1]?(e.sequenceNumber[1]=0,++e.sequenceNumber[0]):++e.sequenceNumber[1]}};return e},a={read:n(),write:n()};if(a.read.update=function(e,t){return a.read.cipherFunction(t,a.read)?!a.read.compressFunction(e,t,a.read)&&e.error(e,{message:'Could not decompress record.',send:!0,alert:{level:p.Alert.Level.fatal,description:p.Alert.Description.decompression_failure}}):e.error(e,{message:'Could not decrypt record or bad MAC.',send:!0,alert:{level:p.Alert.Level.fatal,description:p.Alert.Description.bad_record_mac}}),!e.fail},a.write.update=function(e,t){return a.write.compressFunction(e,t,a.write)?!a.write.cipherFunction(t,a.write)&&e.error(e,{message:'Could not encrypt record.',send:!1,alert:{level:p.Alert.Level.fatal,description:p.Alert.Description.internal_error}}):e.error(e,{message:'Could not compress record.',send:!1,alert:{level:p.Alert.Level.fatal,description:p.Alert.Description.internal_error}}),!e.fail},e.session){var r=e.session.sp;switch(e.session.cipherSuite.initSecurityParameters(r),r.keys=p.generateKeys(e,r),a.read.macKey=t?r.keys.server_write_MAC_key:r.keys.client_write_MAC_key,a.write.macKey=t?r.keys.client_write_MAC_key:r.keys.server_write_MAC_key,e.session.cipherSuite.initConnectionState(a,e,r),r.compression_algorithm){case p.CompressionMethod.none:break;case p.CompressionMethod.deflate:a.read.compressFunction=s,a.write.compressFunction=i;break;default:throw new Error('Unsupported compression algorithm.');}}return a},p.createRandom=function(){var e=new Date,t=+e+6e4*e.getTimezoneOffset(),n=a.util.createBuffer();return n.putInt32(t),n.putBytes(a.random.getBytes(28)),n},p.createRecord=function(e,t){if(!t.data)return null;var n={type:t.type,version:{major:e.version.major,minor:e.version.minor},length:t.data.length(),fragment:t.data};return n},p.createAlert=function(e,t){var n=a.util.createBuffer();return n.putByte(t.level),n.putByte(t.description),p.createRecord(e,{type:p.ContentType.alert,data:n})},p.createClientHello=function(e){e.session.clientHelloVersion={major:e.version.major,minor:e.version.minor};for(var t=a.util.createBuffer(),n=0,r;n<e.cipherSuites.length;++n)r=e.cipherSuites[n],t.putByte(r.id[0]),t.putByte(r.id[1]);var i=t.length(),s=a.util.createBuffer();s.putByte(p.CompressionMethod.none);var o=s.length(),d=a.util.createBuffer();if(e.virtualHost){var c=a.util.createBuffer();c.putByte(0),c.putByte(0);var u=a.util.createBuffer();u.putByte(0),l(u,2,a.util.createBuffer(e.virtualHost));var g=a.util.createBuffer();l(g,2,u),l(c,2,g),d.putBuffer(c)}var h=d.length();0<h&&(h+=2);var y=e.session.id,f=y.length+1+2+4+28+2+i+1+o+h,m=a.util.createBuffer();return m.putByte(p.HandshakeType.client_hello),m.putInt24(f),m.putByte(e.version.major),m.putByte(e.version.minor),m.putBytes(e.session.sp.client_random),l(m,1,a.util.createBuffer(y)),l(m,2,t),l(m,1,s),0<h&&l(m,2,d),m},p.createServerHello=function(e){var t=e.session.id,n=t.length+1+2+4+28+2+1,r=a.util.createBuffer();return r.putByte(p.HandshakeType.server_hello),r.putInt24(n),r.putByte(e.version.major),r.putByte(e.version.minor),r.putBytes(e.session.sp.server_random),l(r,1,a.util.createBuffer(t)),r.putByte(e.session.cipherSuite.id[0]),r.putByte(e.session.cipherSuite.id[1]),r.putByte(e.session.compressionMethod),r},p.createCertificate=function(e){var t=e.entity===p.ConnectionEnd.client,n=null;if(e.getCertificate){var r;r=t?e.session.certificateRequest:e.session.extensions.server_name.serverNameList,n=e.getCertificate(e,r)}var s=a.util.createBuffer();if(null!==n)try{a.util.isArray(n)||(n=[n]);for(var o=null,d=0,i;d<n.length;++d){if(i=a.pem.decode(n[d])[0],'CERTIFICATE'!==i.type&&'X509 CERTIFICATE'!==i.type&&'TRUSTED CERTIFICATE'!==i.type){var c=new Error('Could not convert certificate from PEM; PEM header type is not \"CERTIFICATE\", \"X509 CERTIFICATE\", or \"TRUSTED CERTIFICATE\".');throw c.headerType=i.type,c}if(i.procType&&'ENCRYPTED'===i.procType.type)throw new Error('Could not convert certificate from PEM; PEM is encrypted.');var u=a.util.createBuffer(i.body);null==o&&(o=a.asn1.fromDer(u.bytes(),!1));var g=a.util.createBuffer();l(g,3,u),s.putBuffer(g)}n=a.pki.certificateFromAsn1(o),t?e.session.clientCertificate=n:e.session.serverCertificate=n}catch(t){return e.error(e,{message:'Could not send certificate list.',cause:t,send:!0,alert:{level:p.Alert.Level.fatal,description:p.Alert.Description.bad_certificate}})}var h=3+s.length(),y=a.util.createBuffer();return y.putByte(p.HandshakeType.certificate),y.putInt24(h),l(y,3,s),y},p.createClientKeyExchange=function(e){var t=a.util.createBuffer();t.putByte(e.session.clientHelloVersion.major),t.putByte(e.session.clientHelloVersion.minor),t.putBytes(a.random.getBytes(46));var n=e.session.sp;n.pre_master_secret=t.getBytes();var r=e.session.serverCertificate.publicKey;t=r.encrypt(n.pre_master_secret);var i=t.length+2,s=a.util.createBuffer();return s.putByte(p.HandshakeType.client_key_exchange),s.putInt24(i),s.putInt16(t.length),s.putBytes(t),s},p.createServerKeyExchange=function(){var e=a.util.createBuffer();return 0<0,e},p.getClientSignature=function(e,t){var n=a.util.createBuffer();n.putBuffer(e.session.md5.digest()),n.putBuffer(e.session.sha1.digest()),n=n.getBytes(),e.getSignature=e.getSignature||function(e,t,n){var r=null;if(e.getPrivateKey)try{r=e.getPrivateKey(e,e.session.clientCertificate),r=a.pki.privateKeyFromPem(r)}catch(t){e.error(e,{message:'Could not get private key.',cause:t,send:!0,alert:{level:p.Alert.Level.fatal,description:p.Alert.Description.internal_error}})}null===r?e.error(e,{message:'No private key set.',send:!0,alert:{level:p.Alert.Level.fatal,description:p.Alert.Description.internal_error}}):t=r.sign(t,null),n(e,t)},e.getSignature(e,n,t)},p.createCertificateVerify=function(e,t){var n=t.length+2,r=a.util.createBuffer();return r.putByte(p.HandshakeType.certificate_verify),r.putInt24(n),r.putInt16(t.length),r.putBytes(t),r},p.createCertificateRequest=function(e){var t=a.util.createBuffer();t.putByte(1);var n=a.util.createBuffer();for(var r in e.caStore.certs){var i=e.caStore.certs[r],s=a.pki.distinguishedNameToAsn1(i.subject),o=a.asn1.toDer(s);n.putInt16(o.length()),n.putBuffer(o)}var d=1+t.length()+2+n.length(),c=a.util.createBuffer();return c.putByte(p.HandshakeType.certificate_request),c.putInt24(d),l(c,1,t),l(c,2,n),c},p.createServerHelloDone=function(){var e=a.util.createBuffer();return e.putByte(p.HandshakeType.server_hello_done),e.putInt24(0),e},p.createChangeCipherSpec=function(){var e=a.util.createBuffer();return e.putByte(1),e},p.createFinished=function(e){var t=a.util.createBuffer();t.putBuffer(e.session.md5.digest()),t.putBuffer(e.session.sha1.digest());var n=e.entity===p.ConnectionEnd.client,i=e.session.sp,s=n?'client finished':'server finished';t=r(i.master_secret,s,t.getBytes(),12);var o=a.util.createBuffer();return o.putByte(p.HandshakeType.finished),o.putInt24(t.length()),o.putBuffer(t),o},p.createHeartbeat=function(e,t,n){'undefined'==typeof n&&(n=t.length);var r=a.util.createBuffer();r.putByte(e),r.putInt16(n),r.putBytes(t);var i=r.length(),s=c(16,i-n-3);return r.putBytes(a.random.getBytes(s)),r},p.queue=function(e,t){if(t&&(0!==t.fragment.length()||t.type!==p.ContentType.handshake&&t.type!==p.ContentType.alert&&t.type!==p.ContentType.change_cipher_spec)){if(t.type===p.ContentType.handshake){var n=t.fragment.bytes();e.session.md5.update(n),e.session.sha1.update(n),n=null}var r;if(t.fragment.length()<=p.MaxFragment)r=[t];else{r=[];for(var o=t.fragment.bytes();o.length>p.MaxFragment;)r.push(p.createRecord(e,{type:t.type,data:a.util.createBuffer(o.slice(0,p.MaxFragment))})),o=o.slice(p.MaxFragment);0<o.length&&r.push(p.createRecord(e,{type:t.type,data:a.util.createBuffer(o)}))}for(var l=0;l<r.length&&!e.fail;++l){var i=r[l],d=e.state.current.write;d.update(e,i)&&e.records.push(i)}}},p.flush=function(e){for(var t=0,n;t<e.records.length;++t)n=e.records[t],e.tlsData.putByte(n.type),e.tlsData.putByte(n.version.major),e.tlsData.putByte(n.version.minor),e.tlsData.putInt16(n.fragment.length()),e.tlsData.putBuffer(e.records[t].fragment);return e.records=[],e.tlsDataReady(e)};var F=function(e){return!0===e||(e===a.pki.certificateError.bad_certificate?p.Alert.Description.bad_certificate:e===a.pki.certificateError.unsupported_certificate?p.Alert.Description.unsupported_certificate:e===a.pki.certificateError.certificate_revoked?p.Alert.Description.certificate_revoked:e===a.pki.certificateError.certificate_expired?p.Alert.Description.certificate_expired:e===a.pki.certificateError.certificate_unknown?p.Alert.Description.certificate_unknown:e===a.pki.certificateError.unknown_ca?p.Alert.Description.unknown_ca:p.Alert.Description.bad_certificate)},H=function(e){return!0===e||(e===p.Alert.Description.bad_certificate?a.pki.certificateError.bad_certificate:e===p.Alert.Description.unsupported_certificate?a.pki.certificateError.unsupported_certificate:e===p.Alert.Description.certificate_revoked?a.pki.certificateError.certificate_revoked:e===p.Alert.Description.certificate_expired?a.pki.certificateError.certificate_expired:e===p.Alert.Description.certificate_unknown?a.pki.certificateError.certificate_unknown:e===p.Alert.Description.unknown_ca?a.pki.certificateError.unknown_ca:a.pki.certificateError.bad_certificate)};for(var G in p.verifyCertificateChain=function(e,t){try{var n={};for(var r in e.verifyOptions)n[r]=e.verifyOptions[r];n.verify=function(t,n,r){var i=F(t),s=e.verify(e,t,n,r);if(!0!==s){if('object'==typeof s&&!a.util.isArray(s)){var o=new Error('The application rejected the certificate.');throw o.send=!0,o.alert={level:p.Alert.Level.fatal,description:p.Alert.Description.bad_certificate},s.message&&(o.message=s.message),s.alert&&(o.alert.description=s.alert),o}s!==t&&(s=H(s))}return s},a.pki.verifyCertificateChain(e.caStore,t,n)}catch(t){var i=t;('object'!=typeof i||a.util.isArray(i))&&(i={send:!0,alert:{level:p.Alert.Level.fatal,description:F(t)}}),'send'in i||(i.send=!0),'alert'in i||(i.alert={level:p.Alert.Level.fatal,description:F(i.error)}),e.error(e,i)}return!e.fail},p.createSessionCache=function(e,t){var n=null;if(e&&e.getSession&&e.setSession&&e.order)n=e;else{for(var r in n={},n.cache=e||{},n.capacity=c(t||100,1),n.order=[],e)n.order.length<=t?n.order.push(r):delete e[r];n.getSession=function(e){var t=null,r=null;if(e?r=a.util.bytesToHex(e):0<n.order.length&&(r=n.order[0]),null!==r&&r in n.cache)for(var s in t=n.cache[r],delete n.cache[r],n.order)if(n.order[s]===r){n.order.splice(s,1);break}return t},n.setSession=function(e,t){if(n.order.length===n.capacity){var r=n.order.shift();delete n.cache[r]}var r=a.util.bytesToHex(e);n.order.push(r),n.cache[r]=t}}return n},p.createConnection=function(e){var t=null;t=e.caStore?a.util.isArray(e.caStore)?a.pki.createCaStore(e.caStore):e.caStore:a.pki.createCaStore();var n=e.cipherSuites||null;if(null===n)for(var r in n=[],p.CipherSuites)n.push(p.CipherSuites[r]);var i=e.server||!1?p.ConnectionEnd.server:p.ConnectionEnd.client,s=e.sessionCache?p.createSessionCache(e.sessionCache):null,o={version:{major:p.Version.major,minor:p.Version.minor},entity:i,sessionId:e.sessionId,caStore:t,sessionCache:s,cipherSuites:n,connected:e.connected,virtualHost:e.virtualHost||null,verifyClient:e.verifyClient||!1,verify:e.verify||function(e,t){return t},verifyOptions:e.verifyOptions||{},getCertificate:e.getCertificate||null,getPrivateKey:e.getPrivateKey||null,getSignature:e.getSignature||null,input:a.util.createBuffer(),tlsData:a.util.createBuffer(),data:a.util.createBuffer(),tlsDataReady:e.tlsDataReady,dataReady:e.dataReady,heartbeatReceived:e.heartbeatReceived,closed:e.closed,error:function(t,n){n.origin=n.origin||(t.entity===p.ConnectionEnd.client?'client':'server'),n.send&&(p.queue(t,p.createAlert(t,n.alert)),p.flush(t));var a=!1!==n.fatal;a&&(t.fail=!0),e.error(t,n),a&&t.close(!1)},deflate:e.deflate||null,inflate:e.inflate||null};o.reset=function(e){o.version={major:p.Version.major,minor:p.Version.minor},o.record=null,o.session=null,o.peerCertificate=null,o.state={pending:null,current:null},o.expect=o.entity===p.ConnectionEnd.client?0:0,o.fragmented=null,o.records=[],o.open=!1,o.handshakes=0,o.handshaking=!1,o.isConnected=!1,o.fail=!(e||'undefined'==typeof e),o.input.clear(),o.tlsData.clear(),o.data.clear(),o.state.current=p.createConnectionState(o)},o.reset();var l=function(e,t){var n=t.type-p.ContentType.change_cipher_spec,a=L[e.entity][e.expect];n in a?a[n](e,t):p.handleUnexpected(e,t)},d=function(e){var t=0,n=e.input,r=n.length();if(5>r)t=5-r;else{e.record={type:n.getByte(),version:{major:n.getByte(),minor:n.getByte()},length:n.getInt16(),fragment:a.util.createBuffer(),ready:!1};var i=e.record.version.major===e.version.major;i&&e.session&&e.session.version&&(i=e.record.version.minor===e.version.minor),i||e.error(e,{message:'Incompatible TLS version.',send:!0,alert:{level:p.Alert.Level.fatal,description:p.Alert.Description.protocol_version}})}return t},c=function(e){var t=0,n=e.input,a=n.length();if(a<e.record.length)t=e.record.length-a;else{e.record.fragment.putBytes(n.getBytes(e.record.length)),n.compact();var r=e.state.current.read;r.update(e,e.record)&&(null!==e.fragmented&&(e.fragmented.type===e.record.type?(e.fragmented.fragment.putBuffer(e.record.fragment),e.record=e.fragmented):e.error(e,{message:'Invalid fragmented record.',send:!0,alert:{level:p.Alert.Level.fatal,description:p.Alert.Description.unexpected_message}})),e.record.ready=!0)}return t};return o.handshake=function(e){if(o.entity!==p.ConnectionEnd.client)o.error(o,{message:'Cannot initiate handshake as a server.',fatal:!1});else if(o.handshaking)o.error(o,{message:'Handshake already in progress.',fatal:!1});else{o.fail&&!o.open&&0===o.handshakes&&(o.fail=!1),o.handshaking=!0,e=e||'';var t=null;0<e.length&&(o.sessionCache&&(t=o.sessionCache.getSession(e)),null===t&&(e='')),0===e.length&&o.sessionCache&&(t=o.sessionCache.getSession(),null!==t&&(e=t.id)),o.session={id:e,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:a.md.md5.create(),sha1:a.md.sha1.create()},t&&(o.version=t.version,o.session.sp=t.sp),o.session.sp.client_random=p.createRandom().getBytes(),o.open=!0,p.queue(o,p.createRecord(o,{type:p.ContentType.handshake,data:p.createClientHello(o)})),p.flush(o)}},o.process=function(e){var t=0;return e&&o.input.putBytes(e),o.fail||(null!==o.record&&o.record.ready&&o.record.fragment.isEmpty()&&(o.record=null),null===o.record&&(t=d(o)),!o.fail&&null!==o.record&&!o.record.ready&&(t=c(o)),!o.fail&&null!==o.record&&o.record.ready&&l(o,o.record)),t},o.prepare=function(e){return p.queue(o,p.createRecord(o,{type:p.ContentType.application_data,data:a.util.createBuffer(e)})),p.flush(o)},o.prepareHeartbeatRequest=function(e,t){return e instanceof a.util.ByteBuffer&&(e=e.bytes()),'undefined'==typeof t&&(t=e.length),o.expectedHeartbeatPayload=e,p.queue(o,p.createRecord(o,{type:p.ContentType.heartbeat,data:p.createHeartbeat(p.HeartbeatMessageType.heartbeat_request,e,t)})),p.flush(o)},o.close=function(e){if(!o.fail&&o.sessionCache&&o.session){var t={id:o.session.id,version:o.session.version,sp:o.session.sp};t.sp.keys=null,o.sessionCache.setSession(t.id,t)}o.open&&(o.open=!1,o.input.clear(),(o.isConnected||o.handshaking)&&(o.isConnected=o.handshaking=!1,p.queue(o,p.createAlert(o,{level:p.Alert.Level.warning,description:p.Alert.Description.close_notify})),p.flush(o)),o.closed(o)),o.reset(e)},o},e.exports=a.tls=a.tls||{},p)'function'!=typeof p[G]&&(a.tls[G]=p[G]);a.tls.prf_tls1=r,a.tls.hmac_sha1=function(e,t,n){var r=a.hmac.create();r.start('SHA1',e);var i=a.util.createBuffer();return i.putInt32(t[0]),i.putInt32(t[1]),i.putByte(n.type),i.putByte(n.version.major),i.putByte(n.version.minor),i.putInt16(n.length),i.putBytes(n.fragment.bytes()),r.update(i.getBytes()),r.digest().getBytes()},a.tls.createSessionCache=p.createSessionCache,a.tls.createConnection=p.createConnection},function(e,t,n){var a=n(0);n(7),n(12),n(50),n(13),n(34),n(56),n(37),n(22),n(1),n(36);var r=a.asn1,i=e.exports=a.pki=a.pki||{};i.pemToDer=function(e){var t=a.pem.decode(e)[0];if(t.procType&&'ENCRYPTED'===t.procType.type)throw new Error('Could not convert PEM to DER; PEM is encrypted.');return a.util.createBuffer(t.body)},i.privateKeyFromPem=function(e){var t=a.pem.decode(e)[0];if('PRIVATE KEY'!==t.type&&'RSA PRIVATE KEY'!==t.type){var n=new Error('Could not convert private key from PEM; PEM header type is not \"PRIVATE KEY\" or \"RSA PRIVATE KEY\".');throw n.headerType=t.type,n}if(t.procType&&'ENCRYPTED'===t.procType.type)throw new Error('Could not convert private key from PEM; PEM is encrypted.');var s=r.fromDer(t.body);return i.privateKeyFromAsn1(s)},i.privateKeyToPem=function(e,t){var n={type:'RSA PRIVATE KEY',body:r.toDer(i.privateKeyToAsn1(e)).getBytes()};return a.pem.encode(n,{maxline:t})},i.privateKeyInfoToPem=function(e,t){var n={type:'PRIVATE KEY',body:r.toDer(e).getBytes()};return a.pem.encode(n,{maxline:t})}},function(e,t,n){function a(e,t){return e.start().update(t).digest().getBytes()}function r(e){var t;if(!e)t='hmacWithSHA1';else if(t=p.oids[c.derToOid(e)],!t){var n=new Error('Unsupported PRF OID.');throw n.oid=e,n.supported=['hmacWithSHA1','hmacWithSHA224','hmacWithSHA256','hmacWithSHA384','hmacWithSHA512'],n}return i(t)}function i(e){var t=o.md;switch(e){case'hmacWithSHA224':t=o.md.sha512;case'hmacWithSHA1':case'hmacWithSHA256':case'hmacWithSHA384':case'hmacWithSHA512':e=e.substr(8).toLowerCase();break;default:var n=new Error('Unsupported PRF algorithm.');throw n.algorithm=e,n.supported=['hmacWithSHA1','hmacWithSHA224','hmacWithSHA256','hmacWithSHA384','hmacWithSHA512'],n;}if(!t||!(e in t))throw new Error('Unknown hash algorithm: '+e);return t[e].create()}function s(e,t,n,a){var r=c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.OCTETSTRING,!1,e),c.create(c.Class.UNIVERSAL,c.Type.INTEGER,!1,t.getBytes())]);return'hmacWithSHA1'!==a&&r.value.push(c.create(c.Class.UNIVERSAL,c.Type.INTEGER,!1,o.util.hexToBytes(n.toString(16))),c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.OID,!1,c.oidToDer(p.oids[a]).getBytes()),c.create(c.Class.UNIVERSAL,c.Type.NULL,!1,'')])),r}var o=n(0);if(n(11),n(7),n(21),n(8),n(12),n(34),n(13),n(5),n(53),n(22),n(1),'undefined'==typeof l)var l=o.jsbn.BigInteger;var c=o.asn1,p=o.pki=o.pki||{};e.exports=p.pbe=o.pbe=o.pbe||{};var u=p.oids,g={name:'EncryptedPrivateKeyInfo',tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,value:[{name:'EncryptedPrivateKeyInfo.encryptionAlgorithm',tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,value:[{name:'AlgorithmIdentifier.algorithm',tagClass:c.Class.UNIVERSAL,type:c.Type.OID,constructed:!1,capture:'encryptionOid'},{name:'AlgorithmIdentifier.parameters',tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,captureAsn1:'encryptionParams'}]},{name:'EncryptedPrivateKeyInfo.encryptedData',tagClass:c.Class.UNIVERSAL,type:c.Type.OCTETSTRING,constructed:!1,capture:'encryptedData'}]},h={name:'PBES2Algorithms',tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,value:[{name:'PBES2Algorithms.keyDerivationFunc',tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,value:[{name:'PBES2Algorithms.keyDerivationFunc.oid',tagClass:c.Class.UNIVERSAL,type:c.Type.OID,constructed:!1,capture:'kdfOid'},{name:'PBES2Algorithms.params',tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,value:[{name:'PBES2Algorithms.params.salt',tagClass:c.Class.UNIVERSAL,type:c.Type.OCTETSTRING,constructed:!1,capture:'kdfSalt'},{name:'PBES2Algorithms.params.iterationCount',tagClass:c.Class.UNIVERSAL,type:c.Type.INTEGER,constructed:!1,capture:'kdfIterationCount'},{name:'PBES2Algorithms.params.keyLength',tagClass:c.Class.UNIVERSAL,type:c.Type.INTEGER,constructed:!1,optional:!0,capture:'keyLength'},{name:'PBES2Algorithms.params.prf',tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:'PBES2Algorithms.params.prf.algorithm',tagClass:c.Class.UNIVERSAL,type:c.Type.OID,constructed:!1,capture:'prfOid'}]}]}]},{name:'PBES2Algorithms.encryptionScheme',tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,value:[{name:'PBES2Algorithms.encryptionScheme.oid',tagClass:c.Class.UNIVERSAL,type:c.Type.OID,constructed:!1,capture:'encOid'},{name:'PBES2Algorithms.encryptionScheme.iv',tagClass:c.Class.UNIVERSAL,type:c.Type.OCTETSTRING,constructed:!1,capture:'encIv'}]}]},y={name:'pkcs-12PbeParams',tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,value:[{name:'pkcs-12PbeParams.salt',tagClass:c.Class.UNIVERSAL,type:c.Type.OCTETSTRING,constructed:!1,capture:'salt'},{name:'pkcs-12PbeParams.iterations',tagClass:c.Class.UNIVERSAL,type:c.Type.INTEGER,constructed:!1,capture:'iterations'}]};p.encryptPrivateKeyInfo=function(e,t,n){n=n||{},n.saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||'aes128',n.prfAlgorithm=n.prfAlgorithm||'sha1';var a=o.random.getBytesSync(n.saltSize),r=n.count,l=c.integerToDer(r),d,g,h;if(0===n.algorithm.indexOf('aes')||'des'===n.algorithm){var y,f,m;switch(n.algorithm){case'aes128':d=16,y=16,f=u['aes128-CBC'],m=o.aes.createEncryptionCipher;break;case'aes192':d=24,y=16,f=u['aes192-CBC'],m=o.aes.createEncryptionCipher;break;case'aes256':d=32,y=16,f=u['aes256-CBC'],m=o.aes.createEncryptionCipher;break;case'des':d=8,y=8,f=u.desCBC,m=o.des.createEncryptionCipher;break;default:var E=new Error('Cannot encrypt private key. Unknown encryption algorithm.');throw E.algorithm=n.algorithm,E;}var C='hmacWith'+n.prfAlgorithm.toUpperCase(),v=i(C),b=o.pkcs5.pbkdf2(t,a,r,d,v),S=o.random.getBytesSync(y),T=m(b);T.start(S),T.update(c.toDer(e)),T.finish(),h=T.output.getBytes();var I=s(a,l,d,C);g=c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.OID,!1,c.oidToDer(u.pkcs5PBES2).getBytes()),c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.OID,!1,c.oidToDer(u.pkcs5PBKDF2).getBytes()),I]),c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.OID,!1,c.oidToDer(f).getBytes()),c.create(c.Class.UNIVERSAL,c.Type.OCTETSTRING,!1,S)])])])}else if('3des'===n.algorithm){d=24;var A=new o.util.ByteBuffer(a),b=p.pbe.generatePkcs12Key(t,A,1,r,d),S=p.pbe.generatePkcs12Key(t,A,2,r,d),T=o.des.createEncryptionCipher(b);T.start(S),T.update(c.toDer(e)),T.finish(),h=T.output.getBytes(),g=c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.OID,!1,c.oidToDer(u['pbeWithSHAAnd3-KeyTripleDES-CBC']).getBytes()),c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.OCTETSTRING,!1,a),c.create(c.Class.UNIVERSAL,c.Type.INTEGER,!1,l.getBytes())])])}else{var E=new Error('Cannot encrypt private key. Unknown encryption algorithm.');throw E.algorithm=n.algorithm,E}var _=c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[g,c.create(c.Class.UNIVERSAL,c.Type.OCTETSTRING,!1,h)]);return _},p.decryptPrivateKeyInfo=function(e,t){var n=null,a={},r=[];if(!c.validate(e,g,a,r)){var i=new Error('Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.');throw i.errors=r,i}var s=c.derToOid(a.encryptionOid),l=p.pbe.getCipher(s,a.encryptionParams,t),d=o.util.createBuffer(a.encryptedData);return l.update(d),l.finish()&&(n=c.fromDer(l.output)),n},p.encryptedPrivateKeyToPem=function(e,t){var n={type:'ENCRYPTED PRIVATE KEY',body:c.toDer(e).getBytes()};return o.pem.encode(n,{maxline:t})},p.encryptedPrivateKeyFromPem=function(e){var t=o.pem.decode(e)[0];if('ENCRYPTED PRIVATE KEY'!==t.type){var n=new Error('Could not convert encrypted private key from PEM; PEM header type is \"ENCRYPTED PRIVATE KEY\".');throw n.headerType=t.type,n}if(t.procType&&'ENCRYPTED'===t.procType.type)throw new Error('Could not convert encrypted private key from PEM; PEM is encrypted.');return c.fromDer(t.body)},p.encryptRsaPrivateKey=function(e,t,n){if(n=n||{},!n.legacy){var a=p.wrapRsaPrivateKey(p.privateKeyToAsn1(e));return a=p.encryptPrivateKeyInfo(a,t,n),p.encryptedPrivateKeyToPem(a)}var r,i,s,l;switch(n.algorithm){case'aes128':r='AES-128-CBC',s=16,i=o.random.getBytesSync(16),l=o.aes.createEncryptionCipher;break;case'aes192':r='AES-192-CBC',s=24,i=o.random.getBytesSync(16),l=o.aes.createEncryptionCipher;break;case'aes256':r='AES-256-CBC',s=32,i=o.random.getBytesSync(16),l=o.aes.createEncryptionCipher;break;case'3des':r='DES-EDE3-CBC',s=24,i=o.random.getBytesSync(8),l=o.des.createEncryptionCipher;break;case'des':r='DES-CBC',s=8,i=o.random.getBytesSync(8),l=o.des.createEncryptionCipher;break;default:var d=new Error('Could not encrypt RSA private key; unsupported encryption algorithm \"'+n.algorithm+'\".');throw d.algorithm=n.algorithm,d;}var u=o.pbe.opensslDeriveBytes(t,i.substr(0,8),s),g=l(u);g.start(i),g.update(c.toDer(p.privateKeyToAsn1(e))),g.finish();var h={type:'RSA PRIVATE KEY',procType:{version:'4',type:'ENCRYPTED'},dekInfo:{algorithm:r,parameters:o.util.bytesToHex(i).toUpperCase()},body:g.output.getBytes()};return o.pem.encode(h)},p.decryptRsaPrivateKey=function(e,t){var n=null,a=o.pem.decode(e)[0];if('ENCRYPTED PRIVATE KEY'!==a.type&&'PRIVATE KEY'!==a.type&&'RSA PRIVATE KEY'!==a.type){var r=new Error('Could not convert private key from PEM; PEM header type is not \"ENCRYPTED PRIVATE KEY\", \"PRIVATE KEY\", or \"RSA PRIVATE KEY\".');throw r.headerType=r,r}if(a.procType&&'ENCRYPTED'===a.procType.type){var i,s;switch(a.dekInfo.algorithm){case'DES-CBC':i=8,s=o.des.createDecryptionCipher;break;case'DES-EDE3-CBC':i=24,s=o.des.createDecryptionCipher;break;case'AES-128-CBC':i=16,s=o.aes.createDecryptionCipher;break;case'AES-192-CBC':i=24,s=o.aes.createDecryptionCipher;break;case'AES-256-CBC':i=32,s=o.aes.createDecryptionCipher;break;case'RC2-40-CBC':i=5,s=function(e){return o.rc2.createDecryptionCipher(e,40)};break;case'RC2-64-CBC':i=8,s=function(e){return o.rc2.createDecryptionCipher(e,64)};break;case'RC2-128-CBC':i=16,s=function(e){return o.rc2.createDecryptionCipher(e,128)};break;default:var r=new Error('Could not decrypt private key; unsupported encryption algorithm \"'+a.dekInfo.algorithm+'\".');throw r.algorithm=a.dekInfo.algorithm,r;}var l=o.util.hexToBytes(a.dekInfo.parameters),d=o.pbe.opensslDeriveBytes(t,l.substr(0,8),i),u=s(d);if(u.start(l),u.update(o.util.createBuffer(a.body)),u.finish())n=u.output.getBytes();else return n}else n=a.body;return n='ENCRYPTED PRIVATE KEY'===a.type?p.decryptPrivateKeyInfo(c.fromDer(n),t):c.fromDer(n),null!==n&&(n=p.privateKeyFromAsn1(n)),n},p.pbe.generatePkcs12Key=function(e,t,a,r,g,n){var h,y;if('undefined'==typeof n||null===n){if(!('sha1'in o.md))throw new Error('\"sha1\" hash algorithm unavailable.');n=o.md.sha1.create()}var l=n.digestLength,u=n.blockLength,f=new o.util.ByteBuffer,m=new o.util.ByteBuffer;if(null!==e&&void 0!==e){for(y=0;y<e.length;y++)m.putInt16(e.charCodeAt(y));m.putInt16(0)}var E=m.length(),p=t.length(),s=new o.util.ByteBuffer;s.fillWithByte(a,u);var C=u*d(p/u),v=new o.util.ByteBuffer;for(y=0;y<C;y++)v.putByte(t.at(y%p));var b=u*d(E/u),S=new o.util.ByteBuffer;for(y=0;y<b;y++)S.putByte(m.at(y%E));var T=v;T.putBuffer(S);for(var I=d(g/l),c=1,i;c<=I;c++){i=new o.util.ByteBuffer,i.putBytes(s.bytes()),i.putBytes(T.bytes());for(var A=0;A<r;A++)n.start(),n.update(i.getBytes()),i=n.digest();var _=new o.util.ByteBuffer;for(y=0;y<u;y++)_.putByte(i.at(y%l));var N=d(p/u)+d(E/u),k=new o.util.ByteBuffer;for(h=0;h<N;h++){var B=new o.util.ByteBuffer(T.getBytes(u)),R=511;for(y=_.length()-1;0<=y;y--)R>>=8,R+=_.at(y)+B.at(y),B.setAt(y,255&R);k.putBuffer(B)}T=k,f.putBuffer(i)}return f.truncate(f.length()-g),f},p.pbe.getCipher=function(e,t,n){switch(e){case p.oids.pkcs5PBES2:return p.pbe.getCipherForPBES2(e,t,n);case p.oids['pbeWithSHAAnd3-KeyTripleDES-CBC']:case p.oids['pbewithSHAAnd40BitRC2-CBC']:return p.pbe.getCipherForPKCS12PBE(e,t,n);default:var a=new Error('Cannot read encrypted PBE data block. Unsupported OID.');throw a.oid=e,a.supportedOids=['pkcs5PBES2','pbeWithSHAAnd3-KeyTripleDES-CBC','pbewithSHAAnd40BitRC2-CBC'],a;}},p.pbe.getCipherForPBES2=function(e,t,n){var a={},i=[];if(!c.validate(t,h,a,i)){var s=new Error('Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.');throw s.errors=i,s}if(e=c.derToOid(a.kdfOid),e!==p.oids.pkcs5PBKDF2){var s=new Error('Cannot read encrypted private key. Unsupported key derivation function OID.');throw s.oid=e,s.supportedOids=['pkcs5PBKDF2'],s}if(e=c.derToOid(a.encOid),e!==p.oids['aes128-CBC']&&e!==p.oids['aes192-CBC']&&e!==p.oids['aes256-CBC']&&e!==p.oids['des-EDE3-CBC']&&e!==p.oids.desCBC){var s=new Error('Cannot read encrypted private key. Unsupported encryption scheme OID.');throw s.oid=e,s.supportedOids=['aes128-CBC','aes192-CBC','aes256-CBC','des-EDE3-CBC','desCBC'],s}var l=a.kdfSalt,d=o.util.createBuffer(a.kdfIterationCount);d=d.getInt(d.length()<<3);var u,g;switch(p.oids[e]){case'aes128-CBC':u=16,g=o.aes.createDecryptionCipher;break;case'aes192-CBC':u=24,g=o.aes.createDecryptionCipher;break;case'aes256-CBC':u=32,g=o.aes.createDecryptionCipher;break;case'des-EDE3-CBC':u=24,g=o.des.createDecryptionCipher;break;case'desCBC':u=8,g=o.des.createDecryptionCipher;}var y=r(a.prfOid),f=o.pkcs5.pbkdf2(n,l,d,u,y),m=a.encIv,E=g(f);return E.start(m),E},p.pbe.getCipherForPKCS12PBE=function(e,t,n){var a={},i=[];if(!c.validate(t,y,a,i)){var s=new Error('Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.');throw s.errors=i,s}var l=o.util.createBuffer(a.salt),d=o.util.createBuffer(a.iterations);d=d.getInt(d.length()<<3);var u,g,h;switch(e){case p.oids['pbeWithSHAAnd3-KeyTripleDES-CBC']:u=24,g=8,h=o.des.startDecrypting;break;case p.oids['pbewithSHAAnd40BitRC2-CBC']:u=5,g=8,h=function(e,t){var n=o.rc2.createDecryptionCipher(e,40);return n.start(t,null),n};break;default:var s=new Error('Cannot read PKCS #12 PBE data block. Unsupported OID.');throw s.oid=e,s;}var f=r(a.prfOid),m=p.pbe.generatePkcs12Key(n,l,1,d,u,f);f.start();var E=p.pbe.generatePkcs12Key(n,l,2,d,g,f);return h(m,E)},p.pbe.opensslDeriveBytes=function(e,t,n,r){if('undefined'==typeof r||null===r){if(!('md5'in o.md))throw new Error('\"md5\" hash algorithm unavailable.');r=o.md.md5.create()}null===t&&(t='');for(var s=[a(r,e+t)],l=16,d=1;l<n;++d,l+=16)s.push(a(r,s[d-1]+e+t));return s.join('').substr(0,n)}},function(e,t,n){function a(){o='\\x80',o+=s.util.fillString('\\0',64),p=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],l=!0}function r(t,n,r){for(var s=r.length(),o,l,u,y,m,E,C,i,a,v,c,d,e,f,g;64<=s;){for(C=0;16>C;++C)n[C]=r.getInt32();for(;64>C;++C)o=n[C-2],o=(o>>>17|o<<15)^(o>>>19|o<<13)^o>>>10,l=n[C-15],l=(l>>>7|l<<25)^(l>>>18|l<<14)^l>>>3,n[C]=0|o+n[C-7]+l+n[C-16];for(i=t.h0,a=t.h1,v=t.h2,c=t.h3,d=t.h4,e=t.h5,f=t.h6,g=t.h7,C=0;64>C;++C)y=(d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7),m=f^d&(e^f),u=(i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10),E=i&a|v&(i^a),o=g+y+m+p[C]+n[C],l=u+E,g=f,f=e,e=d,d=c+o>>>0,c=v,v=a,a=i,i=o+l>>>0;t.h0=0|t.h0+i,t.h1=0|t.h1+a,t.h2=0|t.h2+v,t.h3=0|t.h3+c,t.h4=0|t.h4+d,t.h5=0|t.h5+e,t.h6=0|t.h6+f,t.h7=0|t.h7+g,s-=64}}var s=n(0);n(8),n(1);var i=e.exports=s.sha256=s.sha256||{};s.md.sha256=s.md.algorithms.sha256=i,i.create=function(){l||a();var e=null,t=s.util.createBuffer(),n=Array(64),d={algorithm:'sha256',blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return d.start=function(){d.messageLength=0,d.fullMessageLength=d.messageLength64=[];for(var n=d.messageLengthSize/4,a=0;a<n;++a)d.fullMessageLength.push(0);return t=s.util.createBuffer(),e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},d},d.start(),d.update=function(a,o){'utf8'===o&&(a=s.util.encodeUtf8(a));var l=a.length;d.messageLength+=l,l=[l/4294967296>>>0,l>>>0];for(var c=d.fullMessageLength.length-1;0<=c;--c)d.fullMessageLength[c]+=l[1],l[1]=l[0]+(d.fullMessageLength[c]/4294967296>>>0),d.fullMessageLength[c]>>>=0,l[0]=l[1]/4294967296>>>0;return t.putBytes(a),r(e,n,t),(2048<t.read||0===t.length())&&t.compact(),d},d.digest=function(){var a=s.util.createBuffer();a.putBytes(t.bytes());var l=d.fullMessageLength[d.fullMessageLength.length-1]+d.messageLengthSize,c=l&d.blockLength-1;a.putBytes(o.substr(0,d.blockLength-c));for(var p=8*d.fullMessageLength[0],u=0,i,g;u<d.fullMessageLength.length-1;++u)i=8*d.fullMessageLength[u+1],g=i/4294967296>>>0,p+=g,a.putInt32(p>>>0),p=i>>>0;a.putInt32(p);var h={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4,h5:e.h5,h6:e.h6,h7:e.h7};r(h,n,a);var y=s.util.createBuffer();return y.putInt32(h.h0),y.putInt32(h.h1),y.putInt32(h.h2),y.putInt32(h.h3),y.putInt32(h.h4),y.putInt32(h.h5),y.putInt32(h.h6),y.putInt32(h.h7),y},d};var o=null,l=!1,p=null},function(e,t,n){(function(t){var a=n(0);n(1);var r=null;!a.util.isNodejs||a.options.usePureJavaScript||t.versions['node-webkit']||(r=n(35));var i=e.exports=a.prng=a.prng||{};i.create=function(e){function t(e){if(32<=l.pools[0].messageLength)return s(),e();var t=32-l.pools[0].messageLength<<5;l.seedFile(t,function(t,n){return t?e(t):void(l.collect(n),s(),e())})}function n(){if(32<=l.pools[0].messageLength)return s();var e=32-l.pools[0].messageLength<<5;l.collect(l.seedFileSync(e)),s()}function s(){l.reseeds=4294967295===l.reseeds?0:l.reseeds+1;var e=l.plugin.md.create();e.update(l.keyBytes);for(var t=1,n=0;32>n;++n)0==l.reseeds%t&&(e.update(l.pools[n].digest().getBytes()),l.pools[n].start()),t<<=1;l.keyBytes=e.digest().getBytes(),e.start(),e.update(l.keyBytes);var a=e.digest().getBytes();l.key=l.plugin.formatKey(l.keyBytes),l.seed=l.plugin.formatSeed(a),l.generated=0}function o(e){var t=null,n=a.util.globalScope,r=n.crypto||n.msCrypto;r&&r.getRandomValues&&(t=function(e){return r.getRandomValues(e)});var s=a.util.createBuffer();if(t)for(;s.length()<e;){var o=c(1,g(e-s.length(),65536)/4),l=new Uint32Array(p(o));try{t(l);for(var d=0;d<l.length;++d)s.putInt32(l[d])}catch(t){if(!('undefined'!=typeof QuotaExceededError&&t instanceof QuotaExceededError))throw t}}if(s.length()<e)for(var i=p(65536*Math.random()),u,h,y;s.length()<e;){h=16807*(65535&i),u=16807*(i>>16),h+=(32767&u)<<16,h+=u>>15,h=(2147483647&h)+(h>>31),i=4294967295&h;for(var d=0;3>d;++d)y=i>>>(d<<3),y^=p(256*Math.random()),s.putByte(255&y)}return s.getBytes(e)}for(var l={plugin:e,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:''},d=e.md,u=Array(32),h=0;32>h;++h)u[h]=d.create();return l.pools=u,l.pool=0,l.generate=function(e,n){function r(p){if(p)return n(p);if(c.length()>=e)return n(null,c.getBytes(e));if(1048575<l.generated&&(l.key=null),null===l.key)return a.util.nextTick(function(){t(r)});var u=i(l.key,l.seed);l.generated+=u.length,c.putBytes(u),l.key=o(i(l.key,s(l.seed))),l.seed=d(i(l.key,l.seed)),a.util.setImmediate(r)}if(!n)return l.generateSync(e);var i=l.plugin.cipher,s=l.plugin.increment,o=l.plugin.formatKey,d=l.plugin.formatSeed,c=a.util.createBuffer();l.key=null,r()},l.generateSync=function(e){var t=l.plugin.cipher,r=l.plugin.increment,i=l.plugin.formatKey,s=l.plugin.formatSeed;l.key=null;for(var o=a.util.createBuffer();o.length()<e;){1048575<l.generated&&(l.key=null),null===l.key&&n();var d=t(l.key,l.seed);l.generated+=d.length,o.putBytes(d),l.key=i(t(l.key,r(l.seed))),l.seed=s(t(l.key,l.seed))}return o.getBytes(e)},r?(l.seedFile=function(e,t){r.randomBytes(e,function(e,n){return e?t(e):void t(null,n.toString())})},l.seedFileSync=function(e){return r.randomBytes(e).toString()}):(l.seedFile=function(e,t){try{t(null,o(e))}catch(n){t(n)}},l.seedFileSync=o),l.collect=function(e){for(var t=e.length,n=0;n<t;++n)l.pools[l.pool].update(e.substr(n,1)),l.pool=31===l.pool?0:l.pool+1},l.collectInt=function(e,t){for(var n='',a=0;a<t;a+=8)n+=y(255&e>>a);l.collect(n)},l.registerWorker=function(e){if(e===self)l.seedFile=function(e,t){function n(a){var e=a.data;e.forge&&e.forge.prng&&(self.removeEventListener('message',n),t(e.forge.prng.err,e.forge.prng.bytes))}self.addEventListener('message',n),self.postMessage({forge:{prng:{needed:e}}})};else{var t=function(t){var n=t.data;n.forge&&n.forge.prng&&l.seedFile(n.forge.prng.needed,function(t,n){e.postMessage({forge:{prng:{err:t,bytes:n}}})})};e.addEventListener('message',t)}},l}}).call(t,n(32))},function(e,t,n){var a=n(0);n(1);var r=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],o=[1,2,3,5],s=function(e,t){return 65535&e<<t|(65535&e)>>16-t},l=function(e,t){return(65535&e)>>t|65535&e<<16-t};e.exports=a.rc2=a.rc2||{},a.rc2.expandKey=function(e,t){'string'==typeof e&&(e=a.util.createBuffer(e)),t=t||128;var n=e,s=e.length(),o=t,l=d(o/8),c;for(c=s;128>c;c++)n.putByte(r[255&n.at(c-1)+n.at(c-s)]);for(n.setAt(128-l,r[n.at(128-l)&255>>(7&o)]),c=127-l;0<=c;c--)n.setAt(c,r[n.at(c+1)^n.at(c+l)]);return n};var i=function(e,t,n){var r=!1,d=null,c=null,p=null,u=[],g,h,y,i;for(e=a.rc2.expandKey(e,t),y=0;64>y;y++)u.push(e.getInt16Le());n?(g=function(e){for(y=0;4>y;y++)e[y]+=u[i]+(e[(y+3)%4]&e[(y+2)%4])+(~e[(y+3)%4]&e[(y+1)%4]),e[y]=s(e[y],o[y]),i++},h=function(e){for(y=0;4>y;y++)e[y]+=u[63&e[(y+3)%4]]}):(g=function(e){for(y=3;0<=y;y--)e[y]=l(e[y],o[y]),e[y]-=u[i]+(e[(y+3)%4]&e[(y+2)%4])+(~e[(y+3)%4]&e[(y+1)%4]),i--},h=function(e){for(y=3;0<=y;y--)e[y]-=u[63&e[(y+3)%4]]});var f=function(e){var t=[];for(y=0;4>y;y++){var a=d.getInt16Le();null!=p&&(n?a^=p.getInt16Le():p.putInt16Le(a)),t.push(65535&a)}i=n?0:63;for(var r=0;r<e.length;r++)for(var s=0;s<e[r][0];s++)e[r][1](t);for(y=0;4>y;y++)null!=p&&(n?p.putInt16Le(t[y]):t[y]^=p.getInt16Le()),c.putInt16Le(t[y])},m=null;return m={start:function(e,t){e&&'string'==typeof e&&(e=a.util.createBuffer(e)),r=!1,d=a.util.createBuffer(),c=t||new a.util.createBuffer,p=e,m.output=c},update:function(e){for(r||d.putBuffer(e);8<=d.length();)f([[5,g],[1,h],[6,g],[1,h],[5,g]])},finish:function(e){var t=!0;if(n)if(e)t=e(8,d,!n);else{var a=8===d.length()?8:8-d.length();d.fillWithByte(a,a)}if(t&&(r=!0,m.update()),!n&&(t=0===d.length(),t))if(e)t=e(8,c,!n);else{var i=c.length(),s=c.at(i-1);s>i?t=!1:c.truncate(s)}return t}},m};a.rc2.startEncrypting=function(e,t,n){var r=a.rc2.createEncryptionCipher(e,128);return r.start(t,n),r},a.rc2.createEncryptionCipher=function(e,t){return i(e,t,!0)},a.rc2.startDecrypting=function(e,t,n){var r=a.rc2.createDecryptionCipher(e,128);return r.start(t,n),r},a.rc2.createDecryptionCipher=function(e,t){return i(e,t,!1)}},function(e,t,n){function a(e,n,a){a||(a=r.md.sha1.create());for(var s='',t=d(n/a.digestLength),o=0,i;o<t;++o)i=y(255&o>>24,255&o>>16,255&o>>8,255&o),a.start(),a.update(e+i),s+=a.digest().getBytes();return s.substring(0,n)}var r=n(0);n(1),n(5),n(15);var i=e.exports=r.pkcs1=r.pkcs1||{};i.encode_rsa_oaep=function(e,t,n){var s,o,l,c;'string'==typeof n?(s=n,o=arguments[3]||void 0,l=arguments[4]||void 0):n&&(s=n.label||void 0,o=n.seed||void 0,l=n.md||void 0,n.mgf1&&n.mgf1.md&&(c=n.mgf1.md)),l?l.start():l=r.md.sha1.create(),c||(c=l);var p=d(e.n.bitLength()/8),u=p-2*l.digestLength-2;if(t.length>u){var g=new Error('RSAES-OAEP input message length is too long.');throw g.length=t.length,g.maxLength=u,g}s||(s=''),l.update(s,'raw');for(var h=l.digest(),y='',f=u-t.length,m=0;m<f;m++)y+='\\0';var i=h.getBytes()+y+'\\x01'+t;if(!o)o=r.random.getBytes(l.digestLength);else if(o.length!==l.digestLength){var g=new Error('Invalid RSAES-OAEP seed. The seed length must match the digest length.');throw g.seedLength=o.length,g.digestLength=l.digestLength,g}var E=a(o,p-l.digestLength-1,c),C=r.util.xorBytes(i,E,i.length),v=a(C,l.digestLength,c),b=r.util.xorBytes(o,v,o.length);return'\\0'+b+C},i.decode_rsa_oaep=function(e,t,n){var s,o,l;'string'==typeof n?(s=n,o=arguments[3]||void 0):n&&(s=n.label||void 0,o=n.md||void 0,n.mgf1&&n.mgf1.md&&(l=n.mgf1.md));var c=d(e.n.bitLength()/8);if(t.length!==c){var p=new Error('RSAES-OAEP encoded message length is invalid.');throw p.length=t.length,p.expectedLength=c,p}if(void 0===o?o=r.md.sha1.create():o.start(),l||(l=o),c<2*o.digestLength+2)throw new Error('RSAES-OAEP key is too short for the hash function.');s||(s=''),o.update(s,'raw');for(var u=o.digest().getBytes(),g=t.charAt(0),h=t.substring(1,o.digestLength+1),y=t.substring(1+o.digestLength),f=a(y,o.digestLength,l),m=r.util.xorBytes(h,f,h.length),E=a(m,c-o.digestLength-1,l),C=r.util.xorBytes(y,E,y.length),v=C.substring(0,o.digestLength),p='\\0'!==g,b=0;b<o.digestLength;++b)p|=u.charAt(b)!==v.charAt(b);for(var i=1,S=o.digestLength,T=o.digestLength;T<C.length;T++){var I=C.charCodeAt(T),A=i?65534:0;p|=I&A,i&=1^1&I,S+=i}if(p||1!==C.charCodeAt(S))throw new Error('Invalid RSAES-OAEP padding.');return C.substring(S+1)}},function(e,t,n){var a=n(0);n(1),n(23),n(5),function(){function t(e,t,a,r){return'workers'in a?i(e,t,a,r):n(e,t,a,r)}function n(e,t,n,a){var i=s(e,t),l=o(i.bitLength());'millerRabinTests'in n&&(l=n.millerRabinTests);var d=10;'maxBlockTime'in n&&(d=n.maxBlockTime),r(i,e,t,0,l,d,a)}function r(e,t,n,i,o,l,d){var c=+new Date;do{if(e.bitLength()>t&&(e=s(t,n)),e.isProbablePrime(o))return d(null,e);e.dAddOffset(p[i++%8],0)}while(0>l||+new Date-c<l);a.util.setImmediate(function(){r(e,t,n,i,o,l,d)})}function i(t,r,e,o){function i(){function e(a){if(!f){--y;var e=a.data;if(e.found){for(var c=0;c<n.length;++c)n[c].terminate();return f=!0,o(null,new d(e.prime,16))}l.bitLength()>t&&(l=s(t,r));var i=l.toString(16);a.target.postMessage({hex:i,workLoad:u}),l.dAddOffset(g,0)}}p=c(1,p);for(var n=[],a=0;a<p;++a)n[a]=new Worker(h);for(var y=p,a=0;a<p;++a)n[a].addEventListener('message',e);var f=!1}if('undefined'==typeof Worker)return n(t,r,e,o);var l=s(t,r),p=e.workers,u=e.workLoad||100,g=30*u/8,h=e.workerScript||'forge/prime.worker.js';return-1===p?a.util.estimateCores(function(e,t){e&&(t=2),p=t-1,i()}):void i()}function s(e,t){var n=new d(e,t),a=e-1;return n.testBit(a)||n.bitwiseTo(d.ONE.shiftLeft(a),g,n),n.dAddOffset(31-n.mod(u).byteValue(),0),n}function o(e){return 100>=e?27:150>=e?18:200>=e?15:250>=e?12:300>=e?9:350>=e?8:400>=e?7:500>=e?6:600>=e?5:800>=e?4:1250>=e?3:2}if(a.prime)return void(e.exports=a.prime);var l=e.exports=a.prime=a.prime||{},d=a.jsbn.BigInteger,p=[6,4,2,4,2,4,6,2],u=new d(null);u.fromInt(30);var g=function(e,t){return e|t};l.generateProbablePrime=function(e,n,r){'function'==typeof n&&(r=n,n={}),n=n||{};var i=n.algorithm||'PRIMEINC';'string'==typeof i&&(i={name:i}),i.options=i.options||{};var s=n.prng||a.random;if('PRIMEINC'===i.name)return t(e,{nextBytes:function(e){for(var t=s.getBytesSync(e.length),n=0;n<e.length;++n)e[n]=t.charCodeAt(n)}},i.options,r);throw new Error('Invalid prime generation algorithm: '+i.name)}}()},function(e,t,n){function a(e,t,n,a){for(var r=[],s=0;s<e.length;s++)for(var i=0,o;i<e[s].safeBags.length;i++)if(o=e[s].safeBags[i],void 0===a||o.type===a){if(null===t){r.push(o);continue}void 0!==o.attributes[t]&&0<=o.attributes[t].indexOf(n)&&r.push(o)}return r}function r(e){if(e.composed||e.constructed){for(var t=d.util.createBuffer(),n=0;n<e.value.length;++n)t.putBytes(e.value[n].value);e.composed=e.constructed=!1,e.value=t.getBytes()}return e}function i(e,t,n,a){if(t=c.fromDer(t,n),t.tagClass!==c.Class.UNIVERSAL||t.type!==c.Type.SEQUENCE||!0!==t.constructed)throw new Error('PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo');for(var l=0;l<t.value.length;l++){var i=t.value[l],d={},u=[];if(!c.validate(i,g,d,u)){var h=new Error('Cannot read ContentInfo.');throw h.errors=u,h}var y={encrypted:!1},f=null,m=d.content.value[0];switch(c.derToOid(d.contentType)){case p.oids.data:if(m.tagClass!==c.Class.UNIVERSAL||m.type!==c.Type.OCTETSTRING)throw new Error('PKCS#12 SafeContents Data is not an OCTET STRING.');f=r(m).value;break;case p.oids.encryptedData:f=s(m,a),y.encrypted=!0;break;default:var h=new Error('Unsupported PKCS#12 contentType.');throw h.contentType=c.derToOid(d.contentType),h;}y.safeBags=o(f,n,a),e.safeContents.push(y)}}function s(e,t){var n={},a=[];if(!c.validate(e,d.pkcs7.asn1.encryptedDataValidator,n,a)){var i=new Error('Cannot read EncryptedContentInfo.');throw i.errors=a,i}var s=c.derToOid(n.contentType);if(s!==p.oids.data){var i=new Error('PKCS#12 EncryptedContentInfo ContentType is not Data.');throw i.oid=s,i}s=c.derToOid(n.encAlgorithm);var o=p.pbe.getCipher(s,n.encParameter,t),l=r(n.encryptedContentAsn1),u=d.util.createBuffer(l.value);if(o.update(u),!o.finish())throw new Error('Failed to decrypt PKCS#12 SafeContents.');return o.output.getBytes()}function o(e,t,n){if(!t&&0===e.length)return[];if(e=c.fromDer(e,t),e.tagClass!==c.Class.UNIVERSAL||e.type!==c.Type.SEQUENCE||!0!==e.constructed)throw new Error('PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.');for(var a=[],r=0;r<e.value.length;r++){var i=e.value[r],s={},o=[];if(!c.validate(i,y,s,o)){var d=new Error('Cannot read SafeBag.');throw d.errors=o,d}var u={type:c.derToOid(s.bagId),attributes:l(s.bagAttributes)};a.push(u);var g=s.bagValue.value[0],h,f;switch(u.type){case p.oids.pkcs8ShroudedKeyBag:if(g=p.decryptPrivateKeyInfo(g,n),null===g)throw new Error('Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?');case p.oids.keyBag:try{u.key=p.privateKeyFromAsn1(g)}catch(t){u.key=null,u.asn1=g}continue;case p.oids.certBag:h=m,f=function(){if(c.derToOid(s.certId)!==p.oids.x509Certificate){var e=new Error('Unsupported certificate type, only X.509 supported.');throw e.oid=c.derToOid(s.certId),e}var n=c.fromDer(s.cert,t);try{u.cert=p.certificateFromAsn1(n,!0)}catch(t){u.cert=null,u.asn1=n}};break;default:var d=new Error('Unsupported PKCS#12 SafeBag type.');throw d.oid=u.type,d;}if(void 0!==h&&!c.validate(g,h,s,o)){var d=new Error('Cannot read PKCS#12 '+h.name);throw d.errors=o,d}f()}return a}function l(e){var t={};if(e!==void 0)for(var n=0;n<e.length;++n){var a={},r=[];if(!c.validate(e[n],f,a,r)){var i=new Error('Cannot read PKCS#12 BagAttribute.');throw i.errors=r,i}var s=c.derToOid(a.oid);if(void 0!==p.oids[s]){t[p.oids[s]]=[];for(var o=0;o<a.values.length;++o)t[p.oids[s]].push(a.values[o].value)}}return t}var d=n(0);n(7),n(14),n(12),n(57),n(50),n(5),n(22),n(15),n(1),n(36);var c=d.asn1,p=d.pki,u=e.exports=d.pkcs12=d.pkcs12||{},g={name:'ContentInfo',tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,value:[{name:'ContentInfo.contentType',tagClass:c.Class.UNIVERSAL,type:c.Type.OID,constructed:!1,capture:'contentType'},{name:'ContentInfo.content',tagClass:c.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:'content'}]},h={name:'PFX',tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,value:[{name:'PFX.version',tagClass:c.Class.UNIVERSAL,type:c.Type.INTEGER,constructed:!1,capture:'version'},g,{name:'PFX.macData',tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:'mac',value:[{name:'PFX.macData.mac',tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,value:[{name:'PFX.macData.mac.digestAlgorithm',tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,value:[{name:'PFX.macData.mac.digestAlgorithm.algorithm',tagClass:c.Class.UNIVERSAL,type:c.Type.OID,constructed:!1,capture:'macAlgorithm'},{name:'PFX.macData.mac.digestAlgorithm.parameters',tagClass:c.Class.UNIVERSAL,captureAsn1:'macAlgorithmParameters'}]},{name:'PFX.macData.mac.digest',tagClass:c.Class.UNIVERSAL,type:c.Type.OCTETSTRING,constructed:!1,capture:'macDigest'}]},{name:'PFX.macData.macSalt',tagClass:c.Class.UNIVERSAL,type:c.Type.OCTETSTRING,constructed:!1,capture:'macSalt'},{name:'PFX.macData.iterations',tagClass:c.Class.UNIVERSAL,type:c.Type.INTEGER,constructed:!1,optional:!0,capture:'macIterations'}]}]},y={name:'SafeBag',tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,value:[{name:'SafeBag.bagId',tagClass:c.Class.UNIVERSAL,type:c.Type.OID,constructed:!1,capture:'bagId'},{name:'SafeBag.bagValue',tagClass:c.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:'bagValue'},{name:'SafeBag.bagAttributes',tagClass:c.Class.UNIVERSAL,type:c.Type.SET,constructed:!0,optional:!0,capture:'bagAttributes'}]},f={name:'Attribute',tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,value:[{name:'Attribute.attrId',tagClass:c.Class.UNIVERSAL,type:c.Type.OID,constructed:!1,capture:'oid'},{name:'Attribute.attrValues',tagClass:c.Class.UNIVERSAL,type:c.Type.SET,constructed:!0,capture:'values'}]},m={name:'CertBag',tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,value:[{name:'CertBag.certId',tagClass:c.Class.UNIVERSAL,type:c.Type.OID,constructed:!1,capture:'certId'},{name:'CertBag.certValue',tagClass:c.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:'CertBag.certValue[0]',tagClass:c.Class.UNIVERSAL,type:c.Class.OCTETSTRING,constructed:!1,capture:'cert'}]}]};u.pkcs12FromAsn1=function(e,t,n){'string'==typeof t?(n=t,t=!0):void 0===t&&(t=!0);var s={};if(!c.validate(e,h,s,[])){var o=new Error('Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.');throw o.errors=o,o}var l={version:s.version.charCodeAt(0),safeContents:[],getBags:function(e){var t={},n;return'localKeyId'in e?n=e.localKeyId:'localKeyIdHex'in e&&(n=d.util.hexToBytes(e.localKeyIdHex)),void 0===n&&!('friendlyName'in e)&&'bagType'in e&&(t[e.bagType]=a(l.safeContents,null,null,e.bagType)),void 0!==n&&(t.localKeyId=a(l.safeContents,'localKeyId',n,e.bagType)),'friendlyName'in e&&(t.friendlyName=a(l.safeContents,'friendlyName',e.friendlyName,e.bagType)),t},getBagsByFriendlyName:function(e,t){return a(l.safeContents,'friendlyName',e,t)},getBagsByLocalKeyId:function(e,t){return a(l.safeContents,'localKeyId',e,t)}};if(3!==s.version.charCodeAt(0)){var o=new Error('PKCS#12 PFX of version other than 3 not supported.');throw o.version=s.version.charCodeAt(0),o}if(c.derToOid(s.contentType)!==p.oids.data){var o=new Error('Only PKCS#12 PFX in password integrity mode supported.');throw o.oid=c.derToOid(s.contentType),o}var g=s.content.value[0];if(g.tagClass!==c.Class.UNIVERSAL||g.type!==c.Type.OCTETSTRING)throw new Error('PKCS#12 authSafe content data is not an OCTET STRING.');if(g=r(g),s.mac){var y=null,f=0,m=c.derToOid(s.macAlgorithm);if(m===p.oids.sha1?(y=d.md.sha1.create(),f=20):m===p.oids.sha256?(y=d.md.sha256.create(),f=32):m===p.oids.sha384?(y=d.md.sha384.create(),f=48):m===p.oids.sha512?(y=d.md.sha512.create(),f=64):m===p.oids.md5?(y=d.md.md5.create(),f=16):void 0,null===y)throw new Error('PKCS#12 uses unsupported MAC algorithm: '+m);var E=new d.util.ByteBuffer(s.macSalt),C='macIterations'in s?parseInt(d.util.bytesToHex(s.macIterations),16):1,v=u.generateKey(n,E,3,C,f,y),b=d.hmac.create();b.start(y,v),b.update(g.value);var S=b.getMac();if(S.getBytes()!==s.macDigest)throw new Error('PKCS#12 MAC could not be verified. Invalid password?')}return i(l,g.value,t,n),l},u.toPkcs12Asn1=function(e,t,n,a){a=a||{},a.saltSize=a.saltSize||8,a.count=a.count||2048,a.algorithm=a.algorithm||a.encAlgorithm||'aes128','useMac'in a||(a.useMac=!0),'localKeyId'in a||(a.localKeyId=null),'generateLocalKeyId'in a||(a.generateLocalKeyId=!0);var r=a.localKeyId,s;if(null!==r)r=d.util.hexToBytes(r);else if(a.generateLocalKeyId)if(t){var o=d.util.isArray(t)?t[0]:t;'string'==typeof o&&(o=p.certificateFromPem(o));var l=d.md.sha1.create();l.update(c.toDer(p.certificateToAsn1(o)).getBytes()),r=l.digest().getBytes()}else r=d.random.getBytes(20);var g=[];null!==r&&g.push(c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.OID,!1,c.oidToDer(p.oids.localKeyId).getBytes()),c.create(c.Class.UNIVERSAL,c.Type.SET,!0,[c.create(c.Class.UNIVERSAL,c.Type.OCTETSTRING,!1,r)])])),'friendlyName'in a&&g.push(c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.OID,!1,c.oidToDer(p.oids.friendlyName).getBytes()),c.create(c.Class.UNIVERSAL,c.Type.SET,!0,[c.create(c.Class.UNIVERSAL,c.Type.BMPSTRING,!1,a.friendlyName)])])),0<g.length&&(s=c.create(c.Class.UNIVERSAL,c.Type.SET,!0,g));var h=[],y=[];null!==t&&(d.util.isArray(t)?y=t:y=[t]);for(var f=[],m=0;m<y.length;++m){t=y[m],'string'==typeof t&&(t=p.certificateFromPem(t));var i=0===m?s:void 0,E=p.certificateToAsn1(t),C=c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.OID,!1,c.oidToDer(p.oids.certBag).getBytes()),c.create(c.Class.CONTEXT_SPECIFIC,0,!0,[c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.OID,!1,c.oidToDer(p.oids.x509Certificate).getBytes()),c.create(c.Class.CONTEXT_SPECIFIC,0,!0,[c.create(c.Class.UNIVERSAL,c.Type.OCTETSTRING,!1,c.toDer(E).getBytes())])])]),i]);f.push(C)}if(0<f.length){var v=c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,f),b=c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.OID,!1,c.oidToDer(p.oids.data).getBytes()),c.create(c.Class.CONTEXT_SPECIFIC,0,!0,[c.create(c.Class.UNIVERSAL,c.Type.OCTETSTRING,!1,c.toDer(v).getBytes())])]);h.push(b)}var S=null;if(null!==e){var T=p.wrapRsaPrivateKey(p.privateKeyToAsn1(e));S=null===n?c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.OID,!1,c.oidToDer(p.oids.keyBag).getBytes()),c.create(c.Class.CONTEXT_SPECIFIC,0,!0,[T]),s]):c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.OID,!1,c.oidToDer(p.oids.pkcs8ShroudedKeyBag).getBytes()),c.create(c.Class.CONTEXT_SPECIFIC,0,!0,[p.encryptPrivateKeyInfo(T,n,a)]),s]);var I=c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[S]),A=c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.OID,!1,c.oidToDer(p.oids.data).getBytes()),c.create(c.Class.CONTEXT_SPECIFIC,0,!0,[c.create(c.Class.UNIVERSAL,c.Type.OCTETSTRING,!1,c.toDer(I).getBytes())])]);h.push(A)}var _=c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,h),k;if(a.useMac){var l=d.md.sha1.create(),N=new d.util.ByteBuffer(d.random.getBytes(a.saltSize)),B=a.count,e=u.generateKey(n,N,3,B,20),R=d.hmac.create();R.start(l,e),R.update(c.toDer(_).getBytes());var x=R.getMac();k=c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.OID,!1,c.oidToDer(p.oids.sha1).getBytes()),c.create(c.Class.UNIVERSAL,c.Type.NULL,!1,'')]),c.create(c.Class.UNIVERSAL,c.Type.OCTETSTRING,!1,x.getBytes())]),c.create(c.Class.UNIVERSAL,c.Type.OCTETSTRING,!1,N.getBytes()),c.create(c.Class.UNIVERSAL,c.Type.INTEGER,!1,c.integerToDer(B).getBytes())])}return c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.INTEGER,!1,c.integerToDer(3).getBytes()),c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.OID,!1,c.oidToDer(p.oids.data).getBytes()),c.create(c.Class.CONTEXT_SPECIFIC,0,!0,[c.create(c.Class.UNIVERSAL,c.Type.OCTETSTRING,!1,c.toDer(_).getBytes())])]),k])},u.generateKey=d.pbe.generatePkcs12Key},function(e,t,n){var a=n(0);n(7),n(1);var r=a.asn1,i=e.exports=a.pkcs7asn1=a.pkcs7asn1||{};a.pkcs7=a.pkcs7||{},a.pkcs7.asn1=i;var s={name:'ContentInfo',tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,value:[{name:'ContentInfo.ContentType',tagClass:r.Class.UNIVERSAL,type:r.Type.OID,constructed:!1,capture:'contentType'},{name:'ContentInfo.content',tagClass:r.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:'content'}]};i.contentInfoValidator=s;var o={name:'EncryptedContentInfo',tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,value:[{name:'EncryptedContentInfo.contentType',tagClass:r.Class.UNIVERSAL,type:r.Type.OID,constructed:!1,capture:'contentType'},{name:'EncryptedContentInfo.contentEncryptionAlgorithm',tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,value:[{name:'EncryptedContentInfo.contentEncryptionAlgorithm.algorithm',tagClass:r.Class.UNIVERSAL,type:r.Type.OID,constructed:!1,capture:'encAlgorithm'},{name:'EncryptedContentInfo.contentEncryptionAlgorithm.parameter',tagClass:r.Class.UNIVERSAL,captureAsn1:'encParameter'}]},{name:'EncryptedContentInfo.encryptedContent',tagClass:r.Class.CONTEXT_SPECIFIC,type:0,capture:'encryptedContent',captureAsn1:'encryptedContentAsn1'}]};i.envelopedDataValidator={name:'EnvelopedData',tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,value:[{name:'EnvelopedData.Version',tagClass:r.Class.UNIVERSAL,type:r.Type.INTEGER,constructed:!1,capture:'version'},{name:'EnvelopedData.RecipientInfos',tagClass:r.Class.UNIVERSAL,type:r.Type.SET,constructed:!0,captureAsn1:'recipientInfos'}].concat(o)},i.encryptedDataValidator={name:'EncryptedData',tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,value:[{name:'EncryptedData.Version',tagClass:r.Class.UNIVERSAL,type:r.Type.INTEGER,constructed:!1,capture:'version'}].concat(o)};var l={name:'SignerInfo',tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,value:[{name:'SignerInfo.version',tagClass:r.Class.UNIVERSAL,type:r.Type.INTEGER,constructed:!1},{name:'SignerInfo.issuerAndSerialNumber',tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,value:[{name:'SignerInfo.issuerAndSerialNumber.issuer',tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,captureAsn1:'issuer'},{name:'SignerInfo.issuerAndSerialNumber.serialNumber',tagClass:r.Class.UNIVERSAL,type:r.Type.INTEGER,constructed:!1,capture:'serial'}]},{name:'SignerInfo.digestAlgorithm',tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,value:[{name:'SignerInfo.digestAlgorithm.algorithm',tagClass:r.Class.UNIVERSAL,type:r.Type.OID,constructed:!1,capture:'digestAlgorithm'},{name:'SignerInfo.digestAlgorithm.parameter',tagClass:r.Class.UNIVERSAL,constructed:!1,captureAsn1:'digestParameter',optional:!0}]},{name:'SignerInfo.authenticatedAttributes',tagClass:r.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:'authenticatedAttributes'},{name:'SignerInfo.digestEncryptionAlgorithm',tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,capture:'signatureAlgorithm'},{name:'SignerInfo.encryptedDigest',tagClass:r.Class.UNIVERSAL,type:r.Type.OCTETSTRING,constructed:!1,capture:'signature'},{name:'SignerInfo.unauthenticatedAttributes',tagClass:r.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:'unauthenticatedAttributes'}]};i.signedDataValidator={name:'SignedData',tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,value:[{name:'SignedData.Version',tagClass:r.Class.UNIVERSAL,type:r.Type.INTEGER,constructed:!1,capture:'version'},{name:'SignedData.DigestAlgorithms',tagClass:r.Class.UNIVERSAL,type:r.Type.SET,constructed:!0,captureAsn1:'digestAlgorithms'},s,{name:'SignedData.Certificates',tagClass:r.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:'certificates'},{name:'SignedData.CertificateRevocationLists',tagClass:r.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:'crls'},{name:'SignedData.SignerInfos',tagClass:r.Class.UNIVERSAL,type:r.Type.SET,capture:'signerInfos',optional:!0,value:[l]}]},i.recipientInfoValidator={name:'RecipientInfo',tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,value:[{name:'RecipientInfo.version',tagClass:r.Class.UNIVERSAL,type:r.Type.INTEGER,constructed:!1,capture:'version'},{name:'RecipientInfo.issuerAndSerial',tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,value:[{name:'RecipientInfo.issuerAndSerial.issuer',tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,captureAsn1:'issuer'},{name:'RecipientInfo.issuerAndSerial.serialNumber',tagClass:r.Class.UNIVERSAL,type:r.Type.INTEGER,constructed:!1,capture:'serial'}]},{name:'RecipientInfo.keyEncryptionAlgorithm',tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,value:[{name:'RecipientInfo.keyEncryptionAlgorithm.algorithm',tagClass:r.Class.UNIVERSAL,type:r.Type.OID,constructed:!1,capture:'encAlgorithm'},{name:'RecipientInfo.keyEncryptionAlgorithm.parameter',tagClass:r.Class.UNIVERSAL,constructed:!1,captureAsn1:'encParameter',optional:!0}]},{name:'RecipientInfo.encryptedKey',tagClass:r.Class.UNIVERSAL,type:r.Type.OCTETSTRING,constructed:!1,capture:'encKey'}]}},function(e,t,n){var a=n(0);n(1),a.mgf=a.mgf||{};var r=e.exports=a.mgf.mgf1=a.mgf1=a.mgf1||{};r.create=function(e){return{generate:function(n,r){for(var s=new a.util.ByteBuffer,t=d(r/e.digestLength),o=0,i;o<t;o++)i=new a.util.ByteBuffer,i.putInt32(o),e.start(),e.update(n+i.getBytes()),s.putBuffer(e.digest());return s.truncate(s.length()-r),s.getBytes()}}}},function(e,t,n){function a(){l='\\x80',l+=s.util.fillString('\\0',128),c=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],p={},p['SHA-512']=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],p['SHA-384']=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],p['SHA-512/256']=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],p['SHA-512/224']=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],d=!0}function r(e,t,n){for(var a=n.length(),r,s,o,l,d,p,u,g,h,y,f,m,E,C,v,b,S,T,I,A,_,k,N,B,R,x,L,D,w,i,P,U,O,V,K;128<=a;){for(w=0;16>w;++w)t[w][0]=n.getInt32()>>>0,t[w][1]=n.getInt32()>>>0;for(;80>w;++w)U=t[w-2],i=U[0],P=U[1],r=((i>>>19|P<<13)^(P>>>29|i<<3)^i>>>6)>>>0,s=((i<<13|P>>>19)^(P<<3|i>>>29)^(i<<26|P>>>6))>>>0,V=t[w-15],i=V[0],P=V[1],o=((i>>>1|P<<31)^(i>>>8|P<<24)^i>>>7)>>>0,l=((i<<31|P>>>1)^(i<<24|P>>>8)^(i<<25|P>>>7))>>>0,O=t[w-7],K=t[w-16],P=s+O[1]+l+K[1],t[w][0]=r+O[0]+o+K[0]+(P/4294967296>>>0)>>>0,t[w][1]=P>>>0;for(E=e[0][0],C=e[0][1],v=e[1][0],b=e[1][1],S=e[2][0],T=e[2][1],I=e[3][0],A=e[3][1],_=e[4][0],k=e[4][1],N=e[5][0],B=e[5][1],R=e[6][0],x=e[6][1],L=e[7][0],D=e[7][1],w=0;80>w;++w)u=((_>>>14|k<<18)^(_>>>18|k<<14)^(k>>>9|_<<23))>>>0,g=((_<<18|k>>>14)^(_<<14|k>>>18)^(k<<23|_>>>9))>>>0,h=(R^_&(N^R))>>>0,y=(x^k&(B^x))>>>0,d=((E>>>28|C<<4)^(C>>>2|E<<30)^(C>>>7|E<<25))>>>0,p=((E<<4|C>>>28)^(C<<30|E>>>2)^(C<<25|E>>>7))>>>0,f=(E&v|S&(E^v))>>>0,m=(C&b|T&(C^b))>>>0,P=D+g+y+c[w][1]+t[w][1],r=L+u+h+c[w][0]+t[w][0]+(P/4294967296>>>0)>>>0,s=P>>>0,P=p+m,o=d+f+(P/4294967296>>>0)>>>0,l=P>>>0,L=R,D=x,R=N,x=B,N=_,B=k,P=A+s,_=I+r+(P/4294967296>>>0)>>>0,k=P>>>0,I=S,A=T,S=v,T=b,v=E,b=C,P=s+l,E=r+o+(P/4294967296>>>0)>>>0,C=P>>>0;P=e[0][1]+C,e[0][0]=e[0][0]+E+(P/4294967296>>>0)>>>0,e[0][1]=P>>>0,P=e[1][1]+b,e[1][0]=e[1][0]+v+(P/4294967296>>>0)>>>0,e[1][1]=P>>>0,P=e[2][1]+T,e[2][0]=e[2][0]+S+(P/4294967296>>>0)>>>0,e[2][1]=P>>>0,P=e[3][1]+A,e[3][0]=e[3][0]+I+(P/4294967296>>>0)>>>0,e[3][1]=P>>>0,P=e[4][1]+k,e[4][0]=e[4][0]+_+(P/4294967296>>>0)>>>0,e[4][1]=P>>>0,P=e[5][1]+B,e[5][0]=e[5][0]+N+(P/4294967296>>>0)>>>0,e[5][1]=P>>>0,P=e[6][1]+x,e[6][0]=e[6][0]+R+(P/4294967296>>>0)>>>0,e[6][1]=P>>>0,P=e[7][1]+D,e[7][0]=e[7][0]+L+(P/4294967296>>>0)>>>0,e[7][1]=P>>>0,a-=128}}var s=n(0);n(8),n(1);var i=e.exports=s.sha512=s.sha512||{};s.md.sha512=s.md.algorithms.sha512=i;var o=s.sha384=s.sha512.sha384=s.sha512.sha384||{};o.create=function(){return i.create('SHA-384')},s.md.sha384=s.md.algorithms.sha384=o,s.sha512.sha256=s.sha512.sha256||{create:function(){return i.create('SHA-512/256')}},s.md['sha512/256']=s.md.algorithms['sha512/256']=s.sha512.sha256,s.sha512.sha224=s.sha512.sha224||{create:function(){return i.create('SHA-512/224')}},s.md['sha512/224']=s.md.algorithms['sha512/224']=s.sha512.sha224,i.create=function(e){if(d||a(),'undefined'==typeof e&&(e='SHA-512'),!(e in p))throw new Error('Invalid SHA-512 algorithm: '+e);for(var t=p[e],n=null,o=s.util.createBuffer(),c=Array(80),i=0;80>i;++i)c[i]=[,,];var u=64;'SHA-384'===e?u=48:'SHA-512/256'===e?u=32:'SHA-512/224'===e?u=28:void 0;var g={algorithm:e.replace('-','').toLowerCase(),blockLength:128,digestLength:u,messageLength:0,fullMessageLength:null,messageLengthSize:16};return g.start=function(){g.messageLength=0,g.fullMessageLength=g.messageLength128=[];for(var e=g.messageLengthSize/4,a=0;a<e;++a)g.fullMessageLength.push(0);o=s.util.createBuffer(),n=Array(t.length);for(var a=0;a<t.length;++a)n[a]=t[a].slice(0);return g},g.start(),g.update=function(e,t){'utf8'===t&&(e=s.util.encodeUtf8(e));var a=e.length;g.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var l=g.fullMessageLength.length-1;0<=l;--l)g.fullMessageLength[l]+=a[1],a[1]=a[0]+(g.fullMessageLength[l]/4294967296>>>0),g.fullMessageLength[l]>>>=0,a[0]=a[1]/4294967296>>>0;return o.putBytes(e),r(n,c,o),(2048<o.read||0===o.length())&&o.compact(),g},g.digest=function(){var t=s.util.createBuffer();t.putBytes(o.bytes());var a=g.fullMessageLength[g.fullMessageLength.length-1]+g.messageLengthSize,d=a&g.blockLength-1;t.putBytes(l.substr(0,g.blockLength-d));for(var p=8*g.fullMessageLength[0],u=0,i,y;u<g.fullMessageLength.length-1;++u)i=8*g.fullMessageLength[u+1],y=i/4294967296>>>0,p+=y,t.putInt32(p>>>0),p=i>>>0;t.putInt32(p);for(var f=Array(n.length),u=0;u<n.length;++u)f[u]=n[u].slice(0);r(f,c,t);var h=s.util.createBuffer(),m;m='SHA-512'===e?f.length:'SHA-384'===e?f.length-2:f.length-4;for(var u=0;u<m;++u)h.putInt32(f[u][0]),(u!==m-1||'SHA-512/224'!==e)&&h.putInt32(f[u][1]);return h},g};var l=null,d=!1,c=null,p=null},function(e,t,n){'use strict';(function(a){function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t){return new l.default(e,t)}Object.defineProperty(t,'__esModule',{value:!0});var o=n(61),l=i(o),d=n(40),c=i(d),p=n(3),u=i(p),g=n(28),h=i(g),y=n(2),f=r(y),m=n(4),E=n(133),C=r(E),v=n(42),b=i(v),S=n(29),T=i(S),I=n(46),A=i(I);s.VERSION=m.EPUBJS_VERSION,'undefined'!=typeof a&&(a.EPUBJS_VERSION=m.EPUBJS_VERSION),s.Book=l.default,s.Rendition=c.default,s.Contents=h.default,s.CFI=u.default,s.utils=f,t.default=s,e.exports=t['default']}).call(t,n(9))},function(e,t,n){'use strict';function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var i=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(6),o=a(s),l=n(2),d=n(16),c=a(d),p=n(10),u=a(p),g=n(81),h=a(g),y=n(85),f=a(y),m=n(86),E=a(m),C=n(87),v=a(C),b=n(88),S=a(b),T=n(89),I=a(T),A=n(90),_=a(A),k=n(40),N=a(k),B=n(111),R=a(B),x=n(19),L=a(x),D=n(3),w=a(D),P=n(113),U=a(P),O=n(115),V=a(O),K=n(4),j=n(116),M=a(j),q='META-INF/container.xml',z={BINARY:'binary',BASE64:'base64',EPUB:'epub',OPF:'opf',MANIFEST:'json',DIRECTORY:'directory'},F=function(){function e(t,n){var a=this;r(this,e),'undefined'==typeof n&&'string'!=typeof t&&!1==t instanceof Blob&&(n=t,t=void 0),this.settings=(0,l.extend)(this.settings||{},{requestMethod:void 0,requestCredentials:void 0,requestHeaders:void 0,encoding:void 0,replacements:void 0,canonical:void 0,openAs:void 0,store:void 0}),(0,l.extend)(this.settings,n),this.userPassphrase=this.settings.userPassphrase,this.opening=new l.defer,this.opened=this.opening.promise,this.isOpen=!1,this.loading={manifest:new l.defer,spine:new l.defer,metadata:new l.defer,cover:new l.defer,navigation:new l.defer,pageList:new l.defer,resources:new l.defer,displayOptions:new l.defer},this.loaded={manifest:this.loading.manifest.promise,spine:this.loading.spine.promise,metadata:this.loading.metadata.promise,cover:this.loading.cover.promise,navigation:this.loading.navigation.promise,pageList:this.loading.pageList.promise,resources:this.loading.resources.promise,displayOptions:this.loading.displayOptions.promise},this.ready=Promise.all([this.loaded.manifest,this.loaded.spine,this.loaded.metadata,this.loaded.cover,this.loaded.navigation,this.loaded.resources,this.loaded.displayOptions]),this.isRendered=!1,this.request=this.settings.requestMethod||L.default,this.spine=new h.default,this.locations=new f.default(this.spine,this.load.bind(this)),this.navigation=void 0,this.pageList=void 0,this.url=void 0,this.path=void 0,this.archived=!1,this.archive=void 0,this.storage=void 0,this.resources=void 0,this.rendition=void 0,this.container=void 0,this.packaging=void 0,this.displayOptions=void 0,this.encryption=void 0,this.settings.store&&this.store(this.settings.store),t&&this.open(t,this.settings.openAs).catch(function(){var e=new Error('Cannot load book at '+t);a.emit(K.EVENTS.BOOK.OPEN_FAILED,e)})}return i(e,[{key:'open',value:function(e,t){var n=t||this.determineType(e),a;return n===z.BINARY?(this.archived=!0,this.url=new c.default('/',''),a=this.openEpub(e)):n===z.BASE64?(this.archived=!0,this.url=new c.default('/',''),a=this.openEpub(e,n)):n===z.EPUB?(this.archived=!0,this.url=new c.default('/',''),a=this.request(e,'binary',this.settings.requestCredentials,this.settings.requestHeaders).then(this.openEpub.bind(this))):n==z.OPF?(this.url=new c.default(e),a=this.openPackaging(this.url.Path.toString())):n==z.MANIFEST?(this.url=new c.default(e),a=this.openManifest(this.url.Path.toString())):(this.url=new c.default(e),a=this.openContainer(q).then(this.openPackaging.bind(this))),a}},{key:'openEpub',value:function(e,t){var n=this;return this.unarchive(e,t||this.settings.encoding).then(function(){return n.openLicense()},function(){}).then(function(){return n.openEncryption()},function(){}).then(function(){return n.openContainer(q)}).then(function(e){return n.openPackaging(e)})}},{key:'openEncryption',value:function(){var e=this;return this.load('../META-INF/encryption.xml').then(function(t){e.encryption.readEncryption(t,e.resolve.bind(e))})}},{key:'openLicense',value:function(){var e=this;return this.load('../META-INF/license.lcpl','json').then(function(t){e.encryption=new M.default(e.userPassphrase),e.encryption.decryptContentKey(t.encryption.content_key.encrypted_value)})}},{key:'openContainer',value:function(e){var t=this;return this.load(e).then(function(e){return t.container=new E.default(e),t.resolve(t.container.packagePath)})}},{key:'openPackaging',value:function(e){var t=this;return this.path=new u.default(e),this.load(e).then(function(e){return t.packaging=new v.default(e),t.unpack(t.packaging)})}},{key:'openManifest',value:function(e){var t=this;return this.path=new u.default(e),this.load(e).then(function(e){return t.packaging=new v.default,t.packaging.load(e),t.unpack(t.packaging)})}},{key:'load',value:function(e,t){var n=this.resolve(e);return this.archived?this.archive.request(n,t,this.encryption):this.request(n,t,this.settings.requestCredentials,this.settings.requestHeaders,this.encryption)}},{key:'resolve',value:function(e,t){if(e){var n=e,a=-1<e.indexOf('://');return a?e:(this.path&&(n=this.path.resolve(e)),!1!=t&&this.url&&(n=this.url.resolve(n)),n)}}},{key:'canonical',value:function(e){var t=e;return e?(t=this.settings.canonical?this.settings.canonical(e):this.resolve(e,!0),t):''}},{key:'determineType',value:function(e){var t,n,a;return'base64'===this.settings.encoding?z.BASE64:'string'==typeof e?(t=new c.default(e),n=t.path(),a=n.extension,a&&(a=a.replace(/\\?.*$/,'')),a?'epub'===a?z.EPUB:'opf'===a?z.OPF:'json'===a?z.MANIFEST:void 0:z.DIRECTORY):z.BINARY}},{key:'unpack',value:function(e){var t=this;this.openLicense().then(function(){return t.openEncryption()},function(){}),this.package=e,''===this.packaging.metadata.layout?this.load(this.url.resolve('META-INF/com.apple.ibooks.display-options.xml')).then(function(e){t.displayOptions=new V.default(e),t.loading.displayOptions.resolve(t.displayOptions)}).catch(function(){t.displayOptions=new V.default,t.loading.displayOptions.resolve(t.displayOptions)}):(this.displayOptions=new V.default,this.loading.displayOptions.resolve(this.displayOptions)),this.spine.unpack(this.packaging,this.resolve.bind(this),this.canonical.bind(this)),this.resources=new I.default(this.packaging.manifest,{archive:this.archive,resolver:this.resolve.bind(this),request:this.request.bind(this),replacements:this.settings.replacements||(this.archived?'blobUrl':'base64')}),this.loadNavigation(this.packaging).then(function(){t.loading.navigation.resolve(t.navigation)}),this.packaging.coverPath&&(this.cover=this.resolve(this.packaging.coverPath)),this.loading.manifest.resolve(this.packaging.manifest),this.loading.metadata.resolve(this.packaging.metadata),this.loading.spine.resolve(this.spine),this.loading.cover.resolve(this.cover),this.loading.resources.resolve(this.resources),this.loading.pageList.resolve(this.pageList),this.isOpen=!0,this.archived||this.settings.replacements&&'none'!=this.settings.replacements?this.replacements().then(function(){t.loaded.displayOptions.then(function(){t.opening.resolve(t)})}).catch(function(e){console.error(e)}):this.loaded.displayOptions.then(function(){t.opening.resolve(t)})}},{key:'loadNavigation',value:function(e){var t=this,n=e.navPath||e.ncxPath,a=e.toc;return a?new Promise(function(n){t.navigation=new S.default(a),e.pageList&&(t.pageList=new _.default(e.pageList)),n(t.navigation)}):n?this.load(n,'xml').then(function(e){return t.navigation=new S.default(e),t.pageList=new _.default(e),t.navigation}):new Promise(function(e){t.navigation=new S.default,t.pageList=new _.default,e(t.navigation)})}},{key:'section',value:function(e){return this.spine.get(e)}},{key:'renderTo',value:function(e,t){return this.rendition=new N.default(this,t),this.rendition.attachTo(e),this.rendition}},{key:'setRequestCredentials',value:function(e){this.settings.requestCredentials=e}},{key:'setRequestHeaders',value:function(e){this.settings.requestHeaders=e}},{key:'unarchive',value:function(e,t){return this.archive=new R.default,this.archive.open(e,t)}},{key:'store',value:function(e){var t=this,n=this.settings.replacements&&'none'!==this.settings.replacements,a=this.url,r=this.settings.requestMethod||L.default.bind(this);return this.storage=new U.default(e,r,this.resolve.bind(this)),this.request=this.storage.request.bind(this.storage),this.opened.then(function(){t.archived&&(t.storage.requester=t.archive.request.bind(t.archive));var e=function(e,n){n.output=t.resources.substitute(e,n.url)};t.resources.settings.replacements=n||'blobUrl',t.resources.replacements().then(function(){return t.resources.replaceCss()}),t.storage.on('offline',function(){t.url=new c.default('/',''),t.spine.hooks.serialize.register(e)}),t.storage.on('online',function(){t.url=a,t.spine.hooks.serialize.deregister(e)})}),this.storage}},{key:'coverUrl',value:function(){var e=this,t=this.loaded.cover.then(function(){return e.archived?e.resources.get(e.cover):e.cover});return t}},{key:'replacements',value:function(){var e=this;return this.spine.hooks.serialize.register(function(t,n){n.output=e.resources.substitute(t,n.url)}),this.resources.replacements().then(function(){return e.resources.replaceCss()})}},{key:'getRange',value:function(e){var t=new w.default(e),n=this.spine.get(t.spinePos),a=this.load.bind(this);return n?n.load(a).then(function(){var e=t.toRange(n.document);return e}):new Promise(function(e,t){t('CFI could not be found')})}},{key:'key',value:function(e){var t=e||this.packaging.metadata.identifier||this.url.filename;return'epubjs:'+K.EPUBJS_VERSION+':'+t}},{key:'destroy',value:function(){this.opened=void 0,this.loading=void 0,this.loaded=void 0,this.ready=void 0,this.isOpen=!1,this.isRendered=!1,this.spine&&this.spine.destroy(),this.locations&&this.locations.destroy(),this.pageList&&this.pageList.destroy(),this.archive&&this.archive.destroy(),this.resources&&this.resources.destroy(),this.container&&this.container.destroy(),this.packaging&&this.packaging.destroy(),this.rendition&&this.rendition.destroy(),this.displayOptions&&this.displayOptions.destroy(),this.spine=void 0,this.locations=void 0,this.pageList=void 0,this.archive=void 0,this.resources=void 0,this.container=void 0,this.packaging=void 0,this.rendition=void 0,this.navigation=void 0,this.url=void 0,this.path=void 0,this.archived=!1,this.encryption=void 0}}]),e}();(0,o.default)(F.prototype),t.default=F,e.exports=t['default']},function(e,t,n){'use strict';var a=n(38),r=n(63),i=n(67),s=n(75),o=n(76),l=e.exports=function(t,n){var r,l,d,p,u;return 2>arguments.length||'string'!=typeof t?(p=n,n=t,t=null):p=arguments[2],a(t)?(r=o.call(t,'c'),l=o.call(t,'e'),d=o.call(t,'w')):(r=d=!0,l=!1),u={value:n,configurable:r,enumerable:l,writable:d},p?i(s(p),u):u};l.gs=function(t,n,l){var d,p,u,g;return'string'==typeof t?u=arguments[3]:(u=l,l=n,n=t,t=null),a(n)?r(n)?a(l)?!r(l)&&(u=l,l=void 0):l=void 0:(u=n,n=l=void 0):n=void 0,a(t)?(d=o.call(t,'c'),p=o.call(t,'e')):(d=!0,p=!1),g={get:n,set:l,configurable:d,enumerable:p},u?i(s(u),g):g}},function(e,t,n){'use strict';var a=n(64),r=/^\\s*class[\\s{/}]/,i=Function.prototype.toString;e.exports=function(e){return!!a(e)&&!r.test(i.call(e))}},function(e,t,n){'use strict';var a=n(65);e.exports=function(e){if('function'!=typeof e)return!1;if(!hasOwnProperty.call(e,'length'))return!1;try{if('number'!=typeof e.length)return!1;if('function'!=typeof e.call)return!1;if('function'!=typeof e.apply)return!1}catch(e){return!1}return!a(e)}},function(e,t,n){'use strict';var a=n(66);e.exports=function(e){if(!a(e))return!1;try{return!!e.constructor&&e.constructor.prototype===e}catch(e){return!1}}},function(e,t,n){'use strict';var a=n(38),r={object:!0,function:!0,undefined:!0};e.exports=function(e){return!!a(e)&&hasOwnProperty.call(r,typeof e)}},function(e,t,n){'use strict';e.exports=n(68)()?Object.assign:n(69)},function(e){'use strict';e.exports=function(){var e=Object.assign,t;return!('function'!=typeof e)&&(t={foo:'raz'},e(t,{bar:'dwa'},{trzy:'trzy'}),'razdwatrzy'===t.foo+t.bar+t.trzy)}},function(e,t,n){'use strict';var a=n(70),r=n(74);e.exports=function(e,t){var n=c(arguments.length,2),s,o,i;for(e=Object(r(e)),i=function(n){try{e[n]=t[n]}catch(t){s||(s=t)}},o=1;o<n;++o)t=arguments[o],a(t).forEach(i);if(s!==void 0)throw s;return e}},function(e,t,n){'use strict';e.exports=n(71)()?Object.keys:n(72)},function(e){'use strict';e.exports=function(){try{return Object.keys('primitive'),!0}catch(t){return!1}}},function(e,t,n){'use strict';var a=n(24),r=Object.keys;e.exports=function(e){return r(a(e)?Object(e):e)}},function(e){'use strict';e.exports=function(){}},function(e,t,n){'use strict';var a=n(24);e.exports=function(e){if(!a(e))throw new TypeError('Cannot use null or undefined');return e}},function(e,t,n){'use strict';var a=n(24),r=Array.prototype.forEach,i=Object.create,s=function(e,t){for(var n in e)t[n]=e[n]};e.exports=function(){var e=i(null);return r.call(arguments,function(t){a(t)&&s(Object(t),e)}),e}},function(e,t,a){'use strict';e.exports=a(77)()?n.contains:a(78)},function(e){'use strict';var t='razdwatrzy';e.exports=function(){return!('function'!=typeof t.contains)&&!0===t.contains('dwa')&&!1===t.contains('foo')}},function(e){'use strict';var t=n.indexOf;e.exports=function(e){return-1<t.call(this,e,arguments[1])}},function(e){'use strict';e.exports=function(e){if('function'!=typeof e)throw new TypeError(e+' is not a function');return e}},function(t){t.exports=e},function(e,t,n){'use strict';function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var i=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(3),o=a(s),l=n(25),d=a(l),c=n(82),p=a(c),u=n(18),g=function(){function e(){r(this,e),this.spineItems=[],this.spineByHref={},this.spineById={},this.hooks={},this.hooks.serialize=new d.default,this.hooks.content=new d.default,this.hooks.content.register(u.replaceBase),this.hooks.content.register(u.replaceCanonical),this.hooks.content.register(u.replaceMeta),this.epubcfi=new o.default,this.loaded=!1,this.items=void 0,this.manifest=void 0,this.spineNodeIndex=void 0,this.baseUrl=void 0,this.length=void 0}return i(e,[{key:'unpack',value:function(e,t,n){var a=this;this.items=e.spine,this.manifest=e.manifest,this.spineNodeIndex=e.spineNodeIndex,this.baseUrl=e.baseUrl||e.basePath||'',this.length=this.items.length,this.items.forEach(function(e,r){var i=a.manifest[e.idref],s;e.index=r,e.cfiBase=a.epubcfi.generateChapterComponent(a.spineNodeIndex,e.index,e.idref),e.href&&(e.url=t(e.href,!0),e.canonical=n(e.href)),i&&(e.href=i.href,e.url=t(e.href,!0),e.canonical=n(e.href),i.properties.length&&e.properties.push.apply(e.properties,i.properties)),'yes'===e.linear?(e.prev=function(){for(var t=e.index,n;0<t;){if(n=this.get(t-1),n&&n.linear)return n;t-=1}}.bind(a),e.next=function(){for(var t=e.index,n;t<this.spineItems.length-1;){if(n=this.get(t+1),n&&n.linear)return n;t+=1}}.bind(a)):(e.prev=function(){},e.next=function(){}),s=new p.default(e,a.hooks),a.append(s)}),this.loaded=!0}},{key:'get',value:function(e){var t=0;if('undefined'==typeof e)for(;t<this.spineItems.length;){var n=this.spineItems[t];if(n&&n.linear)break;t+=1}else if(this.epubcfi.isCfiString(e)){var a=new o.default(e);t=a.spinePos}else'number'==typeof e||!1===isNaN(e)?t=e:'string'==typeof e&&0===e.indexOf('#')?t=this.spineById[e.substring(1)]:'string'==typeof e&&(e=e.split('#')[0],t=this.spineByHref[e]||this.spineByHref[encodeURI(e)]);return this.spineItems[t]||null}},{key:'append',value:function(e){var t=this.spineItems.length;return e.index=t,this.spineItems.push(e),this.spineByHref[decodeURI(e.href)]=t,this.spineByHref[encodeURI(e.href)]=t,this.spineByHref[e.href]=t,this.spineById[e.idref]=t,t}},{key:'prepend',value:function(e){return this.spineByHref[e.href]=0,this.spineById[e.idref]=0,this.spineItems.forEach(function(e,t){e.index=t}),0}},{key:'remove',value:function(e){var t=this.spineItems.indexOf(e);if(-1<t)return delete this.spineByHref[e.href],delete this.spineById[e.idref],this.spineItems.splice(t,1)}},{key:'each',value:function(){return this.spineItems.forEach.apply(this.spineItems,arguments)}},{key:'first',value:function(){var e=0;do{var t=this.get(e);if(t&&t.linear)return t;e+=1}while(e<this.spineItems.length)}},{key:'last',value:function(){var e=this.spineItems.length-1;do{var t=this.get(e);if(t&&t.linear)return t;e-=1}while(0<=e)}},{key:'destroy',value:function(){this.each(function(e){return e.destroy()}),this.spineItems=void 0,this.spineByHref=void 0,this.spineById=void 0,this.hooks.serialize.clear(),this.hooks.content.clear(),this.hooks=void 0,this.epubcfi=void 0,this.loaded=!1,this.items=void 0,this.manifest=void 0,this.spineNodeIndex=void 0,this.baseUrl=void 0,this.length=void 0}}]),e}();t.default=g,e.exports=t['default']},function(e,t,n){'use strict';function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var i=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(2),o=n(3),l=a(o),d=n(25),c=a(d),p=n(18),u=function(){function e(t,n){r(this,e),this.idref=t.idref,this.linear='yes'===t.linear,this.properties=t.properties,this.index=t.index,this.href=t.href,this.url=t.url,this.canonical=t.canonical,this.next=t.next,this.prev=t.prev,this.cfiBase=t.cfiBase,n?this.hooks=n:(this.hooks={},this.hooks.serialize=new c.default(this),this.hooks.content=new c.default(this)),this.document=void 0,this.contents=void 0,this.output=void 0}return i(e,[{key:'load',value:function(e){var t=e||this.request||n(19),a=new s.defer,r=a.promise;return this.contents?a.resolve(this.contents):t(this.url).then(function(e){return this.document=e,this.contents=e.documentElement,this.hooks.content.trigger(this.document,this)}.bind(this)).then(function(){a.resolve(this.contents)}.bind(this)).catch(function(e){a.reject(e)}),r}},{key:'base',value:function(){return(0,p.replaceBase)(this.document,this)}},{key:'render',value:function(e){var t=new s.defer,a=t.promise;return this.output,this.load(e).then(function(e){var t='undefined'!=typeof navigator&&navigator.userAgent||'',a=0<=t.indexOf('Trident'),r;r='undefined'==typeof XMLSerializer||a?n(83).XMLSerializer:XMLSerializer;var i=new r;return this.output=i.serializeToString(e),this.output}.bind(this)).then(function(){return this.hooks.serialize.trigger(this.output,this)}.bind(this)).then(function(){t.resolve(this.output)}.bind(this)).catch(function(e){t.reject(e)}),a}},{key:'find',value:function(e){var t=this,n=[],a=e.toLowerCase(),r=function(e){for(var r=e.textContent.toLowerCase(),i=t.document.createRange(),s=-1,o=150,l,d,c;-1!=d;)d=r.indexOf(a,s+1),-1!=d&&(i=t.document.createRange(),i.setStart(e,d),i.setEnd(e,d+a.length),l=t.cfiFromRange(i),e.textContent.length<o?c=e.textContent:(c=e.textContent.substring(d-o/2,d+o/2),c='...'+c+'...'),n.push({cfi:l,excerpt:c})),s=d};return(0,s.sprint)(t.document,function(e){r(e)}),n}},{key:'search',value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:5;if('undefined'==typeof document.createTreeWalker)return this.find(e);for(var n=[],a=150,r=this,i=e.toLowerCase(),s=function(e){var t=e.reduce(function(e,t){return e+t.textContent},''),s=t.toLowerCase(),o=s.indexOf(i);if(-1!=o){var d=0,c=o+i.length,p=0,u=0;if(o<e[d].length){for(var l;p<e.length-1&&(u+=e[p].length,!(c<=u));)p+=1;var g=e[d],h=e[p],y=r.document.createRange();y.setStart(g,o);var f=e.slice(0,p).reduce(function(e,t){return e+t.textContent.length},0);y.setEnd(h,f>c?c:c-f),l=r.cfiFromRange(y);var m=e.slice(0,p+1).reduce(function(e,t){return e+t.textContent},'');m.length>a&&(m=m.substring(o-a/2,o+a/2),m='...'+m+'...'),n.push({cfi:l,excerpt:m})}}},o=document.createTreeWalker(r.document,NodeFilter.SHOW_TEXT,null,!1),l=void 0,d=[];l=o.nextNode();)d.push(l),d.length==t&&(s(d.slice(0,t)),d=d.slice(1,t));return 0<d.length&&s(d),n}},{key:'reconcileLayoutSettings',value:function(e){var t={layout:e.layout,spread:e.spread,orientation:e.orientation};return this.properties.forEach(function(e){var n=e.replace('rendition:',''),a=n.indexOf('-'),r,i;-1!=a&&(r=n.slice(0,a),i=n.slice(a+1),t[r]=i)}),t}},{key:'cfiFromRange',value:function(e){return new l.default(e,this.cfiBase).toString()}},{key:'cfiFromElement',value:function(e){return new l.default(e,this.cfiBase).toString()}},{key:'unload',value:function(){this.document=void 0,this.contents=void 0,this.output=void 0}},{key:'destroy',value:function(){this.unload(),this.hooks.serialize.clear(),this.hooks.content.clear(),this.hooks=void 0,this.idref=void 0,this.linear=void 0,this.properties=void 0,this.index=void 0,this.href=void 0,this.url=void 0,this.next=void 0,this.prev=void 0,this.cfiBase=void 0}}]),e}();t.default=u,e.exports=t['default']},function(e,t,n){function a(e){this.options=e||{locator:{}}}function r(e,t,n){function a(t){var a=e[t];!a&&s&&(a=2==e.length?function(n){e(t,n)}:e),r[t]=a&&function(e){a('[xmldom '+t+']\\t'+e+o(n))}||function(){}}if(!e){if(t instanceof i)return t;e=t}var r={},s=e instanceof Function;return n=n||{},a('warning'),a('error'),a('fatalError'),r}function i(){this.cdata=!1}function s(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function o(e){if(e)return'\\n@'+(e.systemId||'')+'#[line:'+e.lineNumber+',col:'+e.columnNumber+']'}function l(e,t,n){return'string'==typeof e?e.substr(t,n):e.length>=t+n||t?new java.lang.String(e,t,n)+'':e}function d(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}a.prototype.parseFromString=function(e,t){var n=this.options,a=new c,s=n.domBuilder||new i,o=n.errorHandler,l=n.locator,d=n.xmlns||{},p={lt:'<',gt:'>',amp:'&',quot:'\"',apos:'\\''};return l&&s.setDocumentLocator(l),a.errorHandler=r(o,s,l),a.domBuilder=n.domBuilder||s,/\\/x?html?$/.test(t)&&(p.nbsp='\\xA0',p.copy='\\xA9',d['']='http://www.w3.org/1999/xhtml'),d.xml=d.xml||'http://www.w3.org/XML/1998/namespace',e?a.parse(e,d,p):a.errorHandler.error('invalid doc source'),s.doc},i.prototype={startDocument:function(){this.doc=new p().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,n,a){var r=this.doc,o=r.createElementNS(e,n||t),l=a.length;d(this,o),this.currentElement=o,this.locator&&s(this.locator,o);for(var c=0;c<l;c++){var e=a.getURI(c),i=a.getValue(c),n=a.getQName(c),p=r.createAttributeNS(e,n);this.locator&&s(a.getLocator(c),p),p.value=p.nodeValue=i,o.setAttributeNode(p)}},endElement:function(){var e=this.currentElement,t=e.tagName;this.currentElement=e.parentNode},startPrefixMapping:function(){},endPrefixMapping:function(){},processingInstruction:function(e,t){var n=this.doc.createProcessingInstruction(e,t);this.locator&&s(this.locator,n),d(this,n)},ignorableWhitespace:function(){},characters:function(e){if(e=l.apply(this,arguments),e){if(this.cdata)var t=this.doc.createCDATASection(e);else var t=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(t):/^\\s*$/.test(e)&&this.doc.appendChild(t),this.locator&&s(this.locator,t)}},skippedEntity:function(){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e){e=l.apply(this,arguments);var t=this.doc.createComment(e);this.locator&&s(this.locator,t),d(this,t)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,n){var a=this.doc.implementation;if(a&&a.createDocumentType){var r=a.createDocumentType(e,t,n);this.locator&&s(this.locator,r),d(this,r)}},warning:function(e){console.warn('[xmldom warning]\\t'+e,o(this.locator))},error:function(e){console.error('[xmldom error]\\t'+e,o(this.locator))},fatalError:function(e){throw console.error('[xmldom fatalError]\\t'+e,o(this.locator)),e}},'endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl'.replace(/\\w+/g,function(e){i.prototype[e]=function(){return null}});var c=n(84).XMLReader,p=t.DOMImplementation=n(39).DOMImplementation;t.XMLSerializer=n(39).XMLSerializer,t.DOMParser=a},function(e,t){function n(){}function a(e,t,n,p,f){function m(e){if(65535<e){e-=65536;var t=55296+(e>>10),n=56320+(1023&e);return y(t,n)}return y(e)}function E(e){var t=e.slice(1,-1);return t in n?n[t]:'#'===t.charAt(0)?m(parseInt(t.substr(1).replace('x','0x'))):(f.error('entity not found:'+e),e)}function C(t){if(t>k){var n=e.substring(k,t).replace(/&#?\\w+;/g,E);I&&v(k),p.characters(n,0,t-k),k=t}}function v(t,n){for(;t>=S&&(n=T.exec(e));)b=n.index,S=b+n[0].length,I.lineNumber++;I.columnNumber=t-b+1}for(var b=0,S=0,T=/.*(?:\\r\\n?|\\n)|.*$/g,I=p.locator,A=[{currentNSMap:t}],_={},k=0;;){try{var N=e.indexOf('<',k);if(0>N){if(!e.substr(k).match(/^\\s*$/)){var B=p.doc,R=B.createTextNode(e.substr(k));B.appendChild(R),p.currentElement=R}return}switch(N>k&&C(N),e.charAt(N+1)){case'/':var x=e.indexOf('>',N+3),L=e.substring(N+2,x),D=A.pop();0>x?(L=e.substring(N+2).replace(/[\\s<].*/,''),f.error('end tag name: '+L+' is not complete:'+D.tagName),x=N+1+L.length):L.match(/\\s</)&&(L=L.replace(/[\\s<].*/,''),f.error('end tag name: '+L+' maybe not complete'),x=N+1+L.length);var w=D.localNSMap,P=D.tagName==L,U=P||D.tagName&&D.tagName.toLowerCase()==L.toLowerCase();if(U){if(p.endElement(D.uri,D.localName,L),w)for(var O in w)p.endPrefixMapping(O);P||f.fatalError('end tag name: '+L+' is not match the current start tagName:'+D.tagName)}else A.push(D);x++;break;case'?':I&&v(N),x=g(e,N,p);break;case'!':I&&v(N),x=u(e,N,p,f);break;default:I&&v(N);var V=new h,K=A[A.length-1].currentNSMap,x=s(e,N,V,K,E,f),j=V.length;if(!V.closed&&d(e,x,V.tagName,_)&&(V.closed=!0,!n.nbsp&&f.warning('unclosed xml attribute')),I&&j){for(var M=r(I,{}),q=0,i;q<j;q++)i=V[q],v(i.offset),i.locator=r(I,{});p.locator=M,o(V,p,K)&&A.push(V),p.locator=I}else o(V,p,K)&&A.push(V);'http://www.w3.org/1999/xhtml'!==V.uri||V.closed?x++:x=l(e,x,V.tagName,E,p);}}catch(t){f.error('element parse error: '+t),x=-1}x>k?k=x:C(c(N,k)+1)}}function r(e,n){return n.lineNumber=e.lineNumber,n.columnNumber=e.columnNumber,n}function s(e,t,n,a,r,i){for(var o=++t,l=v,s,d;;){var p=e.charAt(o);switch(p){case'=':if(l==b)s=e.slice(t,o),l=T;else if(l==S)l=T;else throw new Error('attribute equal must after attrName');break;case'\\'':case'\"':if(l==T||l==b){if(l==b&&(i.warning('attribute value must after \"=\"'),s=e.slice(t,o)),t=o+1,o=e.indexOf(p,t),0<o)d=e.slice(t,o).replace(/&#?\\w+;/g,r),n.add(s,d,t-1),l=A;else throw new Error('attribute value no end \\''+p+'\\' match');}else if(l==I)d=e.slice(t,o).replace(/&#?\\w+;/g,r),n.add(s,d,t),i.warning('attribute \"'+s+'\" missed start quot('+p+')!!'),t=o+1,l=A;else throw new Error('attribute value must after \"=\"');break;case'/':switch(l){case v:n.setTagName(e.slice(t,o));case A:case _:case k:l=k,n.closed=!0;case I:case b:case S:break;default:throw new Error('attribute invalid close char(\\'/\\')');}break;case'':return i.error('unexpected end of input'),l==v&&n.setTagName(e.slice(t,o)),o;case'>':switch(l){case v:n.setTagName(e.slice(t,o));case A:case _:case k:break;case I:case b:d=e.slice(t,o),'/'===d.slice(-1)&&(n.closed=!0,d=d.slice(0,-1));case S:l==S&&(d=s),l==I?(i.warning('attribute \"'+d+'\" missed quot(\")!!'),n.add(s,d.replace(/&#?\\w+;/g,r),t)):(('http://www.w3.org/1999/xhtml'!==a['']||!d.match(/^(?:disabled|checked|selected)$/i))&&i.warning('attribute \"'+d+'\" missed value!! \"'+d+'\" instead!!'),n.add(d,d,t));break;case T:throw new Error('attribute value missed!!');}return o;case'\\x80':p=' ';default:if(' '>=p)switch(l){case v:n.setTagName(e.slice(t,o)),l=_;break;case b:s=e.slice(t,o),l=S;break;case I:var d=e.slice(t,o).replace(/&#?\\w+;/g,r);i.warning('attribute \"'+d+'\" missed quot(\")!!'),n.add(s,d,t);case A:l=_;}else switch(l){case S:n.tagName;'http://www.w3.org/1999/xhtml'===a['']&&s.match(/^(?:disabled|checked|selected)$/i)||i.warning('attribute \"'+s+'\" missed value!! \"'+s+'\" instead2!!'),n.add(s,s,t),t=o,l=b;break;case A:i.warning('attribute space is required\"'+s+'\"!!');case _:l=b,t=o;break;case T:l=I,t=o;break;case k:throw new Error('elements closed character \\'/\\' and \\'>\\' must be connected to');}}o++}}function o(e,t,n){for(var r=e.tagName,s=null,o=e.length;o--;){var i=e[o],a=i.qName,l=i.value,d=a.indexOf(':');if(0<d)var c=i.prefix=a.slice(0,d),u=a.slice(d+1),g='xmlns'===c&&u;else u=a,c=null,g='xmlns'===a&&'';i.localName=u,!1!==g&&(null==s&&(s={},p(n,n={})),n[g]=s[g]=l,i.uri='http://www.w3.org/2000/xmlns/',t.startPrefixMapping(g,l))}for(var o=e.length;o--;){i=e[o];var c=i.prefix;c&&('xml'===c&&(i.uri='http://www.w3.org/XML/1998/namespace'),'xmlns'!==c&&(i.uri=n[c||'']))}var d=r.indexOf(':');0<d?(c=e.prefix=r.slice(0,d),u=e.localName=r.slice(d+1)):(c=null,u=e.localName=r);var h=e.uri=n[c||''];if(t.startElement(h,u,r,e),!e.closed)return e.currentNSMap=n,e.localNSMap=s,!0;if(t.endElement(h,u,r),s)for(c in s)t.endPrefixMapping(c)}function l(e,t,n,a,r){if(/^(?:script|textarea)$/i.test(n)){var i=e.indexOf('</'+n+'>',t),s=e.substring(t+1,i);if(/[&<]/.test(s))return /^script$/i.test(n)?(r.characters(s,0,s.length),i):(s=s.replace(/&#?\\w+;/g,a),r.characters(s,0,s.length),i)}return t+1}function d(e,t,n,a){var r=a[n];return null==r&&(r=e.lastIndexOf('</'+n+'>'),r<t&&(r=e.lastIndexOf('</'+n)),a[n]=r),r<t}function p(e,t){for(var a in e)t[a]=e[a]}function u(e,t,n,a){var r=e.charAt(t+2);switch(r){case'-':if('-'===e.charAt(t+3)){var i=e.indexOf('-->',t+4);return i>t?(n.comment(e,t+4,i-t-4),i+3):(a.error('Unclosed comment'),-1)}return-1;default:if('CDATA['==e.substr(t+3,6)){var i=e.indexOf(']]>',t+9);return n.startCDATA(),n.characters(e,t+9,i-t-9),n.endCDATA(),i+3}var s=f(e,t),o=s.length;if(1<o&&/!doctype/i.test(s[0][0])){var l=s[1][0],d=3<o&&/^public$/i.test(s[2][0])&&s[3][0],c=4<o&&s[4][0],p=s[o-1];return n.startDTD(l,d&&d.replace(/^(['\"])(.*?)\\1$/,'$2'),c&&c.replace(/^(['\"])(.*?)\\1$/,'$2')),n.endDTD(),p.index+p[0].length}}return-1}function g(e,t,n){var a=e.indexOf('?>',t);if(a){var r=e.substring(t,a).match(/^<\\?(\\S*)\\s*([\\s\\S]*?)\\s*$/);if(r){r[0].length;return n.processingInstruction(r[1],r[2]),a+2}return-1}return-1}function h(){}function i(e,t){return e.__proto__=t,e}function f(e,t){var n=[],a=/'[^']+'|\"[^\"]+\"|[^\\s<>\\/=]+=?|(\\/?\\s*>|<)/g,r;for(a.lastIndex=t,a.exec(e);r=a.exec(e);)if(n.push(r),r[1])return n}var m=/[A-Z_a-z\\xC0-\\xD6\\xD8-\\xF6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]/,E=new RegExp('[\\\\-\\\\.0-9'+m.source.slice(1,-1)+'\\\\u00B7\\\\u0300-\\\\u036F\\\\u203F-\\\\u2040]'),C=new RegExp('^'+m.source+E.source+'*(?::'+m.source+E.source+'*)?$'),v=0,b=1,S=2,T=3,I=4,A=5,_=6,k=7;n.prototype={parse:function(e,t,n){var r=this.domBuilder;r.startDocument(),p(t,t={}),a(e,t,n,r,this.errorHandler),r.endDocument()}},h.prototype={setTagName:function(e){if(!C.test(e))throw new Error('invalid tagName:'+e);this.tagName=e},add:function(e,t,n){if(!C.test(e))throw new Error('invalid attribute:'+e);this[this.length++]={qName:e,value:t,offset:n}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},i({},i.prototype)instanceof i||(i=function(e,t){function n(){}for(t in n.prototype=t,n=new n,e)n[t]=e[t];return n}),t.XMLReader=n},function(e,t,n){'use strict';function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var i=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(2),o=n(26),l=a(o),c=n(3),p=a(c),u=n(4),g=n(6),h=a(g),y=function(){function e(t,n,a){r(this,e),this.spine=t,this.request=n,this.pause=a||100,this.q=new l.default(this),this.epubcfi=new p.default,this._locations=[],this._locationsWords=[],this.total=0,this.break=150,this._current=0,this._wordCounter=0,this.currentLocation='',this._currentCfi='',this.processingTimeout=void 0}return i(e,[{key:'generate',value:function(e){return e&&(this.break=e),this.q.pause(),this.spine.each(function(e){e.linear&&this.q.enqueue(this.process.bind(this),e)}.bind(this)),this.q.run().then(function(){return this.total=this._locations.length-1,this._currentCfi&&(this.currentLocation=this._currentCfi),this._locations}.bind(this))}},{key:'createRange',value:function(){return{startContainer:void 0,startOffset:void 0,endContainer:void 0,endOffset:void 0}}},{key:'process',value:function(e){return e.load(this.request).then(function(t){var n=new s.defer,a=this.parse(t,e.cfiBase);return this._locations=this._locations.concat(a),e.unload(),this.processingTimeout=setTimeout(function(){return n.resolve(a)},this.pause),n.promise}.bind(this))}},{key:'parse',value:function(e,t,n){var a=[],r=e.ownerDocument,i=(0,s.qs)(r,'body'),o=0,l=n||this.break,d,c;if((0,s.sprint)(i,function(e){var n=e.length,r=0,i;if(0===e.textContent.trim().length)return!1;for(0==o&&(d=this.createRange(),d.startContainer=e,d.startOffset=0),i=l-o,i>n&&(o+=n,r=n);r<n;)if(i=l-o,0===o&&(r+=1,d=this.createRange(),d.startContainer=e,d.startOffset=r),r+i>=n)o+=n-r,r=n;else{r+=i,d.endContainer=e,d.endOffset=r;var s=new p.default(d,t).toString();a.push(s),o=0}c=e}.bind(this)),d&&d.startContainer&&c){d.endContainer=c,d.endOffset=c.length;var u=new p.default(d,t).toString();a.push(u),o=0}return a}},{key:'generateFromWords',value:function(e,t,n){var a=e?new p.default(e):void 0;return this.q.pause(),this._locationsWords=[],this._wordCounter=0,this.spine.each(function(e){e.linear&&(a?e.index>=a.spinePos&&this.q.enqueue(this.processWords.bind(this),e,t,a,n):this.q.enqueue(this.processWords.bind(this),e,t,a,n))}.bind(this)),this.q.run().then(function(){return this._currentCfi&&(this.currentLocation=this._currentCfi),this._locationsWords}.bind(this))}},{key:'processWords',value:function(e,t,n,a){return a&&this._locationsWords.length>=a?Promise.resolve():e.load(this.request).then(function(r){var i=new s.defer,o=this.parseWords(r,e,t,n),l=a-this._locationsWords.length;return this._locationsWords=this._locationsWords.concat(o.length>=a?o.slice(0,l):o),e.unload(),this.processingTimeout=setTimeout(function(){return i.resolve(o)},this.pause),i.promise}.bind(this))}},{key:'countWords',value:function(e){return e=e.replace(/(^\\s*)|(\\s*$)/gi,''),e=e.replace(/[ ]{2,}/gi,' '),e=e.replace(/\\n /,'\\n'),e.split(' ').length}},{key:'parseWords',value:function(e,t,n,a){var r=t.cfiBase,i=[],o=e.ownerDocument,l=(0,s.qs)(o,'body'),d=n,c=!a||a.spinePos!==t.index,u;a&&t.index===a.spinePos&&(u=a.findNode(a.range?a.path.steps.concat(a.start.steps):a.path.steps,e.ownerDocument));return(0,s.sprint)(l,function(e){if(!c)if(e===u)c=!0;else return!1;if(10>e.textContent.length&&0===e.textContent.trim().length)return!1;var t=this.countWords(e.textContent),n=0,a;if(0===t)return!1;for(a=d-this._wordCounter,a>t&&(this._wordCounter+=t,n=t);n<t;)if(a=d-this._wordCounter,n+a>=t)this._wordCounter+=t-n,n=t;else{n+=a;var s=new p.default(e,r);i.push({cfi:s.toString(),wordCount:this._wordCounter}),this._wordCounter=0}}.bind(this)),i}},{key:'locationFromCfi',value:function(e){var t;return(p.default.prototype.isCfiString(e)&&(e=new p.default(e)),0===this._locations.length)?-1:(t=(0,s.locationOf)(e,this._locations,this.epubcfi.compare),t>this.total?this.total:t)}},{key:'percentageFromCfi',value:function(e){if(0===this._locations.length)return null;var t=this.locationFromCfi(e);return this.percentageFromLocation(t)}},{key:'percentageFromLocation',value:function(e){return e&&this.total?e/this.total:0}},{key:'cfiFromLocation',value:function(e){var t=-1;return'number'!=typeof e&&(e=parseInt(e)),0<=e&&e<this._locations.length&&(t=this._locations[e]),t}},{key:'cfiFromPercentage',value:function(e){var t;if(1<e&&console.warn('Normalize cfiFromPercentage value to between 0 - 1'),1<=e){var n=new p.default(this._locations[this.total]);return n.collapse(),n.toString()}return t=d(this.total*e),this.cfiFromLocation(t)}},{key:'load',value:function(e){return this._locations='string'==typeof e?JSON.parse(e):e,this.total=this._locations.length-1,this._locations}},{key:'save',value:function(){return JSON.stringify(this._locations)}},{key:'getCurrent',value:function(){return this._current}},{key:'setCurrent',value:function(e){var t;if('string'==typeof e)this._currentCfi=e;else if('number'==typeof e)this._current=e;else return;0===this._locations.length||('string'==typeof e?(t=this.locationFromCfi(e),this._current=t):t=e,this.emit(u.EVENTS.LOCATIONS.CHANGED,{percentage:this.percentageFromLocation(t)}))}},{key:'length',value:function(){return this._locations.length}},{key:'destroy',value:function(){this.spine=void 0,this.request=void 0,this.pause=void 0,this.q.stop(),this.q=void 0,this.epubcfi=void 0,this._locations=void 0,this.total=void 0,this.break=void 0,this._current=void 0,this.currentLocation=void 0,this._currentCfi=void 0,clearTimeout(this.processingTimeout)}},{key:'currentLocation',get:function(){return this._current},set:function(e){this.setCurrent(e)}}]),e}();(0,h.default)(y.prototype),t.default=y,e.exports=t['default']},function(e,t,n){'use strict';function a(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var r=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(17),s=function(e){return e&&e.__esModule?e:{default:e}}(i),o=n(2),l=function(){function e(t){a(this,e),this.packagePath='',this.directory='',this.encoding='',t&&this.parse(t)}return r(e,[{key:'parse',value:function(e){var t;if(!e)throw new Error('Container File Not Found');if(t=(0,o.qs)(e,'rootfile'),!t)throw new Error('No RootFile Found');this.packagePath=t.getAttribute('full-path'),this.directory=s.default.dirname(this.packagePath),this.encoding=e.xmlEncoding}},{key:'destroy',value:function(){this.packagePath=void 0,this.directory=void 0,this.encoding=void 0}}]),e}();t.default=l,e.exports=t['default']},function(e,t,n){'use strict';function a(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var r=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(2),s=function(){function e(t){a(this,e),this.manifest={},this.navPath='',this.ncxPath='',this.coverPath='',this.spineNodeIndex=0,this.spine=[],this.metadata={},t&&this.parse(t)}return r(e,[{key:'parse',value:function(e){var t,n,a;if(!e)throw new Error('Package File Not Found');if(t=(0,i.qs)(e,'metadata'),!t)throw new Error('No Metadata Found');if(n=(0,i.qs)(e,'manifest'),!n)throw new Error('No Manifest Found');if(a=(0,i.qs)(e,'spine'),!a)throw new Error('No Spine Found');return this.manifest=this.parseManifest(n),this.navPath=this.findNavPath(n),this.ncxPath=this.findNcxPath(n,a),this.coverPath=this.findCoverPath(e),this.spineNodeIndex=(0,i.indexOfElementNode)(a),this.spine=this.parseSpine(a,this.manifest),this.uniqueIdentifier=this.findUniqueIdentifier(e),this.metadata=this.parseMetadata(t),this.metadata.direction=a.getAttribute('page-progression-direction'),{metadata:this.metadata,spine:this.spine,manifest:this.manifest,navPath:this.navPath,ncxPath:this.ncxPath,coverPath:this.coverPath,spineNodeIndex:this.spineNodeIndex}}},{key:'parseMetadata',value:function(e){var t={title:this.getElementText(e,'title'),creator:this.getElementText(e,'creator'),description:this.getElementText(e,'description'),pubdate:this.getElementText(e,'date'),publisher:this.getElementText(e,'publisher'),identifier:this.getElementText(e,'identifier'),language:this.getElementText(e,'language'),rights:this.getElementText(e,'rights'),modified_date:this.getPropertyText(e,'dcterms:modified'),layout:this.getPropertyText(e,'rendition:layout'),orientation:this.getPropertyText(e,'rendition:orientation'),flow:this.getPropertyText(e,'rendition:flow'),viewport:this.getPropertyText(e,'rendition:viewport'),media_active_class:this.getPropertyText(e,'media:active-class'),spread:this.getPropertyText(e,'rendition:spread')};return t}},{key:'parseManifest',value:function(e){var t={},n=(0,i.qsa)(e,'item'),a=Array.prototype.slice.call(n);return a.forEach(function(e){var n=e.getAttribute('id'),a=e.getAttribute('href')||'',r=e.getAttribute('media-type')||'',i=e.getAttribute('media-overlay')||'',s=e.getAttribute('properties')||'';t[n]={href:a,type:r,overlay:i,properties:s.length?s.split(' '):[]}}),t}},{key:'parseSpine',value:function(e){var t=[],n=(0,i.qsa)(e,'itemref'),a=Array.prototype.slice.call(n);return a.forEach(function(e,n){var a=e.getAttribute('idref'),r=e.getAttribute('properties')||'',i=r.length?r.split(' '):[],s={idref:a,linear:e.getAttribute('linear')||'yes',properties:i,index:n};t.push(s)}),t}},{key:'findUniqueIdentifier',value:function(e){var t=e.documentElement.getAttribute('unique-identifier');if(!t)return'';var n=e.getElementById(t);return n?'identifier'===n.localName&&'http://purl.org/dc/elements/1.1/'===n.namespaceURI?0<n.childNodes.length?n.childNodes[0].nodeValue.trim():'':'':''}},{key:'findNavPath',value:function(e){var t=(0,i.qsp)(e,'item',{properties:'nav'});return!!t&&t.getAttribute('href')}},{key:'findNcxPath',value:function(e,t){var n=(0,i.qsp)(e,'item',{\"media-type\":'application/x-dtbncx+xml'}),a;return n||(a=t.getAttribute('toc'),a&&(n=e.querySelector('#'+a))),!!n&&n.getAttribute('href')}},{key:'findCoverPath',value:function(e){var t=(0,i.qs)(e,'package'),n=t.getAttribute('version');if('2.0'===n){var a=(0,i.qsp)(e,'meta',{name:'cover'});if(a){var r=a.getAttribute('content'),s=e.getElementById(r);return s?s.getAttribute('href'):''}return!1}var o=(0,i.qsp)(e,'item',{properties:'cover-image'});return o?o.getAttribute('href'):''}},{key:'getElementText',value:function(e,t){var n=e.getElementsByTagNameNS('http://purl.org/dc/elements/1.1/',t),a;return n&&0!==n.length?(a=n[0],a.childNodes.length?a.childNodes[0].nodeValue:''):''}},{key:'getPropertyText',value:function(e,t){var n=(0,i.qsp)(e,'meta',{property:t});return n&&n.childNodes.length?n.childNodes[0].nodeValue:''}},{key:'load',value:function(e){var t=this;this.metadata=e.metadata;var n=e.readingOrder||e.spine;return this.spine=n.map(function(e,t){return e.index=t,e.linear=e.linear||'yes',e}),e.resources.forEach(function(e,n){t.manifest[n]=e,e.rel&&'cover'===e.rel[0]&&(t.coverPath=e.href)}),this.spineNodeIndex=0,this.toc=e.toc.map(function(e){return e.label=e.title,e}),{metadata:this.metadata,spine:this.spine,manifest:this.manifest,navPath:this.navPath,ncxPath:this.ncxPath,coverPath:this.coverPath,spineNodeIndex:this.spineNodeIndex,toc:this.toc}}},{key:'destroy',value:function(){this.manifest=void 0,this.navPath=void 0,this.ncxPath=void 0,this.coverPath=void 0,this.spineNodeIndex=void 0,this.spine=void 0,this.metadata=void 0}}]),e}();t.default=s,e.exports=t['default']},function(e,t,n){'use strict';function a(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var r=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(2),i=function(){function e(t){a(this,e),this.toc=[],this.tocByHref={},this.tocById={},this.landmarks=[],this.landmarksByType={},this.length=0,t&&this.parse(t)}return r(e,[{key:'parse',value:function(e){var t=e.nodeType,n=void 0,a=void 0;t&&(n=(0,s.qs)(e,'html'),a=(0,s.qs)(e,'ncx')),t?n?(this.toc=this.parseNav(e),this.landmarks=this.parseLandmarks(e)):a&&(this.toc=this.parseNcx(e)):this.toc=this.load(e),this.length=0,this.unpack(this.toc)}},{key:'unpack',value:function(e){for(var t=0,n;t<e.length;t++)n=e[t],n.href&&(this.tocByHref[n.href]=t),n.id&&(this.tocById[n.id]=t),this.length++,n.subitems.length&&this.unpack(n.subitems)}},{key:'get',value:function(e){var t;return e?(0===e.indexOf('#')?t=this.tocById[e.substring(1)]:e in this.tocByHref&&(t=this.tocByHref[e]),this.getByIndex(e,t,this.toc)):this.toc}},{key:'getByIndex',value:function(e,t,n){if(0!==n.length){var a=n[t];if(a&&(e===a.id||e===a.href))return a;for(var r=void 0,s=0;s<n.length&&(r=this.getByIndex(e,t,n[s].subitems),!r);++s);return r}}},{key:'landmark',value:function(e){var t;return e?(t=this.landmarksByType[e],this.landmarks[t]):this.landmarks}},{key:'parseNav',value:function(e){var t=(0,s.querySelectorByType)(e,'nav','toc'),n=t?(0,s.qsa)(t,'li'):[],a=n.length,r={},o=[],l,i,d;if(!n||0===a)return o;for(l=0;l<a;++l)i=this.navItem(n[l]),i&&(r[i.id]=i,i.parent?(d=r[i.parent],d.subitems.push(i)):o.push(i));return o}},{key:'navItem',value:function(e){var t=e.getAttribute('id')||void 0,n=(0,s.filterChildren)(e,'a',!0);if(n){var a=n.getAttribute('href')||'';t||(t=a);var r=n.textContent||'',i=(0,s.getParentByTagName)(e,'li'),o=void 0;if(i&&(o=i.getAttribute('id'),!o)){var l=(0,s.filterChildren)(i,'a',!0);o=l&&l.getAttribute('href')}for(;!o&&i;)if(i=(0,s.getParentByTagName)(i,'li'),i&&(o=i.getAttribute('id'),!o)){var d=(0,s.filterChildren)(i,'a',!0);o=d&&d.getAttribute('href')}return{id:t,href:a,label:r,subitems:[],parent:o}}}},{key:'parseLandmarks',value:function(e){var t=(0,s.querySelectorByType)(e,'nav','landmarks'),n=t?(0,s.qsa)(t,'li'):[],a=n.length,r=[],o,i;if(!n||0===a)return r;for(o=0;o<a;++o)i=this.landmarkItem(n[o]),i&&(r.push(i),this.landmarksByType[i.type]=o);return r}},{key:'landmarkItem',value:function(e){var t=(0,s.filterChildren)(e,'a',!0);if(t){var n=t.getAttributeNS('http://www.idpf.org/2007/ops','type')||void 0,a=t.getAttribute('href')||'',r=t.textContent||'';return{href:a,label:r,type:n}}}},{key:'parseNcx',value:function(e){var t=(0,s.qsa)(e,'navPoint'),n=t.length,a={},r=[],o,i,l;if(!t||0===n)return r;for(o=0;o<n;++o)i=this.ncxItem(t[o]),a[i.id]=i,i.parent?(l=a[i.parent],l.subitems.push(i)):r.push(i);return r}},{key:'ncxItem',value:function(e){var t=e.getAttribute('id')||!1,n=(0,s.qs)(e,'content'),a=n.getAttribute('src'),r=(0,s.qs)(e,'navLabel'),i=r.textContent?r.textContent:'',o=e.parentNode,l;return o&&('navPoint'===o.nodeName||'navPoint'===o.nodeName.split(':').slice(-1)[0])&&(l=o.getAttribute('id')),{id:t,href:a,label:i,subitems:[],parent:l}}},{key:'load',value:function(e){var t=this;return e.map(function(e){return e.label=e.title,e.subitems=e.children?t.load(e.children):[],e})}},{key:'forEach',value:function(e){return this.toc.forEach(e)}}]),e}();t.default=i,e.exports=t['default']},function(e,t,n){'use strict';function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var i=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(18),o=n(2),l=n(16),d=a(l),c=n(27),p=a(c),u=n(10),g=a(u),h=n(17),y=a(h),f=function(){function e(t,n){r(this,e),this.settings={replacements:n&&n.replacements||'base64',archive:n&&n.archive,resolver:n&&n.resolver,request:n&&n.request},this.process(t)}return i(e,[{key:'process',value:function(e){this.manifest=e,this.resources=Object.keys(e).map(function(t){return e[t]}),this.replacementUrls=[],this.html=[],this.assets=[],this.css=[],this.urls=[],this.cssUrls=[],this.split(),this.splitUrls()}},{key:'split',value:function(){this.html=this.resources.filter(function(e){if('application/xhtml+xml'===e.type||'text/html'===e.type)return!0}),this.assets=this.resources.filter(function(e){if('application/xhtml+xml'!==e.type&&'text/html'!==e.type)return!0}),this.css=this.resources.filter(function(e){if('text/css'===e.type)return!0})}},{key:'splitUrls',value:function(){this.urls=this.assets.map(function(e){return e.href}.bind(this)),this.cssUrls=this.css.map(function(e){return e.href})}},{key:'createUrl',value:function(e){var t=new d.default(e),n=p.default.lookup(t.filename);return this.settings.archive?this.settings.archive.createUrl(e,{base64:'base64'===this.settings.replacements}):'base64'===this.settings.replacements?this.settings.request(e,'blob').then(function(e){return(0,o.blob2base64)(e)}).then(function(e){return(0,o.createBase64Url)(e,n)}):this.settings.request(e,'blob').then(function(e){return(0,o.createBlobUrl)(e,n)})}},{key:'replacements',value:function(){var e=this;if('none'===this.settings.replacements)return new Promise(function(e){e(this.urls)}.bind(this));var t=this.urls.map(function(t){var n=e.settings.resolver(t);return e.createUrl(n).catch(function(e){return console.error(e),null})});return Promise.all(t).then(function(t){return e.replacementUrls=t.filter(function(e){return'string'==typeof e}),t})}},{key:'replaceCss',value:function(e,t){var n=[];return e=e||this.settings.archive,t=t||this.settings.resolver,this.cssUrls.forEach(function(a){var r=this.createCssFile(a,e,t).then(function(e){var t=this.urls.indexOf(a);-1<t&&(this.replacementUrls[t]=e)}.bind(this));n.push(r)}.bind(this)),Promise.all(n)}},{key:'createCssFile',value:function(e){var t=this,n;if(y.default.isAbsolute(e))return new Promise(function(e){e()});var a=this.settings.resolver(e),r;r=this.settings.archive?this.settings.archive.getText(a):this.settings.request(a,'text');var i=this.urls.map(function(e){var n=t.settings.resolver(e),r=new g.default(a).relative(n);return r});return r?r.then(function(e){return e=(0,s.substitute)(e,i,t.replacementUrls),n='base64'===t.settings.replacements?(0,o.createBase64Url)(e,'text/css'):(0,o.createBlobUrl)(e,'text/css'),n},function(){return new Promise(function(e){e()})}):new Promise(function(e){e()})}},{key:'relativeTo',value:function(e,t){return t=t||this.settings.resolver,this.urls.map(function(n){var a=t(n),r=new g.default(e).relative(a);return r}.bind(this))}},{key:'get',value:function(e){var t=this.urls.indexOf(e);return-1===t?void 0:this.replacementUrls.length?new Promise(function(e){e(this.replacementUrls[t])}.bind(this)):this.createUrl(e)}},{key:'substitute',value:function(e,t){var n;return n=t?this.relativeTo(t):this.urls,(0,s.substitute)(e,n,this.replacementUrls)}},{key:'destroy',value:function(){this.settings=void 0,this.manifest=void 0,this.resources=void 0,this.replacementUrls=void 0,this.html=void 0,this.assets=void 0,this.css=void 0,this.urls=void 0,this.cssUrls=void 0}}]),e}();t.default=f,e.exports=t['default']},function(e,t,n){'use strict';function a(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var i=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(3),o=function(e){return e&&e.__esModule?e:{default:e}}(s),l=n(2),d=function(){function e(t){a(this,e),this.pages=[],this.locations=[],this.epubcfi=new o.default,this.firstPage=0,this.lastPage=0,this.totalPages=0,this.toc=void 0,this.ncx=void 0,t&&(this.pageList=this.parse(t)),this.pageList&&this.pageList.length&&this.process(this.pageList)}return i(e,[{key:'parse',value:function(e){var t=(0,l.qs)(e,'html'),n=(0,l.qs)(e,'ncx');return t?this.parseNav(e):n?this.parseNcx(e):void 0}},{key:'parseNav',value:function(e){var t=(0,l.querySelectorByType)(e,'nav','page-list'),n=t?(0,l.qsa)(t,'li'):[],a=n.length,r=[],s,i;if(!n||0===a)return r;for(s=0;s<a;++s)i=this.item(n[s]),r.push(i);return r}},{key:'parseNcx',value:function(e){var t=[],n=0,a=0,r,i,s;if(i=(0,l.qs)(e,'pageList'),!i)return t;if(s=(0,l.qsa)(i,'pageTarget'),a=s.length,!s||0===s.length)return t;for(n=0;n<a;++n)r=this.ncxItem(s[n]),t.push(r);return t}},{key:'ncxItem',value:function(e){var t=(0,l.qs)(e,'navLabel'),n=(0,l.qs)(t,'text'),a=n.textContent,r=(0,l.qs)(e,'content'),i=r.getAttribute('src'),s=parseInt(a,10);return{href:i,page:s}}},{key:'item',value:function(e){var t=(0,l.qs)(e,'a'),n=t.getAttribute('href')||'',a=t.textContent||'',r=parseInt(a),i=n.indexOf('epubcfi'),s,o,d;return-1==i?{href:n,page:r}:(s=n.split('#'),o=s[0],d=!!(1<s.length)&&s[1],{cfi:d,href:n,packageUrl:o,page:r})}},{key:'process',value:function(e){e.forEach(function(e){this.pages.push(e.page),e.cfi&&this.locations.push(e.cfi)},this),this.firstPage=parseInt(this.pages[0]),this.lastPage=parseInt(this.pages[this.pages.length-1]),this.totalPages=this.lastPage-this.firstPage}},{key:'pageFromCfi',value:function(e){var t=-1;if(0===this.locations.length)return-1;var n=(0,l.indexOfSorted)(e,this.locations,this.epubcfi.compare);return-1==n?(n=(0,l.locationOf)(e,this.locations,this.epubcfi.compare),t=0<=n-1?this.pages[n-1]:this.pages[0],void 0!==t||(t=-1)):t=this.pages[n],t}},{key:'cfiFromPage',value:function(e){var t=-1;'number'!=typeof e&&(e=parseInt(e));var n=this.pages.indexOf(e);return-1!=n&&(t=this.locations[n]),t}},{key:'pageFromPercentage',value:function(e){var t=r(this.totalPages*e);return t}},{key:'percentageFromPage',value:function(e){var t=(e-this.firstPage)/this.totalPages;return r(1e3*t)/1e3}},{key:'percentageFromCfi',value:function(e){var t=this.pageFromCfi(e),n=this.percentageFromPage(t);return n}},{key:'destroy',value:function(){this.pages=void 0,this.locations=void 0,this.epubcfi=void 0,this.pageList=void 0,this.toc=void 0,this.ncx=void 0}}]),e}();t.default=d,e.exports=t['default']},function(e,t,n){'use strict';function a(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var r=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(2),s=n(4),o=n(6),l=function(e){return e&&e.__esModule?e:{default:e}}(o),c=function(){function e(t){a(this,e),this.settings=t,this.name=t.layout||'reflowable',this._spread='none'!==t.spread,this._minSpreadWidth=t.minSpreadWidth||800,this._evenSpreads=t.evenSpreads||!1,this._flow='scrolled'===t.flow||'scrolled-continuous'===t.flow||'scrolled-doc'===t.flow?'scrolled':'paginated',this.width=0,this.height=0,this.spreadWidth=0,this.delta=0,this.columnWidth=0,this.gap=0,this.divisor=1,this.props={name:this.name,spread:this._spread,flow:this._flow,width:0,height:0,spreadWidth:0,delta:0,columnWidth:0,gap:0,divisor:1}}return r(e,[{key:'flow',value:function(e){return'undefined'!=typeof e&&(this._flow='scrolled'===e||'scrolled-continuous'===e||'scrolled-doc'===e?'scrolled':'paginated',this.update({flow:this._flow})),this._flow}},{key:'spread',value:function(e,t){return e&&(this._spread='none'!==e,this.update({spread:this._spread})),0<=t&&(this._minSpreadWidth=t),this._spread}},{key:'calculate',value:function(e,t,n){var a=1,r=n||0,i=e,s=t,o=p(i/12),l,d,c,u;a=this._spread&&i>=this._minSpreadWidth?2:1,'reflowable'!==this.name||'paginated'!==this._flow||0<=n||(r=0==o%2?o:o-1),'pre-paginated'===this.name&&(r=0),1<a?(l=i/a-r,c=l+r):(l=i,c=i),'pre-paginated'===this.name&&1<a&&(i=l),d=l*a+r,u=i,this.width=i,this.height=s,this.spreadWidth=d,this.pageWidth=c,this.delta=u,this.columnWidth=l,this.gap=r,this.divisor=a,this.update({width:i,height:s,spreadWidth:d,pageWidth:c,delta:u,columnWidth:l,gap:r,divisor:a})}},{key:'format',value:function(e,t){var n;return n='pre-paginated'===this.name?e.fit(this.columnWidth,this.height,t):'paginated'===this._flow?e.columns(this.width,this.height,this.columnWidth,this.gap):e.size(this.width,null),n}},{key:'count',value:function(e,t){var n,a;return'pre-paginated'===this.name?(n=1,a=1):'paginated'===this._flow?(t=t||this.delta,n=d(e/t),a=n*this.divisor):(t=t||this.height,n=d(e/t),a=n),{spreads:n,pages:a}}},{key:'update',value:function(e){var t=this;if(Object.keys(e).forEach(function(n){t.props[n]===e[n]&&delete e[n]}),0<Object.keys(e).length){var n=(0,i.extend)(this.props,e);this.emit(s.EVENTS.LAYOUT.UPDATED,n,e)}}}]),e}();(0,l.default)(c.prototype),t.default=c,e.exports=t['default']},function(e,t,n){'use strict';function a(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var r='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&'function'==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?'symbol':typeof e},i=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(16),o=function(e){return e&&e.__esModule?e:{default:e}}(s),l=function(){function e(t){a(this,e),this.rendition=t,this._themes={default:{rules:{},url:'',serialized:''}},this._overrides={},this._current='default',this._injected=[],this.rendition.hooks.content.register(this.inject.bind(this)),this.rendition.hooks.content.register(this.overrides.bind(this))}return i(e,[{key:'register',value:function(){return 0===arguments.length?void 0:1===arguments.length&&'object'===r(arguments[0])?this.registerThemes(arguments[0]):1===arguments.length&&'string'==typeof arguments[0]?this.default(arguments[0]):2===arguments.length&&'string'==typeof arguments[1]?this.registerUrl(arguments[0],arguments[1]):2===arguments.length&&'object'===r(arguments[1])?this.registerRules(arguments[0],arguments[1]):void 0}},{key:'default',value:function(e){return e?'string'==typeof e?this.registerUrl('default',e):'object'===('undefined'==typeof e?'undefined':r(e))?this.registerRules('default',e):void 0:void 0}},{key:'registerThemes',value:function(e){for(var t in e)e.hasOwnProperty(t)&&('string'==typeof e[t]?this.registerUrl(t,e[t]):this.registerRules(t,e[t]))}},{key:'registerCss',value:function(e,t){this._themes[e]={serialized:t},(this._injected[e]||'default'==e)&&this.update(e)}},{key:'registerUrl',value:function(e,t){var n=new o.default(t);this._themes[e]={url:n.toString()},(this._injected[e]||'default'==e)&&this.update(e)}},{key:'registerRules',value:function(e,t){this._themes[e]={rules:t},(this._injected[e]||'default'==e)&&this.update(e)}},{key:'select',value:function(e){var t=this._current,n;this._current=e,this.update(e),n=this.rendition.getContents(),n.forEach(function(n){n.removeClass(t),n.addClass(e)})}},{key:'update',value:function(e){var t=this,n=this.rendition.getContents();n.forEach(function(n){t.add(e,n)})}},{key:'inject',value:function(e){var t=[],n=this._themes,a;for(var r in n)n.hasOwnProperty(r)&&(r===this._current||'default'==r)&&(a=n[r],(a.rules&&0<Object.keys(a.rules).length||a.url&&-1===t.indexOf(a.url))&&this.add(r,e),this._injected.push(r));'default'!=this._current&&e.addClass(this._current)}},{key:'add',value:function(e,t){var n=this._themes[e];n&&t&&(n.url?t.addStylesheet(n.url):n.serialized?(t.addStylesheetCss(n.serialized,e),n.injected=!0):n.rules&&(t.addStylesheetRules(n.rules,e),n.injected=!0))}},{key:'override',value:function(e,t,n){var a=this,r=this.rendition.getContents();this._overrides[e]={value:t,priority:!0===n},r.forEach(function(t){t.css(e,a._overrides[e].value,a._overrides[e].priority)})}},{key:'removeOverride',value:function(e){var t=this.rendition.getContents();delete this._overrides[e],t.forEach(function(t){t.css(e)})}},{key:'overrides',value:function(e){var t=this._overrides;for(var n in t)t.hasOwnProperty(n)&&e.css(n,t[n].value,t[n].priority)}},{key:'fontSize',value:function(e){this.override('font-size',e)}},{key:'font',value:function(e){this.override('font-family',e,!0)}},{key:'destroy',value:function(){this.rendition=void 0,this._themes=void 0,this._overrides=void 0,this._current=void 0,this._injected=void 0}}]),e}();t.default=l,e.exports=t['default']},function(e,t,n){'use strict';function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var i=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(6),o=a(s),l=n(3),d=a(l),c=n(4),p=function(){function e(t){r(this,e),this.rendition=t,this.highlights=[],this.underlines=[],this.marks=[],this._annotations={},this._annotationsBySectionIndex={},this.rendition.hooks.render.register(this.inject.bind(this)),this.rendition.hooks.unloaded.register(this.clear.bind(this))}return i(e,[{key:'add',value:function(e,t,n,a,r,i){var s=encodeURI(t+e),o=new d.default(t),l=o.spinePos,c=new u({type:e,cfiRange:t,data:n,sectionIndex:l,cb:a,className:r,styles:i});this._annotations[s]=c,l in this._annotationsBySectionIndex?this._annotationsBySectionIndex[l].push(s):this._annotationsBySectionIndex[l]=[s];var p=this.rendition.views();return p.forEach(function(e){c.sectionIndex===e.index&&c.attach(e)}),c}},{key:'remove',value:function(e,t){var n=this,a=encodeURI(e+t);if(a in this._annotations){var r=this._annotations[a];if(t&&r.type!==t)return;var i=this.rendition.views();i.forEach(function(e){n._removeFromAnnotationBySectionIndex(r.sectionIndex,a),r.sectionIndex===e.index&&r.detach(e)}),delete this._annotations[a]}}},{key:'_removeFromAnnotationBySectionIndex',value:function(e,t){this._annotationsBySectionIndex[e]=this._annotationsAt(e).filter(function(e){return e!==t})}},{key:'_annotationsAt',value:function(e){return this._annotationsBySectionIndex[e]}},{key:'highlight',value:function(e,t,n,a,r){return this.add('highlight',e,t,n,a,r)}},{key:'underline',value:function(e,t,n,a,r){return this.add('underline',e,t,n,a,r)}},{key:'mark',value:function(e,t,n){return this.add('mark',e,t,n)}},{key:'each',value:function(){return this._annotations.forEach.apply(this._annotations,arguments)}},{key:'inject',value:function(e){var t=this,n=e.index;if(n in this._annotationsBySectionIndex){var a=this._annotationsBySectionIndex[n];a.forEach(function(n){var a=t._annotations[n];a.attach(e)})}}},{key:'clear',value:function(e){var t=this,n=e.index;if(n in this._annotationsBySectionIndex){var a=this._annotationsBySectionIndex[n];a.forEach(function(n){var a=t._annotations[n];a.detach(e)})}}},{key:'show',value:function(){}},{key:'hide',value:function(){}}]),e}(),u=function(){function e(t){var n=t.type,a=t.cfiRange,i=t.data,s=t.sectionIndex,o=t.cb,l=t.className,d=t.styles;r(this,e),this.type=n,this.cfiRange=a,this.data=i,this.sectionIndex=s,this.mark=void 0,this.cb=o,this.className=l,this.styles=d}return i(e,[{key:'update',value:function(e){this.data=e}},{key:'attach',value:function(e){var t=this.cfiRange,n=this.data,a=this.type,r=this.mark,i=this.cb,s=this.className,o=this.styles,l=void 0;return'highlight'===a?l=e.highlight(t,n,i,s,o):'underline'===a?l=e.underline(t,n,i,s,o):'mark'===a&&(l=e.mark(t,n,i)),this.mark=l,this.emit(c.EVENTS.ANNOTATION.ATTACH,l),l}},{key:'detach',value:function(e){var t=this.cfiRange,n=this.type,a=void 0;return e&&('highlight'===n?a=e.unhighlight(t):'underline'===n?a=e.ununderline(t):'mark'===n&&(a=e.unmark(t))),this.mark=void 0,this.emit(c.EVENTS.ANNOTATION.DETACH,a),a}},{key:'text',value:function(){}}]),e}();(0,o.default)(u.prototype),t.default=p,e.exports=t['default']},function(e,t,n){'use strict';function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!e)throw new ReferenceError('this hasn\\'t been initialised - super() hasn\\'t been called');return t&&('object'===('undefined'==typeof t?'undefined':c(t))||'function'==typeof t)?t:e}function i(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+('undefined'==typeof t?'undefined':c(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function o(e,t){var n=t.getBoundingClientRect(),a=e.getBoundingClientRect();return{top:a.top-n.top,left:a.left-n.left,height:e.scrollHeight,width:e.scrollWidth}}function l(e,t){e.style.setProperty('top',t.top+'px','important'),e.style.setProperty('left',t.left+'px','important'),e.style.setProperty('height',t.height+'px','important'),e.style.setProperty('width',t.width+'px','important')}function d(e,t){return t.right<=e.right&&t.left>=e.left&&t.top>=e.top&&t.bottom<=e.bottom}var c='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&'function'==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?'symbol':typeof e};Object.defineProperty(t,'__esModule',{value:!0}),t.Underline=t.Highlight=t.Mark=t.Pane=void 0;var p=function e(t,n,a){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(r===void 0){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,a)}if('value'in r)return r.value;var s=r.get;return void 0===s?void 0:s.call(a)},u=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),g=n(95),h=a(g),y=n(96),f=a(y),m=t.Pane=function(){function e(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document.body;s(this,e),this.target=t,this.element=h.default.createElement('svg'),this.marks=[],this.element.style.position='absolute',this.element.setAttribute('pointer-events','none'),f.default.proxyMouse(this.target,this.marks),this.container=n,this.container.appendChild(this.element),this.render()}return u(e,[{key:'addMark',value:function(e){var t=h.default.createElement('g');return this.element.appendChild(t),e.bind(t,this.container),this.marks.push(e),e.render(),e}},{key:'removeMark',value:function(e){var t=this.marks.indexOf(e);if(-1!==t){var n=e.unbind();this.element.removeChild(n),this.marks.splice(t,1)}}},{key:'render',value:function(){l(this.element,o(this.target,this.container));var e=!0,t=!1,n=void 0;try{for(var a=this.marks[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,i.render()}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}}]),e}(),E=t.Mark=function(){function e(){s(this,e),this.element=null}return u(e,[{key:'bind',value:function(e,t){this.element=e,this.container=t}},{key:'unbind',value:function(){var e=this.element;return this.element=null,e}},{key:'render',value:function(){}},{key:'dispatchEvent',value:function(t){this.element&&this.element.dispatchEvent(t)}},{key:'getBoundingClientRect',value:function(){return this.element.getBoundingClientRect()}},{key:'getClientRects',value:function(){for(var e=[],t=this.element.firstChild;t;)e.push(t.getBoundingClientRect()),t=t.nextSibling;return e}},{key:'filteredRanges',value:function(){var e=Array.from(this.range.getClientRects());return e.filter(function(t){for(var n=0;n<e.length;n++){if(e[n]===t)return!0;var a=d(e[n],t);if(a)return!1}return!0})}}]),e}(),C=t.Highlight=function(e){function t(e,n,a,i){s(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.range=e,o.className=n,o.data=a||{},o.attributes=i||{},o}return i(t,e),u(t,[{key:'bind',value:function(e,n){for(var a in p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),'bind',this).call(this,e,n),this.data)this.data.hasOwnProperty(a)&&(this.element.dataset[a]=this.data[a]);for(var a in this.attributes)this.attributes.hasOwnProperty(a)&&this.element.setAttribute(a,this.attributes[a]);this.className&&this.element.classList.add(this.className)}},{key:'render',value:function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(var e=this.element.ownerDocument.createDocumentFragment(),t=this.filteredRanges(),n=this.element.getBoundingClientRect(),a=this.container.getBoundingClientRect(),s=0,i=t.length;s<i;s++){var o=t[s],r=h.default.createElement('rect');r.setAttribute('x',o.left-n.left+a.left),r.setAttribute('y',o.top-n.top+a.top),r.setAttribute('height',o.height),r.setAttribute('width',o.width),e.appendChild(r)}this.element.appendChild(e)}}]),t}(E),v=t.Underline=function(e){function t(e,n,a,i){return s(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,a,i))}return i(t,e),u(t,[{key:'render',value:function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(var e=this.element.ownerDocument.createDocumentFragment(),t=this.filteredRanges(),n=this.element.getBoundingClientRect(),a=this.container.getBoundingClientRect(),s=0,i=t.length;s<i;s++){var o=t[s],r=h.default.createElement('rect');r.setAttribute('x',o.left-n.left+a.left),r.setAttribute('y',o.top-n.top+a.top),r.setAttribute('height',o.height),r.setAttribute('width',o.width),r.setAttribute('fill','none');var l=h.default.createElement('line');l.setAttribute('x1',o.left-n.left+a.left),l.setAttribute('x2',o.left-n.left+a.left+o.width),l.setAttribute('y1',o.top-n.top+a.top+o.height-1),l.setAttribute('y2',o.top-n.top+a.top+o.height-1),l.setAttribute('stroke-width',1),l.setAttribute('stroke','black'),l.setAttribute('stroke-linecap','square'),e.appendChild(r),e.appendChild(l)}this.element.appendChild(e)}}]),t}(C)},function(e,t){'use strict';function n(e){return document.createElementNS('http://www.w3.org/2000/svg',e)}Object.defineProperty(t,'__esModule',{value:!0}),t.createElement=n,t.default={createElement:n}},function(e,t){'use strict';function n(n,s){function t(o){for(var e=s.length-1;0<=e;e--){var i=s[e],t=o.clientX,l=o.clientY;if(o.touches&&o.touches.length&&(t=o.touches[0].clientX,l=o.touches[0].clientY),!!r(i,n,t,l)){i.dispatchEvent(a(o));break}}}if('iframe'===n.nodeName||'IFRAME'===n.nodeName)try{this.target=n.contentDocument}catch(e){this.target=n}else this.target=n;for(var e=['mouseup','mousedown','click','touchstart'],i=0,o;i<e.length;i++)o=e[i],this.target.addEventListener(o,function(n){return t(n)},!1)}function a(t){var e=Object.assign({},t,{bubbles:!1});try{return new MouseEvent(t.type,e)}catch(a){var n=document.createEvent('MouseEvents');return n.initMouseEvent(t.type,!1,e.cancelable,e.view,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget),n}}function r(e,t,n,a){function r(e,t,n){var a=e.top-s.top,r=e.left-s.left,i=a+e.height,o=r+e.width;return a<=n&&r<=t&&i>n&&o>t}var s=t.getBoundingClientRect(),o=e.getBoundingClientRect();if(!r(o,n,a))return!1;for(var l=e.getClientRects(),d=0,i=l.length;d<i;d++)if(r(l[d],n,a))return!0;return!1}Object.defineProperty(t,'__esModule',{value:!0}),t.proxyMouse=n,t.clone=a,t.default={proxyMouse:n}},function(e,t,n){'use strict';function a(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var r=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(2),s=n(98),o=function(e){return e&&e.__esModule?e:{default:e}}(s),l=function(){function e(t){a(this,e),this.settings=t||{},this.id='epubjs-container-'+(0,i.uuid)(),this.container=this.create(this.settings),this.settings.hidden&&(this.wrapper=this.wrap(this.container))}return r(e,[{key:'create',value:function(e){var t=e.height,n=e.width,a=e.overflow||!1,r=e.axis||'vertical',s=e.direction;(0,i.extend)(this.settings,e),e.height&&(0,i.isNumber)(e.height)&&(t=e.height+'px'),e.width&&(0,i.isNumber)(e.width)&&(n=e.width+'px');var o=document.createElement('div');return o.id=this.id,o.classList.add('epub-container'),o.style.wordSpacing='0',o.style.lineHeight='0',o.style.verticalAlign='top',o.style.position='relative','horizontal'===r&&(o.style.display='flex',o.style.flexDirection='row',o.style.flexWrap='nowrap'),n&&(o.style.width=n),t&&(o.style.height=t),a&&('scroll'===a&&'vertical'===r?(o.style['overflow-y']=a,o.style['overflow-x']='hidden'):'scroll'===a&&'horizontal'===r?(o.style['overflow-y']='hidden',o.style['overflow-x']=a):o.style.overflow=a),s&&(o.dir=s,o.style.direction=s),s&&this.settings.fullsize&&(document.body.style.direction=s),o}},{key:'wrap',value:function(e){var t=document.createElement('div');return t.style.visibility='hidden',t.style.overflow='hidden',t.style.width='0',t.style.height='0',t.appendChild(e),t}},{key:'getElement',value:function(e){var t;if((0,i.isElement)(e)?t=e:'string'==typeof e&&(t=document.getElementById(e)),!t)throw new Error('Not an Element');return t}},{key:'attachTo',value:function(e){var t=this.getElement(e),n;if(t)return n=this.settings.hidden?this.wrapper:this.container,t.appendChild(n),this.element=t,t}},{key:'getContainer',value:function(){return this.container}},{key:'onResize',value:function(e){(0,i.isNumber)(this.settings.width)&&(0,i.isNumber)(this.settings.height)||(this.resizeFunc=(0,o.default)(e,50),window.addEventListener('resize',this.resizeFunc,!1))}},{key:'onOrientationChange',value:function(e){this.orientationChangeFunc=e,window.addEventListener('orientationchange',this.orientationChangeFunc,!1)}},{key:'size',value:function(e,t){var n=e||this.settings.width,a=t||this.settings.height,r;null===e?(r=this.element.getBoundingClientRect(),r.width&&(e=p(r.width),this.container.style.width=e+'px')):(0,i.isNumber)(e)?this.container.style.width=e+'px':this.container.style.width=e,null===t?(r=r||this.element.getBoundingClientRect(),r.height&&(t=r.height,this.container.style.height=t+'px')):(0,i.isNumber)(t)?this.container.style.height=t+'px':this.container.style.height=t,(0,i.isNumber)(e)||(e=this.container.clientWidth),(0,i.isNumber)(t)||(t=this.container.clientHeight),this.containerStyles=window.getComputedStyle(this.container),this.containerPadding={left:parseFloat(this.containerStyles['padding-left'])||0,right:parseFloat(this.containerStyles['padding-right'])||0,top:parseFloat(this.containerStyles['padding-top'])||0,bottom:parseFloat(this.containerStyles['padding-bottom'])||0};var s=(0,i.windowBounds)(),o=window.getComputedStyle(document.body),l={left:parseFloat(o['padding-left'])||0,right:parseFloat(o['padding-right'])||0,top:parseFloat(o['padding-top'])||0,bottom:parseFloat(o['padding-bottom'])||0};return n||(e=s.width-l.left-l.right),(!this.settings.fullsize||a)&&a||(t=s.height-l.top-l.bottom),{width:e-this.containerPadding.left-this.containerPadding.right,height:t-this.containerPadding.top-this.containerPadding.bottom}}},{key:'bounds',value:function(){var e;return'visible'!==this.container.style.overflow&&(e=this.container&&this.container.getBoundingClientRect()),e&&e.width&&e.height?e:(0,i.windowBounds)()}},{key:'getSheet',value:function(){var e=document.createElement('style');return e.appendChild(document.createTextNode('')),document.head.appendChild(e),e.sheet}},{key:'addStyleRules',value:function(e,t){var n='#'+this.id+' ',a='';this.sheet||(this.sheet=this.getSheet()),t.forEach(function(e){for(var t in e)e.hasOwnProperty(t)&&(a+=t+':'+e[t]+';')}),this.sheet.insertRule(n+e+' {'+a+'}',0)}},{key:'axis',value:function(e){'horizontal'===e?(this.container.style.display='flex',this.container.style.flexDirection='row',this.container.style.flexWrap='nowrap'):this.container.style.display='block',this.settings.axis=e}},{key:'direction',value:function(e){this.container&&(this.container.dir=e,this.container.style.direction=e),this.settings.fullsize&&(document.body.style.direction=e),this.settings.dir=e}},{key:'overflow',value:function(e){this.container&&('scroll'===e&&'vertical'===this.settings.axis?(this.container.style['overflow-y']=e,this.container.style['overflow-x']='hidden'):'scroll'===e&&'horizontal'===this.settings.axis?(this.container.style['overflow-y']='hidden',this.container.style['overflow-x']=e):this.container.style.overflow=e),this.settings.overflow=e}},{key:'destroy',value:function(){var e;this.element&&(e=this.settings.hidden?this.wrapper:this.container,this.element.contains(this.container)&&this.element.removeChild(this.container),window.removeEventListener('resize',this.resizeFunc),window.removeEventListener('orientationChange',this.orientationChangeFunc))}}]),e}();t.default=l,e.exports=t['default']},function(e,t,n){var a=n(43),r=n(30);e.exports=function(e,t,n){var i=!0,s=!0;if('function'!=typeof e)throw new TypeError('Expected a function');return r(n)&&(i='leading'in n?!!n.leading:i,s='trailing'in n?!!n.trailing:s),a(e,t,{leading:i,maxWait:t,trailing:s})}},function(e,t,n){var a=n(44);e.exports=function(){return a.Date.now()}},function(e,t,n){(function(t){var n='object'==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(t,n(9))},function(e,t,n){var a=n(102),r=n(30),i=n(104),s=0/0,o=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,d=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if('number'==typeof e)return e;if(i(e))return s;if(r(e)){var t='function'==typeof e.valueOf?e.valueOf():e;e=r(t)?t+'':t}if('string'!=typeof e)return 0===e?e:+e;e=a(e);var n=l.test(e);return n||d.test(e)?c(e.slice(2),n?2:8):o.test(e)?s:+e}},function(e,t,n){var a=n(103),r=/^\\s+/;e.exports=function(e){return e?e.slice(0,a(e)+1).replace(r,''):e}},function(e){var t=/\\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},function(e,t,n){var a=n(105),r=n(108);e.exports=function(e){return'symbol'==typeof e||r(e)&&a(e)=='[object Symbol]'}},function(e,t,n){var a=n(45),r=n(106),i=n(107),s=a?a.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?'[object Undefined]':'[object Null]':s&&s in Object(e)?r(e):i(e)}},function(e,t,n){var a=n(45),r=Object.prototype,i=r.hasOwnProperty,s=r.toString,o=a?a.toStringTag:void 0;e.exports=function(e){var t=i.call(e,o),n=e[o];try{e[o]=void 0}catch(t){}var a=s.call(e);return t?e[o]=n:delete e[o],a}},function(e){var t=Object.prototype,n=t.toString;e.exports=function(e){return n.call(e)}},function(e){e.exports=function(e){return null!=e&&'object'==typeof e}},function(e,t){'use strict';function n(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var a=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(t){n(this,e),this.container=t,this._views=[],this.length=0,this.hidden=!1}return a(e,[{key:'all',value:function(){return this._views}},{key:'first',value:function(){return this._views[0]}},{key:'last',value:function(){return this._views[this._views.length-1]}},{key:'indexOf',value:function(e){return this._views.indexOf(e)}},{key:'slice',value:function(){return this._views.slice.apply(this._views,arguments)}},{key:'get',value:function(e){return this._views[e]}},{key:'append',value:function(e){return this._views.push(e),this.container&&this.container.appendChild(e.element),this.length++,e}},{key:'prepend',value:function(e){return this._views.unshift(e),this.container&&this.container.insertBefore(e.element,this.container.firstChild),this.length++,e}},{key:'insert',value:function(e,t){return this._views.splice(t,0,e),this.container&&(t<this.container.children.length?this.container.insertBefore(e.element,this.container.children[t]):this.container.appendChild(e.element)),this.length++,e}},{key:'remove',value:function(e){var t=this._views.indexOf(e);-1<t&&this._views.splice(t,1),this.destroy(e),this.length--}},{key:'destroy',value:function(e){e.displayed&&e.destroy(),this.container&&this.container.removeChild(e.element),e=null}},{key:'forEach',value:function(){return this._views.forEach.apply(this._views,arguments)}},{key:'clear',value:function(){var e=this.length,t;if(this.length){for(var n=0;n<e;n++)t=this._views[n],this.destroy(t);this._views=[],this.length=0}}},{key:'find',value:function(e){for(var t=this.length,n=0,a;n<t;n++)if(a=this._views[n],a.displayed&&a.section.index==e.index)return a}},{key:'displayed',value:function(){for(var e=[],t=this.length,n=0,a;n<t;n++)a=this._views[n],a.displayed&&e.push(a);return e}},{key:'show',value:function(){for(var e=this.length,t=0,n;t<e;t++)n=this._views[t],n.displayed&&n.show();this.hidden=!1}},{key:'hide',value:function(){for(var e=this.length,t=0,n;t<e;t++)n=this._views[t],n.displayed&&n.hide();this.hidden=!0}}]),e}();t.default=r,e.exports=t['default']},function(e,t,n){'use strict';function i(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}var s=Math.PI;Object.defineProperty(t,'__esModule',{value:!0});var o=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),d=n(2),c=n(4),p=n(6),h=function(e){return e&&e.__esModule?e:{default:e}}(p),y={easeOutSine:function(e){return a(e*(s/2))},easeInOutSine:function(e){return-0.5*(Math.cos(s*e)-1)},easeInOutQuint:function(e){return 1>(e/=0.5)?0.5*l(e,5):0.5*(l(e-2,5)+2)},easeInCubic:function(e){return l(e,3)}},f=function(){function e(t,n){i(this,e),this.settings=(0,d.extend)({duration:80,minVelocity:0.2,minDistance:10,easing:y.easeInCubic},n||{}),this.supportsTouch=this.supportsTouch(),this.supportsTouch&&this.setup(t)}return o(e,[{key:'setup',value:function(e){this.manager=e,this.layout=this.manager.layout,this.fullsize=this.manager.settings.fullsize,this.fullsize?(this.element=this.manager.stage.element,this.scroller=window,this.disableScroll()):(this.element=this.manager.stage.container,this.scroller=this.element,this.element.style.WebkitOverflowScrolling='touch'),this.manager.settings.offset=this.layout.width,this.manager.settings.afterScrolledTimeout=2*this.settings.duration,this.isVertical='vertical'===this.manager.settings.axis,!this.manager.isPaginated||this.isVertical||(this.touchCanceler=!1,this.resizeCanceler=!1,this.snapping=!1,this.scrollLeft,this.scrollTop,this.startTouchX=void 0,this.startTouchY=void 0,this.startTime=void 0,this.endTouchX=void 0,this.endTouchY=void 0,this.endTime=void 0,this.addListeners())}},{key:'supportsTouch',value:function(){return'ontouchstart'in window||window.DocumentTouch&&document instanceof DocumentTouch}},{key:'disableScroll',value:function(){this.element.style.overflow='hidden'}},{key:'enableScroll',value:function(){this.element.style.overflow=''}},{key:'addListeners',value:function(){this._onResize=this.onResize.bind(this),window.addEventListener('resize',this._onResize),this._onScroll=this.onScroll.bind(this),this.scroller.addEventListener('scroll',this._onScroll),this._onTouchStart=this.onTouchStart.bind(this),this.scroller.addEventListener('touchstart',this._onTouchStart,{passive:!0}),this.on('touchstart',this._onTouchStart),this._onTouchMove=this.onTouchMove.bind(this),this.scroller.addEventListener('touchmove',this._onTouchMove,{passive:!0}),this.on('touchmove',this._onTouchMove),this._onTouchEnd=this.onTouchEnd.bind(this),this.scroller.addEventListener('touchend',this._onTouchEnd,{passive:!0}),this.on('touchend',this._onTouchEnd),this._afterDisplayed=this.afterDisplayed.bind(this),this.manager.on(c.EVENTS.MANAGERS.ADDED,this._afterDisplayed)}},{key:'removeListeners',value:function(){window.removeEventListener('resize',this._onResize),this._onResize=void 0,this.scroller.removeEventListener('scroll',this._onScroll),this._onScroll=void 0,this.scroller.removeEventListener('touchstart',this._onTouchStart,{passive:!0}),this.off('touchstart',this._onTouchStart),this._onTouchStart=void 0,this.scroller.removeEventListener('touchmove',this._onTouchMove,{passive:!0}),this.off('touchmove',this._onTouchMove),this._onTouchMove=void 0,this.scroller.removeEventListener('touchend',this._onTouchEnd,{passive:!0}),this.off('touchend',this._onTouchEnd),this._onTouchEnd=void 0,this.manager.off(c.EVENTS.MANAGERS.ADDED,this._afterDisplayed),this._afterDisplayed=void 0}},{key:'afterDisplayed',value:function(e){var t=this,n=e.contents;['touchstart','touchmove','touchend'].forEach(function(a){n.on(a,function(e){return t.triggerViewEvent(e,n)})})}},{key:'triggerViewEvent',value:function(t,e){this.emit(t.type,t,e)}},{key:'onScroll',value:function(){this.scrollLeft=this.fullsize?window.scrollX:this.scroller.scrollLeft,this.scrollTop=this.fullsize?window.scrollY:this.scroller.scrollTop}},{key:'onResize',value:function(){this.resizeCanceler=!0}},{key:'onTouchStart',value:function(t){var e=t.touches[0],n=e.screenX,a=e.screenY;this.fullsize&&this.enableScroll(),this.touchCanceler=!0,this.startTouchX||(this.startTouchX=n,this.startTouchY=a,this.startTime=this.now()),this.endTouchX=n,this.endTouchY=a,this.endTime=this.now()}},{key:'onTouchMove',value:function(t){var e=t.touches[0],n=e.screenX,a=e.screenY,r=u(a-this.endTouchY);this.touchCanceler=!0,!this.fullsize&&10>r&&(this.element.scrollLeft-=n-this.endTouchX),this.endTouchX=n,this.endTouchY=a,this.endTime=this.now()}},{key:'onTouchEnd',value:function(){this.fullsize&&this.disableScroll(),this.touchCanceler=!1;var e=this.wasSwiped();0===e?this.snap():this.snap(e),this.startTouchX=void 0,this.startTouchY=void 0,this.startTime=void 0,this.endTouchX=void 0,this.endTouchY=void 0,this.endTime=void 0}},{key:'wasSwiped',value:function(){var e=this.layout.pageWidth*this.layout.divisor,t=this.endTouchX-this.startTouchX,n=u(t),a=this.endTime-this.startTime,r=t/a,i=this.settings.minVelocity;return n<=this.settings.minDistance||n>=e?0:r>i?-1:r<-i?1:void 0}},{key:'needsSnap',value:function(){var e=this.scrollLeft,t=this.layout.pageWidth*this.layout.divisor;return 0!=e%t}},{key:'snap',value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=this.scrollLeft,n=this.layout.pageWidth*this.layout.divisor,a=r(t/n)*n;return e&&(a+=e*n),this.smoothScrollTo(a)}},{key:'smoothScrollTo',value:function(e){function t(){var o=this.now(),l=g(1,(o-r)/i),d=s(l);return this.touchCanceler||this.resizeCanceler?(this.resizeCanceler=!1,this.snapping=!1,void n.resolve()):void(1>l?(window.requestAnimationFrame(t.bind(this)),this.scrollTo(a+(e-a)*l,0)):(this.scrollTo(e,0),this.snapping=!1,n.resolve()))}var n=new d.defer,a=this.scrollLeft,r=this.now(),i=this.settings.duration,s=this.settings.easing;return this.snapping=!0,t.call(this),n.promise}},{key:'scrollTo',value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;this.fullsize?window.scroll(e,t):(this.scroller.scrollLeft=e,this.scroller.scrollTop=t)}},{key:'now',value:function(){return'now'in window.performance?performance.now():new Date().getTime()}},{key:'destroy',value:function(){this.scroller&&(this.fullsize&&this.enableScroll(),this.removeListeners(),this.scroller=void 0)}}]),e}();(0,h.default)(f.prototype),t.default=f,e.exports=t['default']},function(e,t,n){'use strict';function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var i=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(2),o=n(19),l=a(o),d=n(27),c=a(d),p=n(10),u=a(p),g=function(){function e(){r(this,e),this.zip=void 0,this.urlCache={},this.checkRequirements()}return i(e,[{key:'checkRequirements',value:function(){try{if('undefined'==typeof JSZip){var e=n(112);this.zip=new e}else this.zip=new JSZip}catch(t){throw new Error('JSZip lib not loaded')}}},{key:'open',value:function(e,t){return this.zip.loadAsync(e,{base64:t})}},{key:'openUrl',value:function(e,t){return(0,l.default)(e,'binary').then(function(e){return this.zip.loadAsync(e,{base64:t})}.bind(this))}},{key:'request',value:function(e,t,n){var a=new s.defer,r=new u.default(e),i;t||(t=r.extension);var o=n&&n.isFileEncrypted(e);return o?(this.getArrayBuffer(e).then(function(e){var r=n.decrypt(e),i=this.handleResponse(r,t);a.resolve(i)}.bind(this)),a.promise):(i='blob'==t?this.getBlob(e):this.getText(e),i?i.then(function(e){var n=this.handleResponse(e,t);a.resolve(n)}.bind(this)):a.reject({message:'File not found in the epub: '+e,stack:new Error().stack}),a.promise)}},{key:'handleResponse',value:function(e,t){var n;return n='json'==t?JSON.parse(e):(0,s.isXml)(t)?(0,s.parse)(e,'text/xml'):'xhtml'==t?(0,s.parse)(e,'application/xhtml+xml'):'html'==t||'htm'==t?(0,s.parse)(e,'text/html'):e,n}},{key:'getBlob',value:function(e,t){var n=window.decodeURIComponent(e.substr(1)),a=this.zip.file(n);if(a)return t=t||c.default.lookup(a.name),a.async('uint8array').then(function(e){return new Blob([e],{type:t})})}},{key:'getText',value:function(e){var t=window.decodeURIComponent(e.substr(1)),n=this.zip.file(t);if(n)return n.async('string').then(function(e){return e})}},{key:'getArrayBuffer',value:function(e){var t=window.decodeURIComponent(e.substr(1)),n=this.zip.file(t);if(n)return n.async('arraybuffer').then(function(e){return e})}},{key:'getBase64',value:function(e,t){var n=window.decodeURIComponent(e.substr(1)),a=this.zip.file(n);if(a)return t=t||c.default.lookup(a.name),a.async('base64').then(function(e){return'data:'+t+';base64,'+e})}},{key:'createUrl',value:function(e,t){var n=new s.defer,a=window.URL||window.webkitURL||window.mozURL,r=t&&t.base64,i,o;return e in this.urlCache?(n.resolve(this.urlCache[e]),n.promise):(r?(o=this.getBase64(e),o&&o.then(function(t){this.urlCache[e]=t,n.resolve(t)}.bind(this))):(o=this.getBlob(e),o&&o.then(function(t){i=a.createObjectURL(t),this.urlCache[e]=i,n.resolve(i)}.bind(this))),o||n.reject({message:'File not found in the epub: '+e,stack:new Error().stack}),n.promise)}},{key:'revokeUrl',value:function(e){var t=window.URL||window.webkitURL||window.mozURL,n=this.urlCache[e];n&&t.revokeObjectURL(n)}},{key:'destroy',value:function(){var e=window.URL||window.webkitURL||window.mozURL;for(var t in this.urlCache)e.revokeObjectURL(t);this.zip=void 0,this.urlCache={}}}]),e}();t.default=g,e.exports=t['default']},function(n){if('undefined'==typeof t){var a=new Error('Cannot find module \"jszip\"');throw a.code='MODULE_NOT_FOUND',a}n.exports=t},function(e,t,n){'use strict';function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var i=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(2),o=n(19),l=a(o),d=n(27),c=a(d),p=n(10),u=a(p),g=n(6),h=a(g),y=function(){function e(t,n,a){r(this,e),this.urlCache={},this.storage=void 0,this.name=t,this.requester=n||l.default,this.resolver=a,this.online=!0,this.checkRequirements(),this.addListeners()}return i(e,[{key:'checkRequirements',value:function(){try{var e;e='undefined'==typeof localforage?n(114):localforage,this.storage=e.createInstance({name:this.name})}catch(t){throw new Error('localForage lib not loaded')}}},{key:'addListeners',value:function(){this._status=this.status.bind(this),window.addEventListener('online',this._status),window.addEventListener('offline',this._status)}},{key:'removeListeners',value:function(){window.removeEventListener('online',this._status),window.removeEventListener('offline',this._status),this._status=void 0}},{key:'status',value:function(){var e=navigator.onLine;this.online=e,e?this.emit('online',this):this.emit('offline',this)}},{key:'add',value:function(e,t){var n=this,a=e.resources.map(function(e){var a=e.href,r=n.resolver(a),i=window.encodeURIComponent(r);return n.storage.getItem(i).then(function(e){return!e||t?n.requester(r,'binary').then(function(e){return n.storage.setItem(i,e)}):e})});return Promise.all(a)}},{key:'put',value:function(e,t,n){var a=this,r=window.encodeURIComponent(e);return this.storage.getItem(r).then(function(i){return i?i:a.requester(e,'binary',t,n).then(function(e){return a.storage.setItem(r,e)})})}},{key:'request',value:function(e,t,n,a){var r=this;return this.online?this.requester(e,t,n,a).then(function(t){return r.put(e),t}):this.retrieve(e,t)}},{key:'retrieve',value:function(e,t){var n=this,a=new s.defer,r=new u.default(e),i;return t||(t=r.extension),i='blob'==t?this.getBlob(e):this.getText(e),i.then(function(a){var r=new s.defer,i;return a?(i=n.handleResponse(a,t),r.resolve(i)):r.reject({message:'File not found in storage: '+e,stack:new Error().stack}),r.promise})}},{key:'handleResponse',value:function(e,t){var n;return n='json'==t?JSON.parse(e):(0,s.isXml)(t)?(0,s.parse)(e,'text/xml'):'xhtml'==t?(0,s.parse)(e,'application/xhtml+xml'):'html'==t||'htm'==t?(0,s.parse)(e,'text/html'):e,n}},{key:'getBlob',value:function(e,t){var n=window.encodeURIComponent(e);return this.storage.getItem(n).then(function(n){if(n)return t=t||c.default.lookup(e),new Blob([n],{type:t})})}},{key:'getText',value:function(e,t){var n=window.encodeURIComponent(e);return t=t||c.default.lookup(e),this.storage.getItem(n).then(function(e){var n=new s.defer,a=new FileReader,r;if(e)return r=new Blob([e],{type:t}),a.addEventListener('loadend',function(){n.resolve(a.result)}),a.readAsText(r,t),n.promise})}},{key:'getBase64',value:function(e,t){var n=window.encodeURIComponent(e);return t=t||c.default.lookup(e),this.storage.getItem(n).then(function(e){var n=new s.defer,a=new FileReader,r;if(e)return r=new Blob([e],{type:t}),a.addEventListener('loadend',function(){n.resolve(a.result)}),a.readAsDataURL(r,t),n.promise})}},{key:'createUrl',value:function(e,t){var n=new s.defer,a=window.URL||window.webkitURL||window.mozURL,r=t&&t.base64,i,o;return e in this.urlCache?(n.resolve(this.urlCache[e]),n.promise):(r?(o=this.getBase64(e),o&&o.then(function(t){this.urlCache[e]=t,n.resolve(t)}.bind(this))):(o=this.getBlob(e),o&&o.then(function(t){i=a.createObjectURL(t),this.urlCache[e]=i,n.resolve(i)}.bind(this))),o||n.reject({message:'File not found in storage: '+e,stack:new Error().stack}),n.promise)}},{key:'revokeUrl',value:function(e){var t=window.URL||window.webkitURL||window.mozURL,n=this.urlCache[e];n&&t.revokeObjectURL(n)}},{key:'destroy',value:function(){var e=window.URL||window.webkitURL||window.mozURL;for(var t in this.urlCache)e.revokeObjectURL(t);this.urlCache={},this.removeListeners()}}]),e}();(0,h.default)(y.prototype),t.default=y,e.exports=t['default']},function(e,t,n){(function(t){var n,n;(function(t){e.exports=t()})(function(){return function a(d,e,t){function r(i,o){if(!e[i]){if(!d[i]){if(!o&&'function'==typeof n&&n)return n(i,!0);if(s)return s(i,!0);var c=new Error('Cannot find module \\''+i+'\\'');throw c.code='MODULE_NOT_FOUND',c}var p=e[i]={exports:{}};d[i][0].call(p.exports,function(t){var e=d[i][1][t];return r(e?e:t)},p,p.exports,a,d,e,t)}return e[i].exports}for(var s='function'==typeof n&&n,i=0;i<t.length;i++)r(t[i]);return r}({1:[function(e,n){(function(e){'use strict';function t(){c=!0;for(var e=d.length,t,n;e;){for(n=d,d=[],t=-1;++t<e;)n[t]();e=d.length}c=!1}var a=e.MutationObserver||e.WebKitMutationObserver,r;if(a){var i=0,s=new a(t),o=e.document.createTextNode('');s.observe(o,{characterData:!0}),r=function(){o.data=i=++i%2}}else if(!e.setImmediate&&'undefined'!=typeof e.MessageChannel){var l=new e.MessageChannel;l.port1.onmessage=t,r=function(){l.port2.postMessage(0)}}else r='document'in e&&'onreadystatechange'in e.document.createElement('script')?function(){var n=e.document.createElement('script');n.onreadystatechange=function(){t(),n.onreadystatechange=null,n.parentNode.removeChild(n),n=null},e.document.documentElement.appendChild(n)}:function(){setTimeout(t,0)};var d=[],c;n.exports=function(e){1!==d.push(e)||c||r()}}).call(this,'undefined'==typeof t?'undefined'==typeof self?'undefined'==typeof window?{}:window:self:t)},{}],2:[function(e,t){'use strict';function n(){}function a(e){if('function'!=typeof e)throw new TypeError('resolver must be a function');this.state=g,this.queue=[],this.outcome=void 0,e!==n&&o(this,e)}function r(e,t,n){this.promise=e,'function'==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),'function'==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function i(t,e,n){d(function(){var a;try{a=e(n)}catch(n){return c.reject(t,n)}a===t?c.reject(t,new TypeError('Cannot resolve promise with itself')):c.resolve(t,a)})}function s(e){var t=e&&e.then;if(e&&('object'==typeof e||'function'==typeof e)&&'function'==typeof t)return function(){t.apply(e,arguments)}}function o(e,t){function n(t){r||(r=!0,c.reject(e,t))}function a(t){r||(r=!0,c.resolve(e,t))}var r=!1,i=l(function(){t(a,n)});'error'===i.status&&n(i.value)}function l(e,t){var n={};try{n.value=e(t),n.status='success'}catch(t){n.status='error',n.value=t}return n}var d=e(1),c={},p=['REJECTED'],u=['FULFILLED'],g=['PENDING'];t.exports=a,a.prototype['catch']=function(e){return this.then(null,e)},a.prototype.then=function(e,t){if('function'!=typeof e&&this.state===u||'function'!=typeof t&&this.state===p)return this;var a=new this.constructor(n);if(this.state!==g){var s=this.state===u?e:t;i(a,s,this.outcome)}else this.queue.push(new r(a,e,t));return a},r.prototype.callFulfilled=function(e){c.resolve(this.promise,e)},r.prototype.otherCallFulfilled=function(e){i(this.promise,this.onFulfilled,e)},r.prototype.callRejected=function(e){c.reject(this.promise,e)},r.prototype.otherCallRejected=function(e){i(this.promise,this.onRejected,e)},c.resolve=function(e,t){var n=l(s,t);if('error'===n.status)return c.reject(e,n.value);var a=n.value;if(a)o(e,a);else{e.state=u,e.outcome=t;for(var r=-1,i=e.queue.length;++r<i;)e.queue[r].callFulfilled(t)}return e},c.reject=function(e,t){e.state=p,e.outcome=t;for(var n=-1,a=e.queue.length;++n<a;)e.queue[n].callRejected(t);return e},a.resolve=function(e){return e instanceof this?e:c.resolve(new this(n),e)},a.reject=function(e){var t=new this(n);return c.reject(t,e)},a.all=function(e){function t(e,t){a.resolve(e).then(function(e){o[t]=e,++l!==r||s||(s=!0,c.resolve(p,o))},function(e){s||(s=!0,c.reject(p,e))})}var a=this;if('[object Array]'!==Object.prototype.toString.call(e))return this.reject(new TypeError('must be an array'));var r=e.length,s=!1;if(!r)return this.resolve([]);for(var o=Array(r),l=0,d=-1,p=new this(n);++d<r;)t(e[d],d);return p},a.race=function(e){function t(e){a.resolve(e).then(function(e){s||(s=!0,c.resolve(i,e))},function(e){s||(s=!0,c.reject(i,e))})}var a=this;if('[object Array]'!==Object.prototype.toString.call(e))return this.reject(new TypeError('must be an array'));var r=e.length,s=!1;if(!r)return this.resolve([]);for(var o=-1,i=new this(n);++o<r;)t(e[o]);return i}},{1:1}],3:[function(e){(function(t){'use strict';'function'!=typeof t.Promise&&(t.Promise=e(2))}).call(this,'undefined'==typeof t?'undefined'==typeof self?'undefined'==typeof window?{}:window:self:t)},{2:2}],4:[function(e,t){'use strict';function n(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function a(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(i){if('TypeError'!==i.name)throw i;for(var n='undefined'==typeof BlobBuilder?'undefined'==typeof MSBlobBuilder?'undefined'==typeof MozBlobBuilder?WebKitBlobBuilder:MozBlobBuilder:MSBlobBuilder:BlobBuilder,a=new n,r=0;r<e.length;r+=1)a.append(e[r]);return a.getBlob(t.type)}}function r(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}function i(e,t,n){'function'==typeof t&&e.then(t),'function'==typeof n&&e['catch'](n)}function s(e){return'string'!=typeof e&&(console.warn(e+' used as a key, but it is not a string.'),e+=''),e}function o(){if(arguments.length&&'function'==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}function l(e){for(var t=e.length,n=new ArrayBuffer(t),a=new Uint8Array(n),r=0;r<t;r++)a[r]=e.charCodeAt(r);return n}function d(e){return new V(function(t){var n=e.transaction(K,F),r=a(['']);n.objectStore(K).put(r,'key'),n.onabort=function(n){n.preventDefault(),n.stopPropagation(),t(!1)},n.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\\/(\\d+)/),n=navigator.userAgent.match(/Edge\\//);t(n||!e||43<=parseInt(e[1],10))}})['catch'](function(){return!1})}function c(e){return'boolean'==typeof j?V.resolve(j):d(e).then(function(e){return j=e,j})}function p(e){var t=M[e.name],n={};n.promise=new V(function(e,t){n.resolve=e,n.reject=t}),t.deferredOperations.push(n),t.dbReady=t.dbReady?t.dbReady.then(function(){return n.promise}):n.promise}function u(e){var t=M[e.name],n=t.deferredOperations.pop();if(n)return n.resolve(),n.promise}function g(e,t){var n=M[e.name],a=n.deferredOperations.pop();if(a)return a.reject(t),a.promise}function h(t,e){return new V(function(n,a){if(M[t.name]=M[t.name]||I(),t.db)if(e)p(t),t.db.close();else return n(t.db);var r=[t.name];e&&r.push(t.version);var i=O.open.apply(O,r);e&&(i.onupgradeneeded=function(n){var e=i.result;try{e.createObjectStore(t.storeName),1>=n.oldVersion&&e.createObjectStore(K)}catch(e){if('ConstraintError'===e.name)console.warn('The database \"'+t.name+'\" has been upgraded from version '+n.oldVersion+' to version '+n.newVersion+', but the storage \"'+t.storeName+'\" already exists.');else throw e}}),i.onerror=function(t){t.preventDefault(),a(i.error)},i.onsuccess=function(){var e=i.result;e.onversionchange=function(t){t.target.close()},n(e),u(t)}})}function y(e){return h(e,!1)}function f(e){return h(e,!0)}function m(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),a=e.version<e.db.version,r=e.version>e.db.version;if(a&&(e.version!==t&&console.warn('The database \"'+e.name+'\" can\\'t be downgraded from version '+e.db.version+' to version '+e.version+'.'),e.version=e.db.version),r||n){if(n){var i=e.db.version+1;i>e.version&&(e.version=i)}return!0}return!1}function E(t){return new V(function(n,e){var a=new FileReader;a.onerror=e,a.onloadend=function(a){var e=btoa(a.target.result||'');n({__local_forage_encoded_blob:!0,data:e,type:t.type})},a.readAsBinaryString(t)})}function C(e){var t=l(atob(e.data));return a([t],{type:e.type})}function v(e){return e&&e.__local_forage_encoded_blob}function b(e){var t=this,n=t._initReady().then(function(){var e=M[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady});return i(n,e,e),n}function S(e){p(e);for(var t=M[e.name],n=t.forages,a=0,r;a<n.length;a++)r=n[a],r._dbInfo.db&&(r._dbInfo.db.close(),r._dbInfo.db=null);return e.db=null,y(e).then(function(t){return e.db=t,m(e)?f(e):t}).then(function(a){e.db=t.db=a;for(var r=0;r<n.length;r++)n[r]._dbInfo.db=a})['catch'](function(t){throw g(e,t),t})}function T(e,t,n,a){a===void 0&&(a=1);try{var r=e.db.transaction(e.storeName,t);n(null,r)}catch(r){if(0<a&&(!e.db||'InvalidStateError'===r.name||'NotFoundError'===r.name))return V.resolve().then(function(){if(!e.db||'NotFoundError'===r.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),f(e)}).then(function(){return S(e).then(function(){T(e,t,n,a-1)})})['catch'](n);n(r)}}function I(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function A(e){var t=0.75*e.length,n=e.length,a=0,r,i,s,o,l;'='===e[e.length-1]&&(t--,'='===e[e.length-2]&&t--);var d=new ArrayBuffer(t),c=new Uint8Array(d);for(r=0;r<n;r+=4)i=G.indexOf(e[r]),s=G.indexOf(e[r+1]),o=G.indexOf(e[r+2]),l=G.indexOf(e[r+3]),c[a++]=i<<2|s>>4,c[a++]=(15&s)<<4|o>>2,c[a++]=(3&o)<<6|63&l;return d}function _(e){var t=new Uint8Array(e),n='',a;for(a=0;a<t.length;a+=3)n+=G[t[a]>>2],n+=G[(3&t[a])<<4|t[a+1]>>4],n+=G[(15&t[a+1])<<2|t[a+2]>>6],n+=G[63&t[a+2]];return 2==t.length%3?n=n.substring(0,n.length-1)+'=':1==t.length%3&&(n=n.substring(0,n.length-2)+'=='),n}function k(e,t,n,a){e.executeSql('CREATE TABLE IF NOT EXISTS '+t.storeName+' (id INTEGER PRIMARY KEY, key unique, value)',[],n,a)}function N(e,n,a,r,i,s){e.executeSql(a,r,i,function(e,o){o.code===o.SYNTAX_ERR?e.executeSql('SELECT name FROM sqlite_master WHERE type=\\'table\\' AND name = ?',[n.storeName],function(e,t){t.rows.length?s(e,o):k(e,n,function(){e.executeSql(a,r,i,s)},s)},s):s(e,o)},s)}function B(e,t,n,a){var i=this;e=s(e);var o=new V(function(r,s){i.ready().then(function(){void 0===t&&(t=null);var o=t,l=i._dbInfo;l.serializer.serialize(t,function(d,t){t?s(t):l.db.transaction(function(n){N(n,l,'INSERT OR REPLACE INTO '+l.storeName+' (key, value) VALUES (?, ?)',[e,d],function(){r(o)},function(e,t){s(t)})},function(t){if(t.code===t.QUOTA_ERR){if(0<a)return void r(B.apply(i,[e,o,n,a-1]));s(t)}})})})['catch'](s)});return r(o,n),o}function R(e){return new V(function(n,a){e.transaction(function(r){r.executeSql('SELECT name FROM sqlite_master WHERE type=\\'table\\' AND name <> \\'__WebKitDatabaseInfoTable__\\'',[],function(a,t){for(var r=[],s=0;s<t.rows.length;s++)r.push(t.rows.item(s).name);n({db:e,storeNames:r})},function(e,t){a(t)})},function(e){a(e)})})}function x(e,t){var n=e.name+'/';return e.storeName!==t.storeName&&(n+=e.storeName+'/'),n}function L(){var e='_localforage_support_test';try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(t){return!0}}function D(){return!L()||0<localStorage.length}function w(e,t){e[t]=function(){var n=arguments;return e.ready().then(function(){return e[t].apply(e,n)})}}function P(){for(var e=1,t;e<arguments.length;e++)if(t=arguments[e],t)for(var n in t)t.hasOwnProperty(n)&&(arguments[0][n]=he(t[n])?t[n].slice():t[n]);return arguments[0]}var U='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&'function'==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?'symbol':typeof e},O=function(){try{if('undefined'!=typeof indexedDB)return indexedDB;if('undefined'!=typeof webkitIndexedDB)return webkitIndexedDB;if('undefined'!=typeof mozIndexedDB)return mozIndexedDB;if('undefined'!=typeof OIndexedDB)return OIndexedDB;if('undefined'!=typeof msIndexedDB)return msIndexedDB}catch(t){}}();'undefined'==typeof Promise&&e(3);var V=Promise,K='local-forage-detect-blob-support',j=void 0,M={},q=Object.prototype.toString,z='readonly',F='readwrite',H={_driver:'asyncStorage',_initStorage:function(e){function t(){return V.resolve()}var n=this,a={db:null};if(e)for(var r in e)a[r]=e[r];var i=M[a.name];i||(i=I(),M[a.name]=i),i.forages.push(n),n._initReady||(n._initReady=n.ready,n.ready=b);for(var s=[],o=0,l;o<i.forages.length;o++)l=i.forages[o],l!==n&&s.push(l._initReady()['catch'](t));var d=i.forages.slice(0);return V.all(s).then(function(){return a.db=i.db,y(a)}).then(function(e){return a.db=e,m(a,n._defaultConfig.version)?f(a):e}).then(function(e){a.db=i.db=e,n._dbInfo=a;for(var t=0,r;t<d.length;t++)r=d[t],r!==n&&(r._dbInfo.db=a.db,r._dbInfo.version=a.version)})},_support:function(){try{if(!O||!O.open)return!1;var e='undefined'!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t='function'==typeof fetch&&-1!==fetch.toString().indexOf('[native code');return(!e||t)&&'undefined'!=typeof indexedDB&&'undefined'!=typeof IDBKeyRange}catch(t){return!1}}(),iterate:function(e,t){var n=this,a=new V(function(t,a){n.ready().then(function(){T(n._dbInfo,z,function(r,i){if(r)return a(r);try{var s=i.objectStore(n._dbInfo.storeName),o=s.openCursor(),l=1;o.onsuccess=function(){var n=o.result;if(n){var a=n.value;v(a)&&(a=C(a));var r=e(a,n.key,l++);void 0===r?n['continue']():t(r)}else t()},o.onerror=function(){a(o.error)}}catch(t){a(t)}})})['catch'](a)});return r(a,t),a},getItem:function(e,t){var n=this;e=s(e);var a=new V(function(t,a){n.ready().then(function(){T(n._dbInfo,z,function(r,i){if(r)return a(r);try{var s=i.objectStore(n._dbInfo.storeName),o=s.get(e);o.onsuccess=function(){var e=o.result;void 0===e&&(e=null),v(e)&&(e=C(e)),t(e)},o.onerror=function(){a(o.error)}}catch(t){a(t)}})})['catch'](a)});return r(a,t),a},setItem:function(e,t,n){var a=this;e=s(e);var i=new V(function(n,r){var i;a.ready().then(function(){return i=a._dbInfo,'[object Blob]'===q.call(t)?c(i.db).then(function(e){return e?t:E(t)}):t}).then(function(t){T(a._dbInfo,F,function(i,s){if(i)return r(i);try{var o=s.objectStore(a._dbInfo.storeName);null===t&&(t=void 0);var l=o.put(t,e);s.oncomplete=function(){void 0===t&&(t=null),n(t)},s.onabort=s.onerror=function(){var e=l.error?l.error:l.transaction.error;r(e)}}catch(t){r(t)}})})['catch'](r)});return r(i,n),i},removeItem:function(e,t){var n=this;e=s(e);var a=new V(function(t,a){n.ready().then(function(){T(n._dbInfo,F,function(r,i){if(r)return a(r);try{var s=i.objectStore(n._dbInfo.storeName),o=s['delete'](e);i.oncomplete=function(){t()},i.onerror=function(){a(o.error)},i.onabort=function(){var e=o.error?o.error:o.transaction.error;a(e)}}catch(t){a(t)}})})['catch'](a)});return r(a,t),a},clear:function(e){var t=this,n=new V(function(e,n){t.ready().then(function(){T(t._dbInfo,F,function(a,r){if(a)return n(a);try{var i=r.objectStore(t._dbInfo.storeName),s=i.clear();r.oncomplete=function(){e()},r.onabort=r.onerror=function(){var e=s.error?s.error:s.transaction.error;n(e)}}catch(t){n(t)}})})['catch'](n)});return r(n,e),n},length:function(e){var t=this,n=new V(function(e,n){t.ready().then(function(){T(t._dbInfo,z,function(a,r){if(a)return n(a);try{var i=r.objectStore(t._dbInfo.storeName),s=i.count();s.onsuccess=function(){e(s.result)},s.onerror=function(){n(s.error)}}catch(t){n(t)}})})['catch'](n)});return r(n,e),n},key:function(e,t){var n=this,a=new V(function(t,a){return 0>e?void t(null):void n.ready().then(function(){T(n._dbInfo,z,function(r,i){if(r)return a(r);try{var s=i.objectStore(n._dbInfo.storeName),o=!1,l=s.openKeyCursor();l.onsuccess=function(){var n=l.result;return n?void(0===e?t(n.key):o?t(n.key):(o=!0,n.advance(e))):void t(null)},l.onerror=function(){a(l.error)}}catch(t){a(t)}})})['catch'](a)});return r(a,t),a},keys:function(e){var t=this,n=new V(function(e,n){t.ready().then(function(){T(t._dbInfo,z,function(a,r){if(a)return n(a);try{var i=r.objectStore(t._dbInfo.storeName),s=i.openKeyCursor(),o=[];s.onsuccess=function(){var t=s.result;return t?void(o.push(t.key),t['continue']()):void e(o)},s.onerror=function(){n(s.error)}}catch(t){n(t)}})})['catch'](n)});return r(n,e),n},dropInstance:function(e,t){t=o.apply(this,arguments);var n=this.config();e='function'!=typeof e&&e||{},e.name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var a=this,i;if(!e.name)i=V.reject('Invalid arguments');else{var s=e.name===n.name&&a._dbInfo.db,l=s?V.resolve(a._dbInfo.db):y(e).then(function(t){var n=M[e.name],a=n.forages;n.db=t;for(var r=0;r<a.length;r++)a[r]._dbInfo.db=t;return t});i=e.storeName?l.then(function(t){if(t.objectStoreNames.contains(e.storeName)){var n=t.version+1;p(e);var a=M[e.name],r=a.forages;t.close();for(var s=0,i;s<r.length;s++)i=r[s],i._dbInfo.db=null,i._dbInfo.version=n;var o=new V(function(t,a){var r=O.open(e.name,n);r.onerror=function(e){var t=r.result;t.close(),a(e)},r.onupgradeneeded=function(){var t=r.result;t.deleteObjectStore(e.storeName)},r.onsuccess=function(){var e=r.result;e.close(),t(e)}});return o.then(function(e){a.db=e;for(var t=0,n;t<r.length;t++)n=r[t],n._dbInfo.db=e,u(n._dbInfo)})['catch'](function(t){throw(g(e,t)||V.resolve())['catch'](function(){}),t})}}):l.then(function(t){p(e);var n=M[e.name],a=n.forages;t.close();for(var r=0,i;r<a.length;r++)i=a[r],i._dbInfo.db=null;var s=new V(function(t,n){var a=O.deleteDatabase(e.name);a.onerror=function(){var e=a.result;e&&e.close(),n(a.error)},a.onblocked=function(){console.warn('dropInstance blocked for database \"'+e.name+'\" until all open connections are closed')},a.onsuccess=function(){var e=a.result;e&&e.close(),t(e)}});return s.then(function(e){n.db=e;for(var t=0,r;t<a.length;t++)r=a[t],u(r._dbInfo)})['catch'](function(t){throw(g(e,t)||V.resolve())['catch'](function(){}),t})})}return r(i,t),i}},G='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',W=/^~~local_forage_type~([^~]+)~/,Y='__lfsc__:',Q=Y.length,X='arbf',Z='blob',J='si08',$='ui08',ee='uic8',te='si16',ne='si32',ae='ur16',re='ui32',ie='fl32',se='fl64',oe=Q+X.length,le=Object.prototype.toString,de={serialize:function(t,n){var e='';if(t&&(e=le.call(t)),t&&('[object ArrayBuffer]'===e||t.buffer&&'[object ArrayBuffer]'===le.call(t.buffer))){var a=Y,r;t instanceof ArrayBuffer?(r=t,a+=X):(r=t.buffer,'[object Int8Array]'===e?a+=J:'[object Uint8Array]'===e?a+=$:'[object Uint8ClampedArray]'===e?a+=ee:'[object Int16Array]'===e?a+=te:'[object Uint16Array]'===e?a+=ae:'[object Int32Array]'===e?a+=ne:'[object Uint32Array]'===e?a+=re:'[object Float32Array]'===e?a+=ie:'[object Float64Array]'===e?a+=se:n(new Error('Failed to get type for BinaryArray'))),n(a+_(r))}else if('[object Blob]'===e){var i=new FileReader;i.onload=function(){var e='~~local_forage_type~'+t.type+'~'+_(this.result);n(Y+Z+e)},i.readAsArrayBuffer(t)}else try{n(JSON.stringify(t))}catch(a){console.error('Couldn\\'t convert value into a JSON string: ',t),n(null,a)}},deserialize:function(e){if(e.substring(0,Q)!==Y)return JSON.parse(e);var t=e.substring(oe),n=e.substring(Q,oe),r;if(n===Z&&W.test(t)){var i=t.match(W);r=i[1],t=t.substring(i[0].length)}var s=A(t);switch(n){case X:return s;case Z:return a([s],{type:r});case J:return new Int8Array(s);case $:return new Uint8Array(s);case ee:return new Uint8ClampedArray(s);case te:return new Int16Array(s);case ae:return new Uint16Array(s);case ne:return new Int32Array(s);case re:return new Uint32Array(s);case ie:return new Float32Array(s);case se:return new Float64Array(s);default:throw new Error('Unkown type: '+n);}},stringToBuffer:A,bufferToString:_},ce={_driver:'webSQLStorage',_initStorage:function(e){var t=this,n={db:null};if(e)for(var a in e)n[a]='string'==typeof e[a]?e[a]:e[a].toString();var r=new V(function(e,a){try{n.db=openDatabase(n.name,n.version+'',n.description,n.size)}catch(t){return a(t)}n.db.transaction(function(r){k(r,n,function(){t._dbInfo=n,e()},function(e,t){a(t)})},a)});return n.serializer=de,r},_support:function(){return'function'==typeof openDatabase}(),iterate:function(e,t){var n=this,a=new V(function(a,r){n.ready().then(function(){var s=n._dbInfo;s.db.transaction(function(n){N(n,s,'SELECT * FROM '+s.storeName,[],function(n,t){for(var r=t.rows,o=r.length,l=0;l<o;l++){var i=r.item(l),d=i.value;if(d&&(d=s.serializer.deserialize(d)),d=e(d,i.key,l+1),void 0!==d)return void a(d)}a()},function(e,t){r(t)})})})['catch'](r)});return r(a,t),a},getItem:function(e,t){var n=this;e=s(e);var a=new V(function(a,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){N(n,i,'SELECT * FROM '+i.storeName+' WHERE key = ? LIMIT 1',[e],function(e,t){var n=t.rows.length?t.rows.item(0).value:null;n&&(n=i.serializer.deserialize(n)),a(n)},function(e,t){r(t)})})})['catch'](r)});return r(a,t),a},setItem:function(e,t,n){return B.apply(this,[e,t,n,1])},removeItem:function(e,t){var n=this;e=s(e);var a=new V(function(t,a){n.ready().then(function(){var r=n._dbInfo;r.db.transaction(function(n){N(n,r,'DELETE FROM '+r.storeName+' WHERE key = ?',[e],function(){t()},function(e,t){a(t)})})})['catch'](a)});return r(a,t),a},clear:function(e){var t=this,n=new V(function(e,n){t.ready().then(function(){var a=t._dbInfo;a.db.transaction(function(r){N(r,a,'DELETE FROM '+a.storeName,[],function(){e()},function(e,t){n(t)})})})['catch'](n)});return r(n,e),n},length:function(e){var t=this,n=new V(function(e,n){t.ready().then(function(){var a=t._dbInfo;a.db.transaction(function(r){N(r,a,'SELECT COUNT(key) as c FROM '+a.storeName,[],function(n,t){var a=t.rows.item(0).c;e(a)},function(e,t){n(t)})})})['catch'](n)});return r(n,e),n},key:function(e,t){var n=this,a=new V(function(a,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){N(n,i,'SELECT key FROM '+i.storeName+' WHERE id = ? LIMIT 1',[e+1],function(e,t){var n=t.rows.length?t.rows.item(0).key:null;a(n)},function(e,t){r(t)})})})['catch'](r)});return r(a,t),a},keys:function(e){var t=this,n=new V(function(e,n){t.ready().then(function(){var a=t._dbInfo;a.db.transaction(function(r){N(r,a,'SELECT key FROM '+a.storeName,[],function(n,t){for(var a=[],r=0;r<t.rows.length;r++)a.push(t.rows.item(r).key);e(a)},function(e,t){n(t)})})})['catch'](n)});return r(n,e),n},dropInstance:function(e,t){t=o.apply(this,arguments);var n=this.config();e='function'!=typeof e&&e||{},e.name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var a=this,i;return i=e.name?new V(function(t){var r;r=e.name===n.name?a._dbInfo.db:openDatabase(e.name,'','',0),e.storeName?t({db:r,storeNames:[e.storeName]}):t(R(r))}).then(function(e){return new V(function(t,n){e.db.transaction(function(a){function r(e){return new V(function(t,n){a.executeSql('DROP TABLE IF EXISTS '+e,[],function(){t()},function(e,t){n(t)})})}for(var s=[],o=0,i=e.storeNames.length;o<i;o++)s.push(r(e.storeNames[o]));V.all(s).then(function(){t()})['catch'](function(t){n(t)})},function(e){n(e)})})}):V.reject('Invalid arguments'),r(i,t),i}},pe={_driver:'localStorageWrapper',_initStorage:function(e){var t=this,n={};if(e)for(var a in e)n[a]=e[a];return(n.keyPrefix=x(e,t._defaultConfig),!D())?V.reject():(t._dbInfo=n,n.serializer=de,V.resolve())},_support:function(){try{return'undefined'!=typeof localStorage&&'setItem'in localStorage&&!!localStorage.setItem}catch(t){return!1}}(),iterate:function(e,t){var n=this,a=n.ready().then(function(){for(var t=n._dbInfo,a=t.keyPrefix,r=a.length,s=localStorage.length,o=1,l=0,i;l<s;l++)if(i=localStorage.key(l),0===i.indexOf(a)){var d=localStorage.getItem(i);if(d&&(d=t.serializer.deserialize(d)),d=e(d,i.substring(r),o++),void 0!==d)return d}});return r(a,t),a},getItem:function(e,t){var n=this;e=s(e);var a=n.ready().then(function(){var t=n._dbInfo,a=localStorage.getItem(t.keyPrefix+e);return a&&(a=t.serializer.deserialize(a)),a});return r(a,t),a},setItem:function(e,t,n){var a=this;e=s(e);var i=a.ready().then(function(){void 0===t&&(t=null);var n=t;return new V(function(r,i){var s=a._dbInfo;s.serializer.serialize(t,function(t,a){if(a)i(a);else try{localStorage.setItem(s.keyPrefix+e,t),r(n)}catch(t){('QuotaExceededError'===t.name||'NS_ERROR_DOM_QUOTA_REACHED'===t.name)&&i(t),i(t)}})})});return r(i,n),i},removeItem:function(e,t){var n=this;e=s(e);var a=n.ready().then(function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)});return r(a,t),a},clear:function(e){var t=this,n=t.ready().then(function(){for(var e=t._dbInfo.keyPrefix,n=localStorage.length-1,a;0<=n;n--)a=localStorage.key(n),0===a.indexOf(e)&&localStorage.removeItem(a)});return r(n,e),n},length:function(e){var t=this,n=t.keys().then(function(e){return e.length});return r(n,e),n},key:function(e,t){var n=this,a=n.ready().then(function(){var t=n._dbInfo,a;try{a=localStorage.key(e)}catch(e){a=null}return a&&(a=a.substring(t.keyPrefix.length)),a});return r(a,t),a},keys:function(e){var t=this,n=t.ready().then(function(){for(var e=t._dbInfo,n=localStorage.length,a=[],r=0,i;r<n;r++)i=localStorage.key(r),0===i.indexOf(e.keyPrefix)&&a.push(i.substring(e.keyPrefix.length));return a});return r(n,e),n},dropInstance:function(e,t){if(t=o.apply(this,arguments),e='function'!=typeof e&&e||{},!e.name){var n=this.config();e.name=e.name||n.name,e.storeName=e.storeName||n.storeName}var a=this,i;return i=e.name?new V(function(t){e.storeName?t(x(e,a._defaultConfig)):t(e.name+'/')}).then(function(e){for(var t=localStorage.length-1,n;0<=t;t--)n=localStorage.key(t),0===n.indexOf(e)&&localStorage.removeItem(n)}):V.reject('Invalid arguments'),r(i,t),i}},ue=function(e,t){return e===t||'number'==typeof e&&'number'==typeof t&&isNaN(e)&&isNaN(t)},ge=function(e,t){for(var n=e.length,a=0;a<n;){if(ue(e[a],t))return!0;a++}return!1},he=Array.isArray||function(e){return'[object Array]'===Object.prototype.toString.call(e)},ye={},fe={},me={INDEXEDDB:H,WEBSQL:ce,LOCALSTORAGE:pe},Ee=[me.INDEXEDDB._driver,me.WEBSQL._driver,me.LOCALSTORAGE._driver],Ce=['dropInstance'],ve=['clear','getItem','iterate','key','keys','length','removeItem','setItem'].concat(Ce),be={description:'',driver:Ee.slice(),name:'localforage',size:4980736,storeName:'keyvaluepairs',version:1},Se=function(){function e(t){for(var a in n(this,e),me)if(me.hasOwnProperty(a)){var r=me[a],i=r._driver;this[a]=i,ye[i]||this.defineDriver(r)}this._defaultConfig=P({},be),this._config=P({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver)['catch'](function(){})}return e.prototype.config=function(e){if('object'===('undefined'==typeof e?'undefined':U(e))){if(this._ready)return new Error('Can\\'t call config() after localforage has been used.');for(var t in e){if('storeName'==t&&(e[t]=e[t].replace(/\\W/g,'_')),'version'==t&&'number'!=typeof e[t])return new Error('Database version must be a number.');this._config[t]=e[t]}return'driver'in e&&e.driver?this.setDriver(this._config.driver):!0}return'string'==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,n){var a=new V(function(t,n){try{var a=e._driver,s=new Error('Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver');if(!e._driver)return void n(s);for(var o=ve.concat('_initStorage'),l=0,i=o.length;l<i;l++){var d=o[l],c=!ge(Ce,d);if((c||e[d])&&'function'!=typeof e[d])return void n(s)}var p=function(){for(var t=function(e){return function(){var t=new Error('Method '+e+' is not implemented by the current driver'),n=V.reject(t);return r(n,arguments[arguments.length-1]),n}},n=0,a=Ce.length,i;n<a;n++)i=Ce[n],e[i]||(e[i]=t(i))};p();var u=function(n){ye[a]&&console.info('Redefining LocalForage driver: '+a),ye[a]=e,fe[a]=n,t()};'_support'in e?e._support&&'function'==typeof e._support?e._support().then(u,n):u(!!e._support):u(!0)}catch(t){n(t)}});return i(a,t,n),a},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,n){var a=ye[e]?V.resolve(ye[e]):V.reject(new Error('Driver not found.'));return i(a,t,n),a},e.prototype.getSerializer=function(e){var t=V.resolve(de);return i(t,e),t},e.prototype.ready=function(e){var t=this,n=t._driverSet.then(function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready});return i(n,e,e),n},e.prototype.setDriver=function(e,t,n){function a(){o._config.driver=o.driver()}function r(e){return o._extend(e),a(),o._ready=o._initStorage(o._config),o._ready}function s(e){return function(){function t(){for(;n<e.length;){var i=e[n];return n++,o._dbInfo=null,o._ready=null,o.getDriver(i).then(r)['catch'](t)}a();var s=new Error('No available storage method found.');return o._driverSet=V.reject(s),o._driverSet}var n=0;return t()}}var o=this;he(e)||(e=[e]);var l=this._getSupportedDrivers(e),d=null===this._driverSet?V.resolve():this._driverSet['catch'](function(){return V.resolve()});return this._driverSet=d.then(function(){var e=l[0];return o._dbInfo=null,o._ready=null,o.getDriver(e).then(function(e){o._driver=e._driver,a(),o._wrapLibraryMethodsWithReady(),o._initDriver=s(l)})})['catch'](function(){a();var e=new Error('No available storage method found.');return o._driverSet=V.reject(e),o._driverSet}),i(this._driverSet,t,n),this._driverSet},e.prototype.supports=function(e){return!!fe[e]},e.prototype._extend=function(e){P(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,a=e.length,r;n<a;n++)r=e[n],this.supports(r)&&t.push(r);return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=ve.length;e<t;e++)w(this,ve[e])},e.prototype.createInstance=function(t){return new e(t)},e}(),Te=new Se;t.exports=Te},{3:3}]},{},[4])(4)})}).call(t,n(9))},function(e,t,n){'use strict';function a(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var r=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(2),s=function(){function e(t){a(this,e),this.interactive='',this.fixedLayout='',this.openToSpread='',this.orientationLock='',t&&this.parse(t)}return r(e,[{key:'parse',value:function(e){var t=this;if(!e)return this;var n=(0,i.qs)(e,'display_options');if(!n)return this;var a=(0,i.qsa)(n,'option');return a.forEach(function(e){var n='';switch(e.childNodes.length&&(n=e.childNodes[0].nodeValue),e.attributes.name.value){case'interactive':t.interactive=n;break;case'fixed-layout':t.fixedLayout=n;break;case'open-to-spread':t.openToSpread=n;break;case'orientation-lock':t.orientationLock=n;}}),this}},{key:'destroy',value:function(){this.interactive=void 0,this.fixedLayout=void 0,this.openToSpread=void 0,this.orientationLock=void 0}}]),e}();t.default=s,e.exports=t['default']},function(e,t,n){'use strict';function a(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var r=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(117),s=16,o=function(){function e(t){a(this,e),this.userPassphrase=t,this.contentKey=void 0,this.encryptedFiles=void 0}return r(e,[{key:'readEncryption',value:function(e,t){var n=e.getElementsByTagName('EncryptedData');this.encryptedFiles=new Set;var a=!0,r=!1,i=void 0;try{for(var s=n[Symbol.iterator](),o;!(a=(o=s.next()).done);a=!0){var l=o.value,d=l.querySelector('EncryptionMethod').getAttribute('Algorithm');if(d==='http://www.w3.org/2001/04/xmlenc#aes256-cbc'){var c=l.querySelector('CipherReference').getAttribute('URI'),p=c.split('/').slice(1).join('/');this.encryptedFiles.add(t(p))}}}catch(e){r=!0,i=e}finally{try{!a&&s.return&&s.return()}finally{if(r)throw i}}}},{key:'readLicense',value:function(){}},{key:'decryptContentKey',value:function(e){if(this.userPassphrase){var t=i.md.sha256.create();t.update(this.userPassphrase,'utf8');var n=t.digest(),a=n.bytes(),r=i.util.decode64(e),o=r.slice(0,s),l=r.slice(s),d=i.cipher.createDecipher('AES-CBC',a);d.start({iv:o,additionalData_:'binary-encoded string'}),d.update(i.util.createBuffer(l)),d.finish();var c=i.util.encode64(d.output.bytes());this.contentKey=c}}},{key:'decrypt',value:function(e){if(!this.contentKey)return'';var t=i.cipher.createDecipher('AES-CBC',i.util.decode64(this.contentKey)),n=i.util.createBuffer(e),a=n.getBytes(s);t.start({iv:a}),t.update(n);var r=t.finish(),o=t.output;return o.data}},{key:'isFileEncrypted',value:function(e){return this.encryptedFiles&&this.encryptedFiles.has(e)}},{key:'destroy',value:function(){this.userPassphrase=void 0,this.contentKey=void 0,this.encryptedFiles=void 0}}]),e}();t.default=o,e.exports=t['default']},function(e,t,n){e.exports=n(0),n(11),n(124),n(7),n(31),n(21),n(126),n(14),n(128),n(129),n(130),n(58),n(34),n(13),n(54),n(56),n(131),n(49),n(55),n(52),n(37),n(5),n(53),n(132),n(48),n(1)},function(e,t,n){(function(e){function a(e,t){this._id=e,this._clearFn=t}var r='undefined'!=typeof e&&e||'undefined'!=typeof self&&self||window,i=Function.prototype.apply;t.setTimeout=function(){return new a(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new a(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(119),t.setImmediate='undefined'!=typeof self&&self.setImmediate||'undefined'!=typeof e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate='undefined'!=typeof self&&self.clearImmediate||'undefined'!=typeof e&&e.clearImmediate||this&&this.clearImmediate}).call(t,n(9))},function(e,t,n){(function(e,t){(function(e){'use strict';function n(e){'function'!=typeof e&&(e=new Function(''+e));for(var t=Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var a={callback:e,args:t};return g[u]=a,m(u),u++}function a(e){delete g[e]}function r(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n);}}function i(e){if(h)setTimeout(i,0,e);else{var t=g[e];if(t){h=!0;try{r(t)}finally{a(e),h=!1}}}}function s(){m=function(e){t.nextTick(function(){i(e)})}}function o(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage('','*'),e.onmessage=n,t}}function l(){var t='setImmediate$'+Math.random()+'$',n=function(n){n.source===e&&'string'==typeof n.data&&0===n.data.indexOf(t)&&i(+n.data.slice(t.length))};e.addEventListener?e.addEventListener('message',n,!1):e.attachEvent('onmessage',n),m=function(n){e.postMessage(t+n,'*')}}function d(){var e=new MessageChannel;e.port1.onmessage=function(e){var t=e.data;i(t)},m=function(t){e.port2.postMessage(t)}}function c(){var e=y.documentElement;m=function(t){var n=y.createElement('script');n.onreadystatechange=function(){i(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}function p(){m=function(e){setTimeout(i,0,e)}}if(!e.setImmediate){var u=1,g={},h=!1,y=e.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(e),m;f=f&&f.setTimeout?f:e,'[object process]'==={}.toString.call(e.process)?s():o()?l():e.MessageChannel?d():y&&'onreadystatechange'in y.createElement('script')?c():p(),f.setImmediate=n,f.clearImmediate=a}})('undefined'==typeof self?'undefined'==typeof e?this:e:self)}).call(t,n(9),n(32))},function(e,t){'use strict';function n(e){var t=e.length;if(0<t%4)throw new Error('Invalid string. Length must be a multiple of 4');var n=e.indexOf('=');-1===n&&(n=t);var a=n===t?0:4-n%4;return[n,a]}function a(e,t,n){return 3*(t+n)/4-n}function r(e){return o[63&e>>18]+o[63&e>>12]+o[63&e>>6]+o[63&e]}function s(e,t,n){for(var a=[],s=t,i;s<n;s+=3)i=(16711680&e[s]<<16)+(65280&e[s+1]<<8)+(255&e[s+2]),a.push(r(i));return a.join('')}t.byteLength=function(e){var t=n(e),a=t[0],r=t[1];return 3*(a+r)/4-r},t.toByteArray=function(e){var t=n(e),r=t[0],s=t[1],o=new d(a(e,r,s)),c=0,p=0<s?r-4:r,u,g;for(g=0;g<p;g+=4)u=l[e.charCodeAt(g)]<<18|l[e.charCodeAt(g+1)]<<12|l[e.charCodeAt(g+2)]<<6|l[e.charCodeAt(g+3)],o[c++]=255&u>>16,o[c++]=255&u>>8,o[c++]=255&u;return 2===s&&(u=l[e.charCodeAt(g)]<<2|l[e.charCodeAt(g+1)]>>4,o[c++]=255&u),1===s&&(u=l[e.charCodeAt(g)]<<10|l[e.charCodeAt(g+1)]<<4|l[e.charCodeAt(g+2)]>>2,o[c++]=255&u>>8,o[c++]=255&u),o},t.fromByteArray=function(e){for(var t=e.length,n=t%3,a=[],r=16383,l=0,i=t-n,d;l<i;l+=r)a.push(s(e,l,l+r>i?i:l+r));return 1==n?(d=e[t-1],a.push(o[d>>2]+o[63&d<<4]+'==')):2==n&&(d=(e[t-2]<<8)+e[t-1],a.push(o[d>>10]+o[63&d>>4]+o[63&d<<2]+'=')),a.join('')};for(var o=[],l=[],d='undefined'==typeof Uint8Array?Array:Uint8Array,c='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',p=0,i=c.length;p<i;++p)o[p]=c[p],l[c.charCodeAt(p)]=p;l[45]=62,l[95]=63},function(e,t){t.read=function(t,n,a,r,o){var c=8*o-r-1,p=(1<<c)-1,u=p>>1,g=-7,h=a?o-1:0,i=a?-1:1,d=t[n+h],s,e;for(h+=i,s=d&(1<<-g)-1,d>>=-g,g+=c;0<g;s=256*s+t[n+h],h+=i,g-=8);for(e=s&(1<<-g)-1,s>>=-g,g+=r;0<g;e=256*e+t[n+h],h+=i,g-=8);if(0===s)s=1-u;else{if(s===p)return e?NaN:(d?-1:1)*Infinity;e+=l(2,r),s-=u}return(d?-1:1)*e*l(2,s-r)},t.write=function(t,n,a,r,g,h){var y=8*h-g-1,f=(1<<y)-1,E=f>>1,C=23===g?5.960464477539063e-8-6.617444900424222e-24:0,v=r?0:h-1,i=r?1:-1,d=0>n||0===n&&0>1/n?1:0,b,S,m;for(n=u(n),isNaN(n)||n===Infinity?(S=isNaN(n)?1:0,b=f):(b=p(s(n)/o),1>n*(m=l(2,-b))&&(b--,m*=2),n+=1<=b+E?C/m:C*l(2,1-E),2<=n*m&&(b++,m/=2),b+E>=f?(S=0,b=f):1<=b+E?(S=(n*m-1)*l(2,g),b+=E):(S=n*l(2,E-1)*l(2,g),b=0));8<=g;t[a+v]=255&S,v+=i,S/=256,g-=8);for(b=b<<g|S,y+=g;0<y;t[a+v]=255&b,v+=i,b/=256,y-=8);t[a+v-i]|=128*d}},function(e){var t={}.toString;e.exports=Array.isArray||function(e){return'[object Array]'==t.call(e)}},function(e,t,n){(function(t){function n(e,t){var n=0,a=t.length,r=t.charAt(0),i=[0];for(n=0;n<e.length();++n){for(var s=0,o=e.at(n);s<i.length;++s)o+=i[s]<<8,i[s]=o%a,o=0|o/a;for(;0<o;)i.push(o%a),o=0|o/a}var l='';for(n=0;0===e.at(n)&&n<e.length()-1;++n)l+=r;for(n=i.length-1;0<=n;--n)l+=t[i[n]];return l}var a={};e.exports=a;var r={};a.encode=function(e,t,a){if('string'!=typeof t)throw new TypeError('\"alphabet\" must be a string.');if(void 0!==a&&'number'!=typeof a)throw new TypeError('\"maxline\" must be a number.');var r='';if(!(e instanceof Uint8Array))r=n(e,t);else{var s=0,i=t.length,o=t.charAt(0),l=[0];for(s=0;s<e.length;++s){for(var d=0,c=e[s];d<l.length;++d)c+=l[d]<<8,l[d]=c%i,c=0|c/i;for(;0<c;)l.push(c%i),c=0|c/i}for(s=0;0===e[s]&&s<e.length-1;++s)r+=o;for(s=l.length-1;0<=s;--s)r+=t[l[s]]}if(a){var p=new RegExp('.{1,'+a+'}','g');r=r.match(p).join('\\r\\n')}return r},a.decode=function(e,n){if('string'!=typeof e)throw new TypeError('\"input\" must be a string.');if('string'!=typeof n)throw new TypeError('\"alphabet\" must be a string.');var a=r[n];if(!a){a=r[n]=[];for(var s=0;s<n.length;++s)a[n.charCodeAt(s)]=s}e=e.replace(/\\s/g,'');for(var i=n.length,o=n.charAt(0),l=[0],s=0,d;s<e.length;s++){if(d=a[e.charCodeAt(s)],void 0===d)return;for(var c=0,p=d;c<l.length;++c)p+=l[c]*i,l[c]=255&p,p>>=8;for(;0<p;)l.push(255&p),p>>=8}for(var u=0;e[u]===o&&u<e.length-1;++u)l.push(0);return'undefined'==typeof t?new Uint8Array(l.reverse()):t.from(l.reverse())}}).call(t,n(20).Buffer)},function(e,t,n){function a(e,t,n){var a=t.entity===d.tls.ConnectionEnd.client;e.read.cipherState={init:!1,cipher:d.cipher.createDecipher('AES-CBC',a?n.keys.server_write_key:n.keys.client_write_key),iv:a?n.keys.server_write_IV:n.keys.client_write_IV},e.write.cipherState={init:!1,cipher:d.cipher.createCipher('AES-CBC',a?n.keys.client_write_key:n.keys.server_write_key),iv:a?n.keys.client_write_IV:n.keys.server_write_IV},e.read.cipherFunction=s,e.write.cipherFunction=r,e.read.macLength=e.write.macLength=n.mac_length,e.read.macFunction=e.write.macFunction=p.hmac_sha1}function r(e,t){var n=!1,a=t.macFunction(t.macKey,t.sequenceNumber,e);e.fragment.putBytes(a),t.updateSequenceNumber();var r;r=e.version.minor===p.Versions.TLS_1_0.minor?t.cipherState.init?null:t.cipherState.iv:d.random.getBytesSync(16),t.cipherState.init=!0;var s=t.cipherState.cipher;return s.start({iv:r}),e.version.minor>=p.Versions.TLS_1_1.minor&&s.output.putBytes(r),s.update(e.fragment),s.finish(i)&&(e.fragment=s.output,e.length=e.fragment.length(),n=!0),n}function i(e,t,n){if(!n){var a=e-t.length()%e;t.fillWithByte(a-1,a)}return!0}function o(e,t,n){var a=!0;if(n){for(var r=t.length(),s=t.last(),o=r-1-s;o<r-1;++o)a=a&&t.at(o)==s;a&&t.truncate(s+1)}return a}function s(e,t){var n=!1,a;a=e.version.minor===p.Versions.TLS_1_0.minor?t.cipherState.init?null:t.cipherState.iv:e.fragment.getBytes(16),t.cipherState.init=!0;var r=t.cipherState.cipher;r.start({iv:a}),r.update(e.fragment),n=r.finish(o);var i=t.macLength,s=d.random.getBytesSync(i),c=r.output.length();c>=i?(e.fragment=r.output.getBytes(c-i),s=r.output.getBytes(i)):e.fragment=r.output.getBytes(),e.fragment=d.util.createBuffer(e.fragment),e.length=e.fragment.length();var u=t.macFunction(t.macKey,t.sequenceNumber,e);return t.updateSequenceNumber(),n=l(t.macKey,s,u)&&n,n}function l(e,t,n){var a=d.hmac.create();return a.start('SHA1',e),a.update(t),t=a.digest().getBytes(),a.start(null,null),a.update(n),n=a.digest().getBytes(),t===n}var d=n(0);n(11),n(48);var p=e.exports=d.tls;p.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:'TLS_RSA_WITH_AES_128_CBC_SHA',initSecurityParameters:function(e){e.bulk_cipher_algorithm=p.BulkCipherAlgorithm.aes,e.cipher_type=p.CipherType.block,e.enc_key_length=16,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=p.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:a},p.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:'TLS_RSA_WITH_AES_256_CBC_SHA',initSecurityParameters:function(e){e.bulk_cipher_algorithm=p.BulkCipherAlgorithm.aes,e.cipher_type=p.CipherType.block,e.enc_key_length=32,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=p.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:a}},function(e,t,n){var a=n(0);n(58),e.exports=a.mgf=a.mgf||{},a.mgf.mgf1=a.mgf1},function(e,t,n){(function(t){function a(e){var n=e.message;if(n instanceof Uint8Array||n instanceof z)return n;var a=e.encoding;if(n===void 0)if(e.md)n=e.md.digest().getBytes(),a='binary';else throw new TypeError('\"options.message\" or \"options.md\" not specified.');if('string'==typeof n&&!a)throw new TypeError('\"options.encoding\" must be \"binary\" or \"utf8\".');if('string'==typeof n){if('undefined'!=typeof t)return t.from(n,a);n=new M(n,a)}else if(!(n instanceof M))throw new TypeError('\"options.message\" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with \"options.encoding\" specifying its encoding.');for(var r=new z(n.length()),s=0;s<r.length;++s)r[s]=n.at(s);return r}function s(e,n){var a=U.md.sha512.create(),r=new M(e);a.update(r.getBytes(n),'binary');var s=a.digest().getBytes();if('undefined'!=typeof t)return t.from(s,'binary');for(var o=new z(q.constants.HASH_BYTE_LENGTH),l=0;64>l;++l)o[l]=s.charCodeAt(l);return o}function r(e,t){var n=[w(),w(),w(),w()],a=s(t,32),r;for(a[0]&=248,a[31]&=127,a[31]|=64,_(n,a),y(e,n),r=0;32>r;++r)t[r+32]=e[r];return 0}function o(e,t,a,n){var o=new Float64Array(64),l=[w(),w(),w(),w()],p=s(n,32),u,i;p[0]&=248,p[31]&=127,p[31]|=64;for(u=0;u<a;++u)e[64+u]=t[u];for(u=0;32>u;++u)e[32+u]=p[32+u];var g=s(e.subarray(32),a+32);for(d(g),_(l,g),y(e,l),u=32;64>u;++u)e[u]=n[u];var r=s(e,a+64);for(d(r),u=32;64>u;++u)o[u]=0;for(u=0;32>u;++u)o[u]=g[u];for(u=0;32>u;++u)for(i=0;32>i;i++)o[u+i]+=r[u]*p[i];return c(e.subarray(32),o),a+64}function l(e,a,r,n){var o=new z(32),t=[w(),w(),w(),w()],l=[w(),w(),w(),w()],c,i;if(i=-1,64>r)return-1;if(f(l,n))return-1;for(c=0;c<r;++c)e[c]=a[c];for(c=0;32>c;++c)e[c+32]=n[c];var p=s(e,r);if(d(p),T(t,l,p),_(l,a.subarray(32)),u(t,l),y(o,t),r-=64,C(a,0,o,0)){for(c=0;c<r;++c)e[c]=0;return-1}for(c=0;c<r;++c)e[c]=a[c+64];return i=r,i}function c(e,t){var n,a,r,i;for(a=63;32<=a;--a){for(n=0,r=a-32,i=a-12;r<i;++r)t[r]+=n-16*t[a]*Y[r-(a-32)],n=t[r]+128>>8,t[r]-=256*n;t[r]+=n,t[a]=0}for(n=0,r=0;32>r;++r)t[r]+=n-(t[31]>>4)*Y[r],n=t[r]>>8,t[r]&=255;for(r=0;32>r;++r)t[r]-=n*Y[r];for(a=0;32>a;++a)t[a+1]+=t[a]>>8,e[a]=255&t[a]}function d(e){for(var t=new Float64Array(64),n=0;64>n;++n)t[n]=e[n],e[n]=0;c(e,t)}function u(n,r){var i=w(),a=w(),s=w(),o=w(),l=w(),e=w(),d=w(),c=w(),p=w();A(i,n[1],n[0]),A(p,r[1],r[0]),S(i,i,p),x(a,n[0],n[1]),x(p,r[0],r[1]),S(a,a,p),S(s,n[3],r[3]),S(s,s,D),S(o,n[2],r[2]),x(o,o,o),A(l,a,i),A(e,o,s),x(d,o,s),x(c,a,i),S(n[0],l,e),S(n[1],c,d),S(n[2],d,e),S(n[3],l,c)}function g(e,t,n){for(var a=0;4>a;++a)R(e[a],t[a],n)}function y(e,t){var n=w(),a=w(),r=w();N(r,t[2]),S(n,t[0],r),S(a,t[1],r),i(e,a),e[31]^=b(n)<<7}function i(e,a){var n=w(),r=w(),t,i,s;for(t=0;16>t;++t)r[t]=a[t];for(B(r),B(r),B(r),i=0;2>i;++i){for(n[0]=r[0]-65517,t=1;15>t;++t)n[t]=r[t]-65535-(1&n[t-1]>>16),n[t-1]&=65535;n[15]=r[15]-32767-(1&n[14]>>16),s=1&n[15]>>16,n[14]&=65535,R(r,n,1-s)}for(t=0;16>t;t++)e[2*t]=255&r[t],e[2*t+1]=r[t]>>8}function f(e,n){var a=w(),t=w(),r=w(),i=w(),s=w(),o=w(),l=w();return(k(e[2],H),h(e[1],n),P(r,e[1]),S(i,r,G),A(r,r,e[2]),x(i,e[2],i),P(s,i),P(o,s),S(l,o,s),S(a,l,r),S(a,a,i),m(a,a),S(a,a,r),S(a,a,i),S(a,a,i),S(e[0],a,i),P(t,e[0]),S(t,t,i),E(t,r)&&S(e[0],e[0],L),P(t,e[0]),S(t,t,i),E(t,r))?-1:(b(e[0])===n[31]>>7&&A(e[0],F,e[0]),S(e[3],e[0],e[1]),0)}function h(e,t){var n;for(n=0;16>n;++n)e[n]=t[2*n]+(t[2*n+1]<<8);e[15]&=32767}function m(e,t){var n=w(),r;for(r=0;16>r;++r)n[r]=t[r];for(r=250;0<=r;--r)P(n,n),1!==r&&S(n,n,t);for(r=0;16>r;++r)e[r]=n[r]}function E(e,t){var n=new z(32),a=new z(32);return i(n,e),i(a,t),C(n,0,a,0)}function C(e,t,n,a){return v(e,t,n,a,32)}function v(e,t,a,r,s){var n=0,o;for(o=0;o<s;++o)n|=e[t+o]^a[r+o];return(1&n-1>>>8)-1}function b(e){var t=new z(32);return i(t,e),1&t[0]}function T(e,t,n){var a,r;for(k(e[0],F),k(e[1],H),k(e[2],H),k(e[3],F),r=255;0<=r;--r)a=1&n[0|r/8]>>(7&r),g(e,t,a),u(t,e),u(e,e),g(e,t,a)}function _(e,t){var n=[w(),w(),w(),w()];k(n[0],W),k(n[1],Q),k(n[2],H),S(n[3],W,Q),T(e,n,t)}function k(e,t){var n;for(n=0;16>n;n++)e[n]=0|t[n]}function N(e,t){var n=w(),r;for(r=0;16>r;++r)n[r]=t[r];for(r=253;0<=r;--r)P(n,n),2!==r&&4!==r&&S(n,n,t);for(r=0;16>r;++r)e[r]=n[r]}function B(e){var t=1,n,a;for(n=0;16>n;++n)a=e[n]+t+65535,t=p(a/65536),e[n]=a-65536*t;e[0]+=t-1+37*(t-1)}function R(e,n,a){for(var r=0,i;16>r;++r)i=~(a-1)&(e[r]^n[r]),e[r]^=i,n[r]^=i}function w(e){var t=new Float64Array(16),n;if(e)for(n=0;n<e.length;++n)t[n]=e[n];return t}function x(e,t,n){for(var a=0;16>a;++a)e[a]=t[a]+n[a]}function A(e,t,n){for(var a=0;16>a;++a)e[a]=t[a]-n[a]}function P(e,t){S(e,t,t)}function S(e,t,n){var a=0,r=0,i=0,s=0,o=0,l=0,d=0,u=0,g=0,h=0,y=0,f=0,m=0,E=0,C=0,b=0,S=0,T=0,I=0,A=0,_=0,k=0,N=0,B=0,R=0,x=0,L=0,D=0,w=0,P=0,U=0,O=n[0],V=n[1],K=n[2],j=n[3],M=n[4],q=n[5],z=n[6],F=n[7],H=n[8],G=n[9],W=n[10],Y=n[11],Q=n[12],X=n[13],Z=n[14],J=n[15],$,v;$=t[0],a+=$*O,r+=$*V,i+=$*K,s+=$*j,o+=$*M,l+=$*q,d+=$*z,u+=$*F,g+=$*H,h+=$*G,y+=$*W,f+=$*Y,m+=$*Q,E+=$*X,C+=$*Z,b+=$*J,$=t[1],r+=$*O,i+=$*V,s+=$*K,o+=$*j,l+=$*M,d+=$*q,u+=$*z,g+=$*F,h+=$*H,y+=$*G,f+=$*W,m+=$*Y,E+=$*Q,C+=$*X,b+=$*Z,S+=$*J,$=t[2],i+=$*O,s+=$*V,o+=$*K,l+=$*j,d+=$*M,u+=$*q,g+=$*z,h+=$*F,y+=$*H,f+=$*G,m+=$*W,E+=$*Y,C+=$*Q,b+=$*X,S+=$*Z,T+=$*J,$=t[3],s+=$*O,o+=$*V,l+=$*K,d+=$*j,u+=$*M,g+=$*q,h+=$*z,y+=$*F,f+=$*H,m+=$*G,E+=$*W,C+=$*Y,b+=$*Q,S+=$*X,T+=$*Z,I+=$*J,$=t[4],o+=$*O,l+=$*V,d+=$*K,u+=$*j,g+=$*M,h+=$*q,y+=$*z,f+=$*F,m+=$*H,E+=$*G,C+=$*W,b+=$*Y,S+=$*Q,T+=$*X,I+=$*Z,A+=$*J,$=t[5],l+=$*O,d+=$*V,u+=$*K,g+=$*j,h+=$*M,y+=$*q,f+=$*z,m+=$*F,E+=$*H,C+=$*G,b+=$*W,S+=$*Y,T+=$*Q,I+=$*X,A+=$*Z,_+=$*J,$=t[6],d+=$*O,u+=$*V,g+=$*K,h+=$*j,y+=$*M,f+=$*q,m+=$*z,E+=$*F,C+=$*H,b+=$*G,S+=$*W,T+=$*Y,I+=$*Q,A+=$*X,_+=$*Z,k+=$*J,$=t[7],u+=$*O,g+=$*V,h+=$*K,y+=$*j,f+=$*M,m+=$*q,E+=$*z,C+=$*F,b+=$*H,S+=$*G,T+=$*W,I+=$*Y,A+=$*Q,_+=$*X,k+=$*Z,N+=$*J,$=t[8],g+=$*O,h+=$*V,y+=$*K,f+=$*j,m+=$*M,E+=$*q,C+=$*z,b+=$*F,S+=$*H,T+=$*G,I+=$*W,A+=$*Y,_+=$*Q,k+=$*X,N+=$*Z,B+=$*J,$=t[9],h+=$*O,y+=$*V,f+=$*K,m+=$*j,E+=$*M,C+=$*q,b+=$*z,S+=$*F,T+=$*H,I+=$*G,A+=$*W,_+=$*Y,k+=$*Q,N+=$*X,B+=$*Z,R+=$*J,$=t[10],y+=$*O,f+=$*V,m+=$*K,E+=$*j,C+=$*M,b+=$*q,S+=$*z,T+=$*F,I+=$*H,A+=$*G,_+=$*W,k+=$*Y,N+=$*Q,B+=$*X,R+=$*Z,x+=$*J,$=t[11],f+=$*O,m+=$*V,E+=$*K,C+=$*j,b+=$*M,S+=$*q,T+=$*z,I+=$*F,A+=$*H,_+=$*G,k+=$*W,N+=$*Y,B+=$*Q,R+=$*X,x+=$*Z,L+=$*J,$=t[12],m+=$*O,E+=$*V,C+=$*K,b+=$*j,S+=$*M,T+=$*q,I+=$*z,A+=$*F,_+=$*H,k+=$*G,N+=$*W,B+=$*Y,R+=$*Q,x+=$*X,L+=$*Z,D+=$*J,$=t[13],E+=$*O,C+=$*V,b+=$*K,S+=$*j,T+=$*M,I+=$*q,A+=$*z,_+=$*F,k+=$*H,N+=$*G,B+=$*W,R+=$*Y,x+=$*Q,L+=$*X,D+=$*Z,w+=$*J,$=t[14],C+=$*O,b+=$*V,S+=$*K,T+=$*j,I+=$*M,A+=$*q,_+=$*z,k+=$*F,N+=$*H,B+=$*G,R+=$*W,x+=$*Y,L+=$*Q,D+=$*X,w+=$*Z,P+=$*J,$=t[15],b+=$*O,S+=$*V,T+=$*K,I+=$*j,A+=$*M,_+=$*q,k+=$*z,N+=$*F,B+=$*H,R+=$*G,x+=$*W,L+=$*Y,D+=$*Q,w+=$*X,P+=$*Z,U+=$*J,a+=38*S,r+=38*T,i+=38*I,s+=38*A,o+=38*_,l+=38*k,d+=38*N,u+=38*B,g+=38*R,h+=38*x,y+=38*L,f+=38*D,m+=38*w,E+=38*P,C+=38*U,v=1,$=a+v+65535,v=p($/65536),a=$-65536*v,$=r+v+65535,v=p($/65536),r=$-65536*v,$=i+v+65535,v=p($/65536),i=$-65536*v,$=s+v+65535,v=p($/65536),s=$-65536*v,$=o+v+65535,v=p($/65536),o=$-65536*v,$=l+v+65535,v=p($/65536),l=$-65536*v,$=d+v+65535,v=p($/65536),d=$-65536*v,$=u+v+65535,v=p($/65536),u=$-65536*v,$=g+v+65535,v=p($/65536),g=$-65536*v,$=h+v+65535,v=p($/65536),h=$-65536*v,$=y+v+65535,v=p($/65536),y=$-65536*v,$=f+v+65535,v=p($/65536),f=$-65536*v,$=m+v+65535,v=p($/65536),m=$-65536*v,$=E+v+65535,v=p($/65536),E=$-65536*v,$=C+v+65535,v=p($/65536),C=$-65536*v,$=b+v+65535,v=p($/65536),b=$-65536*v,a+=v-1+37*(v-1),v=1,$=a+v+65535,v=p($/65536),a=$-65536*v,$=r+v+65535,v=p($/65536),r=$-65536*v,$=i+v+65535,v=p($/65536),i=$-65536*v,$=s+v+65535,v=p($/65536),s=$-65536*v,$=o+v+65535,v=p($/65536),o=$-65536*v,$=l+v+65535,v=p($/65536),l=$-65536*v,$=d+v+65535,v=p($/65536),d=$-65536*v,$=u+v+65535,v=p($/65536),u=$-65536*v,$=g+v+65535,v=p($/65536),g=$-65536*v,$=h+v+65535,v=p($/65536),h=$-65536*v,$=y+v+65535,v=p($/65536),y=$-65536*v,$=f+v+65535,v=p($/65536),f=$-65536*v,$=m+v+65535,v=p($/65536),m=$-65536*v,$=E+v+65535,v=p($/65536),E=$-65536*v,$=C+v+65535,v=p($/65536),C=$-65536*v,$=b+v+65535,v=p($/65536),b=$-65536*v,a+=v-1+37*(v-1),e[0]=a,e[1]=r,e[2]=i,e[3]=s,e[4]=o,e[5]=l,e[6]=d,e[7]=u,e[8]=g,e[9]=h,e[10]=y,e[11]=f,e[12]=m,e[13]=E,e[14]=C,e[15]=b}var U=n(0);n(23),n(5),n(59),n(1);var O=n(127),V=O.publicKeyValidator,K=O.privateKeyValidator;if('undefined'==typeof j)var j=U.jsbn.BigInteger;var M=U.util.ByteBuffer,z='undefined'==typeof t?Uint8Array:t;U.pki=U.pki||{},e.exports=U.pki.ed25519=U.ed25519=U.ed25519||{};var q=U.ed25519;q.constants={},q.constants.PUBLIC_KEY_BYTE_LENGTH=32,q.constants.PRIVATE_KEY_BYTE_LENGTH=64,q.constants.SEED_BYTE_LENGTH=32,q.constants.SIGN_BYTE_LENGTH=64,q.constants.HASH_BYTE_LENGTH=64,q.generateKeyPair=function(e){e=e||{};var t=e.seed;if(void 0===t)t=U.random.getBytesSync(q.constants.SEED_BYTE_LENGTH);else if('string'==typeof t){if(t.length!==q.constants.SEED_BYTE_LENGTH)throw new TypeError('\"seed\" must be '+q.constants.SEED_BYTE_LENGTH+' bytes in length.');}else if(!(t instanceof Uint8Array))throw new TypeError('\"seed\" must be a node.js Buffer, Uint8Array, or a binary string.');t=a({message:t,encoding:'binary'});for(var n=new z(q.constants.PUBLIC_KEY_BYTE_LENGTH),s=new z(q.constants.PRIVATE_KEY_BYTE_LENGTH),o=0;32>o;++o)s[o]=t[o];return r(n,s),{publicKey:n,privateKey:s}},q.privateKeyFromAsn1=function(e){var t={},n=[],r=U.asn1.validate(e,K,t,n);if(!r){var i=new Error('Invalid Key.');throw i.errors=n,i}var s=U.asn1.derToOid(t.privateKeyOid),o=U.oids.EdDSA25519;if(s!==o)throw new Error('Invalid OID \"'+s+'\"; OID must be \"'+o+'\".');var l=t.privateKey,d=a({message:U.asn1.fromDer(l).value,encoding:'binary'});return{privateKeyBytes:d}},q.publicKeyFromAsn1=function(e){var t={},n=[],r=U.asn1.validate(e,V,t,n);if(!r){var i=new Error('Invalid Key.');throw i.errors=n,i}var s=U.asn1.derToOid(t.publicKeyOid),o=U.oids.EdDSA25519;if(s!==o)throw new Error('Invalid OID \"'+s+'\"; OID must be \"'+o+'\".');var l=t.ed25519PublicKey;if(l.length!==q.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error('Key length is invalid.');return a({message:l,encoding:'binary'})},q.publicKeyFromPrivateKey=function(e){e=e||{};var t=a({message:e.privateKey,encoding:'binary'});if(t.length!==q.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('\"options.privateKey\" must have a byte length of '+q.constants.PRIVATE_KEY_BYTE_LENGTH);for(var n=new z(q.constants.PUBLIC_KEY_BYTE_LENGTH),r=0;r<n.length;++r)n[r]=t[32+r];return n},q.sign=function(e){e=e||{};var t=a(e),n=a({message:e.privateKey,encoding:'binary'});if(n.length===q.constants.SEED_BYTE_LENGTH){var r=q.generateKeyPair({seed:n});n=r.privateKey}else if(n.length!==q.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('\"options.privateKey\" must have a byte length of '+q.constants.SEED_BYTE_LENGTH+' or '+q.constants.PRIVATE_KEY_BYTE_LENGTH);var s=new z(q.constants.SIGN_BYTE_LENGTH+t.length);o(s,t,t.length,n);for(var l=new z(q.constants.SIGN_BYTE_LENGTH),d=0;d<l.length;++d)l[d]=s[d];return l},q.verify=function(e){e=e||{};var t=a(e);if(e.signature===void 0)throw new TypeError('\"options.signature\" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var n=a({message:e.signature,encoding:'binary'});if(n.length!==q.constants.SIGN_BYTE_LENGTH)throw new TypeError('\"options.signature\" must have a byte length of '+q.constants.SIGN_BYTE_LENGTH);var r=a({message:e.publicKey,encoding:'binary'});if(r.length!==q.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('\"options.publicKey\" must have a byte length of '+q.constants.PUBLIC_KEY_BYTE_LENGTH);var s=new z(q.constants.SIGN_BYTE_LENGTH+t.length),o=new z(q.constants.SIGN_BYTE_LENGTH+t.length),d;for(d=0;d<q.constants.SIGN_BYTE_LENGTH;++d)s[d]=n[d];for(d=0;d<t.length;++d)s[d+q.constants.SIGN_BYTE_LENGTH]=t[d];return 0<=l(o,s,s.length,r)};var F=w(),H=w([1]),G=w([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),D=w([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),W=w([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),Q=w([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),Y=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),L=w([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139])}).call(t,n(20).Buffer)},function(e,t,n){var a=n(0);n(7);var r=a.asn1;t.privateKeyValidator={name:'PrivateKeyInfo',tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,value:[{name:'PrivateKeyInfo.version',tagClass:r.Class.UNIVERSAL,type:r.Type.INTEGER,constructed:!1,capture:'privateKeyVersion'},{name:'PrivateKeyInfo.privateKeyAlgorithm',tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,value:[{name:'AlgorithmIdentifier.algorithm',tagClass:r.Class.UNIVERSAL,type:r.Type.OID,constructed:!1,capture:'privateKeyOid'}]},{name:'PrivateKeyInfo',tagClass:r.Class.UNIVERSAL,type:r.Type.OCTETSTRING,constructed:!1,capture:'privateKey'}]},t.publicKeyValidator={name:'SubjectPublicKeyInfo',tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,captureAsn1:'subjectPublicKeyInfo',value:[{name:'SubjectPublicKeyInfo.AlgorithmIdentifier',tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,value:[{name:'AlgorithmIdentifier.algorithm',tagClass:r.Class.UNIVERSAL,type:r.Type.OID,constructed:!1,capture:'publicKeyOid'}]},{tagClass:r.Class.UNIVERSAL,type:r.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:'ed25519PublicKey'}]}},function(e,t,n){function a(e,t,n,a){e.generate=function(e,r){for(var o=new s.util.ByteBuffer,l=d(r/a)+n,p=new s.util.ByteBuffer,c=n;c<l;++c){p.putInt32(c),t.start(),t.update(e+p.getBytes());var i=t.digest();o.putBytes(i.getBytes(a))}return o.truncate(o.length()-r),o.getBytes()}}var s=n(0);n(1),n(5),n(23),e.exports=s.kem=s.kem||{};var i=s.jsbn.BigInteger;s.kem.rsa={},s.kem.rsa.create=function(e,t){t=t||{};var n=t.prng||s.random,a={};return a.encrypt=function(t,a){var o=d(t.n.bitLength()/8),l;do l=new i(s.util.bytesToHex(n.getBytesSync(o)),16).mod(t.n);while(0>=l.compareTo(i.ONE));l=s.util.hexToBytes(l.toString(16));var r=o-l.length;0<r&&(l=s.util.fillString('\\0',r)+l);var c=t.encrypt(l,'NONE'),p=e.generate(l,a);return{encapsulation:c,key:p}},a.decrypt=function(t,n,a){var i=t.decrypt(n,'NONE');return e.generate(i,a)},a},s.kem.kdf1=function(e,t){a(this,e,0,t||e.digestLength)},s.kem.kdf2=function(e,t){a(this,e,1,t||e.digestLength)}},function(e,t,n){var a=n(0);n(1),e.exports=a.log=a.log||{},a.log.levels=['none','error','warning','info','debug','verbose','max'];var r={},s=[],o=null;a.log.LEVEL_LOCKED=2,a.log.NO_LEVEL_CHECK=4,a.log.INTERPOLATE=8;for(var l=0,d;l<a.log.levels.length;++l)d=a.log.levels[l],r[d]={index:l,name:d.toUpperCase()};a.log.logMessage=function(e){for(var t=r[e.level].index,n=0,i;n<s.length;++n)if(i=s[n],i.flags&a.log.NO_LEVEL_CHECK)i.f(e);else{var o=r[i.level].index;t<=o&&i.f(i,e)}},a.log.prepareStandard=function(e){'standard'in e||(e.standard=r[e.level].name+' ['+e.category+'] '+e.message)},a.log.prepareFull=function(e){if(!('full'in e)){var t=[e.message];t=t.concat([]),e.full=a.util.format.apply(this,t)}},a.log.prepareStandardFull=function(e){'standardFull'in e||(a.log.prepareStandard(e),e.standardFull=e.standard)};for(var c=['error','warning','info','debug','verbose'],l=0;l<c.length;++l)(function(e){a.log[e]=function(t,n){var r=Array.prototype.slice.call(arguments).slice(2),i={timestamp:new Date,level:e,category:t,message:n,arguments:r};a.log.logMessage(i)}})(c[l]);if(a.log.makeLogger=function(e){var t={flags:0,f:e};return a.log.setLevel(t,'none'),t},a.log.setLevel=function(e,t){var n=!1;if(e&&!(e.flags&a.log.LEVEL_LOCKED))for(var r=0,i;r<a.log.levels.length;++r)if(i=a.log.levels[r],t==i){e.level=t,n=!0;break}return n},a.log.lock=function(e,t){'undefined'==typeof t||t?e.flags|=a.log.LEVEL_LOCKED:e.flags&=~a.log.LEVEL_LOCKED},a.log.addLogger=function(e){s.push(e)},'undefined'!=typeof console&&'log'in console){var p;if(console.error&&console.warn&&console.info&&console.debug){var u={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},g=function(e,t){a.log.prepareStandard(t);var n=u[t.level],r=[t.standard];r=r.concat(t.arguments.slice()),n.apply(console,r)};p=a.log.makeLogger(g)}else{var g=function(e,t){a.log.prepareStandardFull(t),console.log(t.standardFull)};p=a.log.makeLogger(g)}a.log.setLevel(p,'debug'),a.log.addLogger(p),o=p}else console={log:function(){}};if(null!==o&&'undefined'!=typeof window&&window.location){var h=new URL(window.location.href).searchParams;if(h.has('console.level')&&a.log.setLevel(o,h.get('console.level').slice(-1)[0]),h.has('console.lock')){var y=h.get('console.lock').slice(-1)[0];'true'==y&&a.log.lock(o)}}a.log.consoleLogger=o},function(e,t,n){e.exports=n(8),n(33),n(15),n(51),n(59)},function(e,t,n){function a(e){var t={},n=[];if(!h.validate(e,y.asn1.recipientInfoValidator,t,n)){var a=new Error('Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.');throw a.errors=n,a}return{version:t.version.charCodeAt(0),issuer:g.pki.RDNAttributesAsArray(t.issuer),serialNumber:g.util.createBuffer(t.serial).toHex(),encryptedContent:{algorithm:h.derToOid(t.encAlgorithm),parameter:t.encParameter?t.encParameter.value:void 0,content:t.encKey}}}function r(e){return h.create(h.Class.UNIVERSAL,h.Type.SEQUENCE,!0,[h.create(h.Class.UNIVERSAL,h.Type.INTEGER,!1,h.integerToDer(e.version).getBytes()),h.create(h.Class.UNIVERSAL,h.Type.SEQUENCE,!0,[g.pki.distinguishedNameToAsn1({attributes:e.issuer}),h.create(h.Class.UNIVERSAL,h.Type.INTEGER,!1,g.util.hexToBytes(e.serialNumber))]),h.create(h.Class.UNIVERSAL,h.Type.SEQUENCE,!0,[h.create(h.Class.UNIVERSAL,h.Type.OID,!1,h.oidToDer(e.encryptedContent.algorithm).getBytes()),h.create(h.Class.UNIVERSAL,h.Type.NULL,!1,'')]),h.create(h.Class.UNIVERSAL,h.Type.OCTETSTRING,!1,e.encryptedContent.content)])}function i(e){for(var t=[],n=0;n<e.length;++n)t.push(a(e[n]));return t}function s(e){for(var t=[],n=0;n<e.length;++n)t.push(r(e[n]));return t}function o(e){var t=h.create(h.Class.UNIVERSAL,h.Type.SEQUENCE,!0,[h.create(h.Class.UNIVERSAL,h.Type.INTEGER,!1,h.integerToDer(e.version).getBytes()),h.create(h.Class.UNIVERSAL,h.Type.SEQUENCE,!0,[g.pki.distinguishedNameToAsn1({attributes:e.issuer}),h.create(h.Class.UNIVERSAL,h.Type.INTEGER,!1,g.util.hexToBytes(e.serialNumber))]),h.create(h.Class.UNIVERSAL,h.Type.SEQUENCE,!0,[h.create(h.Class.UNIVERSAL,h.Type.OID,!1,h.oidToDer(e.digestAlgorithm).getBytes()),h.create(h.Class.UNIVERSAL,h.Type.NULL,!1,'')])]);if(e.authenticatedAttributesAsn1&&t.value.push(e.authenticatedAttributesAsn1),t.value.push(h.create(h.Class.UNIVERSAL,h.Type.SEQUENCE,!0,[h.create(h.Class.UNIVERSAL,h.Type.OID,!1,h.oidToDer(e.signatureAlgorithm).getBytes()),h.create(h.Class.UNIVERSAL,h.Type.NULL,!1,'')])),t.value.push(h.create(h.Class.UNIVERSAL,h.Type.OCTETSTRING,!1,e.signature)),0<e.unauthenticatedAttributes.length){for(var n=h.create(h.Class.CONTEXT_SPECIFIC,1,!0,[]),a=0,r;a<e.unauthenticatedAttributes.length;++a)r=e.unauthenticatedAttributes[a],n.values.push(d(r));t.value.push(n)}return t}function l(e){for(var t=[],n=0;n<e.length;++n)t.push(o(e[n]));return t}function d(e){var t;if(e.type===g.pki.oids.contentType)t=h.create(h.Class.UNIVERSAL,h.Type.OID,!1,h.oidToDer(e.value).getBytes());else if(e.type===g.pki.oids.messageDigest)t=h.create(h.Class.UNIVERSAL,h.Type.OCTETSTRING,!1,e.value.bytes());else if(e.type===g.pki.oids.signingTime){var n=new Date('1950-01-01T00:00:00Z'),a=new Date('2050-01-01T00:00:00Z'),r=e.value;if('string'==typeof r){var i=Date.parse(r);r=isNaN(i)?13===r.length?h.utcTimeToDate(r):h.generalizedTimeToDate(r):new Date(i)}t=r>=n&&r<a?h.create(h.Class.UNIVERSAL,h.Type.UTCTIME,!1,h.dateToUtcTime(r)):h.create(h.Class.UNIVERSAL,h.Type.GENERALIZEDTIME,!1,h.dateToGeneralizedTime(r))}return h.create(h.Class.UNIVERSAL,h.Type.SEQUENCE,!0,[h.create(h.Class.UNIVERSAL,h.Type.OID,!1,h.oidToDer(e.type).getBytes()),h.create(h.Class.UNIVERSAL,h.Type.SET,!0,[t])])}function c(e){return[h.create(h.Class.UNIVERSAL,h.Type.OID,!1,h.oidToDer(g.pki.oids.data).getBytes()),h.create(h.Class.UNIVERSAL,h.Type.SEQUENCE,!0,[h.create(h.Class.UNIVERSAL,h.Type.OID,!1,h.oidToDer(e.algorithm).getBytes()),e.parameter?h.create(h.Class.UNIVERSAL,h.Type.OCTETSTRING,!1,e.parameter.getBytes()):void 0]),h.create(h.Class.CONTEXT_SPECIFIC,0,!0,[h.create(h.Class.UNIVERSAL,h.Type.OCTETSTRING,!1,e.content.getBytes())])]}function p(e,t,n){var a={};if(!h.validate(t,n,a,[])){var r=new Error('Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.');throw r.errors=r,r}var s=h.derToOid(a.contentType);if(s!==g.pki.oids.data)throw new Error('Unsupported PKCS#7 message. Only wrapped ContentType Data supported.');if(a.encryptedContent){var o='';if(g.util.isArray(a.encryptedContent))for(var l=0;l<a.encryptedContent.length;++l){if(a.encryptedContent[l].type!==h.Type.OCTETSTRING)throw new Error('Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.');o+=a.encryptedContent[l].value}else o=a.encryptedContent;e.encryptedContent={algorithm:h.derToOid(a.encAlgorithm),parameter:g.util.createBuffer(a.encParameter.value),content:g.util.createBuffer(o)}}if(a.content){var o='';if(g.util.isArray(a.content))for(var l=0;l<a.content.length;++l){if(a.content[l].type!==h.Type.OCTETSTRING)throw new Error('Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.');o+=a.content[l].value}else o=a.content;e.content=g.util.createBuffer(o)}return e.version=a.version.charCodeAt(0),e.rawCapture=a,a}function u(e){if(e.encryptedContent.key===void 0)throw new Error('Symmetric key not available.');if(void 0===e.content){var t;switch(e.encryptedContent.algorithm){case g.pki.oids['aes128-CBC']:case g.pki.oids['aes192-CBC']:case g.pki.oids['aes256-CBC']:t=g.aes.createDecryptionCipher(e.encryptedContent.key);break;case g.pki.oids.desCBC:case g.pki.oids['des-EDE3-CBC']:t=g.des.createDecryptionCipher(e.encryptedContent.key);break;default:throw new Error('Unsupported symmetric cipher, OID '+e.encryptedContent.algorithm);}if(t.start(e.encryptedContent.parameter),t.update(e.encryptedContent.content),!t.finish())throw new Error('Symmetric decryption failed.');e.content=t.output}}var g=n(0);n(11),n(7),n(21),n(12),n(13),n(57),n(5),n(1),n(36);var h=g.asn1,y=e.exports=g.pkcs7=g.pkcs7||{};y.messageFromPem=function(e){var t=g.pem.decode(e)[0];if('PKCS7'!==t.type){var n=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not \"PKCS#7\".');throw n.headerType=t.type,n}if(t.procType&&'ENCRYPTED'===t.procType.type)throw new Error('Could not convert PKCS#7 message from PEM; PEM is encrypted.');var a=h.fromDer(t.body);return y.messageFromAsn1(a)},y.messageToPem=function(e,t){var n={type:'PKCS7',body:h.toDer(e.toAsn1()).getBytes()};return g.pem.encode(n,{maxline:t})},y.messageFromAsn1=function(e){var t={},n=[];if(!h.validate(e,y.asn1.contentInfoValidator,t,n)){var a=new Error('Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.');throw a.errors=n,a}var r=h.derToOid(t.contentType),i;switch(r){case g.pki.oids.envelopedData:i=y.createEnvelopedData();break;case g.pki.oids.encryptedData:i=y.createEncryptedData();break;case g.pki.oids.signedData:i=y.createSignedData();break;default:throw new Error('Cannot read PKCS#7 message. ContentType with OID '+r+' is not (yet) supported.');}return i.fromAsn1(t.content.value[0]),i},y.createSignedData=function(){function e(){for(var e={},t=0;t<n.signers.length;++t){var a=n.signers[t],r=a.digestAlgorithm;r in e||(e[r]=g.md[g.pki.oids[r]].create()),a.md=0===a.authenticatedAttributes.length?e[r]:g.md[g.pki.oids[r]].create()}for(var r in n.digestAlgorithmIdentifiers=[],e)n.digestAlgorithmIdentifiers.push(h.create(h.Class.UNIVERSAL,h.Type.SEQUENCE,!0,[h.create(h.Class.UNIVERSAL,h.Type.OID,!1,h.oidToDer(r).getBytes()),h.create(h.Class.UNIVERSAL,h.Type.NULL,!1,'')]));return e}function t(e){var t;if(n.detachedContent?t=n.detachedContent:(t=n.contentInfo.value[1],t=t.value[0]),!t)throw new Error('Could not sign PKCS#7 message; there is no content to sign.');var a=h.derToOid(n.contentInfo.value[0].value),r=h.toDer(t);for(var s in r.getByte(),h.getBerValueLength(r),r=r.getBytes(),e)e[s].start().update(r);for(var o=new Date,c=0,i;c<n.signers.length;++c){if(i=n.signers[c],0!==i.authenticatedAttributes.length){i.authenticatedAttributesAsn1=h.create(h.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var p=h.create(h.Class.UNIVERSAL,h.Type.SET,!0,[]),u=0,y;u<i.authenticatedAttributes.length;++u)y=i.authenticatedAttributes[u],y.type===g.pki.oids.messageDigest?y.value=e[i.digestAlgorithm].digest():y.type===g.pki.oids.signingTime&&!y.value&&(y.value=o),p.value.push(d(y)),i.authenticatedAttributesAsn1.value.push(d(y));r=h.toDer(p).getBytes(),i.md.start().update(r)}else if(a!==g.pki.oids.data)throw new Error('Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.');i.signature=i.key.sign(i.md,'RSASSA-PKCS1-V1_5')}n.signerInfos=l(n.signers)}var n=null;return n={type:g.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(e){if(p(n,e,y.asn1.signedDataValidator),n.certificates=[],n.crls=[],n.digestAlgorithmIdentifiers=[],n.contentInfo=null,n.signerInfos=[],n.rawCapture.certificates)for(var t=n.rawCapture.certificates.value,a=0;a<t.length;++a)n.certificates.push(g.pki.certificateFromAsn1(t[a]))},toAsn1:function(){n.contentInfo||n.sign();for(var e=[],t=0;t<n.certificates.length;++t)e.push(g.pki.certificateToAsn1(n.certificates[t]));var a=[],r=h.create(h.Class.CONTEXT_SPECIFIC,0,!0,[h.create(h.Class.UNIVERSAL,h.Type.SEQUENCE,!0,[h.create(h.Class.UNIVERSAL,h.Type.INTEGER,!1,h.integerToDer(n.version).getBytes()),h.create(h.Class.UNIVERSAL,h.Type.SET,!0,n.digestAlgorithmIdentifiers),n.contentInfo])]);return 0<e.length&&r.value[0].value.push(h.create(h.Class.CONTEXT_SPECIFIC,0,!0,e)),0<a.length&&r.value[0].value.push(h.create(h.Class.CONTEXT_SPECIFIC,1,!0,a)),r.value[0].value.push(h.create(h.Class.UNIVERSAL,h.Type.SET,!0,n.signerInfos)),h.create(h.Class.UNIVERSAL,h.Type.SEQUENCE,!0,[h.create(h.Class.UNIVERSAL,h.Type.OID,!1,h.oidToDer(n.type).getBytes()),r])},addSigner:function(e){var t=e.issuer,a=e.serialNumber;if(e.certificate){var r=e.certificate;'string'==typeof r&&(r=g.pki.certificateFromPem(r)),t=r.issuer.attributes,a=r.serialNumber}var s=e.key;if(!s)throw new Error('Could not add PKCS#7 signer; no private key specified.');'string'==typeof s&&(s=g.pki.privateKeyFromPem(s));var o=e.digestAlgorithm||g.pki.oids.sha1;switch(o){case g.pki.oids.sha1:case g.pki.oids.sha256:case g.pki.oids.sha384:case g.pki.oids.sha512:case g.pki.oids.md5:break;default:throw new Error('Could not add PKCS#7 signer; unknown message digest algorithm: '+o);}var l=e.authenticatedAttributes||[];if(0<l.length){for(var d=!1,c=!1,p=0,i;p<l.length;++p){if(i=l[p],!d&&i.type===g.pki.oids.contentType){if(d=!0,c)break;continue}if(!c&&i.type===g.pki.oids.messageDigest){if(c=!0,d)break;continue}}if(!d||!c)throw new Error('Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.')}n.signers.push({key:s,version:1,issuer:t,serialNumber:a,digestAlgorithm:o,signatureAlgorithm:g.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:l,unauthenticatedAttributes:[]})},sign:function(a){if(a=a||{},('object'!=typeof n.content||null===n.contentInfo)&&(n.contentInfo=h.create(h.Class.UNIVERSAL,h.Type.SEQUENCE,!0,[h.create(h.Class.UNIVERSAL,h.Type.OID,!1,h.oidToDer(g.pki.oids.data).getBytes())]),'content'in n)){var r;n.content instanceof g.util.ByteBuffer?r=n.content.bytes():'string'==typeof n.content&&(r=g.util.encodeUtf8(n.content)),a.detached?n.detachedContent=h.create(h.Class.UNIVERSAL,h.Type.OCTETSTRING,!1,r):n.contentInfo.value.push(h.create(h.Class.CONTEXT_SPECIFIC,0,!0,[h.create(h.Class.UNIVERSAL,h.Type.OCTETSTRING,!1,r)]))}if(0!==n.signers.length){var i=e();t(i)}},verify:function(){throw new Error('PKCS#7 signature verification not yet implemented.')},addCertificate:function(e){'string'==typeof e&&(e=g.pki.certificateFromPem(e)),n.certificates.push(e)},addCertificateRevokationList:function(){throw new Error('PKCS#7 CRL support not yet implemented.')}},n},y.createEncryptedData=function(){var e=null;return e={type:g.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:g.pki.oids['aes256-CBC']},fromAsn1:function(t){p(e,t,y.asn1.encryptedDataValidator)},decrypt:function(t){void 0!==t&&(e.encryptedContent.key=t),u(e)}},e},y.createEnvelopedData=function(){var e=null;return e={type:g.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:g.pki.oids['aes256-CBC']},fromAsn1:function(t){var n=p(e,t,y.asn1.envelopedDataValidator);e.recipients=i(n.recipientInfos.value)},toAsn1:function(){return h.create(h.Class.UNIVERSAL,h.Type.SEQUENCE,!0,[h.create(h.Class.UNIVERSAL,h.Type.OID,!1,h.oidToDer(e.type).getBytes()),h.create(h.Class.CONTEXT_SPECIFIC,0,!0,[h.create(h.Class.UNIVERSAL,h.Type.SEQUENCE,!0,[h.create(h.Class.UNIVERSAL,h.Type.INTEGER,!1,h.integerToDer(e.version).getBytes()),h.create(h.Class.UNIVERSAL,h.Type.SET,!0,s(e.recipients)),h.create(h.Class.UNIVERSAL,h.Type.SEQUENCE,!0,c(e.encryptedContent))])])])},findRecipient:function(t){for(var n=t.issuer.attributes,a=0;a<e.recipients.length;++a){var i=e.recipients[a],r=i.issuer;if(i.serialNumber===t.serialNumber&&r.length===n.length){for(var s=!0,o=0;o<n.length;++o)if(r[o].type!==n[o].type||r[o].value!==n[o].value){s=!1;break}if(s)return i}}return null},decrypt:function(t,n){if(void 0===e.encryptedContent.key&&void 0!==t&&void 0!==n)switch(t.encryptedContent.algorithm){case g.pki.oids.rsaEncryption:case g.pki.oids.desCBC:var a=n.decrypt(t.encryptedContent.content);e.encryptedContent.key=g.util.createBuffer(a);break;default:throw new Error('Unsupported asymmetric cipher, OID '+t.encryptedContent.algorithm);}u(e)},addRecipient:function(t){e.recipients.push({version:0,issuer:t.issuer.attributes,serialNumber:t.serialNumber,encryptedContent:{algorithm:g.pki.oids.rsaEncryption,key:t.publicKey}})},encrypt:function(t,n){if(void 0===e.encryptedContent.content){n=n||e.encryptedContent.algorithm,t=t||e.encryptedContent.key;var a,r,s;switch(n){case g.pki.oids['aes128-CBC']:a=16,r=16,s=g.aes.createEncryptionCipher;break;case g.pki.oids['aes192-CBC']:a=24,r=16,s=g.aes.createEncryptionCipher;break;case g.pki.oids['aes256-CBC']:a=32,r=16,s=g.aes.createEncryptionCipher;break;case g.pki.oids['des-EDE3-CBC']:a=24,r=8,s=g.des.createEncryptionCipher;break;default:throw new Error('Unsupported symmetric cipher, OID '+n);}if(void 0===t)t=g.util.createBuffer(g.random.getBytes(a));else if(t.length()!=a)throw new Error('Symmetric key has wrong length; got '+t.length()+' bytes, expected '+a+'.');e.encryptedContent.algorithm=n,e.encryptedContent.key=t,e.encryptedContent.parameter=g.util.createBuffer(g.random.getBytes(r));var o=s(t);if(o.start(e.encryptedContent.parameter.copy()),o.update(e.content),!o.finish())throw new Error('Symmetric encryption failed.');e.encryptedContent.content=o.output}for(var l=0,i;l<e.recipients.length;++l)if(i=e.recipients[l],void 0===i.encryptedContent.content)switch(i.encryptedContent.algorithm){case g.pki.oids.rsaEncryption:i.encryptedContent.content=i.encryptedContent.key.encrypt(e.encryptedContent.key.data);break;default:throw new Error('Unsupported asymmetric cipher, OID '+i.encryptedContent.algorithm);}}},e}},function(e,t,n){function a(e,t){var n=t.toString(16);'8'<=n[0]&&(n='00'+n);var a=s.util.hexToBytes(n);e.putInt32(a.length),e.putBytes(a)}function r(e,t){e.putInt32(t.length),e.putString(t)}function i(){for(var e=s.md.sha1.create(),t=arguments.length,n=0;n<t;++n)e.update(arguments[n]);return e.digest()}var s=n(0);n(11),n(14),n(33),n(15),n(1);var o=e.exports=s.ssh=s.ssh||{};o.privateKeyToPutty=function(e,t,n){n=n||'',t=t||'';var o='ssh-rsa',l=''===t?'none':'aes256-cbc',d='PuTTY-User-Key-File-2: '+o+'\\r\\n';d+='Encryption: '+l+'\\r\\n',d+='Comment: '+n+'\\r\\n';var c=s.util.createBuffer();r(c,o),a(c,e.e),a(c,e.n);var u=s.util.encode64(c.bytes(),64),g=p(u.length/66)+1;d+='Public-Lines: '+g+'\\r\\n',d+=u;var h=s.util.createBuffer();a(h,e.d),a(h,e.p),a(h,e.q),a(h,e.qInv);var y;if(!t)y=s.util.encode64(h.bytes(),64);else{var f=h.length()+16-1;f-=f%16;var m=i(h.bytes());m.truncate(m.length()-f+h.length()),h.putBuffer(m);var E=s.util.createBuffer();E.putBuffer(i('\\0\\0\\0\\0',t)),E.putBuffer(i('\\0\\0\\0\\x01',t));var C=s.aes.createEncryptionCipher(E.truncate(8),'CBC');C.start(s.util.createBuffer().fillWithByte(0,16)),C.update(h.copy()),C.finish();var v=C.output;v.truncate(16),y=s.util.encode64(v.bytes(),64)}g=p(y.length/66)+1,d+='\\r\\nPrivate-Lines: '+g+'\\r\\n',d+=y;var b=i('putty-private-key-file-mac-key',t),S=s.util.createBuffer();r(S,o),r(S,l),r(S,n),S.putInt32(c.length()),S.putBuffer(c),S.putInt32(h.length()),S.putBuffer(h);var T=s.hmac.create();return T.start('sha1',b),T.update(S.bytes()),d+='\\r\\nPrivate-MAC: '+T.digest().toHex()+'\\r\\n',d},o.publicKeyToOpenSSH=function(e,t){var n='ssh-rsa';t=t||'';var i=s.util.createBuffer();return r(i,n),a(i,e.e),a(i,e.n),n+' '+s.util.encode64(i.bytes())+' '+t},o.privateKeyToOpenSSH=function(e,t){return t?s.pki.encryptRsaPrivateKey(e,t,{legacy:!0,algorithm:'aes128'}):s.pki.privateKeyToPem(e)},o.getPublicKeyFingerprint=function(e,t){t=t||{};var n=t.md||s.md.md5.create(),i=s.util.createBuffer();r(i,'ssh-rsa'),a(i,e.e),a(i,e.n),n.start(),n.update(i.getBytes());var o=n.digest();if('hex'===t.encoding){var l=o.toHex();return t.delimiter?l.match(/.{2}/g).join(t.delimiter):l}if('binary'===t.encoding)return o.getBytes();if(t.encoding)throw new Error('Unknown encoding \"'+t.encoding+'\".');return o}},function(e,t,n){(function(e){(function(e){var t=function(){try{return!!Symbol.iterator}catch(e){return!1}}(),n=function(e){var n={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return t&&(n[Symbol.iterator]=function(){return n}),n},a=function(e){return encodeURIComponent(e).replace(/%20/g,'+')},r=function(e){return decodeURIComponent((e+'').replace(/\\+/g,' '))};(function(){try{var t=e.URLSearchParams;return'a=1'===new t('?a=1').toString()&&'function'==typeof t.prototype.set&&'function'==typeof t.prototype.entries}catch(t){return!1}})()||function(){var r=function(e){Object.defineProperty(this,'_entries',{writable:!0,value:{}});var t=typeof e;if('undefined'==t);else if('string'==t)''!==e&&this._fromString(e);else if(e instanceof r){var n=this;e.forEach(function(e,t){n.append(t,e)})}else if(!(null!==e&&'object'==t))throw new TypeError('Unsupported input\\'s type for URLSearchParams');else if('[object Array]'===Object.prototype.toString.call(e)){for(var a=0,i;a<e.length;a++)if(i=e[a],'[object Array]'===Object.prototype.toString.call(i)||2!==i.length)this.append(i[0],i[1]);else throw new TypeError('Expected [string, any] as entry at index '+a+' of URLSearchParams\\'s input');}else for(var s in e)e.hasOwnProperty(s)&&this.append(s,e[s])},i=r.prototype;i.append=function(e,t){e in this._entries?this._entries[e].push(t+''):this._entries[e]=[t+'']},i.delete=function(e){delete this._entries[e]},i.get=function(e){return e in this._entries?this._entries[e][0]:null},i.getAll=function(e){return e in this._entries?this._entries[e].slice(0):[]},i.has=function(e){return e in this._entries},i.set=function(e,t){this._entries[e]=[t+'']},i.forEach=function(e,t){var n;for(var a in this._entries)if(this._entries.hasOwnProperty(a)){n=this._entries[a];for(var r=0;r<n.length;r++)e.call(t,n[r],a,this)}},i.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),n(e)},i.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),n(e)},i.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),n(e)},t&&(i[Symbol.iterator]=i.entries),i.toString=function(){var e=[];return this.forEach(function(t,n){e.push(a(n)+'='+a(t))}),e.join('&')},e.URLSearchParams=r}();var i=e.URLSearchParams.prototype;'function'!=typeof i.sort&&(i.sort=function(){var e=this,t=[];this.forEach(function(n,a){t.push([a,n]),e._entries||e.delete(a)}),t.sort(function(e,t){return e[0]<t[0]?-1:e[0]>t[0]?1:0}),e._entries&&(e._entries={});for(var n=0;n<t.length;n++)this.append(t[n][0],t[n][1])}),'function'!=typeof i._fromString&&Object.defineProperty(i,'_fromString',{enumerable:!1,configurable:!1,writable:!1,value:function(e){if(this._entries)this._entries={};else{var t=[];this.forEach(function(e,n){t.push(n)});for(var n=0;n<t.length;n++)this.delete(t[n])}e=e.replace(/^\\?/,'');for(var a=e.split('&'),n=0,i;n<a.length;n++)i=a[n].split('='),this.append(r(i[0]),1<i.length?r(i[1]):'')}})})('undefined'==typeof e?'undefined'==typeof window?'undefined'==typeof self?this:self:window:e),function(e){if(function(){try{var t=new e.URL('b','http://a');return t.pathname='c d','http://a/c%20d'===t.href&&t.searchParams}catch(t){return!1}}()||function(){var t=e.URL,n=function(t,n){'string'!=typeof t&&(t+=''),n&&'string'!=typeof n&&(n+='');var a=document,r;if(n&&(void 0===e.location||n!==e.location.href)){n=n.toLowerCase(),a=document.implementation.createHTMLDocument(''),r=a.createElement('base'),r.href=n,a.head.appendChild(r);try{if(0!==r.href.indexOf(n))throw new Error(r.href)}catch(e){throw new Error('URL unable to set base '+n+' due to '+e)}}var i=a.createElement('a');i.href=t,r&&(a.body.appendChild(i),i.href=i.href);var s=a.createElement('input');if(s.type='url',s.value=t,':'===i.protocol||!/:/.test(i.href)||!s.checkValidity()&&!n)throw new TypeError('Invalid URL');Object.defineProperty(this,'_anchorElement',{value:i});var o=new e.URLSearchParams(this.search),l=!0,d=!0,c=this;['append','delete','set'].forEach(function(e){var t=o[e];o[e]=function(){t.apply(o,arguments),l&&(d=!1,c.search=o.toString(),d=!0)}}),Object.defineProperty(this,'searchParams',{value:o,enumerable:!0});var p;Object.defineProperty(this,'_updateSearchParams',{enumerable:!1,configurable:!1,writable:!1,value:function(){this.search!==p&&(p=this.search,d&&(l=!1,this.searchParams._fromString(this.search),l=!0))}})},a=n.prototype,r=function(e){Object.defineProperty(a,e,{get:function(){return this._anchorElement[e]},set:function(t){this._anchorElement[e]=t},enumerable:!0})};['hash','host','hostname','port','protocol'].forEach(function(e){r(e)}),Object.defineProperty(a,'search',{get:function(){return this._anchorElement.search},set:function(e){this._anchorElement.search=e,this._updateSearchParams()},enumerable:!0}),Object.defineProperties(a,{toString:{get:function(){var e=this;return function(){return e.href}}},href:{get:function(){return this._anchorElement.href.replace(/\\?$/,'')},set:function(e){this._anchorElement.href=e,this._updateSearchParams()},enumerable:!0},pathname:{get:function(){return this._anchorElement.pathname.replace(/(^\\/?)/,'/')},set:function(e){this._anchorElement.pathname=e},enumerable:!0},origin:{get:function(){var e={\"http:\":80,\"https:\":443,\"ftp:\":21}[this._anchorElement.protocol],t=this._anchorElement.port!=e&&''!==this._anchorElement.port;return this._anchorElement.protocol+'//'+this._anchorElement.hostname+(t?':'+this._anchorElement.port:'')},enumerable:!0},password:{get:function(){return''},set:function(){},enumerable:!0},username:{get:function(){return''},set:function(){},enumerable:!0}}),n.createObjectURL=function(){return t.createObjectURL.apply(t,arguments)},n.revokeObjectURL=function(){return t.revokeObjectURL.apply(t,arguments)},e.URL=n}(),void 0!==e.location&&!('origin'in e.location)){var t=function(){return e.location.protocol+'//'+e.location.hostname+(e.location.port?':'+e.location.port:'')};try{Object.defineProperty(e.location,'origin',{get:t,enumerable:!0})}catch(n){setInterval(function(){e.location.origin=t()},100)}}}('undefined'==typeof e?'undefined'==typeof window?'undefined'==typeof self?this:self:window:e)}).call(t,n(9))}])});" + "</script>\n  <script>" + "window.onerror = function (message, file, line, col, error) {\n  var msg = JSON.stringify({ method: 'error', value: message });\n  window.postMessage(msg, '*');\n};\n\n(function () {\n  function _ready() {\n    var contents;\n    var targetOrigin = '*';\n    var sendMessage = function (obj) {\n      // window.postMessage(JSON.stringify(obj), targetOrigin);\n      if (!window.ReactNativeWebView.postMessage) {\n        setTimeout(() => {\n          sendMessage(obj);\n        }, 1);\n      } else {\n        window.ReactNativeWebView.postMessage(JSON.stringify(obj));\n      }\n    };\n\n    var q = [];\n    var _isReady = false;\n\n    var book;\n    var rendition;\n\n    var minSpreadWidth = 815;\n    var axis = 'horizontal';\n\n    var isChrome = /Chrome/.test(navigator.userAgent);\n    var isWebkit = !isChrome && /AppleWebKit/.test(navigator.userAgent);\n\n    // debug\n    console.log = function () {\n      sendMessage({ method: 'log', value: Array.from(arguments) });\n    };\n\n    console.error = function () {\n      sendMessage({ method: 'error', value: Array.from(arguments) });\n    };\n\n    function onMessage(e) {\n      var message = e.data;\n      handleMessage(message);\n    }\n\n    function handleMessage(message) {\n      var decoded = typeof message == 'object' ? message : JSON.parse(message);\n      var response;\n      var result;\n\n      switch (decoded.method) {\n        case 'open': {\n          var url = decoded.args[0];\n          var options = decoded.args.length > 1 && decoded.args[1];\n          var epubOptions = decoded.args.length > 2 && decoded.args[2];\n          openEpub(url, epubOptions, options);\n\n          if (options && options.webviewStylesheet) {\n            var head = document.getElementsByTagName('head')[0];\n            var link = document.createElement('link');\n            link.rel = 'stylesheet';\n            link.type = 'text/css';\n            link.href = options.webviewStylesheet;\n            head.appendChild(link);\n          }\n\n          break;\n        }\n        case 'display': {\n          var args = decoded.args && decoded.args.length && decoded.args[0];\n          var target;\n\n          if (!args) {\n            target = undefined;\n          } else if (args.target) {\n            target = args.target.toString();\n          } else if (args.spine) {\n            target = parseInt(args.spine);\n          }\n\n          if (rendition) {\n            rendition.display(target);\n          } else {\n            q.push(message);\n          }\n          break;\n        }\n        case 'flow': {\n          var direction = decoded.args.length && decoded.args[0];\n          axis = direction === 'paginated' ? 'horizontal' : 'vertical';\n\n          if (rendition) {\n            rendition.flow(direction);\n          } else {\n            q.push(message);\n          }\n\n          break;\n        }\n        case 'resize': {\n          var width = decoded.args.length && decoded.args[0];\n          var height = decoded.args.length > 1 && decoded.args[1];\n\n          if (rendition) {\n            rendition.resize(width, height);\n          } else {\n            q.push(message);\n          }\n\n          break;\n        }\n        case 'setLocations': {\n          var locations = decoded.args[0];\n          if (book) {\n            book.locations.load(locations);\n          } else {\n            q.push(message);\n          }\n\n          if (rendition) {\n            rendition.reportLocation();\n          }\n          break;\n        }\n        case 'reportLocation': {\n          if (rendition) {\n            rendition.reportLocation();\n          } else {\n            q.push(message);\n          }\n          break;\n        }\n        case 'minSpreadWidth': {\n          minSpreadWidth = decoded.args;\n          break;\n        }\n        case 'mark': {\n          if (rendition) {\n            rendition.annotations.mark.apply(rendition.annotations, decoded.args);\n          } else {\n            q.push(message);\n          }\n          break;\n        }\n        case 'underline': {\n          if (rendition) {\n            rendition.annotations.underline.apply(rendition.annotations, decoded.args);\n          } else {\n            q.push(message);\n          }\n          break;\n        }\n        case 'highlight': {\n          if (rendition) {\n            rendition.annotations.highlight.apply(rendition.annotations, decoded.args);\n          } else {\n            q.push(message);\n          }\n          break;\n        }\n        case 'removeAnnotation': {\n          if (rendition) {\n            rendition.annotations.remove.apply(rendition.annotations, decoded.args);\n          } else {\n            q.push(message);\n          }\n          break;\n        }\n        case 'themes': {\n          var themes = decoded.args[0];\n          if (rendition) {\n            rendition.themes.register(themes);\n          } else {\n            q.push(message);\n          }\n          break;\n        }\n        case 'theme': {\n          var theme = decoded.args[0];\n          if (rendition) {\n            rendition.themes.select(theme);\n          } else {\n            q.push(message);\n          }\n          break;\n        }\n        case 'fontSize': {\n          var fontSize = decoded.args[0];\n          if (rendition) {\n            rendition.themes.fontSize(fontSize);\n          } else {\n            q.push(message);\n          }\n          break;\n        }\n        case 'font': {\n          var font = decoded.args[0];\n          if (rendition) {\n            rendition.themes.font(font);\n          } else {\n            q.push(message);\n          }\n          break;\n        }\n        case 'override': {\n          if (rendition) {\n            rendition.themes.override.apply(rendition.themes, decoded.args);\n          } else {\n            q.push(message);\n          }\n          break;\n        }\n        case 'gap': {\n          var gap = decoded.args[0];\n          if (rendition) {\n            rendition.settings.gap = gap;\n            if (rendition.manager) {\n              rendition.manager.settings.gap = gap;\n            }\n          } else {\n            q.push(message);\n          }\n          break;\n        }\n        case 'next': {\n          if (rendition) {\n            rendition.next();\n          } else {\n            q.push(message);\n          }\n          break;\n        }\n        case 'prev': {\n          if (rendition) {\n            rendition.prev();\n          } else {\n            q.push(message);\n          }\n          break;\n        }\n      }\n    }\n\n    function openEpub(url, epubOptions, renderOptions) {\n      var settings = Object.assign(\n        {\n          manager: 'continuous',\n          overflow: 'visible',\n          method: 'blobUrl',\n          fullsize: true,\n          snap: isChrome,\n        },\n        renderOptions,\n      );\n\n      window.book = book = ePub(url, epubOptions);\n\n      window.rendition = rendition = book.renderTo(document.body, settings);\n\n      rendition.hooks.content.register(\n        function (contents, rendition) {\n          var doc = contents.document;\n          var startPosition = { x: -1, y: -1 };\n          var currentPosition = { x: -1, y: -1 };\n          var isLongPress = false;\n          var longPressTimer;\n          var touchduration = 250;\n          var $body = doc.getElementsByTagName('body')[0];\n          var lastTap = undefined;\n          var preventTap = false;\n          var doubleTap = false;\n\n          function touchStartHandler(e) {\n            var f, target;\n            startPosition.x = e.targetTouches[0].pageX;\n            startPosition.y = e.targetTouches[0].pageY;\n            currentPosition.x = e.targetTouches[0].pageX;\n            currentPosition.y = e.targetTouches[0].pageY;\n            isLongPress = false;\n\n            if (isWebkit) {\n              for (var i = 0; i < e.targetTouches.length; i++) {\n                f = e.changedTouches[i].force;\n                if (f >= 0.8 && !preventTap) {\n                  target = e.changedTouches[i].target;\n\n                  if (target.getAttribute('ref') === 'epubjs-mk') {\n                    return;\n                  }\n\n                  clearTimeout(longPressTimer);\n\n                  cfi = contents.cfiFromNode(target).toString();\n\n                  sendMessage({ method: 'longpress', position: currentPosition, cfi: cfi });\n                  isLongPress = false;\n                  preventTap = true;\n                }\n              }\n            }\n\n            let now = Date.now();\n            if (lastTap && now - lastTap < touchduration && !doubleTap) {\n              let imgSrc = null;\n              if (e.changedTouches[0].target.hasAttribute('src')) {\n                imgSrc = e.changedTouches[0].target.getAttribute('src');\n              }\n              doubleTap = true;\n              preventTap = true;\n              cfi = contents.cfiFromNode(e.changedTouches[0].target).toString();\n\n              sendMessage({ method: 'dblpress', position: currentPosition, cfi: cfi, imgSrc: imgSrc });\n            } else {\n              lastTap = now;\n            }\n\n            longPressTimer = setTimeout(function () {\n              target = e.targetTouches[0].target;\n\n              if (target.getAttribute('ref') === 'epubjs-mk') {\n                return;\n              }\n\n              cfi = contents.cfiFromNode(target).toString();\n\n              sendMessage({ method: 'longpress', position: currentPosition, cfi: cfi });\n              preventTap = true;\n            }, touchduration);\n          }\n\n          function touchMoveHandler(e) {\n            currentPosition.x = e.targetTouches[0].pageX;\n            currentPosition.y = e.targetTouches[0].pageY;\n            clearTimeout(longPressTimer);\n          }\n\n          function touchEndHandler(e) {\n            var cfi;\n            clearTimeout(longPressTimer);\n\n            if (preventTap) {\n              preventTap = false;\n              return;\n            }\n\n            if (\n              Math.abs(startPosition.x - currentPosition.x) < 2 &&\n              Math.abs(startPosition.y - currentPosition.y) < 2\n            ) {\n              var target = e.changedTouches[0].target;\n\n              if (\n                target.getAttribute('ref') === 'epubjs-mk' ||\n                target.getAttribute('ref') === 'epubjs-hl' ||\n                target.getAttribute('ref') === 'epubjs-ul'\n              ) {\n                return;\n              }\n\n              cfi = contents.cfiFromNode(target).toString();\n\n              if (isLongPress) {\n                sendMessage({ method: 'longpress', position: currentPosition, cfi: cfi });\n                isLongPress = false;\n              } else {\n                setTimeout(function () {\n                  if (preventTap || doubleTap) {\n                    preventTap = false;\n                    isLongPress = false;\n                    doubleTap = false;\n                    return;\n                  }\n                  sendMessage({ method: 'press', position: currentPosition, cfi: cfi });\n                }, touchduration);\n              }\n            }\n          }\n\n          function touchForceHandler(e) {\n            var f = e.changedTouches[0].force;\n            if (f >= 0.8 && !preventTap) {\n              var target = e.changedTouches[0].target;\n\n              if (target.getAttribute('ref') === 'epubjs-mk') {\n                return;\n              }\n\n              clearTimeout(longPressTimer);\n\n              cfi = contents.cfiFromNode(target).toString();\n\n              sendMessage({ method: 'longpress', position: currentPosition, cfi: cfi });\n              isLongPress = false;\n              preventTap = true;\n              doubleTap = false;\n            }\n          }\n\n          doc.addEventListener('touchstart', touchStartHandler, false);\n\n          doc.addEventListener('touchmove', touchMoveHandler, false);\n\n          doc.addEventListener('touchend', touchEndHandler, false);\n\n          doc.addEventListener('touchforcechange', touchForceHandler, false);\n        }.bind(this),\n      );\n\n      rendition.on('relocated', function (location) {\n        sendMessage({ method: 'relocated', location: location });\n      });\n\n      rendition.on('selected', function (cfiRange) {\n        sendMessage({ method: 'selected', cfiRange: cfiRange });\n      });\n\n      rendition.on('markClicked', function (cfiRange, data) {\n        sendMessage({ method: 'markClicked', cfiRange: cfiRange, data: data });\n      });\n\n      rendition.on('rendered', function (section) {\n        sendMessage({ method: 'rendered', sectionIndex: section.index });\n      });\n\n      rendition.on('added', function (section) {\n        sendMessage({ method: 'added', sectionIndex: section.index });\n      });\n\n      rendition.on('removed', function (section) {\n        sendMessage({ method: 'removed', sectionIndex: section.index });\n      });\n\n      rendition.on('resized', function (size) {\n        sendMessage({ method: 'resized', size: size });\n      });\n\n      // replay messages\n      rendition.started.then(function () {\n        var msg;\n        for (var i = 0; i < q.length; i++) {\n          msg = q.shift();\n          handleMessage(msg);\n        }\n      });\n\n      book.ready.then(function () {\n        _isReady = true;\n\n        sendMessage({ method: 'ready' });\n      });\n\n      window.addEventListener('unload', function () {\n        book && book.destroy();\n      });\n    }\n\n    window.addEventListener('message', onMessage);\n    // React native uses document for postMessages\n    document.addEventListener('message', onMessage);\n\n    sendMessage({ method: 'loaded', value: true });\n  }\n\n  if (document.readyState === 'complete') {\n    _ready();\n  } else {\n    window.addEventListener('load', _ready, false);\n  }\n})();\n\n// Object.assign polyfill -- https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\nif (typeof Object.assign !== 'function') {\n  // Must be writable: true, enumerable: false, configurable: true\n  Object.defineProperty(Object, 'assign', {\n    value: function assign(target, varArgs) {\n      // .length of function is 2\n      'use strict';\n      if (target === null || target === undefined) {\n        throw new TypeError('Cannot convert undefined or null to object');\n      }\n\n      var to = Object(target);\n\n      for (var index = 1; index < arguments.length; index++) {\n        var nextSource = arguments[index];\n\n        if (nextSource !== null && nextSource !== undefined) {\n          for (var nextKey in nextSource) {\n            // Avoid bugs when hasOwnProperty is shadowed\n            if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\n              to[nextKey] = nextSource[nextKey];\n            }\n          }\n        }\n      }\n      return to;\n    },\n    writable: true,\n    configurable: true,\n  });\n}\n" + "</script>\n";
exports.renditionEmbeddedScripts = renditionEmbeddedScripts;